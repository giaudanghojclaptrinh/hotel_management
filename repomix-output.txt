This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.editorconfig
.env.example
.gitattributes
.gitignore
app/Http/Controllers/Admin/AdminController.php
app/Http/Controllers/Admin/ChiTietDatPhongController.php
app/Http/Controllers/Admin/DatPhongController.php
app/Http/Controllers/Admin/HoaDonController.php
app/Http/Controllers/Admin/KhachHangController.php
app/Http/Controllers/Admin/KhuyenMaiController.php
app/Http/Controllers/Admin/LoaiPhongController.php
app/Http/Controllers/Admin/PhongController.php
app/Http/Controllers/Admin/QuanTriVienController.php
app/Http/Controllers/Admin/TienNghiController.php
app/Http/Controllers/Admin/UserController.php
app/Http/Controllers/Auth/ConfirmPasswordController.php
app/Http/Controllers/Auth/ForgotPasswordController.php
app/Http/Controllers/Auth/LoginController.php
app/Http/Controllers/Auth/RegisterController.php
app/Http/Controllers/Auth/ResetPasswordController.php
app/Http/Controllers/Auth/VerificationController.php
app/Http/Controllers/Client/BookingController.php
app/Http/Controllers/Client/NotificationController.php
app/Http/Controllers/Client/PageController.php
app/Http/Controllers/Controller.php
app/Http/Controllers/HomeController.php
app/Http/Controllers/ProfileController.php
app/Http/Middleware/AdminMiddleware.php
app/Http/Middleware/CheckUserProfile.php
app/Models/ChiTietDatPhong.php
app/Models/DatPhong.php
app/Models/HoaDon.php
app/Models/KhuyenMai.php
app/Models/LoaiPhong.php
app/Models/Phong.php
app/Models/TienNghi.php
app/Models/User.php
app/Notifications/BookingStatusUpdated.php
app/Notifications/CustomResetPasswordNotification.php
app/Providers/AppServiceProvider.php
artisan
bootstrap/app.php
bootstrap/cache/.gitignore
bootstrap/create_test_user.php
bootstrap/google_redirect_dump.php
bootstrap/mail_dump.php
bootstrap/mail_env_dump.php
bootstrap/mail_test.php
bootstrap/password_reset_test.php
bootstrap/providers.php
code.txt
composer.json
config/app.php
config/auth.php
config/cache.php
config/database.php
config/filesystems.php
config/logging.php
config/mail.php
config/queue.php
config/services.php
config/session.php
config/vnpay.php
database/.gitignore
database/factories/UserFactory.php
database/migrations/0001_01_01_000000_create_users_table.php
database/migrations/0001_01_01_000001_create_cache_table.php
database/migrations/0001_01_01_000002_create_jobs_table.php
database/migrations/2025_12_05_181619_create_loai_phongs_table.php
database/migrations/2025_12_05_181620_create_phongs_table.php
database/migrations/2025_12_05_181621_create_dat_phongs_table.php
database/migrations/2025_12_05_181622_create_chi_tiet_dat_phongs_table.php
database/migrations/2025_12_05_181623_create_khuyen_mais_table.php
database/migrations/2025_12_05_181624_create_hoa_dons_table.php
database/migrations/2025_12_10_041323_add_price_cols_to_chi_tiet_dat_phongs.php
database/migrations/2025_12_10_130034_create_tien_nghis_table.php
database/migrations/2025_12_11_052751_add_payment_method_to_dat_phongs_table.php
database/migrations/2025_12_12_063827_create_notifications_table.php
database/seeders/DatabaseSeeder.php
docs/asset_cleanup.md
hotel_management/.git/COMMIT_EDITMSG
hotel_management/.git/config
hotel_management/.git/description
hotel_management/.git/FETCH_HEAD
hotel_management/.git/HEAD
hotel_management/.git/hooks/applypatch-msg.sample
hotel_management/.git/hooks/commit-msg.sample
hotel_management/.git/hooks/fsmonitor-watchman.sample
hotel_management/.git/hooks/post-update.sample
hotel_management/.git/hooks/pre-applypatch.sample
hotel_management/.git/hooks/pre-commit.sample
hotel_management/.git/hooks/pre-merge-commit.sample
hotel_management/.git/hooks/pre-push.sample
hotel_management/.git/hooks/pre-rebase.sample
hotel_management/.git/hooks/pre-receive.sample
hotel_management/.git/hooks/prepare-commit-msg.sample
hotel_management/.git/hooks/push-to-checkout.sample
hotel_management/.git/hooks/sendemail-validate.sample
hotel_management/.git/hooks/update.sample
hotel_management/.git/index
hotel_management/.git/info/exclude
hotel_management/.git/logs/HEAD
hotel_management/.git/logs/refs/heads/main
hotel_management/.git/logs/refs/remotes/origin/HEAD
hotel_management/.git/logs/refs/remotes/origin/main
hotel_management/.git/logs/refs/remotes/origin/update1
hotel_management/.git/objects/56/7b8887b1983ddeae0f1a1636721d7ed702667c
hotel_management/.git/objects/77/47f137ae2536bd880b2a269e1bce2ba3e03e7a
hotel_management/.git/objects/79/a95d0edf179bba6798b7d1f8a0283fed75f152
hotel_management/.git/objects/bc/721ea315561f99236b2a1cc3eece567ccddde1
hotel_management/.git/objects/df/e0770424b2a19faf507a501ebfc23be8f54e7b
hotel_management/.git/objects/ee/af35d997ff51215ff79235c1b10e86fb090167
hotel_management/.git/objects/f1/444e24237a7996c1b6b30705048260559ce605
hotel_management/.git/refs/heads/main
hotel_management/.git/refs/remotes/origin/HEAD
hotel_management/.git/refs/remotes/origin/main
hotel_management/.git/refs/remotes/origin/update1
hotel_management/.gitattributes
hotel_management/README.md
lang/en/auth.php
lang/en/pagination.php
lang/en/passwords.php
lang/en/validation.php
package.json
phpunit.xml
public/.htaccess
public/favicon.ico
public/index.php
public/robots.txt
public/uploads/home/home.png
public/uploads/home/nen.png
public/uploads/home/phongdefault.png
public/uploads/phongs/1765392691_standard.png
public/uploads/phongs/1765392704_Deluxe.png
public/uploads/phongs/1765392715_suiteGiaDinh.png
public/uploads/phongs/1765392724_LuxuryBienCa.png
public/uploads/QR/QR.jpg
README.md
resources/css/admin/admin.css
resources/css/app.css
resources/css/client/about.css
resources/css/client/booking-pdf.css
resources/css/client/booking.css
resources/css/client/contact.css
resources/css/client/history.css
resources/css/client/home.css
resources/css/client/invoice.css
resources/css/client/notifications.css
resources/css/client/profile.css
resources/css/client/promo.css
resources/css/client/rooms.css
resources/css/login.css
resources/css/password.css
resources/css/register.css
resources/js/admin/admin.js
resources/js/app.js
resources/js/bootstrap.js
resources/js/client/about.js
resources/js/client/booking.js
resources/js/client/contact.js
resources/js/client/home.js
resources/js/client/invoice.js
resources/js/client/notifications.js
resources/js/client/profile.js
resources/js/client/promo.js
resources/js/client/rooms.js
resources/js/login.js
resources/js/password.js
resources/js/register.js
resources/js/tailwind-config.js
resources/sass/_variables.scss
resources/sass/app.scss
resources/views/admin/dat_phong/danh_sach.blade.php
resources/views/admin/dat_phong/history.blade.php
resources/views/admin/dat_phong/hoa_don_chi_tiet.blade.php
resources/views/admin/dat_phong/room_detail.blade.php
resources/views/admin/dat_phong/sua.blade.php
resources/views/admin/dat_phong/them.blade.php
resources/views/admin/dat_phong/trash.blade.php
resources/views/admin/khuyen_mai/danh_sach.blade.php
resources/views/admin/khuyen_mai/sua.blade.php
resources/views/admin/khuyen_mai/them.blade.php
resources/views/admin/layouts/dashboard.blade.php
resources/views/admin/layouts/sidebar.blade.php
resources/views/admin/loai_phong/danh_sach.blade.php
resources/views/admin/loai_phong/sua.blade.php
resources/views/admin/loai_phong/them.blade.php
resources/views/admin/phong/danh_sach.blade.php
resources/views/admin/phong/sua.blade.php
resources/views/admin/phong/them.blade.php
resources/views/admin/reports/revenue.blade.php
resources/views/admin/tien_nghi/danh_sach.blade.php
resources/views/admin/tien_nghi/sua.blade.php
resources/views/admin/tien_nghi/them.blade.php
resources/views/admin/users/danh_sach.blade.php
resources/views/admin/users/sua.blade.php
resources/views/admin/users/them.blade.php
resources/views/auth/login.blade.php
resources/views/auth/passwords/confirm.blade.php
resources/views/auth/passwords/email.blade.php
resources/views/auth/passwords/reset.blade.php
resources/views/auth/register.blade.php
resources/views/auth/verify.blade.php
resources/views/client/about/index.blade.php
resources/views/client/booking/create.blade.php
resources/views/client/booking/history.blade.php
resources/views/client/booking/invoice.blade.php
resources/views/client/booking/success.blade.php
resources/views/client/contact/index.blade.php
resources/views/client/notifications/index.blade.php
resources/views/client/profile/edit.blade.php
resources/views/client/promotions/index.blade.php
resources/views/client/rooms/detail.blade.php
resources/views/client/rooms/index.blade.php
resources/views/home.blade.php
resources/views/layouts/app.blade.php
resources/views/layouts/footer.blade.php
resources/views/layouts/header.blade.php
resources/views/layouts/nav.blade.php
resources/views/layouts/print.blade.php
resources/views/partials/pagination.blade.php
resources/views/vendor/notifications/email.blade.php
routes/console.php
routes/web.php
storage/app/.gitignore
storage/app/private/.gitignore
storage/app/public/.gitignore
storage/framework/.gitignore
storage/framework/cache/.gitignore
storage/framework/cache/data/.gitignore
storage/framework/sessions/.gitignore
storage/framework/testing/.gitignore
storage/framework/views/.gitignore
storage/logs/.gitignore
tests/Feature/ExampleTest.php
tests/TestCase.php
tests/Unit/ExampleTest.php
thư viện sử dụng.txt
vite.config.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="hotel_management/.git/COMMIT_EDITMSG">
Initial commit
</file>

<file path="hotel_management/.git/config">
[core]
	repositoryformatversion = 0
	filemode = false
	bare = false
	logallrefupdates = true
	symlinks = false
	ignorecase = true
[lfs]
	repositoryformatversion = 0
[remote "origin"]
	url = https://github.com/giaudanghojclaptrinh/hotel_management.git
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch "main"]
	remote = origin
	merge = refs/heads/main
	vscode-merge-base = origin/main
</file>

<file path="hotel_management/.git/description">
Đồ án môn học
</file>

<file path="hotel_management/.git/FETCH_HEAD">
eeaf35d997ff51215ff79235c1b10e86fb090167		branch 'main' of https://github.com/giaudanghojclaptrinh/hotel_management
bc721ea315561f99236b2a1cc3eece567ccddde1	not-for-merge	branch 'update1' of https://github.com/giaudanghojclaptrinh/hotel_management
</file>

<file path="hotel_management/.git/HEAD">
ref: refs/heads/main
</file>

<file path="hotel_management/.git/hooks/applypatch-msg.sample">
#!/bin/sh
#
# An example hook script to check the commit log message taken by
# applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.  The hook is
# allowed to edit the commit message file.
#
# To enable this hook, rename this file to "applypatch-msg".

. git-sh-setup
commitmsg="$(git rev-parse --git-path hooks/commit-msg)"
test -x "$commitmsg" && exec "$commitmsg" ${1+"$@"}
:
</file>

<file path="hotel_management/.git/hooks/commit-msg.sample">
#!/bin/sh
#
# An example hook script to check the commit log message.
# Called by "git commit" with one argument, the name of the file
# that has the commit message.  The hook should exit with non-zero
# status after issuing an appropriate message if it wants to stop the
# commit.  The hook is allowed to edit the commit message file.
#
# To enable this hook, rename this file to "commit-msg".

# Uncomment the below to add a Signed-off-by line to the message.
# Doing this in a hook is a bad idea in general, but the prepare-commit-msg
# hook is more suited to it.
#
# SOB=$(git var GIT_AUTHOR_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# grep -qs "^$SOB" "$1" || echo "$SOB" >> "$1"

# This example catches duplicate Signed-off-by lines.

test "" = "$(grep '^Signed-off-by: ' "$1" |
	 sort | uniq -c | sed -e '/^[ 	]*1[ 	]/d')" || {
	echo >&2 Duplicate Signed-off-by lines.
	exit 1
}
</file>

<file path="hotel_management/.git/hooks/fsmonitor-watchman.sample">
#!/usr/bin/perl

use strict;
use warnings;
use IPC::Open2;

# An example hook script to integrate Watchman
# (https://facebook.github.io/watchman/) with git to speed up detecting
# new and modified files.
#
# The hook is passed a version (currently 2) and last update token
# formatted as a string and outputs to stdout a new update token and
# all files that have been modified since the update token. Paths must
# be relative to the root of the working tree and separated by a single NUL.
#
# To enable this hook, rename this file to "query-watchman" and set
# 'git config core.fsmonitor .git/hooks/query-watchman'
#
my ($version, $last_update_token) = @ARGV;

# Uncomment for debugging
# print STDERR "$0 $version $last_update_token\n";

# Check the hook interface version
if ($version ne 2) {
	die "Unsupported query-fsmonitor hook version '$version'.\n" .
	    "Falling back to scanning...\n";
}

my $git_work_tree = get_working_dir();

my $retry = 1;

my $json_pkg;
eval {
	require JSON::XS;
	$json_pkg = "JSON::XS";
	1;
} or do {
	require JSON::PP;
	$json_pkg = "JSON::PP";
};

launch_watchman();

sub launch_watchman {
	my $o = watchman_query();
	if (is_work_tree_watched($o)) {
		output_result($o->{clock}, @{$o->{files}});
	}
}

sub output_result {
	my ($clockid, @files) = @_;

	# Uncomment for debugging watchman output
	# open (my $fh, ">", ".git/watchman-output.out");
	# binmode $fh, ":utf8";
	# print $fh "$clockid\n@files\n";
	# close $fh;

	binmode STDOUT, ":utf8";
	print $clockid;
	print "\0";
	local $, = "\0";
	print @files;
}

sub watchman_clock {
	my $response = qx/watchman clock "$git_work_tree"/;
	die "Failed to get clock id on '$git_work_tree'.\n" .
		"Falling back to scanning...\n" if $? != 0;

	return $json_pkg->new->utf8->decode($response);
}

sub watchman_query {
	my $pid = open2(\*CHLD_OUT, \*CHLD_IN, 'watchman -j --no-pretty')
	or die "open2() failed: $!\n" .
	"Falling back to scanning...\n";

	# In the query expression below we're asking for names of files that
	# changed since $last_update_token but not from the .git folder.
	#
	# To accomplish this, we're using the "since" generator to use the
	# recency index to select candidate nodes and "fields" to limit the
	# output to file names only. Then we're using the "expression" term to
	# further constrain the results.
	my $last_update_line = "";
	if (substr($last_update_token, 0, 1) eq "c") {
		$last_update_token = "\"$last_update_token\"";
		$last_update_line = qq[\n"since": $last_update_token,];
	}
	my $query = <<"	END";
		["query", "$git_work_tree", {$last_update_line
			"fields": ["name"],
			"expression": ["not", ["dirname", ".git"]]
		}]
	END

	# Uncomment for debugging the watchman query
	# open (my $fh, ">", ".git/watchman-query.json");
	# print $fh $query;
	# close $fh;

	print CHLD_IN $query;
	close CHLD_IN;
	my $response = do {local $/; <CHLD_OUT>};

	# Uncomment for debugging the watch response
	# open ($fh, ">", ".git/watchman-response.json");
	# print $fh $response;
	# close $fh;

	die "Watchman: command returned no output.\n" .
	"Falling back to scanning...\n" if $response eq "";
	die "Watchman: command returned invalid output: $response\n" .
	"Falling back to scanning...\n" unless $response =~ /^\{/;

	return $json_pkg->new->utf8->decode($response);
}

sub is_work_tree_watched {
	my ($output) = @_;
	my $error = $output->{error};
	if ($retry > 0 and $error and $error =~ m/unable to resolve root .* directory (.*) is not watched/) {
		$retry--;
		my $response = qx/watchman watch "$git_work_tree"/;
		die "Failed to make watchman watch '$git_work_tree'.\n" .
		    "Falling back to scanning...\n" if $? != 0;
		$output = $json_pkg->new->utf8->decode($response);
		$error = $output->{error};
		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		# Uncomment for debugging watchman output
		# open (my $fh, ">", ".git/watchman-output.out");
		# close $fh;

		# Watchman will always return all files on the first query so
		# return the fast "everything is dirty" flag to git and do the
		# Watchman query just to get it over with now so we won't pay
		# the cost in git to look up each individual file.
		my $o = watchman_clock();
		$error = $output->{error};

		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		output_result($o->{clock}, ("/"));
		$last_update_token = $o->{clock};

		eval { launch_watchman() };
		return 0;
	}

	die "Watchman: $error.\n" .
	"Falling back to scanning...\n" if $error;

	return 1;
}

sub get_working_dir {
	my $working_dir;
	if ($^O =~ 'msys' || $^O =~ 'cygwin') {
		$working_dir = Win32::GetCwd();
		$working_dir =~ tr/\\/\//;
	} else {
		require Cwd;
		$working_dir = Cwd::cwd();
	}

	return $working_dir;
}
</file>

<file path="hotel_management/.git/hooks/post-update.sample">
#!/bin/sh
#
# An example hook script to prepare a packed repository for use over
# dumb transports.
#
# To enable this hook, rename this file to "post-update".

exec git update-server-info
</file>

<file path="hotel_management/.git/hooks/pre-applypatch.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed
# by applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-applypatch".

. git-sh-setup
precommit="$(git rev-parse --git-path hooks/pre-commit)"
test -x "$precommit" && exec "$precommit" ${1+"$@"}
:
</file>

<file path="hotel_management/.git/hooks/pre-commit.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git commit" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message if
# it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-commit".

if git rev-parse --verify HEAD >/dev/null 2>&1
then
	against=HEAD
else
	# Initial commit: diff against an empty tree object
	against=$(git hash-object -t tree /dev/null)
fi

# If you want to allow non-ASCII filenames set this variable to true.
allownonascii=$(git config --type=bool hooks.allownonascii)

# Redirect output to stderr.
exec 1>&2

# Cross platform projects tend to avoid non-ASCII filenames; prevent
# them from being added to the repository. We exploit the fact that the
# printable range starts at the space character and ends with tilde.
if [ "$allownonascii" != "true" ] &&
	# Note that the use of brackets around a tr range is ok here, (it's
	# even required, for portability to Solaris 10's /usr/bin/tr), since
	# the square bracket bytes happen to fall in the designated range.
	test $(git diff-index --cached --name-only --diff-filter=A -z $against |
	  LC_ALL=C tr -d '[ -~]\0' | wc -c) != 0
then
	cat <<\EOF
Error: Attempt to add a non-ASCII file name.

This can cause problems if you want to work with people on other platforms.

To be portable it is advisable to rename the file.

If you know what you are doing you can disable this check using:

  git config hooks.allownonascii true
EOF
	exit 1
fi

# If there are whitespace errors, print the offending file names and fail.
exec git diff-index --check --cached $against --
</file>

<file path="hotel_management/.git/hooks/pre-merge-commit.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git merge" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message to
# stderr if it wants to stop the merge commit.
#
# To enable this hook, rename this file to "pre-merge-commit".

. git-sh-setup
test -x "$GIT_DIR/hooks/pre-commit" &&
        exec "$GIT_DIR/hooks/pre-commit"
:
</file>

<file path="hotel_management/.git/hooks/pre-push.sample">
#!/bin/sh

# An example hook script to verify what is about to be pushed.  Called by "git
# push" after it has checked the remote status, but before anything has been
# pushed.  If this script exits with a non-zero status nothing will be pushed.
#
# This hook is called with the following parameters:
#
# $1 -- Name of the remote to which the push is being done
# $2 -- URL to which the push is being done
#
# If pushing without using a named remote those arguments will be equal.
#
# Information about the commits which are being pushed is supplied as lines to
# the standard input in the form:
#
#   <local ref> <local oid> <remote ref> <remote oid>
#
# This sample shows how to prevent push of commits where the log message starts
# with "WIP" (work in progress).

remote="$1"
url="$2"

zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')

while read local_ref local_oid remote_ref remote_oid
do
	if test "$local_oid" = "$zero"
	then
		# Handle delete
		:
	else
		if test "$remote_oid" = "$zero"
		then
			# New branch, examine all commits
			range="$local_oid"
		else
			# Update to existing branch, examine new commits
			range="$remote_oid..$local_oid"
		fi

		# Check for WIP commit
		commit=$(git rev-list -n 1 --grep '^WIP' "$range")
		if test -n "$commit"
		then
			echo >&2 "Found WIP commit in $local_ref, not pushing"
			exit 1
		fi
	fi
done

exit 0
</file>

<file path="hotel_management/.git/hooks/pre-rebase.sample">
#!/bin/sh
#
# Copyright (c) 2006, 2008 Junio C Hamano
#
# The "pre-rebase" hook is run just before "git rebase" starts doing
# its job, and can prevent the command from running by exiting with
# non-zero status.
#
# The hook is called with the following parameters:
#
# $1 -- the upstream the series was forked from.
# $2 -- the branch being rebased (or empty when rebasing the current branch).
#
# This sample shows how to prevent topic branches that are already
# merged to 'next' branch from getting rebased, because allowing it
# would result in rebasing already published history.

publish=next
basebranch="$1"
if test "$#" = 2
then
	topic="refs/heads/$2"
else
	topic=`git symbolic-ref HEAD` ||
	exit 0 ;# we do not interrupt rebasing detached HEAD
fi

case "$topic" in
refs/heads/??/*)
	;;
*)
	exit 0 ;# we do not interrupt others.
	;;
esac

# Now we are dealing with a topic branch being rebased
# on top of master.  Is it OK to rebase it?

# Does the topic really exist?
git show-ref -q "$topic" || {
	echo >&2 "No such branch $topic"
	exit 1
}

# Is topic fully merged to master?
not_in_master=`git rev-list --pretty=oneline ^master "$topic"`
if test -z "$not_in_master"
then
	echo >&2 "$topic is fully merged to master; better remove it."
	exit 1 ;# we could allow it, but there is no point.
fi

# Is topic ever merged to next?  If so you should not be rebasing it.
only_next_1=`git rev-list ^master "^$topic" ${publish} | sort`
only_next_2=`git rev-list ^master           ${publish} | sort`
if test "$only_next_1" = "$only_next_2"
then
	not_in_topic=`git rev-list "^$topic" master`
	if test -z "$not_in_topic"
	then
		echo >&2 "$topic is already up to date with master"
		exit 1 ;# we could allow it, but there is no point.
	else
		exit 0
	fi
else
	not_in_next=`git rev-list --pretty=oneline ^${publish} "$topic"`
	/usr/bin/perl -e '
		my $topic = $ARGV[0];
		my $msg = "* $topic has commits already merged to public branch:\n";
		my (%not_in_next) = map {
			/^([0-9a-f]+) /;
			($1 => 1);
		} split(/\n/, $ARGV[1]);
		for my $elem (map {
				/^([0-9a-f]+) (.*)$/;
				[$1 => $2];
			} split(/\n/, $ARGV[2])) {
			if (!exists $not_in_next{$elem->[0]}) {
				if ($msg) {
					print STDERR $msg;
					undef $msg;
				}
				print STDERR " $elem->[1]\n";
			}
		}
	' "$topic" "$not_in_next" "$not_in_master"
	exit 1
fi

<<\DOC_END

This sample hook safeguards topic branches that have been
published from being rewound.

The workflow assumed here is:

 * Once a topic branch forks from "master", "master" is never
   merged into it again (either directly or indirectly).

 * Once a topic branch is fully cooked and merged into "master",
   it is deleted.  If you need to build on top of it to correct
   earlier mistakes, a new topic branch is created by forking at
   the tip of the "master".  This is not strictly necessary, but
   it makes it easier to keep your history simple.

 * Whenever you need to test or publish your changes to topic
   branches, merge them into "next" branch.

The script, being an example, hardcodes the publish branch name
to be "next", but it is trivial to make it configurable via
$GIT_DIR/config mechanism.

With this workflow, you would want to know:

(1) ... if a topic branch has ever been merged to "next".  Young
    topic branches can have stupid mistakes you would rather
    clean up before publishing, and things that have not been
    merged into other branches can be easily rebased without
    affecting other people.  But once it is published, you would
    not want to rewind it.

(2) ... if a topic branch has been fully merged to "master".
    Then you can delete it.  More importantly, you should not
    build on top of it -- other people may already want to
    change things related to the topic as patches against your
    "master", so if you need further changes, it is better to
    fork the topic (perhaps with the same name) afresh from the
    tip of "master".

Let's look at this example:

		   o---o---o---o---o---o---o---o---o---o "next"
		  /       /           /           /
		 /   a---a---b A     /           /
		/   /               /           /
	       /   /   c---c---c---c B         /
	      /   /   /             \         /
	     /   /   /   b---b C     \       /
	    /   /   /   /             \     /
    ---o---o---o---o---o---o---o---o---o---o---o "master"


A, B and C are topic branches.

 * A has one fix since it was merged up to "next".

 * B has finished.  It has been fully merged up to "master" and "next",
   and is ready to be deleted.

 * C has not merged to "next" at all.

We would want to allow C to be rebased, refuse A, and encourage
B to be deleted.

To compute (1):

	git rev-list ^master ^topic next
	git rev-list ^master        next

	if these match, topic has not merged in next at all.

To compute (2):

	git rev-list master..topic

	if this is empty, it is fully merged to "master".

DOC_END
</file>

<file path="hotel_management/.git/hooks/pre-receive.sample">
#!/bin/sh
#
# An example hook script to make use of push options.
# The example simply echoes all push options that start with 'echoback='
# and rejects all pushes when the "reject" push option is used.
#
# To enable this hook, rename this file to "pre-receive".

if test -n "$GIT_PUSH_OPTION_COUNT"
then
	i=0
	while test "$i" -lt "$GIT_PUSH_OPTION_COUNT"
	do
		eval "value=\$GIT_PUSH_OPTION_$i"
		case "$value" in
		echoback=*)
			echo "echo from the pre-receive-hook: ${value#*=}" >&2
			;;
		reject)
			exit 1
		esac
		i=$((i + 1))
	done
fi
</file>

<file path="hotel_management/.git/hooks/prepare-commit-msg.sample">
#!/bin/sh
#
# An example hook script to prepare the commit log message.
# Called by "git commit" with the name of the file that has the
# commit message, followed by the description of the commit
# message's source.  The hook's purpose is to edit the commit
# message file.  If the hook fails with a non-zero status,
# the commit is aborted.
#
# To enable this hook, rename this file to "prepare-commit-msg".

# This hook includes three examples. The first one removes the
# "# Please enter the commit message..." help message.
#
# The second includes the output of "git diff --name-status -r"
# into the message, just before the "git status" output.  It is
# commented because it doesn't cope with --amend or with squashed
# commits.
#
# The third example adds a Signed-off-by line to the message, that can
# still be edited.  This is rarely a good idea.

COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2
SHA1=$3

/usr/bin/perl -i.bak -ne 'print unless(m/^. Please enter the commit message/..m/^#$/)' "$COMMIT_MSG_FILE"

# case "$COMMIT_SOURCE,$SHA1" in
#  ,|template,)
#    /usr/bin/perl -i.bak -pe '
#       print "\n" . `git diff --cached --name-status -r`
# 	 if /^#/ && $first++ == 0' "$COMMIT_MSG_FILE" ;;
#  *) ;;
# esac

# SOB=$(git var GIT_COMMITTER_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# git interpret-trailers --in-place --trailer "$SOB" "$COMMIT_MSG_FILE"
# if test -z "$COMMIT_SOURCE"
# then
#   /usr/bin/perl -i.bak -pe 'print "\n" if !$first_line++' "$COMMIT_MSG_FILE"
# fi
</file>

<file path="hotel_management/.git/hooks/push-to-checkout.sample">
#!/bin/sh

# An example hook script to update a checked-out tree on a git push.
#
# This hook is invoked by git-receive-pack(1) when it reacts to git
# push and updates reference(s) in its repository, and when the push
# tries to update the branch that is currently checked out and the
# receive.denyCurrentBranch configuration variable is set to
# updateInstead.
#
# By default, such a push is refused if the working tree and the index
# of the remote repository has any difference from the currently
# checked out commit; when both the working tree and the index match
# the current commit, they are updated to match the newly pushed tip
# of the branch. This hook is to be used to override the default
# behaviour; however the code below reimplements the default behaviour
# as a starting point for convenient modification.
#
# The hook receives the commit with which the tip of the current
# branch is going to be updated:
commit=$1

# It can exit with a non-zero status to refuse the push (when it does
# so, it must not modify the index or the working tree).
die () {
	echo >&2 "$*"
	exit 1
}

# Or it can make any necessary changes to the working tree and to the
# index to bring them to the desired state when the tip of the current
# branch is updated to the new commit, and exit with a zero status.
#
# For example, the hook can simply run git read-tree -u -m HEAD "$1"
# in order to emulate git fetch that is run in the reverse direction
# with git push, as the two-tree form of git read-tree -u -m is
# essentially the same as git switch or git checkout that switches
# branches while keeping the local changes in the working tree that do
# not interfere with the difference between the branches.

# The below is a more-or-less exact translation to shell of the C code
# for the default behaviour for git's push-to-checkout hook defined in
# the push_to_deploy() function in builtin/receive-pack.c.
#
# Note that the hook will be executed from the repository directory,
# not from the working tree, so if you want to perform operations on
# the working tree, you will have to adapt your code accordingly, e.g.
# by adding "cd .." or using relative paths.

if ! git update-index -q --ignore-submodules --refresh
then
	die "Up-to-date check failed"
fi

if ! git diff-files --quiet --ignore-submodules --
then
	die "Working directory has unstaged changes"
fi

# This is a rough translation of:
#
#   head_has_history() ? "HEAD" : EMPTY_TREE_SHA1_HEX
if git cat-file -e HEAD 2>/dev/null
then
	head=HEAD
else
	head=$(git hash-object -t tree --stdin </dev/null)
fi

if ! git diff-index --quiet --cached --ignore-submodules $head --
then
	die "Working directory has staged changes"
fi

if ! git read-tree -u -m "$commit"
then
	die "Could not update working tree to new HEAD"
fi
</file>

<file path="hotel_management/.git/hooks/sendemail-validate.sample">
#!/bin/sh

# An example hook script to validate a patch (and/or patch series) before
# sending it via email.
#
# The hook should exit with non-zero status after issuing an appropriate
# message if it wants to prevent the email(s) from being sent.
#
# To enable this hook, rename this file to "sendemail-validate".
#
# By default, it will only check that the patch(es) can be applied on top of
# the default upstream branch without conflicts in a secondary worktree. After
# validation (successful or not) of the last patch of a series, the worktree
# will be deleted.
#
# The following config variables can be set to change the default remote and
# remote ref that are used to apply the patches against:
#
#   sendemail.validateRemote (default: origin)
#   sendemail.validateRemoteRef (default: HEAD)
#
# Replace the TODO placeholders with appropriate checks according to your
# needs.

validate_cover_letter () {
	file="$1"
	# TODO: Replace with appropriate checks (e.g. spell checking).
	true
}

validate_patch () {
	file="$1"
	# Ensure that the patch applies without conflicts.
	git am -3 "$file" || return
	# TODO: Replace with appropriate checks for this patch
	# (e.g. checkpatch.pl).
	true
}

validate_series () {
	# TODO: Replace with appropriate checks for the whole series
	# (e.g. quick build, coding style checks, etc.).
	true
}

# main -------------------------------------------------------------------------

if test "$GIT_SENDEMAIL_FILE_COUNTER" = 1
then
	remote=$(git config --default origin --get sendemail.validateRemote) &&
	ref=$(git config --default HEAD --get sendemail.validateRemoteRef) &&
	worktree=$(mktemp --tmpdir -d sendemail-validate.XXXXXXX) &&
	git worktree add -fd --checkout "$worktree" "refs/remotes/$remote/$ref" &&
	git config --replace-all sendemail.validateWorktree "$worktree"
else
	worktree=$(git config --get sendemail.validateWorktree)
fi || {
	echo "sendemail-validate: error: failed to prepare worktree" >&2
	exit 1
}

unset GIT_DIR GIT_WORK_TREE
cd "$worktree" &&

if grep -q "^diff --git " "$1"
then
	validate_patch "$1"
else
	validate_cover_letter "$1"
fi &&

if test "$GIT_SENDEMAIL_FILE_COUNTER" = "$GIT_SENDEMAIL_FILE_TOTAL"
then
	git config --unset-all sendemail.validateWorktree &&
	trap 'git worktree remove -ff "$worktree"' EXIT &&
	validate_series
fi
</file>

<file path="hotel_management/.git/hooks/update.sample">
#!/bin/sh
#
# An example hook script to block unannotated tags from entering.
# Called by "git receive-pack" with arguments: refname sha1-old sha1-new
#
# To enable this hook, rename this file to "update".
#
# Config
# ------
# hooks.allowunannotated
#   This boolean sets whether unannotated tags will be allowed into the
#   repository.  By default they won't be.
# hooks.allowdeletetag
#   This boolean sets whether deleting tags will be allowed in the
#   repository.  By default they won't be.
# hooks.allowmodifytag
#   This boolean sets whether a tag may be modified after creation. By default
#   it won't be.
# hooks.allowdeletebranch
#   This boolean sets whether deleting branches will be allowed in the
#   repository.  By default they won't be.
# hooks.denycreatebranch
#   This boolean sets whether remotely creating branches will be denied
#   in the repository.  By default this is allowed.
#

# --- Command line
refname="$1"
oldrev="$2"
newrev="$3"

# --- Safety check
if [ -z "$GIT_DIR" ]; then
	echo "Don't run this script from the command line." >&2
	echo " (if you want, you could supply GIT_DIR then run" >&2
	echo "  $0 <ref> <oldrev> <newrev>)" >&2
	exit 1
fi

if [ -z "$refname" -o -z "$oldrev" -o -z "$newrev" ]; then
	echo "usage: $0 <ref> <oldrev> <newrev>" >&2
	exit 1
fi

# --- Config
allowunannotated=$(git config --type=bool hooks.allowunannotated)
allowdeletebranch=$(git config --type=bool hooks.allowdeletebranch)
denycreatebranch=$(git config --type=bool hooks.denycreatebranch)
allowdeletetag=$(git config --type=bool hooks.allowdeletetag)
allowmodifytag=$(git config --type=bool hooks.allowmodifytag)

# check for no description
projectdesc=$(sed -e '1q' "$GIT_DIR/description")
case "$projectdesc" in
"Unnamed repository"* | "")
	echo "*** Project description file hasn't been set" >&2
	exit 1
	;;
esac

# --- Check types
# if $newrev is 0000...0000, it's a commit to delete a ref.
zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')
if [ "$newrev" = "$zero" ]; then
	newrev_type=delete
else
	newrev_type=$(git cat-file -t $newrev)
fi

case "$refname","$newrev_type" in
	refs/tags/*,commit)
		# un-annotated tag
		short_refname=${refname##refs/tags/}
		if [ "$allowunannotated" != "true" ]; then
			echo "*** The un-annotated tag, $short_refname, is not allowed in this repository" >&2
			echo "*** Use 'git tag [ -a | -s ]' for tags you want to propagate." >&2
			exit 1
		fi
		;;
	refs/tags/*,delete)
		# delete tag
		if [ "$allowdeletetag" != "true" ]; then
			echo "*** Deleting a tag is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/tags/*,tag)
		# annotated tag
		if [ "$allowmodifytag" != "true" ] && git rev-parse $refname > /dev/null 2>&1
		then
			echo "*** Tag '$refname' already exists." >&2
			echo "*** Modifying a tag is not allowed in this repository." >&2
			exit 1
		fi
		;;
	refs/heads/*,commit)
		# branch
		if [ "$oldrev" = "$zero" -a "$denycreatebranch" = "true" ]; then
			echo "*** Creating a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/heads/*,delete)
		# delete branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/remotes/*,commit)
		# tracking branch
		;;
	refs/remotes/*,delete)
		# delete tracking branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a tracking branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	*)
		# Anything else (is there anything else?)
		echo "*** Update hook: unknown type of update to ref $refname of type $newrev_type" >&2
		exit 1
		;;
esac

# --- Finished
exit 0
</file>

<file path="hotel_management/.git/info/exclude">
# git ls-files --others --exclude-from=.git/info/exclude
# Lines that start with '#' are comments.
# For a project mostly in C, the following would be a good set of
# exclude patterns (uncomment them if you want to use them):
# *.[oa]
# *~
</file>

<file path="hotel_management/.git/logs/HEAD">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 giaudanghoclaptrinh <niemvui2233@gmail.com> 1764962903 +0700	commit (initial): Initial commit
</file>

<file path="hotel_management/.git/logs/refs/heads/main">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 giaudanghoclaptrinh <niemvui2233@gmail.com> 1764962903 +0700	commit (initial): Initial commit
</file>

<file path="hotel_management/.git/logs/refs/remotes/origin/HEAD">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1764962915 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1764964738 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1765020584 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1765020606 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1765020716 +0700	remote set-head
</file>

<file path="hotel_management/.git/logs/refs/remotes/origin/main">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 giaudanghoclaptrinh <niemvui2233@gmail.com> 1764962913 +0700	update by push
</file>

<file path="hotel_management/.git/logs/refs/remotes/origin/update1">
0000000000000000000000000000000000000000 bc721ea315561f99236b2a1cc3eece567ccddde1 giaudanghoclaptrinh <niemvui2233@gmail.com> 1765020714 +0700	fetch --progress --prune --recurse-submodules=on-demand origin: storing head
</file>

<file path="hotel_management/.git/refs/heads/main">
eeaf35d997ff51215ff79235c1b10e86fb090167
</file>

<file path="hotel_management/.git/refs/remotes/origin/HEAD">
ref: refs/remotes/origin/main
</file>

<file path="hotel_management/.git/refs/remotes/origin/main">
eeaf35d997ff51215ff79235c1b10e86fb090167
</file>

<file path="hotel_management/.git/refs/remotes/origin/update1">
bc721ea315561f99236b2a1cc3eece567ccddde1
</file>

<file path="hotel_management/.gitattributes">
# Auto detect text files and perform LF normalization
* text=auto
</file>

<file path="hotel_management/README.md">
# hotel_management
Đồ án môn học
</file>

<file path="thư viện sử dụng.txt">
npm install alpinejs @alpinejs/collapse axios
</file>

<file path=".editorconfig">
root = true

[*]
charset = utf-8
end_of_line = lf
indent_size = 4
indent_style = space
insert_final_newline = true
trim_trailing_whitespace = true

[*.md]
trim_trailing_whitespace = false

[*.{yml,yaml}]
indent_size = 2

[compose.yaml]
indent_size = 4
</file>

<file path=".env.example">
APP_NAME=Laravel
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

# PHP_CLI_SERVER_WORKERS=4

BCRYPT_ROUNDS=12

LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

DB_CONNECTION=sqlite
# DB_HOST=127.0.0.1
# DB_PORT=3306
# DB_DATABASE=laravel
# DB_USERNAME=root
# DB_PASSWORD=

SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
QUEUE_CONNECTION=database

CACHE_STORE=database
# CACHE_PREFIX=

MEMCACHED_HOST=127.0.0.1

REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

MAIL_MAILER=log
MAIL_SCHEME=null
MAIL_HOST=127.0.0.1
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

VITE_APP_NAME="${APP_NAME}"
</file>

<file path=".gitattributes">
* text=auto eol=lf

*.blade.php diff=html
*.css diff=css
*.html diff=html
*.md diff=markdown
*.php diff=php

/.github export-ignore
CHANGELOG.md export-ignore
.styleci.yml export-ignore
</file>

<file path=".gitignore">
*.log
.DS_Store
.env
.env.backup
.env.production
.phpactor.json
.phpunit.result.cache
/.fleet
/.idea
/.nova
/.phpunit.cache
/.vscode
/.zed
/auth.json
/node_modules
/public/build
/public/hot
/public/storage
/storage/*.key
/storage/pail
/vendor
Homestead.json
Homestead.yaml
Thumbs.db
</file>

<file path="app/Http/Controllers/Admin/AdminController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class AdminController extends Controller
{
    public function __construct()
    {
        // Protect admin area by auth + AdminMiddleware
        $this->middleware(['auth', \App\Http\Middleware\AdminMiddleware::class]);
    }

    public function index()
    {
        return view('admin.layouts.dashboard');
    }
}
</file>

<file path="app/Http/Controllers/Admin/ChiTietDatPhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\ChiTietDatPhong;
use Illuminate\Http\Request;

class ChiTietDatPhongController extends Controller
{
    public function getDanhSach()
    {
        $chiTietDatPhongs = ChiTietDatPhong::all();
        return view('admin.chi_tiet_dat_phong.danh_sach', compact('chiTietDatPhongs'));
    }

    public function getThem()
    {
        return view('admin.chi_tiet_dat_phong.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'phong_id' => 'required|exists:phongs,id',
            'so_luong' => 'required|integer|min:1',
            'gia' => 'required|numeric',
        ]);

        $orm = new ChiTietDatPhong();
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        $orm->phong_id = $data['phong_id'];
        $orm->so_luong = $data['so_luong'];
        $orm->gia = $data['gia'];
        $orm->save();
        return redirect()->route('chi-tiet-dat-phong');
    }

    public function getSua($id)
    {
        $chiTietDatPhongs = ChiTietDatPhong::findOrFail($id);
        return view('admin.chi_tiet_dat_phong.sua', compact('chiTietDatPhongs'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'phong_id' => 'required|exists:phongs,id',
            'so_luong' => 'required|integer|min:1',
            'gia' => 'required|numeric',
        ]);

        $orm = ChiTietDatPhong::findOrFail($id);
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        $orm->phong_id = $data['phong_id'];
        $orm->so_luong = $data['so_luong'];
        $orm->gia = $data['gia'];
        $orm->save();
        return redirect()->route('chi-tiet-dat-phong');
    }

    public function getXoa($id)
    {
        $orm = ChiTietDatPhong::findOrFail($id);
        $orm->delete();
        return redirect()->route('chi-tiet-dat-phong');
    }
    /**
     * Display the specified resource.
     */
    public function show(ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/KhachHangController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Models\User;
use Illuminate\Validation\Rule;

class KhachHangController extends Controller
{
    public function getDanhSach()
    {
        $khachHangs = User::where('role', 'customer')->get();
        return view('admin.khach_hang.danh_sach', compact('khachHangs'));
    }

    public function getThem()
    {
        return view('admin.khach_hang.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => 'required|email|unique:users,email',
            'phone' => 'nullable|string|max:15|unique:users,phone',
            'cccd' => 'nullable|string|max:20|unique:users,cccd',
            'password' => 'required|string|min:6',
        ]);

        $orm = new User();
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? null;
        $orm->cccd = $data['cccd'] ?? null;
        $orm->role = 'customer';
        $orm->password = $data['password'];
        $orm->save();
        return redirect()->route('khach-hang');
    }

    public function getSua($id)
    {
        $khachHang = User::findOrFail($id);
        return view('admin.khach_hang.sua', compact('khachHang'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => ['required','email', Rule::unique('users','email')->ignore($id)],
            'phone' => ['nullable','string','max:15', Rule::unique('users','phone')->ignore($id)],
            'cccd' => ['nullable','string','max:20', Rule::unique('users','cccd')->ignore($id)],
            'password' => 'nullable|string|min:6',
        ]);

        $orm = User::findOrFail($id);
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? $orm->phone;
        $orm->cccd = $data['cccd'] ?? $orm->cccd;
        if (!empty($data['password'])) {
            $orm->password = $data['password'];
        }
        $orm->save();
        return redirect()->route('khach-hang');
    }

    public function getXoa($id)
    {
        $orm = User::findOrFail($id);
        $orm->delete();
        return redirect()->route('khach-hang');
    }
}
</file>

<file path="app/Http/Controllers/Admin/QuanTriVienController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Models\User;
use Illuminate\Validation\Rule;

class QuanTriVienController extends Controller
{
    public function getDanhSach()
    {
        $admins = User::where('role', 'admin')->get();
        return view('admin.quan_tri_vien.danh_sach', compact('admins'));
    }

    public function getThem()
    {
        return view('admin.quan_tri_vien.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => 'required|email|unique:users,email',
            'phone' => 'nullable|string|max:15|unique:users,phone',
            'cccd' => 'nullable|string|max:20|unique:users,cccd',
            'password' => 'required|string|min:6',
        ]);

        $orm = new User();
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? null;
        $orm->cccd = $data['cccd'] ?? null;
        $orm->role = 'admin';
        $orm->password = $data['password'];
        $orm->save();
        return redirect()->route('quan-tri-vien');
    }

    public function getSua($id)
    {
        $admin = User::findOrFail($id);
        return view('admin.quan_tri_vien.sua', compact('admin'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => ['required','email', Rule::unique('users','email')->ignore($id)],
            'phone' => ['nullable','string','max:15', Rule::unique('users','phone')->ignore($id)],
            'cccd' => ['nullable','string','max:20', Rule::unique('users','cccd')->ignore($id)],
            'password' => 'nullable|string|min:6',
        ]);

        $orm = User::findOrFail($id);
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? $orm->phone;
        $orm->cccd = $data['cccd'] ?? $orm->cccd;
        if (!empty($data['password'])) {
            $orm->password = $data['password'];
        }
        $orm->save();
        return redirect()->route('quan-tri-vien');
    }

    public function getXoa($id)
    {
        $orm = User::findOrFail($id);
        $orm->delete();
        return redirect()->route('quan-tri-vien');
    }
}
</file>

<file path="app/Http/Controllers/Auth/ConfirmPasswordController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\ConfirmsPasswords;

class ConfirmPasswordController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Confirm Password Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling password confirmations and
    | uses a simple trait to include the behavior. You're free to explore
    | this trait and override any functions that require customization.
    |
    */

    use ConfirmsPasswords;

    /**
     * Where to redirect users when the intended url fails.
     *
     * @var string
     */
    protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('auth');
    }
}
</file>

<file path="app/Http/Controllers/Auth/ForgotPasswordController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\SendsPasswordResetEmails;

class ForgotPasswordController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Password Reset Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling password reset emails and
    | includes a trait which assists in sending these notifications from
    | your application to your users. Feel free to explore this trait.
    |
    */

    use SendsPasswordResetEmails;
}
</file>

<file path="app/Http/Controllers/Auth/ResetPasswordController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\ResetsPasswords;

class ResetPasswordController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Password Reset Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling password reset requests
    | and uses a simple trait to include this behavior. You're free to
    | explore this trait and override any methods you wish to tweak.
    |
    */

    use ResetsPasswords;

    /**
     * Where to redirect users after resetting their password.
     *
     * @var string
     */
    protected $redirectTo = '/home';
}
</file>

<file path="app/Http/Controllers/Auth/VerificationController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\VerifiesEmails;

class VerificationController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Email Verification Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling email verification for any
    | user that recently registered with the application. Emails may also
    | be re-sent if the user didn't receive the original email message.
    |
    */

    use VerifiesEmails;

    /**
     * Where to redirect users after verification.
     *
     * @var string
     */
    protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('auth');
        $this->middleware('signed')->only('verify');
        $this->middleware('throttle:6,1')->only('verify', 'resend');
    }
}
</file>

<file path="app/Http/Controllers/Client/NotificationController.php">
<?php

namespace App\Http\Controllers\Client;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\DB;

class NotificationController extends Controller
{
    /**
     * Hiển thị danh sách thông báo của User (chưa đọc & đã đọc).
     */
    public function index()
    {
        if (!Auth::check()) {
            return redirect()->route('login');
        }

        $user = Auth::user();
        
        // Lấy tất cả thông báo, sắp xếp theo thời gian mới nhất
        $notifications = $user->notifications()->orderBy('created_at', 'desc')->paginate(10);
        
        // Đánh dấu các thông báo CHƯA ĐỌC thành ĐÃ ĐỌC (để lần sau vào trang này không bị đếm lại)
        $user->unreadNotifications->markAsRead();

        return view('client.notifications.index', compact('notifications'));
    }

    /**
     * API: Đánh dấu một thông báo cụ thể là đã đọc (thường dùng cho dropdown).
     */
    public function markAsRead($id)
    {
        if (!Auth::check()) {
            return response()->json(['success' => false, 'message' => 'Unauthenticated.'], 401);
        }

        try {
            $notification = Auth::user()->notifications()->findOrFail($id);
            
            if ($notification->unread()) {
                $notification->markAsRead();
            }

            return response()->json(['success' => true]);
        } catch (\Exception $e) {
            return response()->json(['success' => false, 'message' => 'Notification not found or unowned.'], 404);
        }
    }

    /**
     * API: Lấy số lượng thông báo chưa đọc (dùng cho icon bell trên header).
     */
    public function unreadCount()
    {
        if (!Auth::check()) {
            return response()->json(['count' => 0]);
        }
        $count = Auth::user()->unreadNotifications->count();
        return response()->json(['count' => $count]);
    }

    /**
     * API: Xóa một thông báo cụ thể. (Không dùng cho View hiện tại nhưng vẫn giữ để Route không lỗi)
     */
    public function delete($id)
    {
        if (!Auth::check()) {
            return response()->json(['success' => false, 'message' => 'Unauthenticated.'], 401);
        }

        try {
            $deleted = Auth::user()->notifications()->where('id', $id)->delete();
            
            if ($deleted) {
                return response()->json(['success' => true, 'message' => 'Thông báo đã được xóa thành công.']);
            }
            
            return response()->json(['success' => false, 'message' => 'Không tìm thấy thông báo.'], 404);
        } catch (\Exception $e) {
            return response()->json(['success' => false, 'message' => 'Lỗi server khi xóa thông báo.'], 500);
        }
    }
    
    /**
     * API: Xóa nhiều thông báo cụ thể. (Bulk Delete)
     */
    public function bulkDelete(Request $request)
    {
        if (!Auth::check()) {
            return response()->json(['success' => false, 'message' => 'Unauthenticated.'], 401);
        }

        // Validate rằng ids là một mảng và các phần tử là chuỗi (UUIDs)
        $request->validate(['ids' => 'required|array', 'ids.*' => 'string']);

        try {
            $ids = $request->input('ids');
            $deletedCount = Auth::user()
                                ->notifications()
                                ->whereIn('id', $ids)
                                ->delete();
            
            return response()->json([
                'success' => true, 
                'message' => "Đã xóa thành công {$deletedCount} thông báo.",
                'deleted_count' => $deletedCount
            ]);
        } catch (\Exception $e) {
            return response()->json(['success' => false, 'message' => 'Lỗi server khi xóa hàng loạt.'], 500);
        }
    }
}
</file>

<file path="app/Http/Controllers/Controller.php">
<?php

namespace App\Http\Controllers;

use Illuminate\Foundation\Auth\Access\AuthorizesRequests;
use Illuminate\Foundation\Validation\ValidatesRequests;
use Illuminate\Routing\Controller as BaseController;

class Controller extends BaseController
{
    use AuthorizesRequests, ValidatesRequests;
}
</file>

<file path="app/Http/Controllers/ProfileController.php">
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Validation\Rule;

class ProfileController extends Controller
{
    /**
     * Hiển thị form cập nhật hồ sơ
     */
    public function edit()
    {
        $user = Auth::user();
        return view('client.profile.edit', compact('user'));
    }

    /**
     * Lưu thông tin hồ sơ
     */
    public function update(Request $request)
    {
        $user = Auth::user();

        // Validate dữ liệu
        $request->validate([
            'name' => 'required|string|max:255',
            'email' => ['required', 'email', Rule::unique('users')->ignore($user->id)],
            'phone' => ['required', 'string', 'max:15', Rule::unique('users')->ignore($user->id)],
            'cccd' => ['required', 'string', 'max:20', Rule::unique('users')->ignore($user->id)],
        ], [
            'phone.required' => 'Số điện thoại là bắt buộc để đặt phòng.',
            'cccd.required' => 'CCCD/CMND là bắt buộc để làm thủ tục lưu trú.',
        ]);

        // Cập nhật
        $user->update([
            'name' => $request->name,
            'email' => $request->email,
            'phone' => $request->phone,
            'cccd' => $request->cccd,
        ]);

        // QUAN TRỌNG: Nếu trước đó User bị chặn khi đặt phòng (do thiếu thông tin),
        // hệ thống sẽ lấy lại URL cũ và chuyển hướng họ quay lại trang đặt phòng.
        if (session()->has('url.intended')) {
            return redirect(session()->pull('url.intended'));
        }

        return redirect()->route('profile.edit')->with('success', 'Cập nhật hồ sơ thành công!');
    }
}
</file>

<file path="app/Http/Middleware/AdminMiddleware.php">
<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;

class AdminMiddleware
{
    /**
     * Handle an incoming request.
     */
    public function handle(Request $request, Closure $next)
    {
        $user = auth()->user();
        if (!$user || ($user->role ?? 'user') !== 'admin') {
            if ($request->expectsJson()) {
                return response()->json(['message' => 'Forbidden.'], 403);
            }
            return redirect()->route('home');
        }
        return $next($request);
    }
}
</file>

<file path="app/Http/Middleware/CheckUserProfile.php">
<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class CheckUserProfile
{
    /**
     * Handle an incoming request.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  \Closure  $next
     * @return mixed
     */
    public function handle(Request $request, Closure $next)
    {
        // 1. Kiểm tra đăng nhập (để chắc chắn)
        if (!Auth::check()) {
            return redirect()->route('login');
        }

        $user = Auth::user();

        // 2. Kiểm tra xem user có thiếu số điện thoại hoặc CCCD không
        if (empty($user->phone) || empty($user->cccd)) {
            
            // Lưu lại URL hiện tại để sau khi cập nhật xong thì redirect lại trang đặt phòng
            session()->put('url.intended', $request->url());

            // Chuyển hướng sang trang cập nhật hồ sơ với thông báo lỗi
            return redirect()->route('profile.edit')
                ->with('error', 'Vui lòng cập nhật đầy đủ Số điện thoại và CCCD để tiếp tục đặt phòng!');
        }

        // 3. Nếu đủ thông tin thì cho đi tiếp
        return $next($request);
    }
}
</file>

<file path="app/Models/TienNghi.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class TienNghi extends Model
{
    use HasFactory;

    /**
     * Tên bảng trong Database (Tùy chọn nếu tên bảng chuẩn là 'tien_nghis')
     */
    protected $table = 'tien_nghis';

    /**
     * Các cột được phép thêm/sửa (Mass Assignment)
     */
    protected $fillable = [
        'ten_tien_nghi',  // Tên hiển thị (Ví dụ: Wifi tốc độ cao)
        'ma_tien_nghi',   // Mã dùng trong code (Ví dụ: wifi)
        'icon'            // Class icon (Ví dụ: fa-solid fa-wifi)
    ];

    /**
     * Định nghĩa mối quan hệ Nhiều - Nhiều với bảng LoaiPhong
     * * Logic: Một Tiện nghi (Wifi) có thể thuộc về nhiều Loại phòng khác nhau (Deluxe, Standard...).
     */
    public function loaiPhongs() 
    {
        // Cú pháp: belongsToMany(ModelĐích, BảngTrungGian, KhóaNgoạiCủaModelNày, KhóaNgoạiCủaModelKia)
        return $this->belongsToMany(
            LoaiPhong::class,           // 1. Model liên kết
            'loai_phong_tien_nghi',     // 2. Tên bảng trung gian (Pivot Table)
            'tien_nghi_id',             // 3. Khóa ngoại trỏ về bảng TienNghi
            'loai_phong_id'             // 4. Khóa ngoại trỏ về bảng LoaiPhong
        );
    }
}
</file>

<file path="app/Notifications/BookingStatusUpdated.php">
<?php

namespace App\Notifications;

use Illuminate\Bus\Queueable;
use Illuminate\Notifications\Notification;
use Illuminate\Contracts\Queue\ShouldQueue;
use Illuminate\Notifications\Messages\MailMessage;
use App\Models\DatPhong;

class BookingStatusUpdated extends Notification
{
    use Queueable;

    protected $booking;
    protected $status;
    protected $message;

    /**
     * Tạo một thể hiện thông báo mới.
     * @param DatPhong $booking Đơn đặt phòng
     * @param string $status Trạng thái mới ('Đã xác nhận', 'Đã hủy', ...)
     * @param string $message Chi tiết thông báo
     */
    public function __construct(DatPhong $booking, $status, $message)
    {
        $this->booking = $booking;
        $this->status = $status;
        $this->message = $message;
    }

    /**
     * Lấy các kênh phân phối thông báo.
     * Ta chỉ sử dụng kênh database.
     */
    public function via($notifiable)
    {
        return ['database'];
    }

    /**
     * Lấy biểu diễn mảng của thông báo (dữ liệu lưu vào cột 'data').
     */
    public function toArray($notifiable)
    {
        return [
            'booking_id' => $this->booking->id,
            'status' => $this->status,
            'message' => $this->message,
            'room_type' => $this->booking->chiTietDatPhongs->first()->loaiPhong->ten_loai_phong ?? 'N/A',
            'icon' => $this->getIcon(),
        ];
    }

    /**
     * Helper để lấy icon dựa trên trạng thái
     */
    protected function getIcon()
    {
        switch ($this->status) {
            case 'Đã xác nhận':
                return 'fa-check-circle text-green-500';
            case 'Đã hủy':
                return 'fa-times-circle text-red-500';
            case 'Thanh toán thành công':
                return 'fa-credit-card text-blue-500';
            default:
                return 'fa-bell text-yellow-500';
        }
    }
}
</file>

<file path="app/Notifications/CustomResetPasswordNotification.php">
<?php

namespace App\Notifications;

use Illuminate\Auth\Notifications\ResetPassword;
use Illuminate\Notifications\Messages\MailMessage;

class CustomResetPasswordNotification extends ResetPassword
{
    /**
     * Build the mail representation of the notification.
     *
     * @param  mixed  $notifiable
     * @return \Illuminate\Notifications\Messages\MailMessage
     */
    public function toMail($notifiable)
    {
        $url = url(route('password.reset', ['token' => $this->token], false));
        $url .= '?email=' . urlencode($notifiable->getEmailForPasswordReset());

        return (new MailMessage)
            ->subject('Khôi phục mật khẩu')
            ->line('Bạn vừa yêu cầu ' . config('app.name') . ' khôi phục mật khẩu của mình.')
            ->line('Liên kết đặt lại mật khẩu này sẽ hết hạn sau 60 phút.')
            ->line('Xin vui lòng nhấn vào nút "Khôi phục mật khẩu" bên dưới để tiến hành cấp mật khẩu mới.')
            ->action('Khôi phục mật khẩu', $url)
            ->line('Nếu bạn không yêu cầu đặt lại mật khẩu, xin vui lòng không làm gì thêm và báo lại cho quản trị hệ thống về vấn đề này.');
    }
}
</file>

<file path="app/Providers/AppServiceProvider.php">
<?php

namespace App\Providers;

use Illuminate\Support\ServiceProvider;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Register any application services.
     */
    public function register(): void
    {
        //
    }

    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        //
    }
}
</file>

<file path="artisan">
#!/usr/bin/env php
<?php

use Illuminate\Foundation\Application;
use Symfony\Component\Console\Input\ArgvInput;

define('LARAVEL_START', microtime(true));

// Register the Composer autoloader...
require __DIR__.'/vendor/autoload.php';

// Bootstrap Laravel and handle the command...
/** @var Application $app */
$app = require_once __DIR__.'/bootstrap/app.php';

$status = $app->handleCommand(new ArgvInput);

exit($status);
</file>

<file path="bootstrap/cache/.gitignore">
*
!.gitignore
</file>

<file path="bootstrap/create_test_user.php">
<?php
require __DIR__ . '/../vendor/autoload.php';
$app = require __DIR__ . '/app.php';
$kernel = $app->make(Illuminate\Contracts\Console\Kernel::class);
$kernel->bootstrap();

use App\Models\User;
use Carbon\Carbon;

$email = 'niemvui2233@gmail.com';

try {
    $user = User::where('email', $email)->first();
    if ($user) {
        echo "User already exists: ID {$user->id}\n";
        exit(0);
    }

    $user = User::create([
        'name' => 'Test User',
        'email' => $email,
        'password' => bcrypt('TempPass123'),
        'email_verified_at' => Carbon::now(),
    ]);

    echo "Created user ID {$user->id} with email {$email}\n";
} catch (Throwable $e) {
    echo "Exception: " . get_class($e) . PHP_EOL;
    echo "Message: " . $e->getMessage() . PHP_EOL;
    echo "Trace:\n" . $e->getTraceAsString() . PHP_EOL;
    exit(1);
}
</file>

<file path="bootstrap/google_redirect_dump.php">
<?php
require __DIR__ . '/../vendor/autoload.php';
$app = require __DIR__ . '/app.php';
$kernel = $app->make(Illuminate\Contracts\Console\Kernel::class);
$kernel->bootstrap();

echo "Resolved services.google.redirect: " . config('services.google.redirect') . PHP_EOL;
</file>

<file path="bootstrap/mail_dump.php">
<?php
require __DIR__ . '/../vendor/autoload.php';
$app = require __DIR__ . '/app.php';
$kernel = $app->make(Illuminate\Contracts\Console\Kernel::class);
$kernel->bootstrap();
print_r(config('mail.mailers.smtp'));
echo PHP_EOL;
echo 'ENV MAIL_USERNAME=' . getenv('MAIL_USERNAME') . PHP_EOL;
</file>

<file path="bootstrap/mail_env_dump.php">
<?php
require __DIR__ . '/../vendor/autoload.php';
$app = require __DIR__ . '/app.php';
$kernel = $app->make(Illuminate\Contracts\Console\Kernel::class);
$kernel->bootstrap();

echo "CONFIG mail.mailers.smtp:\n";
print_r(config('mail.mailers.smtp'));

echo "\nENV VARS:\n";
$keys = ['MAIL_MAILER','MAIL_HOST','MAIL_PORT','MAIL_ENCRYPTION','MAIL_SCHEME','MAIL_USERNAME','MAIL_PASSWORD','MAIL_FROM_ADDRESS','APP_URL'];
foreach ($keys as $k) {
    echo $k . ' => ' . (getenv($k) ?: 'NULL') . "\n";
}

echo "\nPHP openssl extension: " . (extension_loaded('openssl') ? 'loaded' : 'missing') . "\n";
</file>

<file path="bootstrap/mail_test.php">
<?php
require __DIR__ . '/../vendor/autoload.php';
$app = require __DIR__ . '/app.php';
$kernel = $app->make(Illuminate\Contracts\Console\Kernel::class);
$kernel->bootstrap();

try {
    $to = config('mail.from.address') ?: getenv('MAIL_FROM_ADDRESS');
    echo "Sending test mail to: {$to}\n";
    \Mail::raw('SMTP test message from app', function ($m) use ($to) {
        $m->to($to)->subject('SMTP test');
    });
    echo "Mail sent (no exception thrown).\n";
} catch (Throwable $e) {
    echo "Exception: " . get_class($e) . "\n";
    echo "Message: " . $e->getMessage() . "\n";
    echo "Trace: \n" . $e->getTraceAsString() . "\n";
}
</file>

<file path="bootstrap/password_reset_test.php">
<?php
require __DIR__ . '/../vendor/autoload.php';
$app = require __DIR__ . '/app.php';
$kernel = $app->make(Illuminate\Contracts\Console\Kernel::class);
$kernel->bootstrap();

use Illuminate\Support\Facades\Password;

try {
    $to = config('mail.from.address') ?: getenv('MAIL_FROM_ADDRESS');
    if (! $to) {
        echo "No recipient email configured (MAIL_FROM_ADDRESS).", PHP_EOL;
        exit(1);
    }

    echo "Sending password reset link to: {$to}\n";

    $response = Password::broker()->sendResetLink(['email' => $to]);

    if ($response === Password::RESET_LINK_SENT) {
        echo "Password reset link sent (broker response: RESET_LINK_SENT).\n";
    } else {
        echo "Password broker response: " . (string) $response . "\n";
    }
} catch (Throwable $e) {
    echo "Exception: " . get_class($e) . PHP_EOL;
    echo "Message: " . $e->getMessage() . PHP_EOL;
    echo "Trace:\n" . $e->getTraceAsString() . PHP_EOL;
}
</file>

<file path="bootstrap/providers.php">
<?php

return [
    App\Providers\AppServiceProvider::class,
];
</file>

<file path="code.txt">
This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.editorconfig
.env.example
.gitattributes
.gitignore
app/Http/Controllers/Admin/AdminController.php
app/Http/Controllers/Admin/ChiTietDatPhongController.php
app/Http/Controllers/Admin/DatPhongController.php
app/Http/Controllers/Admin/HoaDonController.php
app/Http/Controllers/Admin/KhachHangController.php
app/Http/Controllers/Admin/KhuyenMaiController.php
app/Http/Controllers/Admin/LoaiPhongController.php
app/Http/Controllers/Admin/PhongController.php
app/Http/Controllers/Admin/QuanTriVienController.php
app/Http/Controllers/Admin/TienNghiController.php
app/Http/Controllers/Admin/UserController.php
app/Http/Controllers/Auth/ConfirmPasswordController.php
app/Http/Controllers/Auth/ForgotPasswordController.php
app/Http/Controllers/Auth/LoginController.php
app/Http/Controllers/Auth/RegisterController.php
app/Http/Controllers/Auth/ResetPasswordController.php
app/Http/Controllers/Auth/VerificationController.php
app/Http/Controllers/Client/BookingController.php
app/Http/Controllers/Client/PageController.php
app/Http/Controllers/Controller.php
app/Http/Controllers/HomeController.php
app/Http/Controllers/ProfileController.php
app/Http/Middleware/AdminMiddleware.php
app/Http/Middleware/CheckUserProfile.php
app/Models/ChiTietDatPhong.php
app/Models/DatPhong.php
app/Models/HoaDon.php
app/Models/KhuyenMai.php
app/Models/LoaiPhong.php
app/Models/Phong.php
app/Models/TienNghi.php
app/Models/User.php
app/Providers/AppServiceProvider.php
artisan
bootstrap/app.php
bootstrap/cache/.gitignore
bootstrap/providers.php
composer.json
config/app.php
config/auth.php
config/cache.php
config/database.php
config/filesystems.php
config/logging.php
config/mail.php
config/queue.php
config/services.php
config/session.php
database/.gitignore
database/factories/UserFactory.php
database/migrations/0001_01_01_000000_create_users_table.php
database/migrations/0001_01_01_000001_create_cache_table.php
database/migrations/0001_01_01_000002_create_jobs_table.php
database/migrations/2025_12_05_181619_create_loai_phongs_table.php
database/migrations/2025_12_05_181620_create_phongs_table.php
database/migrations/2025_12_05_181621_create_dat_phongs_table.php
database/migrations/2025_12_05_181622_create_chi_tiet_dat_phongs_table.php
database/migrations/2025_12_05_181623_create_khuyen_mais_table.php
database/migrations/2025_12_05_181624_create_hoa_dons_table.php
database/migrations/2025_12_10_041323_add_price_cols_to_chi_tiet_dat_phongs.php
database/migrations/2025_12_10_130034_create_tien_nghis_table.php
database/seeders/DatabaseSeeder.php
hotel_management/.git/COMMIT_EDITMSG
hotel_management/.git/config
hotel_management/.git/description
hotel_management/.git/FETCH_HEAD
hotel_management/.git/HEAD
hotel_management/.git/hooks/applypatch-msg.sample
hotel_management/.git/hooks/commit-msg.sample
hotel_management/.git/hooks/fsmonitor-watchman.sample
hotel_management/.git/hooks/post-update.sample
hotel_management/.git/hooks/pre-applypatch.sample
hotel_management/.git/hooks/pre-commit.sample
hotel_management/.git/hooks/pre-merge-commit.sample
hotel_management/.git/hooks/pre-push.sample
hotel_management/.git/hooks/pre-rebase.sample
hotel_management/.git/hooks/pre-receive.sample
hotel_management/.git/hooks/prepare-commit-msg.sample
hotel_management/.git/hooks/push-to-checkout.sample
hotel_management/.git/hooks/sendemail-validate.sample
hotel_management/.git/hooks/update.sample
hotel_management/.git/index
hotel_management/.git/info/exclude
hotel_management/.git/logs/HEAD
hotel_management/.git/logs/refs/heads/main
hotel_management/.git/logs/refs/remotes/origin/HEAD
hotel_management/.git/logs/refs/remotes/origin/main
hotel_management/.git/logs/refs/remotes/origin/update1
hotel_management/.git/objects/56/7b8887b1983ddeae0f1a1636721d7ed702667c
hotel_management/.git/objects/77/47f137ae2536bd880b2a269e1bce2ba3e03e7a
hotel_management/.git/objects/79/a95d0edf179bba6798b7d1f8a0283fed75f152
hotel_management/.git/objects/bc/721ea315561f99236b2a1cc3eece567ccddde1
hotel_management/.git/objects/df/e0770424b2a19faf507a501ebfc23be8f54e7b
hotel_management/.git/objects/ee/af35d997ff51215ff79235c1b10e86fb090167
hotel_management/.git/objects/f1/444e24237a7996c1b6b30705048260559ce605
hotel_management/.git/refs/heads/main
hotel_management/.git/refs/remotes/origin/HEAD
hotel_management/.git/refs/remotes/origin/main
hotel_management/.git/refs/remotes/origin/update1
hotel_management/.gitattributes
hotel_management/README.md
lang/en/auth.php
lang/en/pagination.php
lang/en/passwords.php
lang/en/validation.php
package.json
phpunit.xml
public/.htaccess
public/favicon.ico
public/index.php
public/robots.txt
public/uploads/home/home.png
public/uploads/home/phongdefault.png
public/uploads/phongs/1765392691_standard.png
public/uploads/phongs/1765392704_Deluxe.png
public/uploads/phongs/1765392715_suiteGiaDinh.png
public/uploads/phongs/1765392724_LuxuryBienCa.png
README.md
repomix-output.txt
resources/css/admin.css
resources/css/app.css
resources/css/client.css
resources/js/admin.js
resources/js/app.js
resources/js/bootstrap.js
resources/js/client.js
resources/js/tailwind-config.js
resources/sass/_variables.scss
resources/sass/app.scss
resources/views/admin/dat_phong/danh_sach.blade.php
resources/views/admin/dat_phong/hoa_don_chi_tiet.blade.php
resources/views/admin/dat_phong/sua.blade.php
resources/views/admin/khuyen_mai/danh_sach.blade.php
resources/views/admin/khuyen_mai/sua.blade.php
resources/views/admin/khuyen_mai/them.blade.php
resources/views/admin/layouts/dashboard.blade.php
resources/views/admin/layouts/sidebar.blade.php
resources/views/admin/loai_phong/danh_sach.blade.php
resources/views/admin/loai_phong/sua.blade.php
resources/views/admin/loai_phong/them.blade.php
resources/views/admin/phong/danh_sach.blade.php
resources/views/admin/phong/sua.blade.php
resources/views/admin/phong/them.blade.php
resources/views/admin/users/danh_sach.blade.php
resources/views/admin/users/sua.blade.php
resources/views/admin/users/them.blade.php
resources/views/auth/login.blade.php
resources/views/auth/passwords/confirm.blade.php
resources/views/auth/passwords/email.blade.php
resources/views/auth/passwords/reset.blade.php
resources/views/auth/register.blade.php
resources/views/auth/verify.blade.php
resources/views/client/booking/create.blade.php
resources/views/client/booking/success.blade.php
resources/views/client/profile/edit.blade.php
resources/views/client/rooms/detail.blade.php
resources/views/client/rooms/index.blade.php
resources/views/home.blade.php
resources/views/layouts/app.blade.php
resources/views/layouts/footer.blade.php
resources/views/layouts/header.blade.php
resources/views/layouts/nav.blade.php
routes/console.php
routes/web.php
storage/app/.gitignore
storage/app/private/.gitignore
storage/app/public/.gitignore
storage/framework/.gitignore
storage/framework/cache/.gitignore
storage/framework/cache/data/.gitignore
storage/framework/sessions/.gitignore
storage/framework/testing/.gitignore
storage/framework/views/.gitignore
storage/logs/.gitignore
tests/Feature/ExampleTest.php
tests/TestCase.php
tests/Unit/ExampleTest.php
vite.config.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="hotel_management/.git/COMMIT_EDITMSG">
Initial commit
</file>

<file path="hotel_management/.git/config">
[core]
	repositoryformatversion = 0
	filemode = false
	bare = false
	logallrefupdates = true
	symlinks = false
	ignorecase = true
[lfs]
	repositoryformatversion = 0
[remote "origin"]
	url = https://github.com/giaudanghojclaptrinh/hotel_management.git
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch "main"]
	remote = origin
	merge = refs/heads/main
	vscode-merge-base = origin/main
</file>

<file path="hotel_management/.git/description">
Đồ án môn học
</file>

<file path="hotel_management/.git/FETCH_HEAD">
eeaf35d997ff51215ff79235c1b10e86fb090167		branch 'main' of https://github.com/giaudanghojclaptrinh/hotel_management
bc721ea315561f99236b2a1cc3eece567ccddde1	not-for-merge	branch 'update1' of https://github.com/giaudanghojclaptrinh/hotel_management
</file>

<file path="hotel_management/.git/HEAD">
ref: refs/heads/main
</file>

<file path="hotel_management/.git/hooks/applypatch-msg.sample">
#!/bin/sh
#
# An example hook script to check the commit log message taken by
# applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.  The hook is
# allowed to edit the commit message file.
#
# To enable this hook, rename this file to "applypatch-msg".

. git-sh-setup
commitmsg="$(git rev-parse --git-path hooks/commit-msg)"
test -x "$commitmsg" && exec "$commitmsg" ${1+"$@"}
:
</file>

<file path="hotel_management/.git/hooks/commit-msg.sample">
#!/bin/sh
#
# An example hook script to check the commit log message.
# Called by "git commit" with one argument, the name of the file
# that has the commit message.  The hook should exit with non-zero
# status after issuing an appropriate message if it wants to stop the
# commit.  The hook is allowed to edit the commit message file.
#
# To enable this hook, rename this file to "commit-msg".

# Uncomment the below to add a Signed-off-by line to the message.
# Doing this in a hook is a bad idea in general, but the prepare-commit-msg
# hook is more suited to it.
#
# SOB=$(git var GIT_AUTHOR_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# grep -qs "^$SOB" "$1" || echo "$SOB" >> "$1"

# This example catches duplicate Signed-off-by lines.

test "" = "$(grep '^Signed-off-by: ' "$1" |
	 sort | uniq -c | sed -e '/^[ 	]*1[ 	]/d')" || {
	echo >&2 Duplicate Signed-off-by lines.
	exit 1
}
</file>

<file path="hotel_management/.git/hooks/fsmonitor-watchman.sample">
#!/usr/bin/perl

use strict;
use warnings;
use IPC::Open2;

# An example hook script to integrate Watchman
# (https://facebook.github.io/watchman/) with git to speed up detecting
# new and modified files.
#
# The hook is passed a version (currently 2) and last update token
# formatted as a string and outputs to stdout a new update token and
# all files that have been modified since the update token. Paths must
# be relative to the root of the working tree and separated by a single NUL.
#
# To enable this hook, rename this file to "query-watchman" and set
# 'git config core.fsmonitor .git/hooks/query-watchman'
#
my ($version, $last_update_token) = @ARGV;

# Uncomment for debugging
# print STDERR "$0 $version $last_update_token\n";

# Check the hook interface version
if ($version ne 2) {
	die "Unsupported query-fsmonitor hook version '$version'.\n" .
	    "Falling back to scanning...\n";
}

my $git_work_tree = get_working_dir();

my $retry = 1;

my $json_pkg;
eval {
	require JSON::XS;
	$json_pkg = "JSON::XS";
	1;
} or do {
	require JSON::PP;
	$json_pkg = "JSON::PP";
};

launch_watchman();

sub launch_watchman {
	my $o = watchman_query();
	if (is_work_tree_watched($o)) {
		output_result($o->{clock}, @{$o->{files}});
	}
}

sub output_result {
	my ($clockid, @files) = @_;

	# Uncomment for debugging watchman output
	# open (my $fh, ">", ".git/watchman-output.out");
	# binmode $fh, ":utf8";
	# print $fh "$clockid\n@files\n";
	# close $fh;

	binmode STDOUT, ":utf8";
	print $clockid;
	print "\0";
	local $, = "\0";
	print @files;
}

sub watchman_clock {
	my $response = qx/watchman clock "$git_work_tree"/;
	die "Failed to get clock id on '$git_work_tree'.\n" .
		"Falling back to scanning...\n" if $? != 0;

	return $json_pkg->new->utf8->decode($response);
}

sub watchman_query {
	my $pid = open2(\*CHLD_OUT, \*CHLD_IN, 'watchman -j --no-pretty')
	or die "open2() failed: $!\n" .
	"Falling back to scanning...\n";

	# In the query expression below we're asking for names of files that
	# changed since $last_update_token but not from the .git folder.
	#
	# To accomplish this, we're using the "since" generator to use the
	# recency index to select candidate nodes and "fields" to limit the
	# output to file names only. Then we're using the "expression" term to
	# further constrain the results.
	my $last_update_line = "";
	if (substr($last_update_token, 0, 1) eq "c") {
		$last_update_token = "\"$last_update_token\"";
		$last_update_line = qq[\n"since": $last_update_token,];
	}
	my $query = <<"	END";
		["query", "$git_work_tree", {$last_update_line
			"fields": ["name"],
			"expression": ["not", ["dirname", ".git"]]
		}]
	END

	# Uncomment for debugging the watchman query
	# open (my $fh, ">", ".git/watchman-query.json");
	# print $fh $query;
	# close $fh;

	print CHLD_IN $query;
	close CHLD_IN;
	my $response = do {local $/; <CHLD_OUT>};

	# Uncomment for debugging the watch response
	# open ($fh, ">", ".git/watchman-response.json");
	# print $fh $response;
	# close $fh;

	die "Watchman: command returned no output.\n" .
	"Falling back to scanning...\n" if $response eq "";
	die "Watchman: command returned invalid output: $response\n" .
	"Falling back to scanning...\n" unless $response =~ /^\{/;

	return $json_pkg->new->utf8->decode($response);
}

sub is_work_tree_watched {
	my ($output) = @_;
	my $error = $output->{error};
	if ($retry > 0 and $error and $error =~ m/unable to resolve root .* directory (.*) is not watched/) {
		$retry--;
		my $response = qx/watchman watch "$git_work_tree"/;
		die "Failed to make watchman watch '$git_work_tree'.\n" .
		    "Falling back to scanning...\n" if $? != 0;
		$output = $json_pkg->new->utf8->decode($response);
		$error = $output->{error};
		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		# Uncomment for debugging watchman output
		# open (my $fh, ">", ".git/watchman-output.out");
		# close $fh;

		# Watchman will always return all files on the first query so
		# return the fast "everything is dirty" flag to git and do the
		# Watchman query just to get it over with now so we won't pay
		# the cost in git to look up each individual file.
		my $o = watchman_clock();
		$error = $output->{error};

		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		output_result($o->{clock}, ("/"));
		$last_update_token = $o->{clock};

		eval { launch_watchman() };
		return 0;
	}

	die "Watchman: $error.\n" .
	"Falling back to scanning...\n" if $error;

	return 1;
}

sub get_working_dir {
	my $working_dir;
	if ($^O =~ 'msys' || $^O =~ 'cygwin') {
		$working_dir = Win32::GetCwd();
		$working_dir =~ tr/\\/\//;
	} else {
		require Cwd;
		$working_dir = Cwd::cwd();
	}

	return $working_dir;
}
</file>

<file path="hotel_management/.git/hooks/post-update.sample">
#!/bin/sh
#
# An example hook script to prepare a packed repository for use over
# dumb transports.
#
# To enable this hook, rename this file to "post-update".

exec git update-server-info
</file>

<file path="hotel_management/.git/hooks/pre-applypatch.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed
# by applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-applypatch".

. git-sh-setup
precommit="$(git rev-parse --git-path hooks/pre-commit)"
test -x "$precommit" && exec "$precommit" ${1+"$@"}
:
</file>

<file path="hotel_management/.git/hooks/pre-commit.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git commit" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message if
# it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-commit".

if git rev-parse --verify HEAD >/dev/null 2>&1
then
	against=HEAD
else
	# Initial commit: diff against an empty tree object
	against=$(git hash-object -t tree /dev/null)
fi

# If you want to allow non-ASCII filenames set this variable to true.
allownonascii=$(git config --type=bool hooks.allownonascii)

# Redirect output to stderr.
exec 1>&2

# Cross platform projects tend to avoid non-ASCII filenames; prevent
# them from being added to the repository. We exploit the fact that the
# printable range starts at the space character and ends with tilde.
if [ "$allownonascii" != "true" ] &&
	# Note that the use of brackets around a tr range is ok here, (it's
	# even required, for portability to Solaris 10's /usr/bin/tr), since
	# the square bracket bytes happen to fall in the designated range.
	test $(git diff-index --cached --name-only --diff-filter=A -z $against |
	  LC_ALL=C tr -d '[ -~]\0' | wc -c) != 0
then
	cat <<\EOF
Error: Attempt to add a non-ASCII file name.

This can cause problems if you want to work with people on other platforms.

To be portable it is advisable to rename the file.

If you know what you are doing you can disable this check using:

  git config hooks.allownonascii true
EOF
	exit 1
fi

# If there are whitespace errors, print the offending file names and fail.
exec git diff-index --check --cached $against --
</file>

<file path="hotel_management/.git/hooks/pre-merge-commit.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git merge" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message to
# stderr if it wants to stop the merge commit.
#
# To enable this hook, rename this file to "pre-merge-commit".

. git-sh-setup
test -x "$GIT_DIR/hooks/pre-commit" &&
        exec "$GIT_DIR/hooks/pre-commit"
:
</file>

<file path="hotel_management/.git/hooks/pre-push.sample">
#!/bin/sh

# An example hook script to verify what is about to be pushed.  Called by "git
# push" after it has checked the remote status, but before anything has been
# pushed.  If this script exits with a non-zero status nothing will be pushed.
#
# This hook is called with the following parameters:
#
# $1 -- Name of the remote to which the push is being done
# $2 -- URL to which the push is being done
#
# If pushing without using a named remote those arguments will be equal.
#
# Information about the commits which are being pushed is supplied as lines to
# the standard input in the form:
#
#   <local ref> <local oid> <remote ref> <remote oid>
#
# This sample shows how to prevent push of commits where the log message starts
# with "WIP" (work in progress).

remote="$1"
url="$2"

zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')

while read local_ref local_oid remote_ref remote_oid
do
	if test "$local_oid" = "$zero"
	then
		# Handle delete
		:
	else
		if test "$remote_oid" = "$zero"
		then
			# New branch, examine all commits
			range="$local_oid"
		else
			# Update to existing branch, examine new commits
			range="$remote_oid..$local_oid"
		fi

		# Check for WIP commit
		commit=$(git rev-list -n 1 --grep '^WIP' "$range")
		if test -n "$commit"
		then
			echo >&2 "Found WIP commit in $local_ref, not pushing"
			exit 1
		fi
	fi
done

exit 0
</file>

<file path="hotel_management/.git/hooks/pre-rebase.sample">
#!/bin/sh
#
# Copyright (c) 2006, 2008 Junio C Hamano
#
# The "pre-rebase" hook is run just before "git rebase" starts doing
# its job, and can prevent the command from running by exiting with
# non-zero status.
#
# The hook is called with the following parameters:
#
# $1 -- the upstream the series was forked from.
# $2 -- the branch being rebased (or empty when rebasing the current branch).
#
# This sample shows how to prevent topic branches that are already
# merged to 'next' branch from getting rebased, because allowing it
# would result in rebasing already published history.

publish=next
basebranch="$1"
if test "$#" = 2
then
	topic="refs/heads/$2"
else
	topic=`git symbolic-ref HEAD` ||
	exit 0 ;# we do not interrupt rebasing detached HEAD
fi

case "$topic" in
refs/heads/??/*)
	;;
*)
	exit 0 ;# we do not interrupt others.
	;;
esac

# Now we are dealing with a topic branch being rebased
# on top of master.  Is it OK to rebase it?

# Does the topic really exist?
git show-ref -q "$topic" || {
	echo >&2 "No such branch $topic"
	exit 1
}

# Is topic fully merged to master?
not_in_master=`git rev-list --pretty=oneline ^master "$topic"`
if test -z "$not_in_master"
then
	echo >&2 "$topic is fully merged to master; better remove it."
	exit 1 ;# we could allow it, but there is no point.
fi

# Is topic ever merged to next?  If so you should not be rebasing it.
only_next_1=`git rev-list ^master "^$topic" ${publish} | sort`
only_next_2=`git rev-list ^master           ${publish} | sort`
if test "$only_next_1" = "$only_next_2"
then
	not_in_topic=`git rev-list "^$topic" master`
	if test -z "$not_in_topic"
	then
		echo >&2 "$topic is already up to date with master"
		exit 1 ;# we could allow it, but there is no point.
	else
		exit 0
	fi
else
	not_in_next=`git rev-list --pretty=oneline ^${publish} "$topic"`
	/usr/bin/perl -e '
		my $topic = $ARGV[0];
		my $msg = "* $topic has commits already merged to public branch:\n";
		my (%not_in_next) = map {
			/^([0-9a-f]+) /;
			($1 => 1);
		} split(/\n/, $ARGV[1]);
		for my $elem (map {
				/^([0-9a-f]+) (.*)$/;
				[$1 => $2];
			} split(/\n/, $ARGV[2])) {
			if (!exists $not_in_next{$elem->[0]}) {
				if ($msg) {
					print STDERR $msg;
					undef $msg;
				}
				print STDERR " $elem->[1]\n";
			}
		}
	' "$topic" "$not_in_next" "$not_in_master"
	exit 1
fi

<<\DOC_END

This sample hook safeguards topic branches that have been
published from being rewound.

The workflow assumed here is:

 * Once a topic branch forks from "master", "master" is never
   merged into it again (either directly or indirectly).

 * Once a topic branch is fully cooked and merged into "master",
   it is deleted.  If you need to build on top of it to correct
   earlier mistakes, a new topic branch is created by forking at
   the tip of the "master".  This is not strictly necessary, but
   it makes it easier to keep your history simple.

 * Whenever you need to test or publish your changes to topic
   branches, merge them into "next" branch.

The script, being an example, hardcodes the publish branch name
to be "next", but it is trivial to make it configurable via
$GIT_DIR/config mechanism.

With this workflow, you would want to know:

(1) ... if a topic branch has ever been merged to "next".  Young
    topic branches can have stupid mistakes you would rather
    clean up before publishing, and things that have not been
    merged into other branches can be easily rebased without
    affecting other people.  But once it is published, you would
    not want to rewind it.

(2) ... if a topic branch has been fully merged to "master".
    Then you can delete it.  More importantly, you should not
    build on top of it -- other people may already want to
    change things related to the topic as patches against your
    "master", so if you need further changes, it is better to
    fork the topic (perhaps with the same name) afresh from the
    tip of "master".

Let's look at this example:

		   o---o---o---o---o---o---o---o---o---o "next"
		  /       /           /           /
		 /   a---a---b A     /           /
		/   /               /           /
	       /   /   c---c---c---c B         /
	      /   /   /             \         /
	     /   /   /   b---b C     \       /
	    /   /   /   /             \     /
    ---o---o---o---o---o---o---o---o---o---o---o "master"


A, B and C are topic branches.

 * A has one fix since it was merged up to "next".

 * B has finished.  It has been fully merged up to "master" and "next",
   and is ready to be deleted.

 * C has not merged to "next" at all.

We would want to allow C to be rebased, refuse A, and encourage
B to be deleted.

To compute (1):

	git rev-list ^master ^topic next
	git rev-list ^master        next

	if these match, topic has not merged in next at all.

To compute (2):

	git rev-list master..topic

	if this is empty, it is fully merged to "master".

DOC_END
</file>

<file path="hotel_management/.git/hooks/pre-receive.sample">
#!/bin/sh
#
# An example hook script to make use of push options.
# The example simply echoes all push options that start with 'echoback='
# and rejects all pushes when the "reject" push option is used.
#
# To enable this hook, rename this file to "pre-receive".

if test -n "$GIT_PUSH_OPTION_COUNT"
then
	i=0
	while test "$i" -lt "$GIT_PUSH_OPTION_COUNT"
	do
		eval "value=\$GIT_PUSH_OPTION_$i"
		case "$value" in
		echoback=*)
			echo "echo from the pre-receive-hook: ${value#*=}" >&2
			;;
		reject)
			exit 1
		esac
		i=$((i + 1))
	done
fi
</file>

<file path="hotel_management/.git/hooks/prepare-commit-msg.sample">
#!/bin/sh
#
# An example hook script to prepare the commit log message.
# Called by "git commit" with the name of the file that has the
# commit message, followed by the description of the commit
# message's source.  The hook's purpose is to edit the commit
# message file.  If the hook fails with a non-zero status,
# the commit is aborted.
#
# To enable this hook, rename this file to "prepare-commit-msg".

# This hook includes three examples. The first one removes the
# "# Please enter the commit message..." help message.
#
# The second includes the output of "git diff --name-status -r"
# into the message, just before the "git status" output.  It is
# commented because it doesn't cope with --amend or with squashed
# commits.
#
# The third example adds a Signed-off-by line to the message, that can
# still be edited.  This is rarely a good idea.

COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2
SHA1=$3

/usr/bin/perl -i.bak -ne 'print unless(m/^. Please enter the commit message/..m/^#$/)' "$COMMIT_MSG_FILE"

# case "$COMMIT_SOURCE,$SHA1" in
#  ,|template,)
#    /usr/bin/perl -i.bak -pe '
#       print "\n" . `git diff --cached --name-status -r`
# 	 if /^#/ && $first++ == 0' "$COMMIT_MSG_FILE" ;;
#  *) ;;
# esac

# SOB=$(git var GIT_COMMITTER_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# git interpret-trailers --in-place --trailer "$SOB" "$COMMIT_MSG_FILE"
# if test -z "$COMMIT_SOURCE"
# then
#   /usr/bin/perl -i.bak -pe 'print "\n" if !$first_line++' "$COMMIT_MSG_FILE"
# fi
</file>

<file path="hotel_management/.git/hooks/push-to-checkout.sample">
#!/bin/sh

# An example hook script to update a checked-out tree on a git push.
#
# This hook is invoked by git-receive-pack(1) when it reacts to git
# push and updates reference(s) in its repository, and when the push
# tries to update the branch that is currently checked out and the
# receive.denyCurrentBranch configuration variable is set to
# updateInstead.
#
# By default, such a push is refused if the working tree and the index
# of the remote repository has any difference from the currently
# checked out commit; when both the working tree and the index match
# the current commit, they are updated to match the newly pushed tip
# of the branch. This hook is to be used to override the default
# behaviour; however the code below reimplements the default behaviour
# as a starting point for convenient modification.
#
# The hook receives the commit with which the tip of the current
# branch is going to be updated:
commit=$1

# It can exit with a non-zero status to refuse the push (when it does
# so, it must not modify the index or the working tree).
die () {
	echo >&2 "$*"
	exit 1
}

# Or it can make any necessary changes to the working tree and to the
# index to bring them to the desired state when the tip of the current
# branch is updated to the new commit, and exit with a zero status.
#
# For example, the hook can simply run git read-tree -u -m HEAD "$1"
# in order to emulate git fetch that is run in the reverse direction
# with git push, as the two-tree form of git read-tree -u -m is
# essentially the same as git switch or git checkout that switches
# branches while keeping the local changes in the working tree that do
# not interfere with the difference between the branches.

# The below is a more-or-less exact translation to shell of the C code
# for the default behaviour for git's push-to-checkout hook defined in
# the push_to_deploy() function in builtin/receive-pack.c.
#
# Note that the hook will be executed from the repository directory,
# not from the working tree, so if you want to perform operations on
# the working tree, you will have to adapt your code accordingly, e.g.
# by adding "cd .." or using relative paths.

if ! git update-index -q --ignore-submodules --refresh
then
	die "Up-to-date check failed"
fi

if ! git diff-files --quiet --ignore-submodules --
then
	die "Working directory has unstaged changes"
fi

# This is a rough translation of:
#
#   head_has_history() ? "HEAD" : EMPTY_TREE_SHA1_HEX
if git cat-file -e HEAD 2>/dev/null
then
	head=HEAD
else
	head=$(git hash-object -t tree --stdin </dev/null)
fi

if ! git diff-index --quiet --cached --ignore-submodules $head --
then
	die "Working directory has staged changes"
fi

if ! git read-tree -u -m "$commit"
then
	die "Could not update working tree to new HEAD"
fi
</file>

<file path="hotel_management/.git/hooks/sendemail-validate.sample">
#!/bin/sh

# An example hook script to validate a patch (and/or patch series) before
# sending it via email.
#
# The hook should exit with non-zero status after issuing an appropriate
# message if it wants to prevent the email(s) from being sent.
#
# To enable this hook, rename this file to "sendemail-validate".
#
# By default, it will only check that the patch(es) can be applied on top of
# the default upstream branch without conflicts in a secondary worktree. After
# validation (successful or not) of the last patch of a series, the worktree
# will be deleted.
#
# The following config variables can be set to change the default remote and
# remote ref that are used to apply the patches against:
#
#   sendemail.validateRemote (default: origin)
#   sendemail.validateRemoteRef (default: HEAD)
#
# Replace the TODO placeholders with appropriate checks according to your
# needs.

validate_cover_letter () {
	file="$1"
	# TODO: Replace with appropriate checks (e.g. spell checking).
	true
}

validate_patch () {
	file="$1"
	# Ensure that the patch applies without conflicts.
	git am -3 "$file" || return
	# TODO: Replace with appropriate checks for this patch
	# (e.g. checkpatch.pl).
	true
}

validate_series () {
	# TODO: Replace with appropriate checks for the whole series
	# (e.g. quick build, coding style checks, etc.).
	true
}

# main -------------------------------------------------------------------------

if test "$GIT_SENDEMAIL_FILE_COUNTER" = 1
then
	remote=$(git config --default origin --get sendemail.validateRemote) &&
	ref=$(git config --default HEAD --get sendemail.validateRemoteRef) &&
	worktree=$(mktemp --tmpdir -d sendemail-validate.XXXXXXX) &&
	git worktree add -fd --checkout "$worktree" "refs/remotes/$remote/$ref" &&
	git config --replace-all sendemail.validateWorktree "$worktree"
else
	worktree=$(git config --get sendemail.validateWorktree)
fi || {
	echo "sendemail-validate: error: failed to prepare worktree" >&2
	exit 1
}

unset GIT_DIR GIT_WORK_TREE
cd "$worktree" &&

if grep -q "^diff --git " "$1"
then
	validate_patch "$1"
else
	validate_cover_letter "$1"
fi &&

if test "$GIT_SENDEMAIL_FILE_COUNTER" = "$GIT_SENDEMAIL_FILE_TOTAL"
then
	git config --unset-all sendemail.validateWorktree &&
	trap 'git worktree remove -ff "$worktree"' EXIT &&
	validate_series
fi
</file>

<file path="hotel_management/.git/hooks/update.sample">
#!/bin/sh
#
# An example hook script to block unannotated tags from entering.
# Called by "git receive-pack" with arguments: refname sha1-old sha1-new
#
# To enable this hook, rename this file to "update".
#
# Config
# ------
# hooks.allowunannotated
#   This boolean sets whether unannotated tags will be allowed into the
#   repository.  By default they won't be.
# hooks.allowdeletetag
#   This boolean sets whether deleting tags will be allowed in the
#   repository.  By default they won't be.
# hooks.allowmodifytag
#   This boolean sets whether a tag may be modified after creation. By default
#   it won't be.
# hooks.allowdeletebranch
#   This boolean sets whether deleting branches will be allowed in the
#   repository.  By default they won't be.
# hooks.denycreatebranch
#   This boolean sets whether remotely creating branches will be denied
#   in the repository.  By default this is allowed.
#

# --- Command line
refname="$1"
oldrev="$2"
newrev="$3"

# --- Safety check
if [ -z "$GIT_DIR" ]; then
	echo "Don't run this script from the command line." >&2
	echo " (if you want, you could supply GIT_DIR then run" >&2
	echo "  $0 <ref> <oldrev> <newrev>)" >&2
	exit 1
fi

if [ -z "$refname" -o -z "$oldrev" -o -z "$newrev" ]; then
	echo "usage: $0 <ref> <oldrev> <newrev>" >&2
	exit 1
fi

# --- Config
allowunannotated=$(git config --type=bool hooks.allowunannotated)
allowdeletebranch=$(git config --type=bool hooks.allowdeletebranch)
denycreatebranch=$(git config --type=bool hooks.denycreatebranch)
allowdeletetag=$(git config --type=bool hooks.allowdeletetag)
allowmodifytag=$(git config --type=bool hooks.allowmodifytag)

# check for no description
projectdesc=$(sed -e '1q' "$GIT_DIR/description")
case "$projectdesc" in
"Unnamed repository"* | "")
	echo "*** Project description file hasn't been set" >&2
	exit 1
	;;
esac

# --- Check types
# if $newrev is 0000...0000, it's a commit to delete a ref.
zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')
if [ "$newrev" = "$zero" ]; then
	newrev_type=delete
else
	newrev_type=$(git cat-file -t $newrev)
fi

case "$refname","$newrev_type" in
	refs/tags/*,commit)
		# un-annotated tag
		short_refname=${refname##refs/tags/}
		if [ "$allowunannotated" != "true" ]; then
			echo "*** The un-annotated tag, $short_refname, is not allowed in this repository" >&2
			echo "*** Use 'git tag [ -a | -s ]' for tags you want to propagate." >&2
			exit 1
		fi
		;;
	refs/tags/*,delete)
		# delete tag
		if [ "$allowdeletetag" != "true" ]; then
			echo "*** Deleting a tag is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/tags/*,tag)
		# annotated tag
		if [ "$allowmodifytag" != "true" ] && git rev-parse $refname > /dev/null 2>&1
		then
			echo "*** Tag '$refname' already exists." >&2
			echo "*** Modifying a tag is not allowed in this repository." >&2
			exit 1
		fi
		;;
	refs/heads/*,commit)
		# branch
		if [ "$oldrev" = "$zero" -a "$denycreatebranch" = "true" ]; then
			echo "*** Creating a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/heads/*,delete)
		# delete branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/remotes/*,commit)
		# tracking branch
		;;
	refs/remotes/*,delete)
		# delete tracking branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a tracking branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	*)
		# Anything else (is there anything else?)
		echo "*** Update hook: unknown type of update to ref $refname of type $newrev_type" >&2
		exit 1
		;;
esac

# --- Finished
exit 0
</file>

<file path="hotel_management/.git/info/exclude">
# git ls-files --others --exclude-from=.git/info/exclude
# Lines that start with '#' are comments.
# For a project mostly in C, the following would be a good set of
# exclude patterns (uncomment them if you want to use them):
# *.[oa]
# *~
</file>

<file path="hotel_management/.git/logs/HEAD">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 giaudanghoclaptrinh <niemvui2233@gmail.com> 1764962903 +0700	commit (initial): Initial commit
</file>

<file path="hotel_management/.git/logs/refs/heads/main">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 giaudanghoclaptrinh <niemvui2233@gmail.com> 1764962903 +0700	commit (initial): Initial commit
</file>

<file path="hotel_management/.git/logs/refs/remotes/origin/HEAD">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1764962915 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1764964738 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1765020584 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1765020606 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1765020716 +0700	remote set-head
</file>

<file path="hotel_management/.git/logs/refs/remotes/origin/main">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 giaudanghoclaptrinh <niemvui2233@gmail.com> 1764962913 +0700	update by push
</file>

<file path="hotel_management/.git/logs/refs/remotes/origin/update1">
0000000000000000000000000000000000000000 bc721ea315561f99236b2a1cc3eece567ccddde1 giaudanghoclaptrinh <niemvui2233@gmail.com> 1765020714 +0700	fetch --progress --prune --recurse-submodules=on-demand origin: storing head
</file>

<file path="hotel_management/.git/refs/heads/main">
eeaf35d997ff51215ff79235c1b10e86fb090167
</file>

<file path="hotel_management/.git/refs/remotes/origin/HEAD">
ref: refs/remotes/origin/main
</file>

<file path="hotel_management/.git/refs/remotes/origin/main">
eeaf35d997ff51215ff79235c1b10e86fb090167
</file>

<file path="hotel_management/.git/refs/remotes/origin/update1">
bc721ea315561f99236b2a1cc3eece567ccddde1
</file>

<file path="hotel_management/.gitattributes">
# Auto detect text files and perform LF normalization
* text=auto
</file>

<file path="hotel_management/README.md">
# hotel_management
Đồ án môn học
</file>

<file path=".editorconfig">
root = true

[*]
charset = utf-8
end_of_line = lf
indent_size = 4
indent_style = space
insert_final_newline = true
trim_trailing_whitespace = true

[*.md]
trim_trailing_whitespace = false

[*.{yml,yaml}]
indent_size = 2

[compose.yaml]
indent_size = 4
</file>

<file path=".env.example">
APP_NAME=Laravel
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

# PHP_CLI_SERVER_WORKERS=4

BCRYPT_ROUNDS=12

LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

DB_CONNECTION=sqlite
# DB_HOST=127.0.0.1
# DB_PORT=3306
# DB_DATABASE=laravel
# DB_USERNAME=root
# DB_PASSWORD=

SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
QUEUE_CONNECTION=database

CACHE_STORE=database
# CACHE_PREFIX=

MEMCACHED_HOST=127.0.0.1

REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

MAIL_MAILER=log
MAIL_SCHEME=null
MAIL_HOST=127.0.0.1
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

VITE_APP_NAME="${APP_NAME}"
</file>

<file path=".gitattributes">
* text=auto eol=lf

*.blade.php diff=html
*.css diff=css
*.html diff=html
*.md diff=markdown
*.php diff=php

/.github export-ignore
CHANGELOG.md export-ignore
.styleci.yml export-ignore
</file>

<file path=".gitignore">
*.log
.DS_Store
.env
.env.backup
.env.production
.phpactor.json
.phpunit.result.cache
/.fleet
/.idea
/.nova
/.phpunit.cache
/.vscode
/.zed
/auth.json
/node_modules
/public/build
/public/hot
/public/storage
/storage/*.key
/storage/pail
/vendor
Homestead.json
Homestead.yaml
Thumbs.db
</file>

<file path="app/Http/Controllers/Admin/AdminController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class AdminController extends Controller
{
    public function __construct()
    {
        // Protect admin area by auth + AdminMiddleware
        $this->middleware(['auth', \App\Http\Middleware\AdminMiddleware::class]);
    }

    public function index()
    {
        return view('admin.layouts.dashboard');
    }
}
</file>

<file path="app/Http/Controllers/Admin/ChiTietDatPhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\ChiTietDatPhong;
use Illuminate\Http\Request;

class ChiTietDatPhongController extends Controller
{
    public function getDanhSach()
    {
        $chiTietDatPhongs = ChiTietDatPhong::all();
        return view('admin.chi_tiet_dat_phong.danh_sach', compact('chiTietDatPhongs'));
    }

    public function getThem()
    {
        return view('admin.chi_tiet_dat_phong.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'phong_id' => 'required|exists:phongs,id',
            'so_luong' => 'required|integer|min:1',
            'gia' => 'required|numeric',
        ]);

        $orm = new ChiTietDatPhong();
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        $orm->phong_id = $data['phong_id'];
        $orm->so_luong = $data['so_luong'];
        $orm->gia = $data['gia'];
        $orm->save();
        return redirect()->route('chi-tiet-dat-phong');
    }

    public function getSua($id)
    {
        $chiTietDatPhongs = ChiTietDatPhong::findOrFail($id);
        return view('admin.chi_tiet_dat_phong.sua', compact('chiTietDatPhongs'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'phong_id' => 'required|exists:phongs,id',
            'so_luong' => 'required|integer|min:1',
            'gia' => 'required|numeric',
        ]);

        $orm = ChiTietDatPhong::findOrFail($id);
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        $orm->phong_id = $data['phong_id'];
        $orm->so_luong = $data['so_luong'];
        $orm->gia = $data['gia'];
        $orm->save();
        return redirect()->route('chi-tiet-dat-phong');
    }

    public function getXoa($id)
    {
        $orm = ChiTietDatPhong::findOrFail($id);
        $orm->delete();
        return redirect()->route('chi-tiet-dat-phong');
    }
    /**
     * Display the specified resource.
     */
    public function show(ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/HoaDonController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\HoaDon;
use Illuminate\Http\Request;
use App\Models\DatPhong; // Import Model DatPhong để lấy dữ liệu nếu cần

class HoaDonController extends Controller
{
    
    public function getDanhSach()
    {
        // Sử dụng eager loading để lấy thông tin đơn đặt phòng liên quan
        $hoaDons = HoaDon::with('datPhong.user')->get();
        return view('admin.hoa_don.danh_sach', compact('hoaDons'));
    }

    public function getThem()
    {
        // Có thể cần truyền danh sách DatPhong IDs để chọn
        $datPhongs = DatPhong::all(); 
        return view('admin.hoa_don.them', compact('datPhongs'));
    }

    public function postThem(Request $request)
    {
        // [CẬP NHẬT] Thêm validation cho cột thanh toán và ghi chú
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            'ma_hoa_don' => 'required|string|max:100|unique:hoa_dons,ma_hoa_don', // Thêm unique check
            'ngay_lap' => 'required|date',
            'tong_tien' => 'required|numeric|min:0',
            'phuong_thuc_thanh_toan' => 'required|string|max:50', // Cột bắt buộc
            'trang_thai' => 'nullable|string|max:50',
            'ghi_chu' => 'nullable|string', // Thêm ghi chú
        ]);

        $orm = new HoaDon();
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->ma_hoa_don = $data['ma_hoa_don'];
        $orm->ngay_lap = $data['ngay_lap'];
        $orm->tong_tien = $data['tong_tien'];
        
        // [CẬP NHẬT] Lưu phương thức thanh toán
        $orm->phuong_thuc_thanh_toan = $data['phuong_thuc_thanh_toan']; 
        $orm->ghi_chu = $data['ghi_chu'] ?? null;
        
        $orm->trang_thai = $data['trang_thai'] ?? 'unpaid';
        $orm->save();
        
        return redirect()->route('admin.hoa-don')->with('success', 'Thêm hóa đơn thành công!');
    }

    public function getSua($id)
    {
        $hoaDon = HoaDon::findOrFail($id); // Sửa tên biến từ $hoaDons -> $hoaDon
        $datPhongs = DatPhong::all();
        return view('admin.hoa_don.sua', compact('hoaDon', 'datPhongs'));
    }

    public function postSua(Request $request, $id)
    {
        // [CẬP NHẬT] Thêm validation cho cột thanh toán và ghi chú
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            // Unique, bỏ qua chính nó
            'ma_hoa_don' => 'required|string|max:100|unique:hoa_dons,ma_hoa_don,'.$id, 
            'ngay_lap' => 'required|date',
            'tong_tien' => 'required|numeric|min:0',
            'phuong_thuc_thanh_toan' => 'required|string|max:50', // Cột bắt buộc
            'trang_thai' => 'nullable|string|max:50',
            'ghi_chu' => 'nullable|string', 
        ]);

        $orm = HoaDon::findOrFail($id);
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->ma_hoa_don = $data['ma_hoa_don'];
        $orm->ngay_lap = $data['ngay_lap'];
        $orm->tong_tien = $data['tong_tien'];
        
        // [CẬP NHẬT] Lưu phương thức thanh toán và ghi chú
        $orm->phuong_thuc_thanh_toan = $data['phuong_thuc_thanh_toan']; 
        $orm->ghi_chu = $data['ghi_chu'] ?? $orm->ghi_chu;

        $orm->trang_thai = $data['trang_thai'] ?? $orm->trang_thai;
        $orm->save();
        
        return redirect()->route('admin.hoa-don')->with('success', 'Cập nhật hóa đơn thành công!');
    }

    public function getXoa($id)
    {
        $orm = HoaDon::findOrFail($id);
        $orm->delete();
        return redirect()->route('admin.hoa-don')->with('success', 'Xóa hóa đơn thành công!');
    }
}
</file>

<file path="app/Http/Controllers/Admin/KhachHangController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Models\User;
use Illuminate\Validation\Rule;

class KhachHangController extends Controller
{
    public function getDanhSach()
    {
        $khachHangs = User::where('role', 'customer')->get();
        return view('admin.khach_hang.danh_sach', compact('khachHangs'));
    }

    public function getThem()
    {
        return view('admin.khach_hang.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => 'required|email|unique:users,email',
            'phone' => 'nullable|string|max:15|unique:users,phone',
            'cccd' => 'nullable|string|max:20|unique:users,cccd',
            'password' => 'required|string|min:6',
        ]);

        $orm = new User();
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? null;
        $orm->cccd = $data['cccd'] ?? null;
        $orm->role = 'customer';
        $orm->password = $data['password'];
        $orm->save();
        return redirect()->route('khach-hang');
    }

    public function getSua($id)
    {
        $khachHang = User::findOrFail($id);
        return view('admin.khach_hang.sua', compact('khachHang'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => ['required','email', Rule::unique('users','email')->ignore($id)],
            'phone' => ['nullable','string','max:15', Rule::unique('users','phone')->ignore($id)],
            'cccd' => ['nullable','string','max:20', Rule::unique('users','cccd')->ignore($id)],
            'password' => 'nullable|string|min:6',
        ]);

        $orm = User::findOrFail($id);
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? $orm->phone;
        $orm->cccd = $data['cccd'] ?? $orm->cccd;
        if (!empty($data['password'])) {
            $orm->password = $data['password'];
        }
        $orm->save();
        return redirect()->route('khach-hang');
    }

    public function getXoa($id)
    {
        $orm = User::findOrFail($id);
        $orm->delete();
        return redirect()->route('khach-hang');
    }
}
</file>

<file path="app/Http/Controllers/Admin/KhuyenMaiController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\KhuyenMai;
use Illuminate\Http\Request;

class KhuyenMaiController extends Controller
{
    public function getDanhSach()
    {
        $khuyenMais = KhuyenMai::all();
        return view('admin.khuyen_mai.danh_sach', compact('khuyenMais'));
    }

    public function getThem()
    {
        return view('admin.khuyen_mai.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'ten_khuyen_mai' => 'required|string|max:150',
            'ma_khuyen_mai' => 'required|string|max:50',
            'chiet_khau_phan_tram' => 'nullable|numeric',
            'so_tien_giam_gia' => 'nullable|numeric',
            'ngay_bat_dau' => 'nullable|date',
            'ngay_ket_thuc' => 'nullable|date',
        ]);

        $orm = new KhuyenMai();
        $orm->ten_khuyen_mai = $data['ten_khuyen_mai'];
        $orm->ma_khuyen_mai = $data['ma_khuyen_mai'];
        $orm->chiet_khau_phan_tram = $data['chiet_khau_phan_tram'] ?? null;
        $orm->so_tien_giam_gia = $data['so_tien_giam_gia'] ?? null;
        $orm->ngay_bat_dau = $data['ngay_bat_dau'] ?? null;
        $orm->ngay_ket_thuc = $data['ngay_ket_thuc'] ?? null;
        $orm->save();
        return redirect()->route('admin.khuyen-mai');
    }

    public function getSua($id)
    {
        $khuyenMai = KhuyenMai::findOrFail($id);
        return view('admin.khuyen_mai.sua', compact('khuyenMai'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'ten_khuyen_mai' => 'required|string|max:150',
            'ma_khuyen_mai' => 'required|string|max:50',
            'chiet_khau_phan_tram' => 'nullable|numeric',
            'so_tien_giam_gia' => 'nullable|numeric',
            'ngay_bat_dau' => 'nullable|date',
            'ngay_ket_thuc' => 'nullable|date',
        ]);

        $orm = KhuyenMai::findOrFail($id);
        $orm->ten_khuyen_mai = $data['ten_khuyen_mai'];
        $orm->ma_khuyen_mai = $data['ma_khuyen_mai'];
        $orm->chiet_khau_phan_tram = $data['chiet_khau_phan_tram'] ?? null;
        $orm->so_tien_giam_gia = $data['so_tien_giam_gia'] ?? null;
        $orm->ngay_bat_dau = $data['ngay_bat_dau'] ?? null;
        $orm->ngay_ket_thuc = $data['ngay_ket_thuc'] ?? null;
        $orm->save();
        return redirect()->route('admin.khuyen-mai');
    }

    public function getXoa($id)
    {
        $orm = KhuyenMai::findOrFail($id);
        $orm->delete();
        return redirect()->route('admin.khuyen-mai');
    }

    /**
     * Display the specified resource.
     */
    public function show(KhuyenMai $khuyenMai)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(KhuyenMai $khuyenMai)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, KhuyenMai $khuyenMai)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(KhuyenMai $khuyenMai)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/PhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Phong;
use App\Models\LoaiPhong;
use Illuminate\Http\Request;

class PhongController extends Controller
{
    
    public function getDanhSach()
    {
        $phongs = Phong::all();
        return view('admin.phong.danh_sach', compact('phongs'));
    }

    public function getThem()
    {
        $loaiPhongs = LoaiPhong::all();
        return view('admin.phong.them', compact('loaiPhongs'));
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'so_phong' => 'required|string|max:150',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'tinh_trang' => 'nullable|string|max:50',
        ]);

        $orm = new Phong();
        $orm->so_phong = $data['so_phong'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        // Use the migration default when no value is provided to avoid inserting explicit NULL
        $orm->tinh_trang = $data['tinh_trang'] ?? 'available';
        $orm->save();
        return redirect()->route('admin.phong');
    }

    public function getSua($id)
    {
        $phong = Phong::findOrFail($id);
        $loaiPhongs = LoaiPhong::all();
        return view('admin.phong.sua', compact('phong', 'loaiPhongs'));
    }
    
    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'so_phong' => 'required|string|max:150',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'tinh_trang' => 'nullable|string|max:50',
        ]);

        $orm = Phong::findOrFail($id);
        $orm->so_phong = $data['so_phong'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        $orm->tinh_trang = $data['tinh_trang'] ?? $orm->tinh_trang;
        $orm->save();
        return redirect()->route('admin.phong');
    }

    public function getXoa($id)
    {
        $orm = Phong::findOrFail($id);
        $orm->delete();
        return redirect()->route('admin.phong');
    }
    /**
     * Display the specified resource.
     */
    public function show(Phong $phong)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(Phong $phong)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, Phong $phong)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(Phong $phong)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/QuanTriVienController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Models\User;
use Illuminate\Validation\Rule;

class QuanTriVienController extends Controller
{
    public function getDanhSach()
    {
        $admins = User::where('role', 'admin')->get();
        return view('admin.quan_tri_vien.danh_sach', compact('admins'));
    }

    public function getThem()
    {
        return view('admin.quan_tri_vien.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => 'required|email|unique:users,email',
            'phone' => 'nullable|string|max:15|unique:users,phone',
            'cccd' => 'nullable|string|max:20|unique:users,cccd',
            'password' => 'required|string|min:6',
        ]);

        $orm = new User();
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? null;
        $orm->cccd = $data['cccd'] ?? null;
        $orm->role = 'admin';
        $orm->password = $data['password'];
        $orm->save();
        return redirect()->route('quan-tri-vien');
    }

    public function getSua($id)
    {
        $admin = User::findOrFail($id);
        return view('admin.quan_tri_vien.sua', compact('admin'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => ['required','email', Rule::unique('users','email')->ignore($id)],
            'phone' => ['nullable','string','max:15', Rule::unique('users','phone')->ignore($id)],
            'cccd' => ['nullable','string','max:20', Rule::unique('users','cccd')->ignore($id)],
            'password' => 'nullable|string|min:6',
        ]);

        $orm = User::findOrFail($id);
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? $orm->phone;
        $orm->cccd = $data['cccd'] ?? $orm->cccd;
        if (!empty($data['password'])) {
            $orm->password = $data['password'];
        }
        $orm->save();
        return redirect()->route('quan-tri-vien');
    }

    public function getXoa($id)
    {
        $orm = User::findOrFail($id);
        $orm->delete();
        return redirect()->route('quan-tri-vien');
    }
}
</file>

<file path="app/Http/Controllers/Admin/TienNghiController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\TienNghi;
use Illuminate\Http\Request;

class TienNghiController extends Controller
{
    // Danh sách
    public function getDanhSach()
    {
        $tienNghis = TienNghi::all();
        return view('admin.tien_nghi.danh_sach', compact('tienNghis'));
    }

    // Form thêm
    public function getThem()
    {
        return view('admin.tien_nghi.them');
    }

    // Xử lý thêm
    public function postThem(Request $request)
    {
        $request->validate([
            'ten_tien_nghi' => 'required|string|max:255',
            'ma_tien_nghi' => 'required|string|unique:tien_nghis,ma_tien_nghi',
            'icon' => 'nullable|string', // Ví dụ: fa-solid fa-wifi
        ]);

        TienNghi::create($request->all());

        return redirect()->route('admin.tien-nghi')->with('success', 'Thêm tiện nghi thành công!');
    }

    // Form sửa
    public function getSua($id)
    {
        $tienNghi = TienNghi::findOrFail($id);
        return view('admin.tien_nghi.sua', compact('tienNghi'));
    }

    // Xử lý sửa
    public function postSua(Request $request, $id)
    {
        $request->validate([
            'ten_tien_nghi' => 'required|string|max:255',
            'ma_tien_nghi' => 'required|string|unique:tien_nghis,ma_tien_nghi,' . $id,
            'icon' => 'nullable|string',
        ]);

        $tienNghi = TienNghi::findOrFail($id);
        $tienNghi->update($request->all());

        return redirect()->route('admin.tien-nghi')->with('success', 'Cập nhật thành công!');
    }

    // Xóa
    public function getXoa($id)
    {
        TienNghi::destroy($id);
        return redirect()->route('admin.tien-nghi')->with('success', 'Xóa thành công!');
    }
}
</file>

<file path="app/Http/Controllers/Auth/ConfirmPasswordController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\ConfirmsPasswords;

class ConfirmPasswordController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Confirm Password Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling password confirmations and
    | uses a simple trait to include the behavior. You're free to explore
    | this trait and override any functions that require customization.
    |
    */

    use ConfirmsPasswords;

    /**
     * Where to redirect users when the intended url fails.
     *
     * @var string
     */
    protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('auth');
    }
}
</file>

<file path="app/Http/Controllers/Auth/ForgotPasswordController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\SendsPasswordResetEmails;

class ForgotPasswordController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Password Reset Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling password reset emails and
    | includes a trait which assists in sending these notifications from
    | your application to your users. Feel free to explore this trait.
    |
    */

    use SendsPasswordResetEmails;
}
</file>

<file path="app/Http/Controllers/Auth/ResetPasswordController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\ResetsPasswords;

class ResetPasswordController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Password Reset Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling password reset requests
    | and uses a simple trait to include this behavior. You're free to
    | explore this trait and override any methods you wish to tweak.
    |
    */

    use ResetsPasswords;

    /**
     * Where to redirect users after resetting their password.
     *
     * @var string
     */
    protected $redirectTo = '/home';
}
</file>

<file path="app/Http/Controllers/Auth/VerificationController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\VerifiesEmails;

class VerificationController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Email Verification Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling email verification for any
    | user that recently registered with the application. Emails may also
    | be re-sent if the user didn't receive the original email message.
    |
    */

    use VerifiesEmails;

    /**
     * Where to redirect users after verification.
     *
     * @var string
     */
    protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('auth');
        $this->middleware('signed')->only('verify');
        $this->middleware('throttle:6,1')->only('verify', 'resend');
    }
}
</file>

<file path="app/Http/Controllers/Controller.php">
<?php

namespace App\Http\Controllers;

use Illuminate\Foundation\Auth\Access\AuthorizesRequests;
use Illuminate\Foundation\Validation\ValidatesRequests;
use Illuminate\Routing\Controller as BaseController;

class Controller extends BaseController
{
    use AuthorizesRequests, ValidatesRequests;
}
</file>

<file path="app/Http/Controllers/ProfileController.php">
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Validation\Rule;

class ProfileController extends Controller
{
    /**
     * Hiển thị form cập nhật hồ sơ
     */
    public function edit()
    {
        $user = Auth::user();
        return view('client.profile.edit', compact('user'));
    }

    /**
     * Lưu thông tin hồ sơ
     */
    public function update(Request $request)
    {
        $user = Auth::user();

        // Validate dữ liệu
        $request->validate([
            'name' => 'required|string|max:255',
            'email' => ['required', 'email', Rule::unique('users')->ignore($user->id)],
            'phone' => ['required', 'string', 'max:15', Rule::unique('users')->ignore($user->id)],
            'cccd' => ['required', 'string', 'max:20', Rule::unique('users')->ignore($user->id)],
        ], [
            'phone.required' => 'Số điện thoại là bắt buộc để đặt phòng.',
            'cccd.required' => 'CCCD/CMND là bắt buộc để làm thủ tục lưu trú.',
        ]);

        // Cập nhật
        $user->update([
            'name' => $request->name,
            'email' => $request->email,
            'phone' => $request->phone,
            'cccd' => $request->cccd,
        ]);

        // QUAN TRỌNG: Nếu trước đó User bị chặn khi đặt phòng (do thiếu thông tin),
        // hệ thống sẽ lấy lại URL cũ và chuyển hướng họ quay lại trang đặt phòng.
        if (session()->has('url.intended')) {
            return redirect(session()->pull('url.intended'));
        }

        return redirect()->route('profile.edit')->with('success', 'Cập nhật hồ sơ thành công!');
    }
}
</file>

<file path="app/Http/Middleware/AdminMiddleware.php">
<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;

class AdminMiddleware
{
    /**
     * Handle an incoming request.
     */
    public function handle(Request $request, Closure $next)
    {
        $user = auth()->user();
        if (!$user || ($user->role ?? 'user') !== 'admin') {
            if ($request->expectsJson()) {
                return response()->json(['message' => 'Forbidden.'], 403);
            }
            return redirect()->route('home');
        }
        return $next($request);
    }
}
</file>

<file path="app/Http/Middleware/CheckUserProfile.php">
<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class CheckUserProfile
{
    /**
     * Handle an incoming request.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  \Closure  $next
     * @return mixed
     */
    public function handle(Request $request, Closure $next)
    {
        // 1. Kiểm tra đăng nhập (để chắc chắn)
        if (!Auth::check()) {
            return redirect()->route('login');
        }

        $user = Auth::user();

        // 2. Kiểm tra xem user có thiếu số điện thoại hoặc CCCD không
        if (empty($user->phone) || empty($user->cccd)) {
            
            // Lưu lại URL hiện tại để sau khi cập nhật xong thì redirect lại trang đặt phòng
            session()->put('url.intended', $request->url());

            // Chuyển hướng sang trang cập nhật hồ sơ với thông báo lỗi
            return redirect()->route('profile.edit')
                ->with('error', 'Vui lòng cập nhật đầy đủ Số điện thoại và CCCD để tiếp tục đặt phòng!');
        }

        // 3. Nếu đủ thông tin thì cho đi tiếp
        return $next($request);
    }
}
</file>

<file path="app/Models/HoaDon.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class HoaDon extends Model
{

    protected $fillable = [
        'dat_phong_id',
        'ma_hoa_don',
        'ngay_lap',
        'tong_tien',
        'trang_thai',
    ];

    /**
     * The booking (DatPhong) this invoice belongs to.
     */
    public function datPhong(): BelongsTo
    {
        return $this->belongsTo(DatPhong::class);
    }
}
</file>

<file path="app/Models/TienNghi.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class TienNghi extends Model
{
    use HasFactory;

    /**
     * Tên bảng trong Database (Tùy chọn nếu tên bảng chuẩn là 'tien_nghis')
     */
    protected $table = 'tien_nghis';

    /**
     * Các cột được phép thêm/sửa (Mass Assignment)
     */
    protected $fillable = [
        'ten_tien_nghi',  // Tên hiển thị (Ví dụ: Wifi tốc độ cao)
        'ma_tien_nghi',   // Mã dùng trong code (Ví dụ: wifi)
        'icon'            // Class icon (Ví dụ: fa-solid fa-wifi)
    ];

    /**
     * Định nghĩa mối quan hệ Nhiều - Nhiều với bảng LoaiPhong
     * * Logic: Một Tiện nghi (Wifi) có thể thuộc về nhiều Loại phòng khác nhau (Deluxe, Standard...).
     */
    public function loaiPhongs() 
    {
        // Cú pháp: belongsToMany(ModelĐích, BảngTrungGian, KhóaNgoạiCủaModelNày, KhóaNgoạiCủaModelKia)
        return $this->belongsToMany(
            LoaiPhong::class,           // 1. Model liên kết
            'loai_phong_tien_nghi',     // 2. Tên bảng trung gian (Pivot Table)
            'tien_nghi_id',             // 3. Khóa ngoại trỏ về bảng TienNghi
            'loai_phong_id'             // 4. Khóa ngoại trỏ về bảng LoaiPhong
        );
    }
}
</file>

<file path="app/Providers/AppServiceProvider.php">
<?php

namespace App\Providers;

use Illuminate\Support\ServiceProvider;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Register any application services.
     */
    public function register(): void
    {
        //
    }

    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        //
    }
}
</file>

<file path="artisan">
#!/usr/bin/env php
<?php

use Illuminate\Foundation\Application;
use Symfony\Component\Console\Input\ArgvInput;

define('LARAVEL_START', microtime(true));

// Register the Composer autoloader...
require __DIR__.'/vendor/autoload.php';

// Bootstrap Laravel and handle the command...
/** @var Application $app */
$app = require_once __DIR__.'/bootstrap/app.php';

$status = $app->handleCommand(new ArgvInput);

exit($status);
</file>

<file path="bootstrap/cache/.gitignore">
*
!.gitignore
</file>

<file path="bootstrap/providers.php">
<?php

return [
    App\Providers\AppServiceProvider::class,
];
</file>

<file path="composer.json">
{
    "$schema": "https://getcomposer.org/schema.json",
    "name": "laravel/laravel",
    "type": "project",
    "description": "The skeleton application for the Laravel framework.",
    "keywords": ["laravel", "framework"],
    "license": "MIT",
    "require": {
        "php": "^8.2",
        "laravel/framework": "^12.0",
        "laravel/tinker": "^2.10.1",
        "laravel/ui": "^4.6"
    },
    "require-dev": {
        "fakerphp/faker": "^1.23",
        "laravel/pail": "^1.2.2",
        "laravel/pint": "^1.24",
        "laravel/sail": "^1.41",
        "mockery/mockery": "^1.6",
        "nunomaduro/collision": "^8.6",
        "phpunit/phpunit": "^11.5.3"
    },
    "autoload": {
        "psr-4": {
            "App\\": "app/",
            "Database\\Factories\\": "database/factories/",
            "Database\\Seeders\\": "database/seeders/"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "Tests\\": "tests/"
        }
    },
    "scripts": {
        "setup": [
            "composer install",
            "@php -r \"file_exists('.env') || copy('.env.example', '.env');\"",
            "@php artisan key:generate",
            "@php artisan migrate --force",
            "npm install",
            "npm run build"
        ],
        "dev": [
            "Composer\\Config::disableProcessTimeout",
            "npx concurrently -c \"#93c5fd,#c4b5fd,#fb7185,#fdba74\" \"php artisan serve\" \"php artisan queue:listen --tries=1\" \"php artisan pail --timeout=0\" \"npm run dev\" --names=server,queue,logs,vite --kill-others"
        ],
        "test": [
            "@php artisan config:clear --ansi",
            "@php artisan test"
        ],
        "post-autoload-dump": [
            "Illuminate\\Foundation\\ComposerScripts::postAutoloadDump",
            "@php artisan package:discover --ansi"
        ],
        "post-update-cmd": [
            "@php artisan vendor:publish --tag=laravel-assets --ansi --force"
        ],
        "post-root-package-install": [
            "@php -r \"file_exists('.env') || copy('.env.example', '.env');\""
        ],
        "post-create-project-cmd": [
            "@php artisan key:generate --ansi",
            "@php -r \"file_exists('database/database.sqlite') || touch('database/database.sqlite');\"",
            "@php artisan migrate --graceful --ansi"
        ],
        "pre-package-uninstall": [
            "Illuminate\\Foundation\\ComposerScripts::prePackageUninstall"
        ]
    },
    "extra": {
        "laravel": {
            "dont-discover": []
        }
    },
    "config": {
        "optimize-autoloader": true,
        "preferred-install": "dist",
        "sort-packages": true,
        "allow-plugins": {
            "pestphp/pest-plugin": true,
            "php-http/discovery": true
        }
    },
    "minimum-stability": "stable",
    "prefer-stable": true
}
</file>

<file path="config/app.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Application Name
    |--------------------------------------------------------------------------
    |
    | This value is the name of your application, which will be used when the
    | framework needs to place the application's name in a notification or
    | other UI elements where an application name needs to be displayed.
    |
    */

    'name' => env('APP_NAME', 'Laravel'),

    /*
    |--------------------------------------------------------------------------
    | Application Environment
    |--------------------------------------------------------------------------
    |
    | This value determines the "environment" your application is currently
    | running in. This may determine how you prefer to configure various
    | services the application utilizes. Set this in your ".env" file.
    |
    */

    'env' => env('APP_ENV', 'production'),

    /*
    |--------------------------------------------------------------------------
    | Application Debug Mode
    |--------------------------------------------------------------------------
    |
    | When your application is in debug mode, detailed error messages with
    | stack traces will be shown on every error that occurs within your
    | application. If disabled, a simple generic error page is shown.
    |
    */

    'debug' => (bool) env('APP_DEBUG', false),

    /*
    |--------------------------------------------------------------------------
    | Application URL
    |--------------------------------------------------------------------------
    |
    | This URL is used by the console to properly generate URLs when using
    | the Artisan command line tool. You should set this to the root of
    | the application so that it's available within Artisan commands.
    |
    */

    'url' => env('APP_URL', 'http://localhost'),

    /*
    |--------------------------------------------------------------------------
    | Application Timezone
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default timezone for your application, which
    | will be used by the PHP date and date-time functions. The timezone
    | is set to "UTC" by default as it is suitable for most use cases.
    |
    */

    'timezone' => 'UTC',

    /*
    |--------------------------------------------------------------------------
    | Application Locale Configuration
    |--------------------------------------------------------------------------
    |
    | The application locale determines the default locale that will be used
    | by Laravel's translation / localization methods. This option can be
    | set to any locale for which you plan to have translation strings.
    |
    */

    'locale' => env('APP_LOCALE', 'en'),

    'fallback_locale' => env('APP_FALLBACK_LOCALE', 'en'),

    'faker_locale' => env('APP_FAKER_LOCALE', 'en_US'),

    /*
    |--------------------------------------------------------------------------
    | Encryption Key
    |--------------------------------------------------------------------------
    |
    | This key is utilized by Laravel's encryption services and should be set
    | to a random, 32 character string to ensure that all encrypted values
    | are secure. You should do this prior to deploying the application.
    |
    */

    'cipher' => 'AES-256-CBC',

    'key' => env('APP_KEY'),

    'previous_keys' => [
        ...array_filter(
            explode(',', (string) env('APP_PREVIOUS_KEYS', ''))
        ),
    ],

    /*
    |--------------------------------------------------------------------------
    | Maintenance Mode Driver
    |--------------------------------------------------------------------------
    |
    | These configuration options determine the driver used to determine and
    | manage Laravel's "maintenance mode" status. The "cache" driver will
    | allow maintenance mode to be controlled across multiple machines.
    |
    | Supported drivers: "file", "cache"
    |
    */

    'maintenance' => [
        'driver' => env('APP_MAINTENANCE_DRIVER', 'file'),
        'store' => env('APP_MAINTENANCE_STORE', 'database'),
    ],

];
</file>

<file path="config/auth.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Authentication Defaults
    |--------------------------------------------------------------------------
    |
    | This option defines the default authentication "guard" and password
    | reset "broker" for your application. You may change these values
    | as required, but they're a perfect start for most applications.
    |
    */

    'defaults' => [
        'guard' => env('AUTH_GUARD', 'web'),
        'passwords' => env('AUTH_PASSWORD_BROKER', 'users'),
    ],

    /*
    |--------------------------------------------------------------------------
    | Authentication Guards
    |--------------------------------------------------------------------------
    |
    | Next, you may define every authentication guard for your application.
    | Of course, a great default configuration has been defined for you
    | which utilizes session storage plus the Eloquent user provider.
    |
    | All authentication guards have a user provider, which defines how the
    | users are actually retrieved out of your database or other storage
    | system used by the application. Typically, Eloquent is utilized.
    |
    | Supported: "session"
    |
    */

    'guards' => [
        'web' => [
            'driver' => 'session',
            'provider' => 'users',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | User Providers
    |--------------------------------------------------------------------------
    |
    | All authentication guards have a user provider, which defines how the
    | users are actually retrieved out of your database or other storage
    | system used by the application. Typically, Eloquent is utilized.
    |
    | If you have multiple user tables or models you may configure multiple
    | providers to represent the model / table. These providers may then
    | be assigned to any extra authentication guards you have defined.
    |
    | Supported: "database", "eloquent"
    |
    */

    'providers' => [
        'users' => [
            'driver' => 'eloquent',
            'model' => env('AUTH_MODEL', App\Models\User::class),
        ],

        // 'users' => [
        //     'driver' => 'database',
        //     'table' => 'users',
        // ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Resetting Passwords
    |--------------------------------------------------------------------------
    |
    | These configuration options specify the behavior of Laravel's password
    | reset functionality, including the table utilized for token storage
    | and the user provider that is invoked to actually retrieve users.
    |
    | The expiry time is the number of minutes that each reset token will be
    | considered valid. This security feature keeps tokens short-lived so
    | they have less time to be guessed. You may change this as needed.
    |
    | The throttle setting is the number of seconds a user must wait before
    | generating more password reset tokens. This prevents the user from
    | quickly generating a very large amount of password reset tokens.
    |
    */

    'passwords' => [
        'users' => [
            'provider' => 'users',
            'table' => env('AUTH_PASSWORD_RESET_TOKEN_TABLE', 'password_reset_tokens'),
            'expire' => 60,
            'throttle' => 60,
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Password Confirmation Timeout
    |--------------------------------------------------------------------------
    |
    | Here you may define the number of seconds before a password confirmation
    | window expires and users are asked to re-enter their password via the
    | confirmation screen. By default, the timeout lasts for three hours.
    |
    */

    'password_timeout' => env('AUTH_PASSWORD_TIMEOUT', 10800),

];
</file>

<file path="config/cache.php">
<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Cache Store
    |--------------------------------------------------------------------------
    |
    | This option controls the default cache store that will be used by the
    | framework. This connection is utilized if another isn't explicitly
    | specified when running a cache operation inside the application.
    |
    */

    'default' => env('CACHE_STORE', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Cache Stores
    |--------------------------------------------------------------------------
    |
    | Here you may define all of the cache "stores" for your application as
    | well as their drivers. You may even define multiple stores for the
    | same cache driver to group types of items stored in your caches.
    |
    | Supported drivers: "array", "database", "file", "memcached",
    |                    "redis", "dynamodb", "octane",
    |                    "failover", "null"
    |
    */

    'stores' => [

        'array' => [
            'driver' => 'array',
            'serialize' => false,
        ],

        'database' => [
            'driver' => 'database',
            'connection' => env('DB_CACHE_CONNECTION'),
            'table' => env('DB_CACHE_TABLE', 'cache'),
            'lock_connection' => env('DB_CACHE_LOCK_CONNECTION'),
            'lock_table' => env('DB_CACHE_LOCK_TABLE'),
        ],

        'file' => [
            'driver' => 'file',
            'path' => storage_path('framework/cache/data'),
            'lock_path' => storage_path('framework/cache/data'),
        ],

        'memcached' => [
            'driver' => 'memcached',
            'persistent_id' => env('MEMCACHED_PERSISTENT_ID'),
            'sasl' => [
                env('MEMCACHED_USERNAME'),
                env('MEMCACHED_PASSWORD'),
            ],
            'options' => [
                // Memcached::OPT_CONNECT_TIMEOUT => 2000,
            ],
            'servers' => [
                [
                    'host' => env('MEMCACHED_HOST', '127.0.0.1'),
                    'port' => env('MEMCACHED_PORT', 11211),
                    'weight' => 100,
                ],
            ],
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => env('REDIS_CACHE_CONNECTION', 'cache'),
            'lock_connection' => env('REDIS_CACHE_LOCK_CONNECTION', 'default'),
        ],

        'dynamodb' => [
            'driver' => 'dynamodb',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'table' => env('DYNAMODB_CACHE_TABLE', 'cache'),
            'endpoint' => env('DYNAMODB_ENDPOINT'),
        ],

        'octane' => [
            'driver' => 'octane',
        ],

        'failover' => [
            'driver' => 'failover',
            'stores' => [
                'database',
                'array',
            ],
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Cache Key Prefix
    |--------------------------------------------------------------------------
    |
    | When utilizing the APC, database, memcached, Redis, and DynamoDB cache
    | stores, there might be other applications using the same cache. For
    | that reason, you may prefix every cache key to avoid collisions.
    |
    */

    'prefix' => env('CACHE_PREFIX', Str::slug((string) env('APP_NAME', 'laravel')).'-cache-'),

];
</file>

<file path="config/database.php">
<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Database Connection Name
    |--------------------------------------------------------------------------
    |
    | Here you may specify which of the database connections below you wish
    | to use as your default connection for database operations. This is
    | the connection which will be utilized unless another connection
    | is explicitly specified when you execute a query / statement.
    |
    */

    'default' => env('DB_CONNECTION', 'sqlite'),

    /*
    |--------------------------------------------------------------------------
    | Database Connections
    |--------------------------------------------------------------------------
    |
    | Below are all of the database connections defined for your application.
    | An example configuration is provided for each database system which
    | is supported by Laravel. You're free to add / remove connections.
    |
    */

    'connections' => [

        'sqlite' => [
            'driver' => 'sqlite',
            'url' => env('DB_URL'),
            'database' => env('DB_DATABASE', database_path('database.sqlite')),
            'prefix' => '',
            'foreign_key_constraints' => env('DB_FOREIGN_KEYS', true),
            'busy_timeout' => null,
            'journal_mode' => null,
            'synchronous' => null,
            'transaction_mode' => 'DEFERRED',
        ],

        'mysql' => [
            'driver' => 'mysql',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => env('DB_CHARSET', 'utf8mb4'),
            'collation' => env('DB_COLLATION', 'utf8mb4_unicode_ci'),
            'prefix' => '',
            'prefix_indexes' => true,
            'strict' => true,
            'engine' =>  env('DB_ENGINE', 'InnoDB'),
            'options' => extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

        'mariadb' => [
            'driver' => 'mariadb',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => env('DB_CHARSET', 'utf8mb4'),
            'collation' => env('DB_COLLATION', 'utf8mb4_unicode_ci'),
            'prefix' => '',
            'prefix_indexes' => true,
            'strict' => true,
            'engine' => null,
            'options' => extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

        'pgsql' => [
            'driver' => 'pgsql',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '5432'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => env('DB_CHARSET', 'utf8'),
            'prefix' => '',
            'prefix_indexes' => true,
            'search_path' => 'public',
            'sslmode' => 'prefer',
        ],

        'sqlsrv' => [
            'driver' => 'sqlsrv',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', 'localhost'),
            'port' => env('DB_PORT', '1433'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => env('DB_CHARSET', 'utf8'),
            'prefix' => '',
            'prefix_indexes' => true,
            // 'encrypt' => env('DB_ENCRYPT', 'yes'),
            // 'trust_server_certificate' => env('DB_TRUST_SERVER_CERTIFICATE', 'false'),
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Migration Repository Table
    |--------------------------------------------------------------------------
    |
    | This table keeps track of all the migrations that have already run for
    | your application. Using this information, we can determine which of
    | the migrations on disk haven't actually been run on the database.
    |
    */

    'migrations' => [
        'table' => 'migrations',
        'update_date_on_publish' => true,
    ],

    /*
    |--------------------------------------------------------------------------
    | Redis Databases
    |--------------------------------------------------------------------------
    |
    | Redis is an open source, fast, and advanced key-value store that also
    | provides a richer body of commands than a typical key-value system
    | such as Memcached. You may define your connection settings here.
    |
    */

    'redis' => [

        'client' => env('REDIS_CLIENT', 'phpredis'),

        'options' => [
            'cluster' => env('REDIS_CLUSTER', 'redis'),
            'prefix' => env('REDIS_PREFIX', Str::slug((string) env('APP_NAME', 'laravel')).'-database-'),
            'persistent' => env('REDIS_PERSISTENT', false),
        ],

        'default' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_DB', '0'),
            'max_retries' => env('REDIS_MAX_RETRIES', 3),
            'backoff_algorithm' => env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),
            'backoff_base' => env('REDIS_BACKOFF_BASE', 100),
            'backoff_cap' => env('REDIS_BACKOFF_CAP', 1000),
        ],

        'cache' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_CACHE_DB', '1'),
            'max_retries' => env('REDIS_MAX_RETRIES', 3),
            'backoff_algorithm' => env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),
            'backoff_base' => env('REDIS_BACKOFF_BASE', 100),
            'backoff_cap' => env('REDIS_BACKOFF_CAP', 1000),
        ],

    ],

];
</file>

<file path="config/filesystems.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Filesystem Disk
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default filesystem disk that should be used
    | by the framework. The "local" disk, as well as a variety of cloud
    | based disks are available to your application for file storage.
    |
    */

    'default' => env('FILESYSTEM_DISK', 'local'),

    /*
    |--------------------------------------------------------------------------
    | Filesystem Disks
    |--------------------------------------------------------------------------
    |
    | Below you may configure as many filesystem disks as necessary, and you
    | may even configure multiple disks for the same driver. Examples for
    | most supported storage drivers are configured here for reference.
    |
    | Supported drivers: "local", "ftp", "sftp", "s3"
    |
    */

    'disks' => [

        'local' => [
            'driver' => 'local',
            'root' => storage_path('app/private'),
            'serve' => true,
            'throw' => false,
            'report' => false,
        ],

        'public' => [
            'driver' => 'local',
            'root' => storage_path('app/public'),
            'url' => env('APP_URL').'/storage',
            'visibility' => 'public',
            'throw' => false,
            'report' => false,
        ],

        's3' => [
            'driver' => 's3',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION'),
            'bucket' => env('AWS_BUCKET'),
            'url' => env('AWS_URL'),
            'endpoint' => env('AWS_ENDPOINT'),
            'use_path_style_endpoint' => env('AWS_USE_PATH_STYLE_ENDPOINT', false),
            'throw' => false,
            'report' => false,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Symbolic Links
    |--------------------------------------------------------------------------
    |
    | Here you may configure the symbolic links that will be created when the
    | `storage:link` Artisan command is executed. The array keys should be
    | the locations of the links and the values should be their targets.
    |
    */

    'links' => [
        public_path('storage') => storage_path('app/public'),
    ],

];
</file>

<file path="config/logging.php">
<?php

use Monolog\Handler\NullHandler;
use Monolog\Handler\StreamHandler;
use Monolog\Handler\SyslogUdpHandler;
use Monolog\Processor\PsrLogMessageProcessor;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Log Channel
    |--------------------------------------------------------------------------
    |
    | This option defines the default log channel that is utilized to write
    | messages to your logs. The value provided here should match one of
    | the channels present in the list of "channels" configured below.
    |
    */

    'default' => env('LOG_CHANNEL', 'stack'),

    /*
    |--------------------------------------------------------------------------
    | Deprecations Log Channel
    |--------------------------------------------------------------------------
    |
    | This option controls the log channel that should be used to log warnings
    | regarding deprecated PHP and library features. This allows you to get
    | your application ready for upcoming major versions of dependencies.
    |
    */

    'deprecations' => [
        'channel' => env('LOG_DEPRECATIONS_CHANNEL', 'null'),
        'trace' => env('LOG_DEPRECATIONS_TRACE', false),
    ],

    /*
    |--------------------------------------------------------------------------
    | Log Channels
    |--------------------------------------------------------------------------
    |
    | Here you may configure the log channels for your application. Laravel
    | utilizes the Monolog PHP logging library, which includes a variety
    | of powerful log handlers and formatters that you're free to use.
    |
    | Available drivers: "single", "daily", "slack", "syslog",
    |                    "errorlog", "monolog", "custom", "stack"
    |
    */

    'channels' => [

        'stack' => [
            'driver' => 'stack',
            'channels' => explode(',', (string) env('LOG_STACK', 'single')),
            'ignore_exceptions' => false,
        ],

        'single' => [
            'driver' => 'single',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'daily' => [
            'driver' => 'daily',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'days' => env('LOG_DAILY_DAYS', 14),
            'replace_placeholders' => true,
        ],

        'slack' => [
            'driver' => 'slack',
            'url' => env('LOG_SLACK_WEBHOOK_URL'),
            'username' => env('LOG_SLACK_USERNAME', 'Laravel Log'),
            'emoji' => env('LOG_SLACK_EMOJI', ':boom:'),
            'level' => env('LOG_LEVEL', 'critical'),
            'replace_placeholders' => true,
        ],

        'papertrail' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => env('LOG_PAPERTRAIL_HANDLER', SyslogUdpHandler::class),
            'handler_with' => [
                'host' => env('PAPERTRAIL_URL'),
                'port' => env('PAPERTRAIL_PORT'),
                'connectionString' => 'tls://'.env('PAPERTRAIL_URL').':'.env('PAPERTRAIL_PORT'),
            ],
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'stderr' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => StreamHandler::class,
            'handler_with' => [
                'stream' => 'php://stderr',
            ],
            'formatter' => env('LOG_STDERR_FORMATTER'),
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'syslog' => [
            'driver' => 'syslog',
            'level' => env('LOG_LEVEL', 'debug'),
            'facility' => env('LOG_SYSLOG_FACILITY', LOG_USER),
            'replace_placeholders' => true,
        ],

        'errorlog' => [
            'driver' => 'errorlog',
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'null' => [
            'driver' => 'monolog',
            'handler' => NullHandler::class,
        ],

        'emergency' => [
            'path' => storage_path('logs/laravel.log'),
        ],

    ],

];
</file>

<file path="config/mail.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Mailer
    |--------------------------------------------------------------------------
    |
    | This option controls the default mailer that is used to send all email
    | messages unless another mailer is explicitly specified when sending
    | the message. All additional mailers can be configured within the
    | "mailers" array. Examples of each type of mailer are provided.
    |
    */

    'default' => env('MAIL_MAILER', 'log'),

    /*
    |--------------------------------------------------------------------------
    | Mailer Configurations
    |--------------------------------------------------------------------------
    |
    | Here you may configure all of the mailers used by your application plus
    | their respective settings. Several examples have been configured for
    | you and you are free to add your own as your application requires.
    |
    | Laravel supports a variety of mail "transport" drivers that can be used
    | when delivering an email. You may specify which one you're using for
    | your mailers below. You may also add additional mailers if needed.
    |
    | Supported: "smtp", "sendmail", "mailgun", "ses", "ses-v2",
    |            "postmark", "resend", "log", "array",
    |            "failover", "roundrobin"
    |
    */

    'mailers' => [

        'smtp' => [
            'transport' => 'smtp',
            'scheme' => env('MAIL_SCHEME'),
            'url' => env('MAIL_URL'),
            'host' => env('MAIL_HOST', '127.0.0.1'),
            'port' => env('MAIL_PORT', 2525),
            'username' => env('MAIL_USERNAME'),
            'password' => env('MAIL_PASSWORD'),
            'timeout' => null,
            'local_domain' => env('MAIL_EHLO_DOMAIN', parse_url((string) env('APP_URL', 'http://localhost'), PHP_URL_HOST)),
        ],

        'ses' => [
            'transport' => 'ses',
        ],

        'postmark' => [
            'transport' => 'postmark',
            // 'message_stream_id' => env('POSTMARK_MESSAGE_STREAM_ID'),
            // 'client' => [
            //     'timeout' => 5,
            // ],
        ],

        'resend' => [
            'transport' => 'resend',
        ],

        'sendmail' => [
            'transport' => 'sendmail',
            'path' => env('MAIL_SENDMAIL_PATH', '/usr/sbin/sendmail -bs -i'),
        ],

        'log' => [
            'transport' => 'log',
            'channel' => env('MAIL_LOG_CHANNEL'),
        ],

        'array' => [
            'transport' => 'array',
        ],

        'failover' => [
            'transport' => 'failover',
            'mailers' => [
                'smtp',
                'log',
            ],
            'retry_after' => 60,
        ],

        'roundrobin' => [
            'transport' => 'roundrobin',
            'mailers' => [
                'ses',
                'postmark',
            ],
            'retry_after' => 60,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Global "From" Address
    |--------------------------------------------------------------------------
    |
    | You may wish for all emails sent by your application to be sent from
    | the same address. Here you may specify a name and address that is
    | used globally for all emails that are sent by your application.
    |
    */

    'from' => [
        'address' => env('MAIL_FROM_ADDRESS', 'hello@example.com'),
        'name' => env('MAIL_FROM_NAME', 'Example'),
    ],

];
</file>

<file path="config/queue.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Queue Connection Name
    |--------------------------------------------------------------------------
    |
    | Laravel's queue supports a variety of backends via a single, unified
    | API, giving you convenient access to each backend using identical
    | syntax for each. The default queue connection is defined below.
    |
    */

    'default' => env('QUEUE_CONNECTION', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Queue Connections
    |--------------------------------------------------------------------------
    |
    | Here you may configure the connection options for every queue backend
    | used by your application. An example configuration is provided for
    | each backend supported by Laravel. You're also free to add more.
    |
    | Drivers: "sync", "database", "beanstalkd", "sqs", "redis",
    |          "deferred", "background", "failover", "null"
    |
    */

    'connections' => [

        'sync' => [
            'driver' => 'sync',
        ],

        'database' => [
            'driver' => 'database',
            'connection' => env('DB_QUEUE_CONNECTION'),
            'table' => env('DB_QUEUE_TABLE', 'jobs'),
            'queue' => env('DB_QUEUE', 'default'),
            'retry_after' => (int) env('DB_QUEUE_RETRY_AFTER', 90),
            'after_commit' => false,
        ],

        'beanstalkd' => [
            'driver' => 'beanstalkd',
            'host' => env('BEANSTALKD_QUEUE_HOST', 'localhost'),
            'queue' => env('BEANSTALKD_QUEUE', 'default'),
            'retry_after' => (int) env('BEANSTALKD_QUEUE_RETRY_AFTER', 90),
            'block_for' => 0,
            'after_commit' => false,
        ],

        'sqs' => [
            'driver' => 'sqs',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'prefix' => env('SQS_PREFIX', 'https://sqs.us-east-1.amazonaws.com/your-account-id'),
            'queue' => env('SQS_QUEUE', 'default'),
            'suffix' => env('SQS_SUFFIX'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'after_commit' => false,
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => env('REDIS_QUEUE_CONNECTION', 'default'),
            'queue' => env('REDIS_QUEUE', 'default'),
            'retry_after' => (int) env('REDIS_QUEUE_RETRY_AFTER', 90),
            'block_for' => null,
            'after_commit' => false,
        ],

        'deferred' => [
            'driver' => 'deferred',
        ],

        'background' => [
            'driver' => 'background',
        ],

        'failover' => [
            'driver' => 'failover',
            'connections' => [
                'database',
                'deferred',
            ],
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Job Batching
    |--------------------------------------------------------------------------
    |
    | The following options configure the database and table that store job
    | batching information. These options can be updated to any database
    | connection and table which has been defined by your application.
    |
    */

    'batching' => [
        'database' => env('DB_CONNECTION', 'sqlite'),
        'table' => 'job_batches',
    ],

    /*
    |--------------------------------------------------------------------------
    | Failed Queue Jobs
    |--------------------------------------------------------------------------
    |
    | These options configure the behavior of failed queue job logging so you
    | can control how and where failed jobs are stored. Laravel ships with
    | support for storing failed jobs in a simple file or in a database.
    |
    | Supported drivers: "database-uuids", "dynamodb", "file", "null"
    |
    */

    'failed' => [
        'driver' => env('QUEUE_FAILED_DRIVER', 'database-uuids'),
        'database' => env('DB_CONNECTION', 'sqlite'),
        'table' => 'failed_jobs',
    ],

];
</file>

<file path="config/services.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Third Party Services
    |--------------------------------------------------------------------------
    |
    | This file is for storing the credentials for third party services such
    | as Mailgun, Postmark, AWS and more. This file provides the de facto
    | location for this type of information, allowing packages to have
    | a conventional file to locate the various service credentials.
    |
    */

    'postmark' => [
        'key' => env('POSTMARK_API_KEY'),
    ],

    'resend' => [
        'key' => env('RESEND_API_KEY'),
    ],

    'ses' => [
        'key' => env('AWS_ACCESS_KEY_ID'),
        'secret' => env('AWS_SECRET_ACCESS_KEY'),
        'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
    ],

    'slack' => [
        'notifications' => [
            'bot_user_oauth_token' => env('SLACK_BOT_USER_OAUTH_TOKEN'),
            'channel' => env('SLACK_BOT_USER_DEFAULT_CHANNEL'),
        ],
    ],

];
</file>

<file path="config/session.php">
<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Session Driver
    |--------------------------------------------------------------------------
    |
    | This option determines the default session driver that is utilized for
    | incoming requests. Laravel supports a variety of storage options to
    | persist session data. Database storage is a great default choice.
    |
    | Supported: "file", "cookie", "database", "memcached",
    |            "redis", "dynamodb", "array"
    |
    */

    'driver' => env('SESSION_DRIVER', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Session Lifetime
    |--------------------------------------------------------------------------
    |
    | Here you may specify the number of minutes that you wish the session
    | to be allowed to remain idle before it expires. If you want them
    | to expire immediately when the browser is closed then you may
    | indicate that via the expire_on_close configuration option.
    |
    */

    'lifetime' => (int) env('SESSION_LIFETIME', 120),

    'expire_on_close' => env('SESSION_EXPIRE_ON_CLOSE', false),

    /*
    |--------------------------------------------------------------------------
    | Session Encryption
    |--------------------------------------------------------------------------
    |
    | This option allows you to easily specify that all of your session data
    | should be encrypted before it's stored. All encryption is performed
    | automatically by Laravel and you may use the session like normal.
    |
    */

    'encrypt' => env('SESSION_ENCRYPT', false),

    /*
    |--------------------------------------------------------------------------
    | Session File Location
    |--------------------------------------------------------------------------
    |
    | When utilizing the "file" session driver, the session files are placed
    | on disk. The default storage location is defined here; however, you
    | are free to provide another location where they should be stored.
    |
    */

    'files' => storage_path('framework/sessions'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Connection
    |--------------------------------------------------------------------------
    |
    | When using the "database" or "redis" session drivers, you may specify a
    | connection that should be used to manage these sessions. This should
    | correspond to a connection in your database configuration options.
    |
    */

    'connection' => env('SESSION_CONNECTION'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Table
    |--------------------------------------------------------------------------
    |
    | When using the "database" session driver, you may specify the table to
    | be used to store sessions. Of course, a sensible default is defined
    | for you; however, you're welcome to change this to another table.
    |
    */

    'table' => env('SESSION_TABLE', 'sessions'),

    /*
    |--------------------------------------------------------------------------
    | Session Cache Store
    |--------------------------------------------------------------------------
    |
    | When using one of the framework's cache driven session backends, you may
    | define the cache store which should be used to store the session data
    | between requests. This must match one of your defined cache stores.
    |
    | Affects: "dynamodb", "memcached", "redis"
    |
    */

    'store' => env('SESSION_STORE'),

    /*
    |--------------------------------------------------------------------------
    | Session Sweeping Lottery
    |--------------------------------------------------------------------------
    |
    | Some session drivers must manually sweep their storage location to get
    | rid of old sessions from storage. Here are the chances that it will
    | happen on a given request. By default, the odds are 2 out of 100.
    |
    */

    'lottery' => [2, 100],

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Name
    |--------------------------------------------------------------------------
    |
    | Here you may change the name of the session cookie that is created by
    | the framework. Typically, you should not need to change this value
    | since doing so does not grant a meaningful security improvement.
    |
    */

    'cookie' => env(
        'SESSION_COOKIE',
        Str::slug((string) env('APP_NAME', 'laravel')).'-session'
    ),

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Path
    |--------------------------------------------------------------------------
    |
    | The session cookie path determines the path for which the cookie will
    | be regarded as available. Typically, this will be the root path of
    | your application, but you're free to change this when necessary.
    |
    */

    'path' => env('SESSION_PATH', '/'),

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Domain
    |--------------------------------------------------------------------------
    |
    | This value determines the domain and subdomains the session cookie is
    | available to. By default, the cookie will be available to the root
    | domain and all subdomains. Typically, this shouldn't be changed.
    |
    */

    'domain' => env('SESSION_DOMAIN'),

    /*
    |--------------------------------------------------------------------------
    | HTTPS Only Cookies
    |--------------------------------------------------------------------------
    |
    | By setting this option to true, session cookies will only be sent back
    | to the server if the browser has a HTTPS connection. This will keep
    | the cookie from being sent to you when it can't be done securely.
    |
    */

    'secure' => env('SESSION_SECURE_COOKIE'),

    /*
    |--------------------------------------------------------------------------
    | HTTP Access Only
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will prevent JavaScript from accessing the
    | value of the cookie and the cookie will only be accessible through
    | the HTTP protocol. It's unlikely you should disable this option.
    |
    */

    'http_only' => env('SESSION_HTTP_ONLY', true),

    /*
    |--------------------------------------------------------------------------
    | Same-Site Cookies
    |--------------------------------------------------------------------------
    |
    | This option determines how your cookies behave when cross-site requests
    | take place, and can be used to mitigate CSRF attacks. By default, we
    | will set this value to "lax" to permit secure cross-site requests.
    |
    | See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#samesitesamesite-value
    |
    | Supported: "lax", "strict", "none", null
    |
    */

    'same_site' => env('SESSION_SAME_SITE', 'lax'),

    /*
    |--------------------------------------------------------------------------
    | Partitioned Cookies
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will tie the cookie to the top-level site for
    | a cross-site context. Partitioned cookies are accepted by the browser
    | when flagged "secure" and the Same-Site attribute is set to "none".
    |
    */

    'partitioned' => env('SESSION_PARTITIONED_COOKIE', false),

];
</file>

<file path="database/.gitignore">
*.sqlite*
</file>

<file path="database/factories/UserFactory.php">
<?php

namespace Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Str;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\User>
 */
class UserFactory extends Factory
{
    /**
     * The current password being used by the factory.
     */
    protected static ?string $password;

    /**
     * Define the model's default state.
     *
     * @return array<string, mixed>
     */
    public function definition(): array
    {
        return [
            'name' => fake()->name(),
            'email' => fake()->unique()->safeEmail(),
            'email_verified_at' => now(),
            'password' => static::$password ??= Hash::make('password'),
            'remember_token' => Str::random(10),
        ];
    }

    /**
     * Indicate that the model's email address should be unverified.
     */
    public function unverified(): static
    {
        return $this->state(fn (array $attributes) => [
            'email_verified_at' => null,
        ]);
    }
}
</file>

<file path="database/migrations/0001_01_01_000001_create_cache_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('cache', function (Blueprint $table) {
            $table->string('key')->primary();
            $table->mediumText('value');
            $table->integer('expiration');
        });

        Schema::create('cache_locks', function (Blueprint $table) {
            $table->string('key')->primary();
            $table->string('owner');
            $table->integer('expiration');
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('cache');
        Schema::dropIfExists('cache_locks');
    }
};
</file>

<file path="database/migrations/0001_01_01_000002_create_jobs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('jobs', function (Blueprint $table) {
            $table->id();
            $table->string('queue')->index();
            $table->longText('payload');
            $table->unsignedTinyInteger('attempts');
            $table->unsignedInteger('reserved_at')->nullable();
            $table->unsignedInteger('available_at');
            $table->unsignedInteger('created_at');
        });

        Schema::create('job_batches', function (Blueprint $table) {
            $table->string('id')->primary();
            $table->string('name');
            $table->integer('total_jobs');
            $table->integer('pending_jobs');
            $table->integer('failed_jobs');
            $table->longText('failed_job_ids');
            $table->mediumText('options')->nullable();
            $table->integer('cancelled_at')->nullable();
            $table->integer('created_at');
            $table->integer('finished_at')->nullable();
        });

        Schema::create('failed_jobs', function (Blueprint $table) {
            $table->id();
            $table->string('uuid')->unique();
            $table->text('connection');
            $table->text('queue');
            $table->longText('payload');
            $table->longText('exception');
            $table->timestamp('failed_at')->useCurrent();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('jobs');
        Schema::dropIfExists('job_batches');
        Schema::dropIfExists('failed_jobs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181620_create_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('phongs', function (Blueprint $table) {
            $table->id();
            $table->foreignId(column: 'loai_phong_id')->constrained(table: 'loai_phongs')->onDelete('cascade');
            $table->string('so_phong');
            $table->string('tinh_trang')->default('available');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('phongs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181621_create_dat_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('dat_phongs', function (Blueprint $table) {
            $table->id();
            $table->foreignId('user_id')->constrained('users');
            $table->date('ngay_den');
            $table->date('ngay_di');
            $table->decimal('tong_tien', 12, 2);
            $table->string('trang_thai')->default('pending');
            $table->string('payment_status')->default('unpaid');
            $table->text('ghi_chu')->nullable();
            $table->string('promotion_code')->nullable();
            $table->decimal('discount_amount', 10, 2)->default(0);
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('dat_phongs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181624_create_hoa_dons_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('hoa_dons', function (Blueprint $table) {
            $table->id();
            $table->foreignId('dat_phong_id')->constrained('dat_phongs')->onDelete('cascade');
            $table->string('ma_hoa_don')->unique();
            $table->DateTime('ngay_lap');
            $table->decimal('tong_tien', 12, 2);
            $table->string('phuong_thuc_thanh_toan');
            $table->string('trang_thai')->default('unpaid');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('hoa_dons');
    }
};
</file>

<file path="database/migrations/2025_12_10_041323_add_price_cols_to_chi_tiet_dat_phongs.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::table('chi_tiet_dat_phongs', function (Blueprint $table) {
            // Kiểm tra nếu chưa có thì mới thêm
            if (!Schema::hasColumn('chi_tiet_dat_phongs', 'don_gia')) {
                $table->decimal('don_gia', 15, 2)->default(0)->after('so_luong'); // Giá tại thời điểm đặt
            }
            
            if (!Schema::hasColumn('chi_tiet_dat_phongs', 'thanh_tien')) {
                $table->decimal('thanh_tien', 15, 2)->default(0)->after('don_gia'); // Tổng tiền (đơn giá * số lượng)
            }
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::table('chi_tiet_dat_phongs', function (Blueprint $table) {
            $table->dropColumn(['don_gia', 'thanh_tien']);
        });
    }
};
</file>

<file path="database/migrations/2025_12_10_130034_create_tien_nghis_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        // 1. Bảng lưu tên các tiện nghi (Wifi, AC, Tivi...)
        Schema::create('tien_nghis', function (Blueprint $table) {
            $table->id();
            $table->string('ten_tien_nghi'); // Ví dụ: "Wifi tốc độ cao"
            $table->string('ma_tien_nghi')->unique(); // Ví dụ: "wifi", "ac", "tv" (Dùng để lọc trong code)
            $table->string('icon')->nullable(); // Ví dụ: font-awesome class "fa-wifi"
            $table->timestamps();
        });

        // 2. Bảng trung gian (Pivot Table) nối Loại phòng & Tiện nghi
        Schema::create('loai_phong_tien_nghi', function (Blueprint $table) {
            $table->id();
            
            // Khóa ngoại trỏ về bảng loai_phongs
            $table->unsignedBigInteger('loai_phong_id');
            $table->foreign('loai_phong_id')->references('id')->on('loai_phongs')->onDelete('cascade');

            // Khóa ngoại trỏ về bảng tien_nghis
            $table->unsignedBigInteger('tien_nghi_id');
            $table->foreign('tien_nghi_id')->references('id')->on('tien_nghis')->onDelete('cascade');
        });
    }   
    public function down(): void
    {
        Schema::dropIfExists('tien_nghis');
    }
};
</file>

<file path="database/seeders/DatabaseSeeder.php">
<?php

namespace Database\Seeders;

use App\Models\User;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;

class DatabaseSeeder extends Seeder
{
    use WithoutModelEvents;

    /**
     * Seed the application's database.
     */
    public function run(): void
    {
        // User::factory(10)->create();

        User::factory()->create([
            'name' => 'Test User',
            'email' => 'test@example.com',
        ]);
    }
}
</file>

<file path="lang/en/auth.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Authentication Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines are used during authentication for various
    | messages that we need to display to the user. You are free to modify
    | these language lines according to your application's requirements.
    |
    */

    'failed' => 'These credentials do not match our records.',
    'password' => 'The provided password is incorrect.',
    'throttle' => 'Too many login attempts. Please try again in :seconds seconds.',

];
</file>

<file path="lang/en/pagination.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Pagination Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines are used by the paginator library to build
    | the simple pagination links. You are free to change them to anything
    | you want to customize your views to better match your application.
    |
    */

    'previous' => '&laquo; Previous',
    'next' => 'Next &raquo;',

];
</file>

<file path="lang/en/passwords.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Password Reset Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines are the default lines which match reasons
    | that are given by the password broker for a password update attempt
    | outcome such as failure due to an invalid password / reset token.
    |
    */

    'reset' => 'Your password has been reset.',
    'sent' => 'We have emailed your password reset link.',
    'throttled' => 'Please wait before retrying.',
    'token' => 'This password reset token is invalid.',
    'user' => "We can't find a user with that email address.",

];
</file>

<file path="lang/en/validation.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Validation Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines contain the default error messages used by
    | the validator class. Some of these rules have multiple versions such
    | as the size rules. Feel free to tweak each of these messages here.
    |
    */

    'accepted' => 'The :attribute field must be accepted.',
    'accepted_if' => 'The :attribute field must be accepted when :other is :value.',
    'active_url' => 'The :attribute field must be a valid URL.',
    'after' => 'The :attribute field must be a date after :date.',
    'after_or_equal' => 'The :attribute field must be a date after or equal to :date.',
    'alpha' => 'The :attribute field must only contain letters.',
    'alpha_dash' => 'The :attribute field must only contain letters, numbers, dashes, and underscores.',
    'alpha_num' => 'The :attribute field must only contain letters and numbers.',
    'any_of' => 'The :attribute field is invalid.',
    'array' => 'The :attribute field must be an array.',
    'ascii' => 'The :attribute field must only contain single-byte alphanumeric characters and symbols.',
    'before' => 'The :attribute field must be a date before :date.',
    'before_or_equal' => 'The :attribute field must be a date before or equal to :date.',
    'between' => [
        'array' => 'The :attribute field must have between :min and :max items.',
        'file' => 'The :attribute field must be between :min and :max kilobytes.',
        'numeric' => 'The :attribute field must be between :min and :max.',
        'string' => 'The :attribute field must be between :min and :max characters.',
    ],
    'boolean' => 'The :attribute field must be true or false.',
    'can' => 'The :attribute field contains an unauthorized value.',
    'confirmed' => 'The :attribute field confirmation does not match.',
    'contains' => 'The :attribute field is missing a required value.',
    'current_password' => 'The password is incorrect.',
    'date' => 'The :attribute field must be a valid date.',
    'date_equals' => 'The :attribute field must be a date equal to :date.',
    'date_format' => 'The :attribute field must match the format :format.',
    'decimal' => 'The :attribute field must have :decimal decimal places.',
    'declined' => 'The :attribute field must be declined.',
    'declined_if' => 'The :attribute field must be declined when :other is :value.',
    'different' => 'The :attribute field and :other must be different.',
    'digits' => 'The :attribute field must be :digits digits.',
    'digits_between' => 'The :attribute field must be between :min and :max digits.',
    'dimensions' => 'The :attribute field has invalid image dimensions.',
    'distinct' => 'The :attribute field has a duplicate value.',
    'doesnt_contain' => 'The :attribute field must not contain any of the following: :values.',
    'doesnt_end_with' => 'The :attribute field must not end with one of the following: :values.',
    'doesnt_start_with' => 'The :attribute field must not start with one of the following: :values.',
    'email' => 'The :attribute field must be a valid email address.',
    'encoding' => 'The :attribute field must be encoded in :encoding.',
    'ends_with' => 'The :attribute field must end with one of the following: :values.',
    'enum' => 'The selected :attribute is invalid.',
    'exists' => 'The selected :attribute is invalid.',
    'extensions' => 'The :attribute field must have one of the following extensions: :values.',
    'file' => 'The :attribute field must be a file.',
    'filled' => 'The :attribute field must have a value.',
    'gt' => [
        'array' => 'The :attribute field must have more than :value items.',
        'file' => 'The :attribute field must be greater than :value kilobytes.',
        'numeric' => 'The :attribute field must be greater than :value.',
        'string' => 'The :attribute field must be greater than :value characters.',
    ],
    'gte' => [
        'array' => 'The :attribute field must have :value items or more.',
        'file' => 'The :attribute field must be greater than or equal to :value kilobytes.',
        'numeric' => 'The :attribute field must be greater than or equal to :value.',
        'string' => 'The :attribute field must be greater than or equal to :value characters.',
    ],
    'hex_color' => 'The :attribute field must be a valid hexadecimal color.',
    'image' => 'The :attribute field must be an image.',
    'in' => 'The selected :attribute is invalid.',
    'in_array' => 'The :attribute field must exist in :other.',
    'in_array_keys' => 'The :attribute field must contain at least one of the following keys: :values.',
    'integer' => 'The :attribute field must be an integer.',
    'ip' => 'The :attribute field must be a valid IP address.',
    'ipv4' => 'The :attribute field must be a valid IPv4 address.',
    'ipv6' => 'The :attribute field must be a valid IPv6 address.',
    'json' => 'The :attribute field must be a valid JSON string.',
    'list' => 'The :attribute field must be a list.',
    'lowercase' => 'The :attribute field must be lowercase.',
    'lt' => [
        'array' => 'The :attribute field must have less than :value items.',
        'file' => 'The :attribute field must be less than :value kilobytes.',
        'numeric' => 'The :attribute field must be less than :value.',
        'string' => 'The :attribute field must be less than :value characters.',
    ],
    'lte' => [
        'array' => 'The :attribute field must not have more than :value items.',
        'file' => 'The :attribute field must be less than or equal to :value kilobytes.',
        'numeric' => 'The :attribute field must be less than or equal to :value.',
        'string' => 'The :attribute field must be less than or equal to :value characters.',
    ],
    'mac_address' => 'The :attribute field must be a valid MAC address.',
    'max' => [
        'array' => 'The :attribute field must not have more than :max items.',
        'file' => 'The :attribute field must not be greater than :max kilobytes.',
        'numeric' => 'The :attribute field must not be greater than :max.',
        'string' => 'The :attribute field must not be greater than :max characters.',
    ],
    'max_digits' => 'The :attribute field must not have more than :max digits.',
    'mimes' => 'The :attribute field must be a file of type: :values.',
    'mimetypes' => 'The :attribute field must be a file of type: :values.',
    'min' => [
        'array' => 'The :attribute field must have at least :min items.',
        'file' => 'The :attribute field must be at least :min kilobytes.',
        'numeric' => 'The :attribute field must be at least :min.',
        'string' => 'The :attribute field must be at least :min characters.',
    ],
    'min_digits' => 'The :attribute field must have at least :min digits.',
    'missing' => 'The :attribute field must be missing.',
    'missing_if' => 'The :attribute field must be missing when :other is :value.',
    'missing_unless' => 'The :attribute field must be missing unless :other is :value.',
    'missing_with' => 'The :attribute field must be missing when :values is present.',
    'missing_with_all' => 'The :attribute field must be missing when :values are present.',
    'multiple_of' => 'The :attribute field must be a multiple of :value.',
    'not_in' => 'The selected :attribute is invalid.',
    'not_regex' => 'The :attribute field format is invalid.',
    'numeric' => 'The :attribute field must be a number.',
    'password' => [
        'letters' => 'The :attribute field must contain at least one letter.',
        'mixed' => 'The :attribute field must contain at least one uppercase and one lowercase letter.',
        'numbers' => 'The :attribute field must contain at least one number.',
        'symbols' => 'The :attribute field must contain at least one symbol.',
        'uncompromised' => 'The given :attribute has appeared in a data leak. Please choose a different :attribute.',
    ],
    'present' => 'The :attribute field must be present.',
    'present_if' => 'The :attribute field must be present when :other is :value.',
    'present_unless' => 'The :attribute field must be present unless :other is :value.',
    'present_with' => 'The :attribute field must be present when :values is present.',
    'present_with_all' => 'The :attribute field must be present when :values are present.',
    'prohibited' => 'The :attribute field is prohibited.',
    'prohibited_if' => 'The :attribute field is prohibited when :other is :value.',
    'prohibited_if_accepted' => 'The :attribute field is prohibited when :other is accepted.',
    'prohibited_if_declined' => 'The :attribute field is prohibited when :other is declined.',
    'prohibited_unless' => 'The :attribute field is prohibited unless :other is in :values.',
    'prohibits' => 'The :attribute field prohibits :other from being present.',
    'regex' => 'The :attribute field format is invalid.',
    'required' => 'The :attribute field is required.',
    'required_array_keys' => 'The :attribute field must contain entries for: :values.',
    'required_if' => 'The :attribute field is required when :other is :value.',
    'required_if_accepted' => 'The :attribute field is required when :other is accepted.',
    'required_if_declined' => 'The :attribute field is required when :other is declined.',
    'required_unless' => 'The :attribute field is required unless :other is in :values.',
    'required_with' => 'The :attribute field is required when :values is present.',
    'required_with_all' => 'The :attribute field is required when :values are present.',
    'required_without' => 'The :attribute field is required when :values is not present.',
    'required_without_all' => 'The :attribute field is required when none of :values are present.',
    'same' => 'The :attribute field must match :other.',
    'size' => [
        'array' => 'The :attribute field must contain :size items.',
        'file' => 'The :attribute field must be :size kilobytes.',
        'numeric' => 'The :attribute field must be :size.',
        'string' => 'The :attribute field must be :size characters.',
    ],
    'starts_with' => 'The :attribute field must start with one of the following: :values.',
    'string' => 'The :attribute field must be a string.',
    'timezone' => 'The :attribute field must be a valid timezone.',
    'unique' => 'The :attribute has already been taken.',
    'uploaded' => 'The :attribute failed to upload.',
    'uppercase' => 'The :attribute field must be uppercase.',
    'url' => 'The :attribute field must be a valid URL.',
    'ulid' => 'The :attribute field must be a valid ULID.',
    'uuid' => 'The :attribute field must be a valid UUID.',

    /*
    |--------------------------------------------------------------------------
    | Custom Validation Language Lines
    |--------------------------------------------------------------------------
    |
    | Here you may specify custom validation messages for attributes using the
    | convention "attribute.rule" to name the lines. This makes it quick to
    | specify a specific custom language line for a given attribute rule.
    |
    */

    'custom' => [
        'attribute-name' => [
            'rule-name' => 'custom-message',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Custom Validation Attributes
    |--------------------------------------------------------------------------
    |
    | The following language lines are used to swap our attribute placeholder
    | with something more reader friendly such as "E-Mail Address" instead
    | of "email". This simply helps us make our message more expressive.
    |
    */

    'attributes' => [],

];
</file>

<file path="package.json">
{
    "$schema": "https://www.schemastore.org/package.json",
    "private": true,
    "type": "module",
    "scripts": {
        "build": "vite build",
        "dev": "vite"
    },
    "devDependencies": {
        "@popperjs/core": "^2.11.6",
        "@tailwindcss/vite": "^4.0.0",
        "axios": "^1.11.0",
        "bootstrap": "^5.2.3",
        "concurrently": "^9.0.1",
        "laravel-vite-plugin": "^2.0.0",
        "sass": "^1.56.1",
        "tailwindcss": "^4.0.0",
        "vite": "^7.0.7"
    }
}
</file>

<file path="phpunit.xml">
<?xml version="1.0" encoding="UTF-8"?>
<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="vendor/phpunit/phpunit/phpunit.xsd"
         bootstrap="vendor/autoload.php"
         colors="true"
>
    <testsuites>
        <testsuite name="Unit">
            <directory>tests/Unit</directory>
        </testsuite>
        <testsuite name="Feature">
            <directory>tests/Feature</directory>
        </testsuite>
    </testsuites>
    <source>
        <include>
            <directory>app</directory>
        </include>
    </source>
    <php>
        <env name="APP_ENV" value="testing"/>
        <env name="APP_MAINTENANCE_DRIVER" value="file"/>
        <env name="BCRYPT_ROUNDS" value="4"/>
        <env name="BROADCAST_CONNECTION" value="null"/>
        <env name="CACHE_STORE" value="array"/>
        <env name="DB_CONNECTION" value="sqlite"/>
        <env name="DB_DATABASE" value=":memory:"/>
        <env name="MAIL_MAILER" value="array"/>
        <env name="QUEUE_CONNECTION" value="sync"/>
        <env name="SESSION_DRIVER" value="array"/>
        <env name="PULSE_ENABLED" value="false"/>
        <env name="TELESCOPE_ENABLED" value="false"/>
        <env name="NIGHTWATCH_ENABLED" value="false"/>
    </php>
</phpunit>
</file>

<file path="public/.htaccess">
<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews -Indexes
    </IfModule>

    RewriteEngine On

    # Handle Authorization Header
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # Handle X-XSRF-Token Header
    RewriteCond %{HTTP:x-xsrf-token} .
    RewriteRule .* - [E=HTTP_X_XSRF_TOKEN:%{HTTP:X-XSRF-Token}]

    # Redirect Trailing Slashes If Not A Folder...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} (.+)/$
    RewriteRule ^ %1 [L,R=301]

    # Send Requests To Front Controller...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule>
</file>

<file path="public/index.php">
<?php

use Illuminate\Foundation\Application;
use Illuminate\Http\Request;

define('LARAVEL_START', microtime(true));

// Determine if the application is in maintenance mode...
if (file_exists($maintenance = __DIR__.'/../storage/framework/maintenance.php')) {
    require $maintenance;
}

// Register the Composer autoloader...
require __DIR__.'/../vendor/autoload.php';

// Bootstrap Laravel and handle the request...
/** @var Application $app */
$app = require_once __DIR__.'/../bootstrap/app.php';

$app->handleRequest(Request::capture());
</file>

<file path="public/robots.txt">
User-agent: *
Disallow:
</file>

<file path="README.md">
# hotel_management
đồ án môn học
</file>

<file path="repomix-output.txt">
This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.editorconfig
.env.example
.gitattributes
.gitignore
app/Http/Controllers/Admin/AdminController.php
app/Http/Controllers/Admin/ChiTietDatPhongController.php
app/Http/Controllers/Admin/DatPhongController.php
app/Http/Controllers/Admin/HoaDonController.php
app/Http/Controllers/Admin/KhachHangController.php
app/Http/Controllers/Admin/KhuyenMaiController.php
app/Http/Controllers/Admin/LoaiPhongController.php
app/Http/Controllers/Admin/PhongController.php
app/Http/Controllers/Admin/QuanTriVienController.php
app/Http/Controllers/Admin/UserController.php
app/Http/Controllers/Auth/ConfirmPasswordController.php
app/Http/Controllers/Auth/ForgotPasswordController.php
app/Http/Controllers/Auth/LoginController.php
app/Http/Controllers/Auth/RegisterController.php
app/Http/Controllers/Auth/ResetPasswordController.php
app/Http/Controllers/Auth/VerificationController.php
app/Http/Controllers/Client/BookingController.php
app/Http/Controllers/Client/PageController.php
app/Http/Controllers/Controller.php
app/Http/Controllers/HomeController.php
app/Http/Controllers/ProfileController.php
app/Http/Middleware/AdminMiddleware.php
app/Http/Middleware/CheckUserProfile.php
app/Models/ChiTietDatPhong.php
app/Models/DatPhong.php
app/Models/HoaDon.php
app/Models/KhuyenMai.php
app/Models/LoaiPhong.php
app/Models/Phong.php
app/Models/User.php
app/Providers/AppServiceProvider.php
artisan
bootstrap/app.php
bootstrap/cache/.gitignore
bootstrap/providers.php
composer.json
config/app.php
config/auth.php
config/cache.php
config/database.php
config/filesystems.php
config/logging.php
config/mail.php
config/queue.php
config/services.php
config/session.php
database/.gitignore
database/factories/UserFactory.php
database/migrations/0001_01_01_000000_create_users_table.php
database/migrations/0001_01_01_000001_create_cache_table.php
database/migrations/0001_01_01_000002_create_jobs_table.php
database/migrations/2025_12_05_181619_create_loai_phongs_table.php
database/migrations/2025_12_05_181620_create_phongs_table.php
database/migrations/2025_12_05_181621_create_dat_phongs_table.php
database/migrations/2025_12_05_181622_create_chi_tiet_dat_phongs_table.php
database/migrations/2025_12_05_181623_create_khuyen_mais_table.php
database/migrations/2025_12_05_181624_create_hoa_dons_table.php
database/migrations/2025_12_10_041323_add_price_cols_to_chi_tiet_dat_phongs.php
database/seeders/DatabaseSeeder.php
hotel_management/.git/COMMIT_EDITMSG
hotel_management/.git/config
hotel_management/.git/description
hotel_management/.git/FETCH_HEAD
hotel_management/.git/HEAD
hotel_management/.git/hooks/applypatch-msg.sample
hotel_management/.git/hooks/commit-msg.sample
hotel_management/.git/hooks/fsmonitor-watchman.sample
hotel_management/.git/hooks/post-update.sample
hotel_management/.git/hooks/pre-applypatch.sample
hotel_management/.git/hooks/pre-commit.sample
hotel_management/.git/hooks/pre-merge-commit.sample
hotel_management/.git/hooks/pre-push.sample
hotel_management/.git/hooks/pre-rebase.sample
hotel_management/.git/hooks/pre-receive.sample
hotel_management/.git/hooks/prepare-commit-msg.sample
hotel_management/.git/hooks/push-to-checkout.sample
hotel_management/.git/hooks/sendemail-validate.sample
hotel_management/.git/hooks/update.sample
hotel_management/.git/index
hotel_management/.git/info/exclude
hotel_management/.git/logs/HEAD
hotel_management/.git/logs/refs/heads/main
hotel_management/.git/logs/refs/remotes/origin/HEAD
hotel_management/.git/logs/refs/remotes/origin/main
hotel_management/.git/logs/refs/remotes/origin/update1
hotel_management/.git/objects/56/7b8887b1983ddeae0f1a1636721d7ed702667c
hotel_management/.git/objects/77/47f137ae2536bd880b2a269e1bce2ba3e03e7a
hotel_management/.git/objects/79/a95d0edf179bba6798b7d1f8a0283fed75f152
hotel_management/.git/objects/bc/721ea315561f99236b2a1cc3eece567ccddde1
hotel_management/.git/objects/df/e0770424b2a19faf507a501ebfc23be8f54e7b
hotel_management/.git/objects/ee/af35d997ff51215ff79235c1b10e86fb090167
hotel_management/.git/objects/f1/444e24237a7996c1b6b30705048260559ce605
hotel_management/.git/refs/heads/main
hotel_management/.git/refs/remotes/origin/HEAD
hotel_management/.git/refs/remotes/origin/main
hotel_management/.git/refs/remotes/origin/update1
hotel_management/.gitattributes
hotel_management/README.md
lang/en/auth.php
lang/en/pagination.php
lang/en/passwords.php
lang/en/validation.php
package.json
phpunit.xml
public/.htaccess
public/favicon.ico
public/index.php
public/robots.txt
README.md
resources/css/admin.css
resources/css/app.css
resources/css/client.css
resources/js/admin.js
resources/js/app.js
resources/js/bootstrap.js
resources/js/client.js
resources/js/tailwind-config.js
resources/sass/_variables.scss
resources/sass/app.scss
resources/views/admin/dat_phong/danh_sach.blade.php
resources/views/admin/dat_phong/sua.blade.php
resources/views/admin/khuyen_mai/danh_sach.blade.php
resources/views/admin/khuyen_mai/sua.blade.php
resources/views/admin/khuyen_mai/them.blade.php
resources/views/admin/layouts/dashboard.blade.php
resources/views/admin/layouts/sidebar.blade.php
resources/views/admin/loai_phong/danh_sach.blade.php
resources/views/admin/loai_phong/sua.blade.php
resources/views/admin/loai_phong/them.blade.php
resources/views/admin/phong/danh_sach.blade.php
resources/views/admin/phong/sua.blade.php
resources/views/admin/phong/them.blade.php
resources/views/admin/users/danh_sach.blade.php
resources/views/admin/users/sua.blade.php
resources/views/admin/users/them.blade.php
resources/views/auth/login.blade.php
resources/views/auth/passwords/confirm.blade.php
resources/views/auth/passwords/email.blade.php
resources/views/auth/passwords/reset.blade.php
resources/views/auth/register.blade.php
resources/views/auth/verify.blade.php
resources/views/client/booking/create.blade.php
resources/views/client/booking/success.blade.php
resources/views/client/profile/edit.blade.php
resources/views/client/rooms/detail.blade.php
resources/views/client/rooms/index.blade.php
resources/views/home.blade.php
resources/views/layouts/app.blade.php
resources/views/layouts/footer.blade.php
resources/views/layouts/header.blade.php
resources/views/layouts/nav.blade.php
resources/views/welcome.blade.php
routes/console.php
routes/web.php
storage/app/.gitignore
storage/app/private/.gitignore
storage/app/public/.gitignore
storage/framework/.gitignore
storage/framework/cache/.gitignore
storage/framework/cache/data/.gitignore
storage/framework/sessions/.gitignore
storage/framework/testing/.gitignore
storage/framework/views/.gitignore
storage/logs/.gitignore
tests/Feature/ExampleTest.php
tests/TestCase.php
tests/Unit/ExampleTest.php
vite.config.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="hotel_management/.git/COMMIT_EDITMSG">
Initial commit
</file>

<file path="hotel_management/.git/config">
[core]
	repositoryformatversion = 0
	filemode = false
	bare = false
	logallrefupdates = true
	symlinks = false
	ignorecase = true
[lfs]
	repositoryformatversion = 0
[remote "origin"]
	url = https://github.com/giaudanghojclaptrinh/hotel_management.git
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch "main"]
	remote = origin
	merge = refs/heads/main
	vscode-merge-base = origin/main
</file>

<file path="hotel_management/.git/description">
Đồ án môn học
</file>

<file path="hotel_management/.git/FETCH_HEAD">
eeaf35d997ff51215ff79235c1b10e86fb090167		branch 'main' of https://github.com/giaudanghojclaptrinh/hotel_management
bc721ea315561f99236b2a1cc3eece567ccddde1	not-for-merge	branch 'update1' of https://github.com/giaudanghojclaptrinh/hotel_management
</file>

<file path="hotel_management/.git/HEAD">
ref: refs/heads/main
</file>

<file path="hotel_management/.git/hooks/applypatch-msg.sample">
#!/bin/sh
#
# An example hook script to check the commit log message taken by
# applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.  The hook is
# allowed to edit the commit message file.
#
# To enable this hook, rename this file to "applypatch-msg".

. git-sh-setup
commitmsg="$(git rev-parse --git-path hooks/commit-msg)"
test -x "$commitmsg" && exec "$commitmsg" ${1+"$@"}
:
</file>

<file path="hotel_management/.git/hooks/commit-msg.sample">
#!/bin/sh
#
# An example hook script to check the commit log message.
# Called by "git commit" with one argument, the name of the file
# that has the commit message.  The hook should exit with non-zero
# status after issuing an appropriate message if it wants to stop the
# commit.  The hook is allowed to edit the commit message file.
#
# To enable this hook, rename this file to "commit-msg".

# Uncomment the below to add a Signed-off-by line to the message.
# Doing this in a hook is a bad idea in general, but the prepare-commit-msg
# hook is more suited to it.
#
# SOB=$(git var GIT_AUTHOR_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# grep -qs "^$SOB" "$1" || echo "$SOB" >> "$1"

# This example catches duplicate Signed-off-by lines.

test "" = "$(grep '^Signed-off-by: ' "$1" |
	 sort | uniq -c | sed -e '/^[ 	]*1[ 	]/d')" || {
	echo >&2 Duplicate Signed-off-by lines.
	exit 1
}
</file>

<file path="hotel_management/.git/hooks/fsmonitor-watchman.sample">
#!/usr/bin/perl

use strict;
use warnings;
use IPC::Open2;

# An example hook script to integrate Watchman
# (https://facebook.github.io/watchman/) with git to speed up detecting
# new and modified files.
#
# The hook is passed a version (currently 2) and last update token
# formatted as a string and outputs to stdout a new update token and
# all files that have been modified since the update token. Paths must
# be relative to the root of the working tree and separated by a single NUL.
#
# To enable this hook, rename this file to "query-watchman" and set
# 'git config core.fsmonitor .git/hooks/query-watchman'
#
my ($version, $last_update_token) = @ARGV;

# Uncomment for debugging
# print STDERR "$0 $version $last_update_token\n";

# Check the hook interface version
if ($version ne 2) {
	die "Unsupported query-fsmonitor hook version '$version'.\n" .
	    "Falling back to scanning...\n";
}

my $git_work_tree = get_working_dir();

my $retry = 1;

my $json_pkg;
eval {
	require JSON::XS;
	$json_pkg = "JSON::XS";
	1;
} or do {
	require JSON::PP;
	$json_pkg = "JSON::PP";
};

launch_watchman();

sub launch_watchman {
	my $o = watchman_query();
	if (is_work_tree_watched($o)) {
		output_result($o->{clock}, @{$o->{files}});
	}
}

sub output_result {
	my ($clockid, @files) = @_;

	# Uncomment for debugging watchman output
	# open (my $fh, ">", ".git/watchman-output.out");
	# binmode $fh, ":utf8";
	# print $fh "$clockid\n@files\n";
	# close $fh;

	binmode STDOUT, ":utf8";
	print $clockid;
	print "\0";
	local $, = "\0";
	print @files;
}

sub watchman_clock {
	my $response = qx/watchman clock "$git_work_tree"/;
	die "Failed to get clock id on '$git_work_tree'.\n" .
		"Falling back to scanning...\n" if $? != 0;

	return $json_pkg->new->utf8->decode($response);
}

sub watchman_query {
	my $pid = open2(\*CHLD_OUT, \*CHLD_IN, 'watchman -j --no-pretty')
	or die "open2() failed: $!\n" .
	"Falling back to scanning...\n";

	# In the query expression below we're asking for names of files that
	# changed since $last_update_token but not from the .git folder.
	#
	# To accomplish this, we're using the "since" generator to use the
	# recency index to select candidate nodes and "fields" to limit the
	# output to file names only. Then we're using the "expression" term to
	# further constrain the results.
	my $last_update_line = "";
	if (substr($last_update_token, 0, 1) eq "c") {
		$last_update_token = "\"$last_update_token\"";
		$last_update_line = qq[\n"since": $last_update_token,];
	}
	my $query = <<"	END";
		["query", "$git_work_tree", {$last_update_line
			"fields": ["name"],
			"expression": ["not", ["dirname", ".git"]]
		}]
	END

	# Uncomment for debugging the watchman query
	# open (my $fh, ">", ".git/watchman-query.json");
	# print $fh $query;
	# close $fh;

	print CHLD_IN $query;
	close CHLD_IN;
	my $response = do {local $/; <CHLD_OUT>};

	# Uncomment for debugging the watch response
	# open ($fh, ">", ".git/watchman-response.json");
	# print $fh $response;
	# close $fh;

	die "Watchman: command returned no output.\n" .
	"Falling back to scanning...\n" if $response eq "";
	die "Watchman: command returned invalid output: $response\n" .
	"Falling back to scanning...\n" unless $response =~ /^\{/;

	return $json_pkg->new->utf8->decode($response);
}

sub is_work_tree_watched {
	my ($output) = @_;
	my $error = $output->{error};
	if ($retry > 0 and $error and $error =~ m/unable to resolve root .* directory (.*) is not watched/) {
		$retry--;
		my $response = qx/watchman watch "$git_work_tree"/;
		die "Failed to make watchman watch '$git_work_tree'.\n" .
		    "Falling back to scanning...\n" if $? != 0;
		$output = $json_pkg->new->utf8->decode($response);
		$error = $output->{error};
		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		# Uncomment for debugging watchman output
		# open (my $fh, ">", ".git/watchman-output.out");
		# close $fh;

		# Watchman will always return all files on the first query so
		# return the fast "everything is dirty" flag to git and do the
		# Watchman query just to get it over with now so we won't pay
		# the cost in git to look up each individual file.
		my $o = watchman_clock();
		$error = $output->{error};

		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		output_result($o->{clock}, ("/"));
		$last_update_token = $o->{clock};

		eval { launch_watchman() };
		return 0;
	}

	die "Watchman: $error.\n" .
	"Falling back to scanning...\n" if $error;

	return 1;
}

sub get_working_dir {
	my $working_dir;
	if ($^O =~ 'msys' || $^O =~ 'cygwin') {
		$working_dir = Win32::GetCwd();
		$working_dir =~ tr/\\/\//;
	} else {
		require Cwd;
		$working_dir = Cwd::cwd();
	}

	return $working_dir;
}
</file>

<file path="hotel_management/.git/hooks/post-update.sample">
#!/bin/sh
#
# An example hook script to prepare a packed repository for use over
# dumb transports.
#
# To enable this hook, rename this file to "post-update".

exec git update-server-info
</file>

<file path="hotel_management/.git/hooks/pre-applypatch.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed
# by applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-applypatch".

. git-sh-setup
precommit="$(git rev-parse --git-path hooks/pre-commit)"
test -x "$precommit" && exec "$precommit" ${1+"$@"}
:
</file>

<file path="hotel_management/.git/hooks/pre-commit.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git commit" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message if
# it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-commit".

if git rev-parse --verify HEAD >/dev/null 2>&1
then
	against=HEAD
else
	# Initial commit: diff against an empty tree object
	against=$(git hash-object -t tree /dev/null)
fi

# If you want to allow non-ASCII filenames set this variable to true.
allownonascii=$(git config --type=bool hooks.allownonascii)

# Redirect output to stderr.
exec 1>&2

# Cross platform projects tend to avoid non-ASCII filenames; prevent
# them from being added to the repository. We exploit the fact that the
# printable range starts at the space character and ends with tilde.
if [ "$allownonascii" != "true" ] &&
	# Note that the use of brackets around a tr range is ok here, (it's
	# even required, for portability to Solaris 10's /usr/bin/tr), since
	# the square bracket bytes happen to fall in the designated range.
	test $(git diff-index --cached --name-only --diff-filter=A -z $against |
	  LC_ALL=C tr -d '[ -~]\0' | wc -c) != 0
then
	cat <<\EOF
Error: Attempt to add a non-ASCII file name.

This can cause problems if you want to work with people on other platforms.

To be portable it is advisable to rename the file.

If you know what you are doing you can disable this check using:

  git config hooks.allownonascii true
EOF
	exit 1
fi

# If there are whitespace errors, print the offending file names and fail.
exec git diff-index --check --cached $against --
</file>

<file path="hotel_management/.git/hooks/pre-merge-commit.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git merge" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message to
# stderr if it wants to stop the merge commit.
#
# To enable this hook, rename this file to "pre-merge-commit".

. git-sh-setup
test -x "$GIT_DIR/hooks/pre-commit" &&
        exec "$GIT_DIR/hooks/pre-commit"
:
</file>

<file path="hotel_management/.git/hooks/pre-push.sample">
#!/bin/sh

# An example hook script to verify what is about to be pushed.  Called by "git
# push" after it has checked the remote status, but before anything has been
# pushed.  If this script exits with a non-zero status nothing will be pushed.
#
# This hook is called with the following parameters:
#
# $1 -- Name of the remote to which the push is being done
# $2 -- URL to which the push is being done
#
# If pushing without using a named remote those arguments will be equal.
#
# Information about the commits which are being pushed is supplied as lines to
# the standard input in the form:
#
#   <local ref> <local oid> <remote ref> <remote oid>
#
# This sample shows how to prevent push of commits where the log message starts
# with "WIP" (work in progress).

remote="$1"
url="$2"

zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')

while read local_ref local_oid remote_ref remote_oid
do
	if test "$local_oid" = "$zero"
	then
		# Handle delete
		:
	else
		if test "$remote_oid" = "$zero"
		then
			# New branch, examine all commits
			range="$local_oid"
		else
			# Update to existing branch, examine new commits
			range="$remote_oid..$local_oid"
		fi

		# Check for WIP commit
		commit=$(git rev-list -n 1 --grep '^WIP' "$range")
		if test -n "$commit"
		then
			echo >&2 "Found WIP commit in $local_ref, not pushing"
			exit 1
		fi
	fi
done

exit 0
</file>

<file path="hotel_management/.git/hooks/pre-rebase.sample">
#!/bin/sh
#
# Copyright (c) 2006, 2008 Junio C Hamano
#
# The "pre-rebase" hook is run just before "git rebase" starts doing
# its job, and can prevent the command from running by exiting with
# non-zero status.
#
# The hook is called with the following parameters:
#
# $1 -- the upstream the series was forked from.
# $2 -- the branch being rebased (or empty when rebasing the current branch).
#
# This sample shows how to prevent topic branches that are already
# merged to 'next' branch from getting rebased, because allowing it
# would result in rebasing already published history.

publish=next
basebranch="$1"
if test "$#" = 2
then
	topic="refs/heads/$2"
else
	topic=`git symbolic-ref HEAD` ||
	exit 0 ;# we do not interrupt rebasing detached HEAD
fi

case "$topic" in
refs/heads/??/*)
	;;
*)
	exit 0 ;# we do not interrupt others.
	;;
esac

# Now we are dealing with a topic branch being rebased
# on top of master.  Is it OK to rebase it?

# Does the topic really exist?
git show-ref -q "$topic" || {
	echo >&2 "No such branch $topic"
	exit 1
}

# Is topic fully merged to master?
not_in_master=`git rev-list --pretty=oneline ^master "$topic"`
if test -z "$not_in_master"
then
	echo >&2 "$topic is fully merged to master; better remove it."
	exit 1 ;# we could allow it, but there is no point.
fi

# Is topic ever merged to next?  If so you should not be rebasing it.
only_next_1=`git rev-list ^master "^$topic" ${publish} | sort`
only_next_2=`git rev-list ^master           ${publish} | sort`
if test "$only_next_1" = "$only_next_2"
then
	not_in_topic=`git rev-list "^$topic" master`
	if test -z "$not_in_topic"
	then
		echo >&2 "$topic is already up to date with master"
		exit 1 ;# we could allow it, but there is no point.
	else
		exit 0
	fi
else
	not_in_next=`git rev-list --pretty=oneline ^${publish} "$topic"`
	/usr/bin/perl -e '
		my $topic = $ARGV[0];
		my $msg = "* $topic has commits already merged to public branch:\n";
		my (%not_in_next) = map {
			/^([0-9a-f]+) /;
			($1 => 1);
		} split(/\n/, $ARGV[1]);
		for my $elem (map {
				/^([0-9a-f]+) (.*)$/;
				[$1 => $2];
			} split(/\n/, $ARGV[2])) {
			if (!exists $not_in_next{$elem->[0]}) {
				if ($msg) {
					print STDERR $msg;
					undef $msg;
				}
				print STDERR " $elem->[1]\n";
			}
		}
	' "$topic" "$not_in_next" "$not_in_master"
	exit 1
fi

<<\DOC_END

This sample hook safeguards topic branches that have been
published from being rewound.

The workflow assumed here is:

 * Once a topic branch forks from "master", "master" is never
   merged into it again (either directly or indirectly).

 * Once a topic branch is fully cooked and merged into "master",
   it is deleted.  If you need to build on top of it to correct
   earlier mistakes, a new topic branch is created by forking at
   the tip of the "master".  This is not strictly necessary, but
   it makes it easier to keep your history simple.

 * Whenever you need to test or publish your changes to topic
   branches, merge them into "next" branch.

The script, being an example, hardcodes the publish branch name
to be "next", but it is trivial to make it configurable via
$GIT_DIR/config mechanism.

With this workflow, you would want to know:

(1) ... if a topic branch has ever been merged to "next".  Young
    topic branches can have stupid mistakes you would rather
    clean up before publishing, and things that have not been
    merged into other branches can be easily rebased without
    affecting other people.  But once it is published, you would
    not want to rewind it.

(2) ... if a topic branch has been fully merged to "master".
    Then you can delete it.  More importantly, you should not
    build on top of it -- other people may already want to
    change things related to the topic as patches against your
    "master", so if you need further changes, it is better to
    fork the topic (perhaps with the same name) afresh from the
    tip of "master".

Let's look at this example:

		   o---o---o---o---o---o---o---o---o---o "next"
		  /       /           /           /
		 /   a---a---b A     /           /
		/   /               /           /
	       /   /   c---c---c---c B         /
	      /   /   /             \         /
	     /   /   /   b---b C     \       /
	    /   /   /   /             \     /
    ---o---o---o---o---o---o---o---o---o---o---o "master"


A, B and C are topic branches.

 * A has one fix since it was merged up to "next".

 * B has finished.  It has been fully merged up to "master" and "next",
   and is ready to be deleted.

 * C has not merged to "next" at all.

We would want to allow C to be rebased, refuse A, and encourage
B to be deleted.

To compute (1):

	git rev-list ^master ^topic next
	git rev-list ^master        next

	if these match, topic has not merged in next at all.

To compute (2):

	git rev-list master..topic

	if this is empty, it is fully merged to "master".

DOC_END
</file>

<file path="hotel_management/.git/hooks/pre-receive.sample">
#!/bin/sh
#
# An example hook script to make use of push options.
# The example simply echoes all push options that start with 'echoback='
# and rejects all pushes when the "reject" push option is used.
#
# To enable this hook, rename this file to "pre-receive".

if test -n "$GIT_PUSH_OPTION_COUNT"
then
	i=0
	while test "$i" -lt "$GIT_PUSH_OPTION_COUNT"
	do
		eval "value=\$GIT_PUSH_OPTION_$i"
		case "$value" in
		echoback=*)
			echo "echo from the pre-receive-hook: ${value#*=}" >&2
			;;
		reject)
			exit 1
		esac
		i=$((i + 1))
	done
fi
</file>

<file path="hotel_management/.git/hooks/prepare-commit-msg.sample">
#!/bin/sh
#
# An example hook script to prepare the commit log message.
# Called by "git commit" with the name of the file that has the
# commit message, followed by the description of the commit
# message's source.  The hook's purpose is to edit the commit
# message file.  If the hook fails with a non-zero status,
# the commit is aborted.
#
# To enable this hook, rename this file to "prepare-commit-msg".

# This hook includes three examples. The first one removes the
# "# Please enter the commit message..." help message.
#
# The second includes the output of "git diff --name-status -r"
# into the message, just before the "git status" output.  It is
# commented because it doesn't cope with --amend or with squashed
# commits.
#
# The third example adds a Signed-off-by line to the message, that can
# still be edited.  This is rarely a good idea.

COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2
SHA1=$3

/usr/bin/perl -i.bak -ne 'print unless(m/^. Please enter the commit message/..m/^#$/)' "$COMMIT_MSG_FILE"

# case "$COMMIT_SOURCE,$SHA1" in
#  ,|template,)
#    /usr/bin/perl -i.bak -pe '
#       print "\n" . `git diff --cached --name-status -r`
# 	 if /^#/ && $first++ == 0' "$COMMIT_MSG_FILE" ;;
#  *) ;;
# esac

# SOB=$(git var GIT_COMMITTER_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# git interpret-trailers --in-place --trailer "$SOB" "$COMMIT_MSG_FILE"
# if test -z "$COMMIT_SOURCE"
# then
#   /usr/bin/perl -i.bak -pe 'print "\n" if !$first_line++' "$COMMIT_MSG_FILE"
# fi
</file>

<file path="hotel_management/.git/hooks/push-to-checkout.sample">
#!/bin/sh

# An example hook script to update a checked-out tree on a git push.
#
# This hook is invoked by git-receive-pack(1) when it reacts to git
# push and updates reference(s) in its repository, and when the push
# tries to update the branch that is currently checked out and the
# receive.denyCurrentBranch configuration variable is set to
# updateInstead.
#
# By default, such a push is refused if the working tree and the index
# of the remote repository has any difference from the currently
# checked out commit; when both the working tree and the index match
# the current commit, they are updated to match the newly pushed tip
# of the branch. This hook is to be used to override the default
# behaviour; however the code below reimplements the default behaviour
# as a starting point for convenient modification.
#
# The hook receives the commit with which the tip of the current
# branch is going to be updated:
commit=$1

# It can exit with a non-zero status to refuse the push (when it does
# so, it must not modify the index or the working tree).
die () {
	echo >&2 "$*"
	exit 1
}

# Or it can make any necessary changes to the working tree and to the
# index to bring them to the desired state when the tip of the current
# branch is updated to the new commit, and exit with a zero status.
#
# For example, the hook can simply run git read-tree -u -m HEAD "$1"
# in order to emulate git fetch that is run in the reverse direction
# with git push, as the two-tree form of git read-tree -u -m is
# essentially the same as git switch or git checkout that switches
# branches while keeping the local changes in the working tree that do
# not interfere with the difference between the branches.

# The below is a more-or-less exact translation to shell of the C code
# for the default behaviour for git's push-to-checkout hook defined in
# the push_to_deploy() function in builtin/receive-pack.c.
#
# Note that the hook will be executed from the repository directory,
# not from the working tree, so if you want to perform operations on
# the working tree, you will have to adapt your code accordingly, e.g.
# by adding "cd .." or using relative paths.

if ! git update-index -q --ignore-submodules --refresh
then
	die "Up-to-date check failed"
fi

if ! git diff-files --quiet --ignore-submodules --
then
	die "Working directory has unstaged changes"
fi

# This is a rough translation of:
#
#   head_has_history() ? "HEAD" : EMPTY_TREE_SHA1_HEX
if git cat-file -e HEAD 2>/dev/null
then
	head=HEAD
else
	head=$(git hash-object -t tree --stdin </dev/null)
fi

if ! git diff-index --quiet --cached --ignore-submodules $head --
then
	die "Working directory has staged changes"
fi

if ! git read-tree -u -m "$commit"
then
	die "Could not update working tree to new HEAD"
fi
</file>

<file path="hotel_management/.git/hooks/sendemail-validate.sample">
#!/bin/sh

# An example hook script to validate a patch (and/or patch series) before
# sending it via email.
#
# The hook should exit with non-zero status after issuing an appropriate
# message if it wants to prevent the email(s) from being sent.
#
# To enable this hook, rename this file to "sendemail-validate".
#
# By default, it will only check that the patch(es) can be applied on top of
# the default upstream branch without conflicts in a secondary worktree. After
# validation (successful or not) of the last patch of a series, the worktree
# will be deleted.
#
# The following config variables can be set to change the default remote and
# remote ref that are used to apply the patches against:
#
#   sendemail.validateRemote (default: origin)
#   sendemail.validateRemoteRef (default: HEAD)
#
# Replace the TODO placeholders with appropriate checks according to your
# needs.

validate_cover_letter () {
	file="$1"
	# TODO: Replace with appropriate checks (e.g. spell checking).
	true
}

validate_patch () {
	file="$1"
	# Ensure that the patch applies without conflicts.
	git am -3 "$file" || return
	# TODO: Replace with appropriate checks for this patch
	# (e.g. checkpatch.pl).
	true
}

validate_series () {
	# TODO: Replace with appropriate checks for the whole series
	# (e.g. quick build, coding style checks, etc.).
	true
}

# main -------------------------------------------------------------------------

if test "$GIT_SENDEMAIL_FILE_COUNTER" = 1
then
	remote=$(git config --default origin --get sendemail.validateRemote) &&
	ref=$(git config --default HEAD --get sendemail.validateRemoteRef) &&
	worktree=$(mktemp --tmpdir -d sendemail-validate.XXXXXXX) &&
	git worktree add -fd --checkout "$worktree" "refs/remotes/$remote/$ref" &&
	git config --replace-all sendemail.validateWorktree "$worktree"
else
	worktree=$(git config --get sendemail.validateWorktree)
fi || {
	echo "sendemail-validate: error: failed to prepare worktree" >&2
	exit 1
}

unset GIT_DIR GIT_WORK_TREE
cd "$worktree" &&

if grep -q "^diff --git " "$1"
then
	validate_patch "$1"
else
	validate_cover_letter "$1"
fi &&

if test "$GIT_SENDEMAIL_FILE_COUNTER" = "$GIT_SENDEMAIL_FILE_TOTAL"
then
	git config --unset-all sendemail.validateWorktree &&
	trap 'git worktree remove -ff "$worktree"' EXIT &&
	validate_series
fi
</file>

<file path="hotel_management/.git/hooks/update.sample">
#!/bin/sh
#
# An example hook script to block unannotated tags from entering.
# Called by "git receive-pack" with arguments: refname sha1-old sha1-new
#
# To enable this hook, rename this file to "update".
#
# Config
# ------
# hooks.allowunannotated
#   This boolean sets whether unannotated tags will be allowed into the
#   repository.  By default they won't be.
# hooks.allowdeletetag
#   This boolean sets whether deleting tags will be allowed in the
#   repository.  By default they won't be.
# hooks.allowmodifytag
#   This boolean sets whether a tag may be modified after creation. By default
#   it won't be.
# hooks.allowdeletebranch
#   This boolean sets whether deleting branches will be allowed in the
#   repository.  By default they won't be.
# hooks.denycreatebranch
#   This boolean sets whether remotely creating branches will be denied
#   in the repository.  By default this is allowed.
#

# --- Command line
refname="$1"
oldrev="$2"
newrev="$3"

# --- Safety check
if [ -z "$GIT_DIR" ]; then
	echo "Don't run this script from the command line." >&2
	echo " (if you want, you could supply GIT_DIR then run" >&2
	echo "  $0 <ref> <oldrev> <newrev>)" >&2
	exit 1
fi

if [ -z "$refname" -o -z "$oldrev" -o -z "$newrev" ]; then
	echo "usage: $0 <ref> <oldrev> <newrev>" >&2
	exit 1
fi

# --- Config
allowunannotated=$(git config --type=bool hooks.allowunannotated)
allowdeletebranch=$(git config --type=bool hooks.allowdeletebranch)
denycreatebranch=$(git config --type=bool hooks.denycreatebranch)
allowdeletetag=$(git config --type=bool hooks.allowdeletetag)
allowmodifytag=$(git config --type=bool hooks.allowmodifytag)

# check for no description
projectdesc=$(sed -e '1q' "$GIT_DIR/description")
case "$projectdesc" in
"Unnamed repository"* | "")
	echo "*** Project description file hasn't been set" >&2
	exit 1
	;;
esac

# --- Check types
# if $newrev is 0000...0000, it's a commit to delete a ref.
zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')
if [ "$newrev" = "$zero" ]; then
	newrev_type=delete
else
	newrev_type=$(git cat-file -t $newrev)
fi

case "$refname","$newrev_type" in
	refs/tags/*,commit)
		# un-annotated tag
		short_refname=${refname##refs/tags/}
		if [ "$allowunannotated" != "true" ]; then
			echo "*** The un-annotated tag, $short_refname, is not allowed in this repository" >&2
			echo "*** Use 'git tag [ -a | -s ]' for tags you want to propagate." >&2
			exit 1
		fi
		;;
	refs/tags/*,delete)
		# delete tag
		if [ "$allowdeletetag" != "true" ]; then
			echo "*** Deleting a tag is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/tags/*,tag)
		# annotated tag
		if [ "$allowmodifytag" != "true" ] && git rev-parse $refname > /dev/null 2>&1
		then
			echo "*** Tag '$refname' already exists." >&2
			echo "*** Modifying a tag is not allowed in this repository." >&2
			exit 1
		fi
		;;
	refs/heads/*,commit)
		# branch
		if [ "$oldrev" = "$zero" -a "$denycreatebranch" = "true" ]; then
			echo "*** Creating a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/heads/*,delete)
		# delete branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/remotes/*,commit)
		# tracking branch
		;;
	refs/remotes/*,delete)
		# delete tracking branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a tracking branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	*)
		# Anything else (is there anything else?)
		echo "*** Update hook: unknown type of update to ref $refname of type $newrev_type" >&2
		exit 1
		;;
esac

# --- Finished
exit 0
</file>

<file path="hotel_management/.git/info/exclude">
# git ls-files --others --exclude-from=.git/info/exclude
# Lines that start with '#' are comments.
# For a project mostly in C, the following would be a good set of
# exclude patterns (uncomment them if you want to use them):
# *.[oa]
# *~
</file>

<file path="hotel_management/.git/logs/HEAD">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 giaudanghoclaptrinh <niemvui2233@gmail.com> 1764962903 +0700	commit (initial): Initial commit
</file>

<file path="hotel_management/.git/logs/refs/heads/main">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 giaudanghoclaptrinh <niemvui2233@gmail.com> 1764962903 +0700	commit (initial): Initial commit
</file>

<file path="hotel_management/.git/logs/refs/remotes/origin/HEAD">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1764962915 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1764964738 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1765020584 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1765020606 +0700	remote set-head
eeaf35d997ff51215ff79235c1b10e86fb090167 eeaf35d997ff51215ff79235c1b10e86fb090167 unknown <ADMIN@DESKTOP-GR94I71.(none)> 1765020716 +0700	remote set-head
</file>

<file path="hotel_management/.git/logs/refs/remotes/origin/main">
0000000000000000000000000000000000000000 eeaf35d997ff51215ff79235c1b10e86fb090167 giaudanghoclaptrinh <niemvui2233@gmail.com> 1764962913 +0700	update by push
</file>

<file path="hotel_management/.git/logs/refs/remotes/origin/update1">
0000000000000000000000000000000000000000 bc721ea315561f99236b2a1cc3eece567ccddde1 giaudanghoclaptrinh <niemvui2233@gmail.com> 1765020714 +0700	fetch --progress --prune --recurse-submodules=on-demand origin: storing head
</file>

<file path="hotel_management/.git/refs/heads/main">
eeaf35d997ff51215ff79235c1b10e86fb090167
</file>

<file path="hotel_management/.git/refs/remotes/origin/HEAD">
ref: refs/remotes/origin/main
</file>

<file path="hotel_management/.git/refs/remotes/origin/main">
eeaf35d997ff51215ff79235c1b10e86fb090167
</file>

<file path="hotel_management/.git/refs/remotes/origin/update1">
bc721ea315561f99236b2a1cc3eece567ccddde1
</file>

<file path="hotel_management/.gitattributes">
# Auto detect text files and perform LF normalization
* text=auto
</file>

<file path="hotel_management/README.md">
# hotel_management
Đồ án môn học
</file>

<file path=".editorconfig">
root = true

[*]
charset = utf-8
end_of_line = lf
indent_size = 4
indent_style = space
insert_final_newline = true
trim_trailing_whitespace = true

[*.md]
trim_trailing_whitespace = false

[*.{yml,yaml}]
indent_size = 2

[compose.yaml]
indent_size = 4
</file>

<file path=".env.example">
APP_NAME=Laravel
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

# PHP_CLI_SERVER_WORKERS=4

BCRYPT_ROUNDS=12

LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

DB_CONNECTION=sqlite
# DB_HOST=127.0.0.1
# DB_PORT=3306
# DB_DATABASE=laravel
# DB_USERNAME=root
# DB_PASSWORD=

SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
QUEUE_CONNECTION=database

CACHE_STORE=database
# CACHE_PREFIX=

MEMCACHED_HOST=127.0.0.1

REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

MAIL_MAILER=log
MAIL_SCHEME=null
MAIL_HOST=127.0.0.1
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

VITE_APP_NAME="${APP_NAME}"
</file>

<file path=".gitattributes">
* text=auto eol=lf

*.blade.php diff=html
*.css diff=css
*.html diff=html
*.md diff=markdown
*.php diff=php

/.github export-ignore
CHANGELOG.md export-ignore
.styleci.yml export-ignore
</file>

<file path=".gitignore">
*.log
.DS_Store
.env
.env.backup
.env.production
.phpactor.json
.phpunit.result.cache
/.fleet
/.idea
/.nova
/.phpunit.cache
/.vscode
/.zed
/auth.json
/node_modules
/public/build
/public/hot
/public/storage
/storage/*.key
/storage/pail
/vendor
Homestead.json
Homestead.yaml
Thumbs.db
</file>

<file path="app/Http/Controllers/Admin/AdminController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class AdminController extends Controller
{
    public function __construct()
    {
        // Protect admin area by auth + AdminMiddleware
        $this->middleware(['auth', \App\Http\Middleware\AdminMiddleware::class]);
    }

    public function index()
    {
        return view('admin.layouts.dashboard');
    }
}
</file>

<file path="app/Http/Controllers/Admin/ChiTietDatPhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\ChiTietDatPhong;
use Illuminate\Http\Request;

class ChiTietDatPhongController extends Controller
{
    public function getDanhSach()
    {
        $chiTietDatPhongs = ChiTietDatPhong::all();
        return view('admin.chi_tiet_dat_phong.danh_sach', compact('chiTietDatPhongs'));
    }

    public function getThem()
    {
        return view('admin.chi_tiet_dat_phong.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'phong_id' => 'required|exists:phongs,id',
            'so_luong' => 'required|integer|min:1',
            'gia' => 'required|numeric',
        ]);

        $orm = new ChiTietDatPhong();
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        $orm->phong_id = $data['phong_id'];
        $orm->so_luong = $data['so_luong'];
        $orm->gia = $data['gia'];
        $orm->save();
        return redirect()->route('chi-tiet-dat-phong');
    }

    public function getSua($id)
    {
        $chiTietDatPhongs = ChiTietDatPhong::findOrFail($id);
        return view('admin.chi_tiet_dat_phong.sua', compact('chiTietDatPhongs'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'phong_id' => 'required|exists:phongs,id',
            'so_luong' => 'required|integer|min:1',
            'gia' => 'required|numeric',
        ]);

        $orm = ChiTietDatPhong::findOrFail($id);
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        $orm->phong_id = $data['phong_id'];
        $orm->so_luong = $data['so_luong'];
        $orm->gia = $data['gia'];
        $orm->save();
        return redirect()->route('chi-tiet-dat-phong');
    }

    public function getXoa($id)
    {
        $orm = ChiTietDatPhong::findOrFail($id);
        $orm->delete();
        return redirect()->route('chi-tiet-dat-phong');
    }
    /**
     * Display the specified resource.
     */
    public function show(ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(ChiTietDatPhong $chiTietDatPhong)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/DatPhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\DatPhong;
use App\Models\User;
use Illuminate\Http\Request;

class DatPhongController extends Controller
{
    public function getDanhSach()
    {
        $datPhongs = DatPhong::all();
        return view('admin.dat_phong.danh_sach', compact('datPhongs'));
    }

    public function getThem()
    {
        $users = User::all();
        return view('admin.dat_phong.them', compact('users'));
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'user_id' => 'required|exists:users,id',
            'ngay_den' => 'required|date',
            'ngay_di' => 'required|date|after_or_equal:ngay_den',
            'trang_thai' => 'nullable|string|max:50',
        ]);

        $orm = new DatPhong();
        $orm->user_id = $data['user_id'];
        $orm->ngay_den = $data['ngay_den'];
        $orm->ngay_di = $data['ngay_di'];
        $orm->trang_thai = $data['trang_thai'] ?? null;
        $orm->save();
        // Redirect to admin booking list if created from admin area
        if ($request->is('admin/*') || (auth()->check() && auth()->user()->role === 'admin')) {
            return redirect()->route('admin.dat-phong');
        }
        return redirect()->route('dat-phong');
    }

    public function getSua($id)
    {
        $datPhong = DatPhong::findOrFail($id);
        $users = User::all();
        return view('admin.dat_phong.sua', compact('datPhong', 'users'));
    }
    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'user_id' => 'required|exists:users,id',
            'ngay_den' => 'required|date',
            'ngay_di' => 'required|date|after_or_equal:ngay_den',
            'trang_thai' => 'nullable|string|max:50',
        ]);

        $orm = DatPhong::findOrFail($id);
        $orm->user_id = $data['user_id'];
        $orm->ngay_den = $data['ngay_den'];
        $orm->ngay_di = $data['ngay_di'];
        $orm->trang_thai = $data['trang_thai'] ?? $orm->trang_thai;
        $orm->save();
        return redirect()->route('dat-phong');
    }

    public function getXoa($id)
    {
        $orm = DatPhong::findOrFail($id);
        $orm->delete();
        return redirect()->route('dat-phong');
    }
    /**
     * Display the specified resource.
     */
    public function show(DatPhong $datPhong)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(DatPhong $datPhong)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, DatPhong $datPhong)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(DatPhong $datPhong)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/HoaDonController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\HoaDon;
use Illuminate\Http\Request;

class HoaDonController extends Controller
{
    
    public function getDanhSach()
    {
        $hoaDons = HoaDon::all();
        return view('admin.hoa_don.danh_sach', compact('hoaDons'));
    }

    public function getThem()
    {
        return view('admin.hoa_don.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            'ma_hoa_don' => 'required|string|max:100',
            'ngay_lap' => 'required|date',
            'tong_tien' => 'required|numeric',
            'trang_thai' => 'nullable|string|max:50',
        ]);

        $orm = new HoaDon();
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->ma_hoa_don = $data['ma_hoa_don'];
        $orm->ngay_lap = $data['ngay_lap'];
        $orm->tong_tien = $data['tong_tien'];
        $orm->trang_thai = $data['trang_thai'] ?? null;
        $orm->save();
        return redirect()->route('admin.hoa-don');
    }

    public function getSua($id)
    {
        $hoaDons = HoaDon::findOrFail($id);
        return view('admin.hoa_don.sua', compact('hoaDons'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            'ma_hoa_don' => 'required|string|max:100',
            'ngay_lap' => 'required|date',
            'tong_tien' => 'required|numeric',
            'trang_thai' => 'nullable|string|max:50',
        ]);

        $orm = HoaDon::findOrFail($id);
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->ma_hoa_don = $data['ma_hoa_don'];
        $orm->ngay_lap = $data['ngay_lap'];
        $orm->tong_tien = $data['tong_tien'];
        $orm->trang_thai = $data['trang_thai'] ?? $orm->trang_thai;
        $orm->save();
        return redirect()->route('admin.hoa-don');
    }

    public function getXoa($id)
    {
        $orm = HoaDon::findOrFail($id);
        $orm->delete();
        return redirect()->route('admin.hoa-don');
    }

    /**
     * Display the specified resource.
     */
    public function show(HoaDon $hoaDon)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(HoaDon $hoaDon)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, HoaDon $hoaDon)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(HoaDon $hoaDon)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/KhachHangController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Models\User;
use Illuminate\Validation\Rule;

class KhachHangController extends Controller
{
    public function getDanhSach()
    {
        $khachHangs = User::where('role', 'customer')->get();
        return view('admin.khach_hang.danh_sach', compact('khachHangs'));
    }

    public function getThem()
    {
        return view('admin.khach_hang.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => 'required|email|unique:users,email',
            'phone' => 'nullable|string|max:15|unique:users,phone',
            'cccd' => 'nullable|string|max:20|unique:users,cccd',
            'password' => 'required|string|min:6',
        ]);

        $orm = new User();
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? null;
        $orm->cccd = $data['cccd'] ?? null;
        $orm->role = 'customer';
        $orm->password = $data['password'];
        $orm->save();
        return redirect()->route('khach-hang');
    }

    public function getSua($id)
    {
        $khachHang = User::findOrFail($id);
        return view('admin.khach_hang.sua', compact('khachHang'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => ['required','email', Rule::unique('users','email')->ignore($id)],
            'phone' => ['nullable','string','max:15', Rule::unique('users','phone')->ignore($id)],
            'cccd' => ['nullable','string','max:20', Rule::unique('users','cccd')->ignore($id)],
            'password' => 'nullable|string|min:6',
        ]);

        $orm = User::findOrFail($id);
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? $orm->phone;
        $orm->cccd = $data['cccd'] ?? $orm->cccd;
        if (!empty($data['password'])) {
            $orm->password = $data['password'];
        }
        $orm->save();
        return redirect()->route('khach-hang');
    }

    public function getXoa($id)
    {
        $orm = User::findOrFail($id);
        $orm->delete();
        return redirect()->route('khach-hang');
    }
}
</file>

<file path="app/Http/Controllers/Admin/KhuyenMaiController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\KhuyenMai;
use Illuminate\Http\Request;

class KhuyenMaiController extends Controller
{
    public function getDanhSach()
    {
        $khuyenMais = KhuyenMai::all();
        return view('admin.khuyen_mai.danh_sach', compact('khuyenMais'));
    }

    public function getThem()
    {
        return view('admin.khuyen_mai.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'ten_khuyen_mai' => 'required|string|max:150',
            'ma_khuyen_mai' => 'required|string|max:50',
            'chiet_khau_phan_tram' => 'nullable|numeric',
            'so_tien_giam_gia' => 'nullable|numeric',
            'ngay_bat_dau' => 'nullable|date',
            'ngay_ket_thuc' => 'nullable|date',
        ]);

        $orm = new KhuyenMai();
        $orm->ten_khuyen_mai = $data['ten_khuyen_mai'];
        $orm->ma_khuyen_mai = $data['ma_khuyen_mai'];
        $orm->chiet_khau_phan_tram = $data['chiet_khau_phan_tram'] ?? null;
        $orm->so_tien_giam_gia = $data['so_tien_giam_gia'] ?? null;
        $orm->ngay_bat_dau = $data['ngay_bat_dau'] ?? null;
        $orm->ngay_ket_thuc = $data['ngay_ket_thuc'] ?? null;
        $orm->save();
        return redirect()->route('admin.khuyen-mai');
    }

    public function getSua($id)
    {
        $khuyenMai = KhuyenMai::findOrFail($id);
        return view('admin.khuyen_mai.sua', compact('khuyenMai'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'ten_khuyen_mai' => 'required|string|max:150',
            'ma_khuyen_mai' => 'required|string|max:50',
            'chiet_khau_phan_tram' => 'nullable|numeric',
            'so_tien_giam_gia' => 'nullable|numeric',
            'ngay_bat_dau' => 'nullable|date',
            'ngay_ket_thuc' => 'nullable|date',
        ]);

        $orm = KhuyenMai::findOrFail($id);
        $orm->ten_khuyen_mai = $data['ten_khuyen_mai'];
        $orm->ma_khuyen_mai = $data['ma_khuyen_mai'];
        $orm->chiet_khau_phan_tram = $data['chiet_khau_phan_tram'] ?? null;
        $orm->so_tien_giam_gia = $data['so_tien_giam_gia'] ?? null;
        $orm->ngay_bat_dau = $data['ngay_bat_dau'] ?? null;
        $orm->ngay_ket_thuc = $data['ngay_ket_thuc'] ?? null;
        $orm->save();
        return redirect()->route('admin.khuyen-mai');
    }

    public function getXoa($id)
    {
        $orm = KhuyenMai::findOrFail($id);
        $orm->delete();
        return redirect()->route('admin.khuyen-mai');
    }

    /**
     * Display the specified resource.
     */
    public function show(KhuyenMai $khuyenMai)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(KhuyenMai $khuyenMai)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, KhuyenMai $khuyenMai)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(KhuyenMai $khuyenMai)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/LoaiPhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\LoaiPhong;
use Illuminate\Http\Request;
use Str;

class LoaiPhongController extends Controller
{
    public function getDanhSach()
    {
        $loaiPhongs = LoaiPhong::all();
        return view('admin.loai_phong.danh_sach', compact('loaiPhongs'));
    }

    public function getThem()
    {
        return view('admin.loai_phong.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'ten_loai_phong' => 'required|string|max:100',
            'gia' => 'nullable|numeric',
            'so_nguoi' => 'nullable|integer',
            'tien_nghi' => 'nullable',
        ]);

        $orm = new LoaiPhong();
        $orm->ten_loai_phong = $data['ten_loai_phong'];
        $orm->gia = $data['gia'] ?? 0;
        $orm->so_nguoi = $data['so_nguoi'] ?? 1;
        $orm->tien_nghi = $data['tien_nghi'] ?? '';
        $orm->save();

        return redirect()->route('admin.loai-phong');
    }
    
    public function getSua($id)
    {
        $loaiPhong = LoaiPhong::findOrFail($id);
        return view('admin.loai_phong.sua', compact('loaiPhong'));
    }

    public function getXoa($id)
    {
        $orm = LoaiPhong::findOrFail($id);
        $orm->delete();
        return redirect()->route('loai-phong');
    }

    /**
     * Store a newly created resource in storage.
     */
    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'ten_loai_phong' => 'required|string|max:100',
            'gia' => 'nullable|numeric',
            'so_nguoi' => 'nullable|integer',
            'tien_nghi' => 'nullable|string',
        ]);

        $orm = LoaiPhong::findOrFail($id);
        $orm->ten_loai_phong = $data['ten_loai_phong'];
        if (isset($data['gia'])) {
            $orm->gia = $data['gia'];
        }
        if (isset($data['so_nguoi'])) {
            $orm->so_nguoi = $data['so_nguoi'];
        }
        if (isset($data['tien_nghi'])) {
            $orm->tien_nghi = $data['tien_nghi'];
        }
        $orm->save();

        return redirect()->route('admin.loai-phong');
    }


    /**
     * Display the specified resource.
     */
    public function show(LoaiPhong $loaiPhong)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(LoaiPhong $loaiPhong)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, LoaiPhong $loaiPhong)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(LoaiPhong $loaiPhong)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/PhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Phong;
use App\Models\LoaiPhong;
use Illuminate\Http\Request;

class PhongController extends Controller
{
    
    public function getDanhSach()
    {
        $phongs = Phong::all();
        return view('admin.phong.danh_sach', compact('phongs'));
    }

    public function getThem()
    {
        $loaiPhongs = LoaiPhong::all();
        return view('admin.phong.them', compact('loaiPhongs'));
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'so_phong' => 'required|string|max:150',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'tinh_trang' => 'nullable|string|max:50',
        ]);

        $orm = new Phong();
        $orm->so_phong = $data['so_phong'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        // Use the migration default when no value is provided to avoid inserting explicit NULL
        $orm->tinh_trang = $data['tinh_trang'] ?? 'available';
        $orm->save();
        return redirect()->route('admin.phong');
    }

    public function getSua($id)
    {
        $phong = Phong::findOrFail($id);
        $loaiPhongs = LoaiPhong::all();
        return view('admin.phong.sua', compact('phong', 'loaiPhongs'));
    }
    
    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'so_phong' => 'required|string|max:150',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'tinh_trang' => 'nullable|string|max:50',
        ]);

        $orm = Phong::findOrFail($id);
        $orm->so_phong = $data['so_phong'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        $orm->tinh_trang = $data['tinh_trang'] ?? $orm->tinh_trang;
        $orm->save();
        return redirect()->route('admin.phong');
    }

    public function getXoa($id)
    {
        $orm = Phong::findOrFail($id);
        $orm->delete();
        return redirect()->route('admin.phong');
    }
    /**
     * Display the specified resource.
     */
    public function show(Phong $phong)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(Phong $phong)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, Phong $phong)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(Phong $phong)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/QuanTriVienController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Models\User;
use Illuminate\Validation\Rule;

class QuanTriVienController extends Controller
{
    public function getDanhSach()
    {
        $admins = User::where('role', 'admin')->get();
        return view('admin.quan_tri_vien.danh_sach', compact('admins'));
    }

    public function getThem()
    {
        return view('admin.quan_tri_vien.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => 'required|email|unique:users,email',
            'phone' => 'nullable|string|max:15|unique:users,phone',
            'cccd' => 'nullable|string|max:20|unique:users,cccd',
            'password' => 'required|string|min:6',
        ]);

        $orm = new User();
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? null;
        $orm->cccd = $data['cccd'] ?? null;
        $orm->role = 'admin';
        $orm->password = $data['password'];
        $orm->save();
        return redirect()->route('quan-tri-vien');
    }

    public function getSua($id)
    {
        $admin = User::findOrFail($id);
        return view('admin.quan_tri_vien.sua', compact('admin'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => ['required','email', Rule::unique('users','email')->ignore($id)],
            'phone' => ['nullable','string','max:15', Rule::unique('users','phone')->ignore($id)],
            'cccd' => ['nullable','string','max:20', Rule::unique('users','cccd')->ignore($id)],
            'password' => 'nullable|string|min:6',
        ]);

        $orm = User::findOrFail($id);
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'] ?? $orm->phone;
        $orm->cccd = $data['cccd'] ?? $orm->cccd;
        if (!empty($data['password'])) {
            $orm->password = $data['password'];
        }
        $orm->save();
        return redirect()->route('quan-tri-vien');
    }

    public function getXoa($id)
    {
        $orm = User::findOrFail($id);
        $orm->delete();
        return redirect()->route('quan-tri-vien');
    }
}
</file>

<file path="app/Http/Controllers/Admin/UserController.php">
<?php

namespace App\Http\Controllers\Admin; // Namespace chuẩn

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Validation\Rule;
use App\Models\User;
use Illuminate\Support\Facades\Hash;

class UserController extends Controller
{
    /**
     * 1. HÀM INDEX (Sửa lỗi Method not exist)
     * Hiển thị danh sách khách hàng (Chỉ lấy Role = user)
     */
    public function getDanhSach()
    {
        // Thêm ->paginate(10) để thực thi câu lệnh và phân trang
        // Nếu thiếu ->paginate() hoặc ->get(), biến $users chỉ là câu lệnh SQL chưa chạy -> Lỗi View
        $users = User::where('role', 'user')
                     ->orderBy('created_at', 'desc')
                     ->paginate(10);

        return view('admin.users.danh_sach', compact('users'));
    }

    /**
     * Hiển thị form thêm mới
     */
    public function getThem()
    {
        return view('admin.users.them');
    }

    /**
     * Xử lý lưu khách hàng mới
     */
    public function postThem(Request $request)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => 'required|email|unique:users,email',
            'phone' => 'required|string|max:15|unique:users,phone',
            'cccd' => 'required|string|max:20|unique:users,cccd',
            'username' => 'required|string|max:100|unique:users,username',
            'password' => 'required|string|min:6',
        ]);

        $orm = new User();
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'];
        $orm->cccd = $data['cccd'];
        $orm->username = $data['username'];
        $orm->role = 'user'; // Gán cứng là user
        $orm->password = Hash::make($data['password']);
        $orm->save();

        return redirect()->route('admin.users')->with('success', 'Thêm khách hàng thành công!');
    }

    /**
     * Hiển thị form sửa
     */
    public function getSua($id)
    {
        $user = User::findOrFail($id);
        return view('admin.users.sua', compact('user'));
    }

    /**
     * Xử lý cập nhật
     */
    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => ['required', 'email', Rule::unique('users', 'email')->ignore($id)],
            'phone' => ['required', 'string', 'max:15', Rule::unique('users', 'phone')->ignore($id)],
            'cccd' => ['required', 'string', 'max:20', Rule::unique('users', 'cccd')->ignore($id)],
            'username' => ['required', 'string', 'max:100', Rule::unique('users', 'username')->ignore($id)],
            'password' => 'nullable|string|min:6',
        ]);

        $orm = User::findOrFail($id);
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'];
        $orm->cccd = $data['cccd'];
        $orm->username = $data['username'];
        
        if (!empty($data['password'])) {
            $orm->password = Hash::make($data['password']);
        }
        
        $orm->save();
        
        return redirect()->route('admin.users')->with('success', 'Cập nhật thành công!');
    }

    /**
     * Xóa tài khoản
     */
    public function getXoa($id)
    {
        $orm = User::findOrFail($id);
        
        if ($orm->role === 'admin') {
            return redirect()->route('admin.users')->with('error', 'Không thể xóa Admin!');
        }

        $orm->delete();
        return redirect()->route('admin.users')->with('success', 'Đã xóa khách hàng.');
    }
}
</file>

<file path="app/Http/Controllers/Auth/ConfirmPasswordController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\ConfirmsPasswords;

class ConfirmPasswordController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Confirm Password Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling password confirmations and
    | uses a simple trait to include the behavior. You're free to explore
    | this trait and override any functions that require customization.
    |
    */

    use ConfirmsPasswords;

    /**
     * Where to redirect users when the intended url fails.
     *
     * @var string
     */
    protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('auth');
    }
}
</file>

<file path="app/Http/Controllers/Auth/ForgotPasswordController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\SendsPasswordResetEmails;

class ForgotPasswordController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Password Reset Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling password reset emails and
    | includes a trait which assists in sending these notifications from
    | your application to your users. Feel free to explore this trait.
    |
    */

    use SendsPasswordResetEmails;
}
</file>

<file path="app/Http/Controllers/Auth/ResetPasswordController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\ResetsPasswords;

class ResetPasswordController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Password Reset Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling password reset requests
    | and uses a simple trait to include this behavior. You're free to
    | explore this trait and override any methods you wish to tweak.
    |
    */

    use ResetsPasswords;

    /**
     * Where to redirect users after resetting their password.
     *
     * @var string
     */
    protected $redirectTo = '/home';
}
</file>

<file path="app/Http/Controllers/Auth/VerificationController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\VerifiesEmails;

class VerificationController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Email Verification Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling email verification for any
    | user that recently registered with the application. Emails may also
    | be re-sent if the user didn't receive the original email message.
    |
    */

    use VerifiesEmails;

    /**
     * Where to redirect users after verification.
     *
     * @var string
     */
    protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('auth');
        $this->middleware('signed')->only('verify');
        $this->middleware('throttle:6,1')->only('verify', 'resend');
    }
}
</file>

<file path="app/Http/Controllers/Client/BookingController.php">
<?php

namespace App\Http\Controllers\Client;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Models\LoaiPhong;
use App\Models\DatPhong;
use App\Models\ChiTietDatPhong;
use App\Models\Phong;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\DB;
use Carbon\Carbon;

class BookingController extends Controller
{
    public function create(Request $request)
    {
        $loaiPhongId = $request->room_id;
        $checkIn = $request->checkin;
        $checkOut = $request->checkout;

        if (!$loaiPhongId || !$checkIn || !$checkOut) {
            return redirect()->route('phong')->with('error', 'Vui lòng chọn ngày và loại phòng trước!');
        }

        $roomType = LoaiPhong::findOrFail($loaiPhongId);
        
        $start = Carbon::parse($checkIn);
        $end = Carbon::parse($checkOut);
        $days = $start->diffInDays($end) ?: 1;
        
        // SỬA: gia_dem -> gia
        $totalPrice = $roomType->gia * $days;

        return view('client.booking.create', compact('roomType', 'checkIn', 'checkOut', 'days', 'totalPrice'));
    }

    public function store(Request $request)
    {
        $request->validate([
            'room_type_id' => 'required|exists:loai_phongs,id',
            'check_in' => 'required|date|after_or_equal:today',
            'check_out' => 'required|date|after:check_in',
        ]);

        DB::beginTransaction();
        try {
            $phongTrong = Phong::where('loai_phong_id', $request->room_type_id)
                               ->where('tinh_trang', 'available')
                               ->first();

            if (!$phongTrong) {
                return back()->with('error', 'Rất tiếc, loại phòng này vừa hết chỗ.');
            }

            $loaiPhong = LoaiPhong::find($request->room_type_id);
            $days = Carbon::parse($request->check_in)->diffInDays(Carbon::parse($request->check_out)) ?: 1;
            
            // SỬA: gia_dem -> gia
            $total = $loaiPhong->gia * $days;

            // Tạo đơn DatPhong
            $booking = DatPhong::create([
                'user_id' => Auth::id(),
                'ngay_den' => $request->check_in,
                'ngay_di' => $request->check_out,
                'tong_tien' => $total,
                'trang_thai' => 'pending',
                'payment_status' => 'unpaid',
            ]);

            // Tạo ChiTietDatPhong
            ChiTietDatPhong::create([
                'dat_phong_id' => $booking->id,
                'loai_phong_id' => $loaiPhong->id,
                'phong_id' => $phongTrong->id,
                'so_luong' => 1,
                'don_gia' => $loaiPhong->gia, // SỬA: gia_dem -> gia
                'thanh_tien' => $total,
            ]);

            DB::commit();
            return redirect()->route('booking.success')->with('booking_id', $booking->id);

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi hệ thống: ' . $e->getMessage());
        }
    }

    public function success() {
        return view('client.booking.success');
    }
}
</file>

<file path="app/Http/Controllers/Client/PageController.php">
<?php

namespace App\Http\Controllers\Client;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Models\LoaiPhong;
use App\Models\KhuyenMai;
use Carbon\Carbon;

class PageController extends Controller
{
    /**
     * Trang chủ: Hiển thị phòng nổi bật và khuyến mãi hot
     */
    public function home()
    {
        // Lấy 3 loại phòng để show ở trang chủ
        $loaiPhongs = LoaiPhong::take(3)->get();
        
        // Lấy khuyến mãi còn hạn sử dụng
        $khuyenMais = KhuyenMai::where('ngay_ket_thuc', '>=', Carbon::today())->take(2)->get();

        return view('home', compact('loaiPhongs', 'khuyenMais'));
    }

    /**
     * Danh sách phòng: Có chức năng lọc/tìm kiếm
     */
    public function rooms(Request $request)
    {
        $query = LoaiPhong::query();

        // Nếu khách tìm kiếm theo số người
        if ($request->has('guests') && $request->guests > 0) {
            $query->where('suc_chua', '>=', $request->guests);
        }

        // Lấy danh sách phân trang (9 phòng/trang)
        $rooms = $query->paginate(9);

        return view('client.rooms.index', compact('rooms'));
    }

    /**
     * Chi tiết phòng: Xem ảnh, tiện nghi và form chọn ngày
     */
    public function roomDetail($id)
    {
        $room = LoaiPhong::with('phongs')->findOrFail($id);
        
        // Đếm số phòng trống thực tế (status = available)
        // Lưu ý: Cần đảm bảo bạn có cột 'tinh_trang' trong bảng 'phongs'
        $phongTrong = $room->phongs()->where('tinh_trang', 'available')->count();

        return view('client.rooms.detail', compact('room', 'phongTrong'));
    }

    /**
     * Danh sách khuyến mãi
     */
    public function promotions()
    {
        $promotions = KhuyenMai::where('ngay_ket_thuc', '>=', Carbon::today())->get();
        return view('client.promotions.index', compact('promotions'));
    }
}
</file>

<file path="app/Http/Controllers/Controller.php">
<?php

namespace App\Http\Controllers;

use Illuminate\Foundation\Auth\Access\AuthorizesRequests;
use Illuminate\Foundation\Validation\ValidatesRequests;
use Illuminate\Routing\Controller as BaseController;

class Controller extends BaseController
{
    use AuthorizesRequests, ValidatesRequests;
}
</file>

<file path="app/Http/Controllers/ProfileController.php">
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Validation\Rule;

class ProfileController extends Controller
{
    /**
     * Hiển thị form cập nhật hồ sơ
     */
    public function edit()
    {
        $user = Auth::user();
        return view('client.profile.edit', compact('user'));
    }

    /**
     * Lưu thông tin hồ sơ
     */
    public function update(Request $request)
    {
        $user = Auth::user();

        // Validate dữ liệu
        $request->validate([
            'name' => 'required|string|max:255',
            'email' => ['required', 'email', Rule::unique('users')->ignore($user->id)],
            'phone' => ['required', 'string', 'max:15', Rule::unique('users')->ignore($user->id)],
            'cccd' => ['required', 'string', 'max:20', Rule::unique('users')->ignore($user->id)],
        ], [
            'phone.required' => 'Số điện thoại là bắt buộc để đặt phòng.',
            'cccd.required' => 'CCCD/CMND là bắt buộc để làm thủ tục lưu trú.',
        ]);

        // Cập nhật
        $user->update([
            'name' => $request->name,
            'email' => $request->email,
            'phone' => $request->phone,
            'cccd' => $request->cccd,
        ]);

        // QUAN TRỌNG: Nếu trước đó User bị chặn khi đặt phòng (do thiếu thông tin),
        // hệ thống sẽ lấy lại URL cũ và chuyển hướng họ quay lại trang đặt phòng.
        if (session()->has('url.intended')) {
            return redirect(session()->pull('url.intended'));
        }

        return redirect()->route('profile.edit')->with('success', 'Cập nhật hồ sơ thành công!');
    }
}
</file>

<file path="app/Http/Middleware/AdminMiddleware.php">
<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;

class AdminMiddleware
{
    /**
     * Handle an incoming request.
     */
    public function handle(Request $request, Closure $next)
    {
        $user = auth()->user();
        if (!$user || ($user->role ?? 'user') !== 'admin') {
            if ($request->expectsJson()) {
                return response()->json(['message' => 'Forbidden.'], 403);
            }
            return redirect()->route('home');
        }
        return $next($request);
    }
}
</file>

<file path="app/Http/Middleware/CheckUserProfile.php">
<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class CheckUserProfile
{
    /**
     * Handle an incoming request.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  \Closure  $next
     * @return mixed
     */
    public function handle(Request $request, Closure $next)
    {
        // 1. Kiểm tra đăng nhập (để chắc chắn)
        if (!Auth::check()) {
            return redirect()->route('login');
        }

        $user = Auth::user();

        // 2. Kiểm tra xem user có thiếu số điện thoại hoặc CCCD không
        if (empty($user->phone) || empty($user->cccd)) {
            
            // Lưu lại URL hiện tại để sau khi cập nhật xong thì redirect lại trang đặt phòng
            session()->put('url.intended', $request->url());

            // Chuyển hướng sang trang cập nhật hồ sơ với thông báo lỗi
            return redirect()->route('profile.edit')
                ->with('error', 'Vui lòng cập nhật đầy đủ Số điện thoại và CCCD để tiếp tục đặt phòng!');
        }

        // 3. Nếu đủ thông tin thì cho đi tiếp
        return $next($request);
    }
}
</file>

<file path="app/Models/HoaDon.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class HoaDon extends Model
{

    protected $fillable = [
        'dat_phong_id',
        'ma_hoa_don',
        'ngay_lap',
        'tong_tien',
        'trang_thai',
    ];

    /**
     * The booking (DatPhong) this invoice belongs to.
     */
    public function datPhong(): BelongsTo
    {
        return $this->belongsTo(DatPhong::class);
    }
}
</file>

<file path="app/Models/LoaiPhong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\HasMany;

class LoaiPhong extends Model
{

	/**
	 * Get the rooms for this LoaiPhong.
	 */
	public function phongs(): HasMany
	{
		return $this->hasMany(Phong::class);
	}

	/**
	 * Get the booking details for this LoaiPhong.
	 */
	public function chiTietDatPhongs(): HasMany
	{
		return $this->hasMany(ChiTietDatPhong::class, 'loai_phong_id');
	}
}
</file>

<file path="app/Providers/AppServiceProvider.php">
<?php

namespace App\Providers;

use Illuminate\Support\ServiceProvider;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Register any application services.
     */
    public function register(): void
    {
        //
    }

    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        //
    }
}
</file>

<file path="artisan">
#!/usr/bin/env php
<?php

use Illuminate\Foundation\Application;
use Symfony\Component\Console\Input\ArgvInput;

define('LARAVEL_START', microtime(true));

// Register the Composer autoloader...
require __DIR__.'/vendor/autoload.php';

// Bootstrap Laravel and handle the command...
/** @var Application $app */
$app = require_once __DIR__.'/bootstrap/app.php';

$status = $app->handleCommand(new ArgvInput);

exit($status);
</file>

<file path="bootstrap/cache/.gitignore">
*
!.gitignore
</file>

<file path="bootstrap/providers.php">
<?php

return [
    App\Providers\AppServiceProvider::class,
];
</file>

<file path="composer.json">
{
    "$schema": "https://getcomposer.org/schema.json",
    "name": "laravel/laravel",
    "type": "project",
    "description": "The skeleton application for the Laravel framework.",
    "keywords": ["laravel", "framework"],
    "license": "MIT",
    "require": {
        "php": "^8.2",
        "laravel/framework": "^12.0",
        "laravel/tinker": "^2.10.1",
        "laravel/ui": "^4.6"
    },
    "require-dev": {
        "fakerphp/faker": "^1.23",
        "laravel/pail": "^1.2.2",
        "laravel/pint": "^1.24",
        "laravel/sail": "^1.41",
        "mockery/mockery": "^1.6",
        "nunomaduro/collision": "^8.6",
        "phpunit/phpunit": "^11.5.3"
    },
    "autoload": {
        "psr-4": {
            "App\\": "app/",
            "Database\\Factories\\": "database/factories/",
            "Database\\Seeders\\": "database/seeders/"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "Tests\\": "tests/"
        }
    },
    "scripts": {
        "setup": [
            "composer install",
            "@php -r \"file_exists('.env') || copy('.env.example', '.env');\"",
            "@php artisan key:generate",
            "@php artisan migrate --force",
            "npm install",
            "npm run build"
        ],
        "dev": [
            "Composer\\Config::disableProcessTimeout",
            "npx concurrently -c \"#93c5fd,#c4b5fd,#fb7185,#fdba74\" \"php artisan serve\" \"php artisan queue:listen --tries=1\" \"php artisan pail --timeout=0\" \"npm run dev\" --names=server,queue,logs,vite --kill-others"
        ],
        "test": [
            "@php artisan config:clear --ansi",
            "@php artisan test"
        ],
        "post-autoload-dump": [
            "Illuminate\\Foundation\\ComposerScripts::postAutoloadDump",
            "@php artisan package:discover --ansi"
        ],
        "post-update-cmd": [
            "@php artisan vendor:publish --tag=laravel-assets --ansi --force"
        ],
        "post-root-package-install": [
            "@php -r \"file_exists('.env') || copy('.env.example', '.env');\""
        ],
        "post-create-project-cmd": [
            "@php artisan key:generate --ansi",
            "@php -r \"file_exists('database/database.sqlite') || touch('database/database.sqlite');\"",
            "@php artisan migrate --graceful --ansi"
        ],
        "pre-package-uninstall": [
            "Illuminate\\Foundation\\ComposerScripts::prePackageUninstall"
        ]
    },
    "extra": {
        "laravel": {
            "dont-discover": []
        }
    },
    "config": {
        "optimize-autoloader": true,
        "preferred-install": "dist",
        "sort-packages": true,
        "allow-plugins": {
            "pestphp/pest-plugin": true,
            "php-http/discovery": true
        }
    },
    "minimum-stability": "stable",
    "prefer-stable": true
}
</file>

<file path="config/app.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Application Name
    |--------------------------------------------------------------------------
    |
    | This value is the name of your application, which will be used when the
    | framework needs to place the application's name in a notification or
    | other UI elements where an application name needs to be displayed.
    |
    */

    'name' => env('APP_NAME', 'Laravel'),

    /*
    |--------------------------------------------------------------------------
    | Application Environment
    |--------------------------------------------------------------------------
    |
    | This value determines the "environment" your application is currently
    | running in. This may determine how you prefer to configure various
    | services the application utilizes. Set this in your ".env" file.
    |
    */

    'env' => env('APP_ENV', 'production'),

    /*
    |--------------------------------------------------------------------------
    | Application Debug Mode
    |--------------------------------------------------------------------------
    |
    | When your application is in debug mode, detailed error messages with
    | stack traces will be shown on every error that occurs within your
    | application. If disabled, a simple generic error page is shown.
    |
    */

    'debug' => (bool) env('APP_DEBUG', false),

    /*
    |--------------------------------------------------------------------------
    | Application URL
    |--------------------------------------------------------------------------
    |
    | This URL is used by the console to properly generate URLs when using
    | the Artisan command line tool. You should set this to the root of
    | the application so that it's available within Artisan commands.
    |
    */

    'url' => env('APP_URL', 'http://localhost'),

    /*
    |--------------------------------------------------------------------------
    | Application Timezone
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default timezone for your application, which
    | will be used by the PHP date and date-time functions. The timezone
    | is set to "UTC" by default as it is suitable for most use cases.
    |
    */

    'timezone' => 'UTC',

    /*
    |--------------------------------------------------------------------------
    | Application Locale Configuration
    |--------------------------------------------------------------------------
    |
    | The application locale determines the default locale that will be used
    | by Laravel's translation / localization methods. This option can be
    | set to any locale for which you plan to have translation strings.
    |
    */

    'locale' => env('APP_LOCALE', 'en'),

    'fallback_locale' => env('APP_FALLBACK_LOCALE', 'en'),

    'faker_locale' => env('APP_FAKER_LOCALE', 'en_US'),

    /*
    |--------------------------------------------------------------------------
    | Encryption Key
    |--------------------------------------------------------------------------
    |
    | This key is utilized by Laravel's encryption services and should be set
    | to a random, 32 character string to ensure that all encrypted values
    | are secure. You should do this prior to deploying the application.
    |
    */

    'cipher' => 'AES-256-CBC',

    'key' => env('APP_KEY'),

    'previous_keys' => [
        ...array_filter(
            explode(',', (string) env('APP_PREVIOUS_KEYS', ''))
        ),
    ],

    /*
    |--------------------------------------------------------------------------
    | Maintenance Mode Driver
    |--------------------------------------------------------------------------
    |
    | These configuration options determine the driver used to determine and
    | manage Laravel's "maintenance mode" status. The "cache" driver will
    | allow maintenance mode to be controlled across multiple machines.
    |
    | Supported drivers: "file", "cache"
    |
    */

    'maintenance' => [
        'driver' => env('APP_MAINTENANCE_DRIVER', 'file'),
        'store' => env('APP_MAINTENANCE_STORE', 'database'),
    ],

];
</file>

<file path="config/auth.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Authentication Defaults
    |--------------------------------------------------------------------------
    |
    | This option defines the default authentication "guard" and password
    | reset "broker" for your application. You may change these values
    | as required, but they're a perfect start for most applications.
    |
    */

    'defaults' => [
        'guard' => env('AUTH_GUARD', 'web'),
        'passwords' => env('AUTH_PASSWORD_BROKER', 'users'),
    ],

    /*
    |--------------------------------------------------------------------------
    | Authentication Guards
    |--------------------------------------------------------------------------
    |
    | Next, you may define every authentication guard for your application.
    | Of course, a great default configuration has been defined for you
    | which utilizes session storage plus the Eloquent user provider.
    |
    | All authentication guards have a user provider, which defines how the
    | users are actually retrieved out of your database or other storage
    | system used by the application. Typically, Eloquent is utilized.
    |
    | Supported: "session"
    |
    */

    'guards' => [
        'web' => [
            'driver' => 'session',
            'provider' => 'users',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | User Providers
    |--------------------------------------------------------------------------
    |
    | All authentication guards have a user provider, which defines how the
    | users are actually retrieved out of your database or other storage
    | system used by the application. Typically, Eloquent is utilized.
    |
    | If you have multiple user tables or models you may configure multiple
    | providers to represent the model / table. These providers may then
    | be assigned to any extra authentication guards you have defined.
    |
    | Supported: "database", "eloquent"
    |
    */

    'providers' => [
        'users' => [
            'driver' => 'eloquent',
            'model' => env('AUTH_MODEL', App\Models\User::class),
        ],

        // 'users' => [
        //     'driver' => 'database',
        //     'table' => 'users',
        // ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Resetting Passwords
    |--------------------------------------------------------------------------
    |
    | These configuration options specify the behavior of Laravel's password
    | reset functionality, including the table utilized for token storage
    | and the user provider that is invoked to actually retrieve users.
    |
    | The expiry time is the number of minutes that each reset token will be
    | considered valid. This security feature keeps tokens short-lived so
    | they have less time to be guessed. You may change this as needed.
    |
    | The throttle setting is the number of seconds a user must wait before
    | generating more password reset tokens. This prevents the user from
    | quickly generating a very large amount of password reset tokens.
    |
    */

    'passwords' => [
        'users' => [
            'provider' => 'users',
            'table' => env('AUTH_PASSWORD_RESET_TOKEN_TABLE', 'password_reset_tokens'),
            'expire' => 60,
            'throttle' => 60,
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Password Confirmation Timeout
    |--------------------------------------------------------------------------
    |
    | Here you may define the number of seconds before a password confirmation
    | window expires and users are asked to re-enter their password via the
    | confirmation screen. By default, the timeout lasts for three hours.
    |
    */

    'password_timeout' => env('AUTH_PASSWORD_TIMEOUT', 10800),

];
</file>

<file path="config/cache.php">
<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Cache Store
    |--------------------------------------------------------------------------
    |
    | This option controls the default cache store that will be used by the
    | framework. This connection is utilized if another isn't explicitly
    | specified when running a cache operation inside the application.
    |
    */

    'default' => env('CACHE_STORE', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Cache Stores
    |--------------------------------------------------------------------------
    |
    | Here you may define all of the cache "stores" for your application as
    | well as their drivers. You may even define multiple stores for the
    | same cache driver to group types of items stored in your caches.
    |
    | Supported drivers: "array", "database", "file", "memcached",
    |                    "redis", "dynamodb", "octane",
    |                    "failover", "null"
    |
    */

    'stores' => [

        'array' => [
            'driver' => 'array',
            'serialize' => false,
        ],

        'database' => [
            'driver' => 'database',
            'connection' => env('DB_CACHE_CONNECTION'),
            'table' => env('DB_CACHE_TABLE', 'cache'),
            'lock_connection' => env('DB_CACHE_LOCK_CONNECTION'),
            'lock_table' => env('DB_CACHE_LOCK_TABLE'),
        ],

        'file' => [
            'driver' => 'file',
            'path' => storage_path('framework/cache/data'),
            'lock_path' => storage_path('framework/cache/data'),
        ],

        'memcached' => [
            'driver' => 'memcached',
            'persistent_id' => env('MEMCACHED_PERSISTENT_ID'),
            'sasl' => [
                env('MEMCACHED_USERNAME'),
                env('MEMCACHED_PASSWORD'),
            ],
            'options' => [
                // Memcached::OPT_CONNECT_TIMEOUT => 2000,
            ],
            'servers' => [
                [
                    'host' => env('MEMCACHED_HOST', '127.0.0.1'),
                    'port' => env('MEMCACHED_PORT', 11211),
                    'weight' => 100,
                ],
            ],
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => env('REDIS_CACHE_CONNECTION', 'cache'),
            'lock_connection' => env('REDIS_CACHE_LOCK_CONNECTION', 'default'),
        ],

        'dynamodb' => [
            'driver' => 'dynamodb',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'table' => env('DYNAMODB_CACHE_TABLE', 'cache'),
            'endpoint' => env('DYNAMODB_ENDPOINT'),
        ],

        'octane' => [
            'driver' => 'octane',
        ],

        'failover' => [
            'driver' => 'failover',
            'stores' => [
                'database',
                'array',
            ],
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Cache Key Prefix
    |--------------------------------------------------------------------------
    |
    | When utilizing the APC, database, memcached, Redis, and DynamoDB cache
    | stores, there might be other applications using the same cache. For
    | that reason, you may prefix every cache key to avoid collisions.
    |
    */

    'prefix' => env('CACHE_PREFIX', Str::slug((string) env('APP_NAME', 'laravel')).'-cache-'),

];
</file>

<file path="config/database.php">
<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Database Connection Name
    |--------------------------------------------------------------------------
    |
    | Here you may specify which of the database connections below you wish
    | to use as your default connection for database operations. This is
    | the connection which will be utilized unless another connection
    | is explicitly specified when you execute a query / statement.
    |
    */

    'default' => env('DB_CONNECTION', 'sqlite'),

    /*
    |--------------------------------------------------------------------------
    | Database Connections
    |--------------------------------------------------------------------------
    |
    | Below are all of the database connections defined for your application.
    | An example configuration is provided for each database system which
    | is supported by Laravel. You're free to add / remove connections.
    |
    */

    'connections' => [

        'sqlite' => [
            'driver' => 'sqlite',
            'url' => env('DB_URL'),
            'database' => env('DB_DATABASE', database_path('database.sqlite')),
            'prefix' => '',
            'foreign_key_constraints' => env('DB_FOREIGN_KEYS', true),
            'busy_timeout' => null,
            'journal_mode' => null,
            'synchronous' => null,
            'transaction_mode' => 'DEFERRED',
        ],

        'mysql' => [
            'driver' => 'mysql',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => env('DB_CHARSET', 'utf8mb4'),
            'collation' => env('DB_COLLATION', 'utf8mb4_unicode_ci'),
            'prefix' => '',
            'prefix_indexes' => true,
            'strict' => true,
            'engine' =>  env('DB_ENGINE', 'InnoDB'),
            'options' => extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

        'mariadb' => [
            'driver' => 'mariadb',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => env('DB_CHARSET', 'utf8mb4'),
            'collation' => env('DB_COLLATION', 'utf8mb4_unicode_ci'),
            'prefix' => '',
            'prefix_indexes' => true,
            'strict' => true,
            'engine' => null,
            'options' => extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

        'pgsql' => [
            'driver' => 'pgsql',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '5432'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => env('DB_CHARSET', 'utf8'),
            'prefix' => '',
            'prefix_indexes' => true,
            'search_path' => 'public',
            'sslmode' => 'prefer',
        ],

        'sqlsrv' => [
            'driver' => 'sqlsrv',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', 'localhost'),
            'port' => env('DB_PORT', '1433'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => env('DB_CHARSET', 'utf8'),
            'prefix' => '',
            'prefix_indexes' => true,
            // 'encrypt' => env('DB_ENCRYPT', 'yes'),
            // 'trust_server_certificate' => env('DB_TRUST_SERVER_CERTIFICATE', 'false'),
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Migration Repository Table
    |--------------------------------------------------------------------------
    |
    | This table keeps track of all the migrations that have already run for
    | your application. Using this information, we can determine which of
    | the migrations on disk haven't actually been run on the database.
    |
    */

    'migrations' => [
        'table' => 'migrations',
        'update_date_on_publish' => true,
    ],

    /*
    |--------------------------------------------------------------------------
    | Redis Databases
    |--------------------------------------------------------------------------
    |
    | Redis is an open source, fast, and advanced key-value store that also
    | provides a richer body of commands than a typical key-value system
    | such as Memcached. You may define your connection settings here.
    |
    */

    'redis' => [

        'client' => env('REDIS_CLIENT', 'phpredis'),

        'options' => [
            'cluster' => env('REDIS_CLUSTER', 'redis'),
            'prefix' => env('REDIS_PREFIX', Str::slug((string) env('APP_NAME', 'laravel')).'-database-'),
            'persistent' => env('REDIS_PERSISTENT', false),
        ],

        'default' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_DB', '0'),
            'max_retries' => env('REDIS_MAX_RETRIES', 3),
            'backoff_algorithm' => env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),
            'backoff_base' => env('REDIS_BACKOFF_BASE', 100),
            'backoff_cap' => env('REDIS_BACKOFF_CAP', 1000),
        ],

        'cache' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_CACHE_DB', '1'),
            'max_retries' => env('REDIS_MAX_RETRIES', 3),
            'backoff_algorithm' => env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),
            'backoff_base' => env('REDIS_BACKOFF_BASE', 100),
            'backoff_cap' => env('REDIS_BACKOFF_CAP', 1000),
        ],

    ],

];
</file>

<file path="config/filesystems.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Filesystem Disk
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default filesystem disk that should be used
    | by the framework. The "local" disk, as well as a variety of cloud
    | based disks are available to your application for file storage.
    |
    */

    'default' => env('FILESYSTEM_DISK', 'local'),

    /*
    |--------------------------------------------------------------------------
    | Filesystem Disks
    |--------------------------------------------------------------------------
    |
    | Below you may configure as many filesystem disks as necessary, and you
    | may even configure multiple disks for the same driver. Examples for
    | most supported storage drivers are configured here for reference.
    |
    | Supported drivers: "local", "ftp", "sftp", "s3"
    |
    */

    'disks' => [

        'local' => [
            'driver' => 'local',
            'root' => storage_path('app/private'),
            'serve' => true,
            'throw' => false,
            'report' => false,
        ],

        'public' => [
            'driver' => 'local',
            'root' => storage_path('app/public'),
            'url' => env('APP_URL').'/storage',
            'visibility' => 'public',
            'throw' => false,
            'report' => false,
        ],

        's3' => [
            'driver' => 's3',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION'),
            'bucket' => env('AWS_BUCKET'),
            'url' => env('AWS_URL'),
            'endpoint' => env('AWS_ENDPOINT'),
            'use_path_style_endpoint' => env('AWS_USE_PATH_STYLE_ENDPOINT', false),
            'throw' => false,
            'report' => false,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Symbolic Links
    |--------------------------------------------------------------------------
    |
    | Here you may configure the symbolic links that will be created when the
    | `storage:link` Artisan command is executed. The array keys should be
    | the locations of the links and the values should be their targets.
    |
    */

    'links' => [
        public_path('storage') => storage_path('app/public'),
    ],

];
</file>

<file path="config/logging.php">
<?php

use Monolog\Handler\NullHandler;
use Monolog\Handler\StreamHandler;
use Monolog\Handler\SyslogUdpHandler;
use Monolog\Processor\PsrLogMessageProcessor;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Log Channel
    |--------------------------------------------------------------------------
    |
    | This option defines the default log channel that is utilized to write
    | messages to your logs. The value provided here should match one of
    | the channels present in the list of "channels" configured below.
    |
    */

    'default' => env('LOG_CHANNEL', 'stack'),

    /*
    |--------------------------------------------------------------------------
    | Deprecations Log Channel
    |--------------------------------------------------------------------------
    |
    | This option controls the log channel that should be used to log warnings
    | regarding deprecated PHP and library features. This allows you to get
    | your application ready for upcoming major versions of dependencies.
    |
    */

    'deprecations' => [
        'channel' => env('LOG_DEPRECATIONS_CHANNEL', 'null'),
        'trace' => env('LOG_DEPRECATIONS_TRACE', false),
    ],

    /*
    |--------------------------------------------------------------------------
    | Log Channels
    |--------------------------------------------------------------------------
    |
    | Here you may configure the log channels for your application. Laravel
    | utilizes the Monolog PHP logging library, which includes a variety
    | of powerful log handlers and formatters that you're free to use.
    |
    | Available drivers: "single", "daily", "slack", "syslog",
    |                    "errorlog", "monolog", "custom", "stack"
    |
    */

    'channels' => [

        'stack' => [
            'driver' => 'stack',
            'channels' => explode(',', (string) env('LOG_STACK', 'single')),
            'ignore_exceptions' => false,
        ],

        'single' => [
            'driver' => 'single',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'daily' => [
            'driver' => 'daily',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'days' => env('LOG_DAILY_DAYS', 14),
            'replace_placeholders' => true,
        ],

        'slack' => [
            'driver' => 'slack',
            'url' => env('LOG_SLACK_WEBHOOK_URL'),
            'username' => env('LOG_SLACK_USERNAME', 'Laravel Log'),
            'emoji' => env('LOG_SLACK_EMOJI', ':boom:'),
            'level' => env('LOG_LEVEL', 'critical'),
            'replace_placeholders' => true,
        ],

        'papertrail' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => env('LOG_PAPERTRAIL_HANDLER', SyslogUdpHandler::class),
            'handler_with' => [
                'host' => env('PAPERTRAIL_URL'),
                'port' => env('PAPERTRAIL_PORT'),
                'connectionString' => 'tls://'.env('PAPERTRAIL_URL').':'.env('PAPERTRAIL_PORT'),
            ],
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'stderr' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => StreamHandler::class,
            'handler_with' => [
                'stream' => 'php://stderr',
            ],
            'formatter' => env('LOG_STDERR_FORMATTER'),
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'syslog' => [
            'driver' => 'syslog',
            'level' => env('LOG_LEVEL', 'debug'),
            'facility' => env('LOG_SYSLOG_FACILITY', LOG_USER),
            'replace_placeholders' => true,
        ],

        'errorlog' => [
            'driver' => 'errorlog',
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'null' => [
            'driver' => 'monolog',
            'handler' => NullHandler::class,
        ],

        'emergency' => [
            'path' => storage_path('logs/laravel.log'),
        ],

    ],

];
</file>

<file path="config/mail.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Mailer
    |--------------------------------------------------------------------------
    |
    | This option controls the default mailer that is used to send all email
    | messages unless another mailer is explicitly specified when sending
    | the message. All additional mailers can be configured within the
    | "mailers" array. Examples of each type of mailer are provided.
    |
    */

    'default' => env('MAIL_MAILER', 'log'),

    /*
    |--------------------------------------------------------------------------
    | Mailer Configurations
    |--------------------------------------------------------------------------
    |
    | Here you may configure all of the mailers used by your application plus
    | their respective settings. Several examples have been configured for
    | you and you are free to add your own as your application requires.
    |
    | Laravel supports a variety of mail "transport" drivers that can be used
    | when delivering an email. You may specify which one you're using for
    | your mailers below. You may also add additional mailers if needed.
    |
    | Supported: "smtp", "sendmail", "mailgun", "ses", "ses-v2",
    |            "postmark", "resend", "log", "array",
    |            "failover", "roundrobin"
    |
    */

    'mailers' => [

        'smtp' => [
            'transport' => 'smtp',
            'scheme' => env('MAIL_SCHEME'),
            'url' => env('MAIL_URL'),
            'host' => env('MAIL_HOST', '127.0.0.1'),
            'port' => env('MAIL_PORT', 2525),
            'username' => env('MAIL_USERNAME'),
            'password' => env('MAIL_PASSWORD'),
            'timeout' => null,
            'local_domain' => env('MAIL_EHLO_DOMAIN', parse_url((string) env('APP_URL', 'http://localhost'), PHP_URL_HOST)),
        ],

        'ses' => [
            'transport' => 'ses',
        ],

        'postmark' => [
            'transport' => 'postmark',
            // 'message_stream_id' => env('POSTMARK_MESSAGE_STREAM_ID'),
            // 'client' => [
            //     'timeout' => 5,
            // ],
        ],

        'resend' => [
            'transport' => 'resend',
        ],

        'sendmail' => [
            'transport' => 'sendmail',
            'path' => env('MAIL_SENDMAIL_PATH', '/usr/sbin/sendmail -bs -i'),
        ],

        'log' => [
            'transport' => 'log',
            'channel' => env('MAIL_LOG_CHANNEL'),
        ],

        'array' => [
            'transport' => 'array',
        ],

        'failover' => [
            'transport' => 'failover',
            'mailers' => [
                'smtp',
                'log',
            ],
            'retry_after' => 60,
        ],

        'roundrobin' => [
            'transport' => 'roundrobin',
            'mailers' => [
                'ses',
                'postmark',
            ],
            'retry_after' => 60,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Global "From" Address
    |--------------------------------------------------------------------------
    |
    | You may wish for all emails sent by your application to be sent from
    | the same address. Here you may specify a name and address that is
    | used globally for all emails that are sent by your application.
    |
    */

    'from' => [
        'address' => env('MAIL_FROM_ADDRESS', 'hello@example.com'),
        'name' => env('MAIL_FROM_NAME', 'Example'),
    ],

];
</file>

<file path="config/queue.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Queue Connection Name
    |--------------------------------------------------------------------------
    |
    | Laravel's queue supports a variety of backends via a single, unified
    | API, giving you convenient access to each backend using identical
    | syntax for each. The default queue connection is defined below.
    |
    */

    'default' => env('QUEUE_CONNECTION', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Queue Connections
    |--------------------------------------------------------------------------
    |
    | Here you may configure the connection options for every queue backend
    | used by your application. An example configuration is provided for
    | each backend supported by Laravel. You're also free to add more.
    |
    | Drivers: "sync", "database", "beanstalkd", "sqs", "redis",
    |          "deferred", "background", "failover", "null"
    |
    */

    'connections' => [

        'sync' => [
            'driver' => 'sync',
        ],

        'database' => [
            'driver' => 'database',
            'connection' => env('DB_QUEUE_CONNECTION'),
            'table' => env('DB_QUEUE_TABLE', 'jobs'),
            'queue' => env('DB_QUEUE', 'default'),
            'retry_after' => (int) env('DB_QUEUE_RETRY_AFTER', 90),
            'after_commit' => false,
        ],

        'beanstalkd' => [
            'driver' => 'beanstalkd',
            'host' => env('BEANSTALKD_QUEUE_HOST', 'localhost'),
            'queue' => env('BEANSTALKD_QUEUE', 'default'),
            'retry_after' => (int) env('BEANSTALKD_QUEUE_RETRY_AFTER', 90),
            'block_for' => 0,
            'after_commit' => false,
        ],

        'sqs' => [
            'driver' => 'sqs',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'prefix' => env('SQS_PREFIX', 'https://sqs.us-east-1.amazonaws.com/your-account-id'),
            'queue' => env('SQS_QUEUE', 'default'),
            'suffix' => env('SQS_SUFFIX'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'after_commit' => false,
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => env('REDIS_QUEUE_CONNECTION', 'default'),
            'queue' => env('REDIS_QUEUE', 'default'),
            'retry_after' => (int) env('REDIS_QUEUE_RETRY_AFTER', 90),
            'block_for' => null,
            'after_commit' => false,
        ],

        'deferred' => [
            'driver' => 'deferred',
        ],

        'background' => [
            'driver' => 'background',
        ],

        'failover' => [
            'driver' => 'failover',
            'connections' => [
                'database',
                'deferred',
            ],
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Job Batching
    |--------------------------------------------------------------------------
    |
    | The following options configure the database and table that store job
    | batching information. These options can be updated to any database
    | connection and table which has been defined by your application.
    |
    */

    'batching' => [
        'database' => env('DB_CONNECTION', 'sqlite'),
        'table' => 'job_batches',
    ],

    /*
    |--------------------------------------------------------------------------
    | Failed Queue Jobs
    |--------------------------------------------------------------------------
    |
    | These options configure the behavior of failed queue job logging so you
    | can control how and where failed jobs are stored. Laravel ships with
    | support for storing failed jobs in a simple file or in a database.
    |
    | Supported drivers: "database-uuids", "dynamodb", "file", "null"
    |
    */

    'failed' => [
        'driver' => env('QUEUE_FAILED_DRIVER', 'database-uuids'),
        'database' => env('DB_CONNECTION', 'sqlite'),
        'table' => 'failed_jobs',
    ],

];
</file>

<file path="config/services.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Third Party Services
    |--------------------------------------------------------------------------
    |
    | This file is for storing the credentials for third party services such
    | as Mailgun, Postmark, AWS and more. This file provides the de facto
    | location for this type of information, allowing packages to have
    | a conventional file to locate the various service credentials.
    |
    */

    'postmark' => [
        'key' => env('POSTMARK_API_KEY'),
    ],

    'resend' => [
        'key' => env('RESEND_API_KEY'),
    ],

    'ses' => [
        'key' => env('AWS_ACCESS_KEY_ID'),
        'secret' => env('AWS_SECRET_ACCESS_KEY'),
        'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
    ],

    'slack' => [
        'notifications' => [
            'bot_user_oauth_token' => env('SLACK_BOT_USER_OAUTH_TOKEN'),
            'channel' => env('SLACK_BOT_USER_DEFAULT_CHANNEL'),
        ],
    ],

];
</file>

<file path="config/session.php">
<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Session Driver
    |--------------------------------------------------------------------------
    |
    | This option determines the default session driver that is utilized for
    | incoming requests. Laravel supports a variety of storage options to
    | persist session data. Database storage is a great default choice.
    |
    | Supported: "file", "cookie", "database", "memcached",
    |            "redis", "dynamodb", "array"
    |
    */

    'driver' => env('SESSION_DRIVER', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Session Lifetime
    |--------------------------------------------------------------------------
    |
    | Here you may specify the number of minutes that you wish the session
    | to be allowed to remain idle before it expires. If you want them
    | to expire immediately when the browser is closed then you may
    | indicate that via the expire_on_close configuration option.
    |
    */

    'lifetime' => (int) env('SESSION_LIFETIME', 120),

    'expire_on_close' => env('SESSION_EXPIRE_ON_CLOSE', false),

    /*
    |--------------------------------------------------------------------------
    | Session Encryption
    |--------------------------------------------------------------------------
    |
    | This option allows you to easily specify that all of your session data
    | should be encrypted before it's stored. All encryption is performed
    | automatically by Laravel and you may use the session like normal.
    |
    */

    'encrypt' => env('SESSION_ENCRYPT', false),

    /*
    |--------------------------------------------------------------------------
    | Session File Location
    |--------------------------------------------------------------------------
    |
    | When utilizing the "file" session driver, the session files are placed
    | on disk. The default storage location is defined here; however, you
    | are free to provide another location where they should be stored.
    |
    */

    'files' => storage_path('framework/sessions'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Connection
    |--------------------------------------------------------------------------
    |
    | When using the "database" or "redis" session drivers, you may specify a
    | connection that should be used to manage these sessions. This should
    | correspond to a connection in your database configuration options.
    |
    */

    'connection' => env('SESSION_CONNECTION'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Table
    |--------------------------------------------------------------------------
    |
    | When using the "database" session driver, you may specify the table to
    | be used to store sessions. Of course, a sensible default is defined
    | for you; however, you're welcome to change this to another table.
    |
    */

    'table' => env('SESSION_TABLE', 'sessions'),

    /*
    |--------------------------------------------------------------------------
    | Session Cache Store
    |--------------------------------------------------------------------------
    |
    | When using one of the framework's cache driven session backends, you may
    | define the cache store which should be used to store the session data
    | between requests. This must match one of your defined cache stores.
    |
    | Affects: "dynamodb", "memcached", "redis"
    |
    */

    'store' => env('SESSION_STORE'),

    /*
    |--------------------------------------------------------------------------
    | Session Sweeping Lottery
    |--------------------------------------------------------------------------
    |
    | Some session drivers must manually sweep their storage location to get
    | rid of old sessions from storage. Here are the chances that it will
    | happen on a given request. By default, the odds are 2 out of 100.
    |
    */

    'lottery' => [2, 100],

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Name
    |--------------------------------------------------------------------------
    |
    | Here you may change the name of the session cookie that is created by
    | the framework. Typically, you should not need to change this value
    | since doing so does not grant a meaningful security improvement.
    |
    */

    'cookie' => env(
        'SESSION_COOKIE',
        Str::slug((string) env('APP_NAME', 'laravel')).'-session'
    ),

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Path
    |--------------------------------------------------------------------------
    |
    | The session cookie path determines the path for which the cookie will
    | be regarded as available. Typically, this will be the root path of
    | your application, but you're free to change this when necessary.
    |
    */

    'path' => env('SESSION_PATH', '/'),

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Domain
    |--------------------------------------------------------------------------
    |
    | This value determines the domain and subdomains the session cookie is
    | available to. By default, the cookie will be available to the root
    | domain and all subdomains. Typically, this shouldn't be changed.
    |
    */

    'domain' => env('SESSION_DOMAIN'),

    /*
    |--------------------------------------------------------------------------
    | HTTPS Only Cookies
    |--------------------------------------------------------------------------
    |
    | By setting this option to true, session cookies will only be sent back
    | to the server if the browser has a HTTPS connection. This will keep
    | the cookie from being sent to you when it can't be done securely.
    |
    */

    'secure' => env('SESSION_SECURE_COOKIE'),

    /*
    |--------------------------------------------------------------------------
    | HTTP Access Only
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will prevent JavaScript from accessing the
    | value of the cookie and the cookie will only be accessible through
    | the HTTP protocol. It's unlikely you should disable this option.
    |
    */

    'http_only' => env('SESSION_HTTP_ONLY', true),

    /*
    |--------------------------------------------------------------------------
    | Same-Site Cookies
    |--------------------------------------------------------------------------
    |
    | This option determines how your cookies behave when cross-site requests
    | take place, and can be used to mitigate CSRF attacks. By default, we
    | will set this value to "lax" to permit secure cross-site requests.
    |
    | See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#samesitesamesite-value
    |
    | Supported: "lax", "strict", "none", null
    |
    */

    'same_site' => env('SESSION_SAME_SITE', 'lax'),

    /*
    |--------------------------------------------------------------------------
    | Partitioned Cookies
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will tie the cookie to the top-level site for
    | a cross-site context. Partitioned cookies are accepted by the browser
    | when flagged "secure" and the Same-Site attribute is set to "none".
    |
    */

    'partitioned' => env('SESSION_PARTITIONED_COOKIE', false),

];
</file>

<file path="database/.gitignore">
*.sqlite*
</file>

<file path="database/factories/UserFactory.php">
<?php

namespace Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Str;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\User>
 */
class UserFactory extends Factory
{
    /**
     * The current password being used by the factory.
     */
    protected static ?string $password;

    /**
     * Define the model's default state.
     *
     * @return array<string, mixed>
     */
    public function definition(): array
    {
        return [
            'name' => fake()->name(),
            'email' => fake()->unique()->safeEmail(),
            'email_verified_at' => now(),
            'password' => static::$password ??= Hash::make('password'),
            'remember_token' => Str::random(10),
        ];
    }

    /**
     * Indicate that the model's email address should be unverified.
     */
    public function unverified(): static
    {
        return $this->state(fn (array $attributes) => [
            'email_verified_at' => null,
        ]);
    }
}
</file>

<file path="database/migrations/0001_01_01_000000_create_users_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('users', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->string('email')->unique();
            $table->string('cccd')->nullable();
            $table->string('phone')->nullable();
            $table->string('username')->nullable();
			$table->string('role')->default('user');
            $table->timestamp('email_verified_at')->nullable();
            $table->string('password');
            $table->rememberToken();
            $table->timestamps();
        });

        Schema::create('password_reset_tokens', function (Blueprint $table) {
            $table->string('email')->primary();
            $table->string('token');
            $table->timestamp('created_at')->nullable();
        });

        Schema::create('sessions', function (Blueprint $table) {
            $table->string('id')->primary();
            $table->foreignId('user_id')->nullable()->index();
            $table->string('ip_address', 45)->nullable();
            $table->text('user_agent')->nullable();
            $table->longText('payload');
            $table->integer('last_activity')->index();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('users');
        Schema::dropIfExists('password_reset_tokens');
        Schema::dropIfExists('sessions');
    }
};
</file>

<file path="database/migrations/0001_01_01_000001_create_cache_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('cache', function (Blueprint $table) {
            $table->string('key')->primary();
            $table->mediumText('value');
            $table->integer('expiration');
        });

        Schema::create('cache_locks', function (Blueprint $table) {
            $table->string('key')->primary();
            $table->string('owner');
            $table->integer('expiration');
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('cache');
        Schema::dropIfExists('cache_locks');
    }
};
</file>

<file path="database/migrations/0001_01_01_000002_create_jobs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('jobs', function (Blueprint $table) {
            $table->id();
            $table->string('queue')->index();
            $table->longText('payload');
            $table->unsignedTinyInteger('attempts');
            $table->unsignedInteger('reserved_at')->nullable();
            $table->unsignedInteger('available_at');
            $table->unsignedInteger('created_at');
        });

        Schema::create('job_batches', function (Blueprint $table) {
            $table->string('id')->primary();
            $table->string('name');
            $table->integer('total_jobs');
            $table->integer('pending_jobs');
            $table->integer('failed_jobs');
            $table->longText('failed_job_ids');
            $table->mediumText('options')->nullable();
            $table->integer('cancelled_at')->nullable();
            $table->integer('created_at');
            $table->integer('finished_at')->nullable();
        });

        Schema::create('failed_jobs', function (Blueprint $table) {
            $table->id();
            $table->string('uuid')->unique();
            $table->text('connection');
            $table->text('queue');
            $table->longText('payload');
            $table->longText('exception');
            $table->timestamp('failed_at')->useCurrent();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('jobs');
        Schema::dropIfExists('job_batches');
        Schema::dropIfExists('failed_jobs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181620_create_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('phongs', function (Blueprint $table) {
            $table->id();
            $table->foreignId(column: 'loai_phong_id')->constrained(table: 'loai_phongs')->onDelete('cascade');
            $table->string('so_phong');
            $table->string('tinh_trang')->default('available');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('phongs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181621_create_dat_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('dat_phongs', function (Blueprint $table) {
            $table->id();
            $table->foreignId('user_id')->constrained('users');
            $table->date('ngay_den');
            $table->date('ngay_di');
            $table->decimal('tong_tien', 12, 2);
            $table->string('trang_thai')->default('pending');
            $table->string('payment_status')->default('unpaid');
            $table->text('ghi_chu')->nullable();
            $table->string('promotion_code')->nullable();
            $table->decimal('discount_amount', 10, 2)->default(0);
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('dat_phongs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181624_create_hoa_dons_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('hoa_dons', function (Blueprint $table) {
            $table->id();
            $table->foreignId('dat_phong_id')->constrained('dat_phongs')->onDelete('cascade');
            $table->string('ma_hoa_don')->unique();
            $table->DateTime('ngay_lap');
            $table->decimal('tong_tien', 12, 2);
            $table->string('phuong_thuc_thanh_toan');
            $table->string('trang_thai')->default('unpaid');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('hoa_dons');
    }
};
</file>

<file path="database/migrations/2025_12_10_041323_add_price_cols_to_chi_tiet_dat_phongs.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::table('chi_tiet_dat_phongs', function (Blueprint $table) {
            // Kiểm tra nếu chưa có thì mới thêm
            if (!Schema::hasColumn('chi_tiet_dat_phongs', 'don_gia')) {
                $table->decimal('don_gia', 15, 2)->default(0)->after('so_luong'); // Giá tại thời điểm đặt
            }
            
            if (!Schema::hasColumn('chi_tiet_dat_phongs', 'thanh_tien')) {
                $table->decimal('thanh_tien', 15, 2)->default(0)->after('don_gia'); // Tổng tiền (đơn giá * số lượng)
            }
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::table('chi_tiet_dat_phongs', function (Blueprint $table) {
            $table->dropColumn(['don_gia', 'thanh_tien']);
        });
    }
};
</file>

<file path="database/seeders/DatabaseSeeder.php">
<?php

namespace Database\Seeders;

use App\Models\User;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;

class DatabaseSeeder extends Seeder
{
    use WithoutModelEvents;

    /**
     * Seed the application's database.
     */
    public function run(): void
    {
        // User::factory(10)->create();

        User::factory()->create([
            'name' => 'Test User',
            'email' => 'test@example.com',
        ]);
    }
}
</file>

<file path="lang/en/auth.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Authentication Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines are used during authentication for various
    | messages that we need to display to the user. You are free to modify
    | these language lines according to your application's requirements.
    |
    */

    'failed' => 'These credentials do not match our records.',
    'password' => 'The provided password is incorrect.',
    'throttle' => 'Too many login attempts. Please try again in :seconds seconds.',

];
</file>

<file path="lang/en/pagination.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Pagination Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines are used by the paginator library to build
    | the simple pagination links. You are free to change them to anything
    | you want to customize your views to better match your application.
    |
    */

    'previous' => '&laquo; Previous',
    'next' => 'Next &raquo;',

];
</file>

<file path="lang/en/passwords.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Password Reset Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines are the default lines which match reasons
    | that are given by the password broker for a password update attempt
    | outcome such as failure due to an invalid password / reset token.
    |
    */

    'reset' => 'Your password has been reset.',
    'sent' => 'We have emailed your password reset link.',
    'throttled' => 'Please wait before retrying.',
    'token' => 'This password reset token is invalid.',
    'user' => "We can't find a user with that email address.",

];
</file>

<file path="lang/en/validation.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Validation Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines contain the default error messages used by
    | the validator class. Some of these rules have multiple versions such
    | as the size rules. Feel free to tweak each of these messages here.
    |
    */

    'accepted' => 'The :attribute field must be accepted.',
    'accepted_if' => 'The :attribute field must be accepted when :other is :value.',
    'active_url' => 'The :attribute field must be a valid URL.',
    'after' => 'The :attribute field must be a date after :date.',
    'after_or_equal' => 'The :attribute field must be a date after or equal to :date.',
    'alpha' => 'The :attribute field must only contain letters.',
    'alpha_dash' => 'The :attribute field must only contain letters, numbers, dashes, and underscores.',
    'alpha_num' => 'The :attribute field must only contain letters and numbers.',
    'any_of' => 'The :attribute field is invalid.',
    'array' => 'The :attribute field must be an array.',
    'ascii' => 'The :attribute field must only contain single-byte alphanumeric characters and symbols.',
    'before' => 'The :attribute field must be a date before :date.',
    'before_or_equal' => 'The :attribute field must be a date before or equal to :date.',
    'between' => [
        'array' => 'The :attribute field must have between :min and :max items.',
        'file' => 'The :attribute field must be between :min and :max kilobytes.',
        'numeric' => 'The :attribute field must be between :min and :max.',
        'string' => 'The :attribute field must be between :min and :max characters.',
    ],
    'boolean' => 'The :attribute field must be true or false.',
    'can' => 'The :attribute field contains an unauthorized value.',
    'confirmed' => 'The :attribute field confirmation does not match.',
    'contains' => 'The :attribute field is missing a required value.',
    'current_password' => 'The password is incorrect.',
    'date' => 'The :attribute field must be a valid date.',
    'date_equals' => 'The :attribute field must be a date equal to :date.',
    'date_format' => 'The :attribute field must match the format :format.',
    'decimal' => 'The :attribute field must have :decimal decimal places.',
    'declined' => 'The :attribute field must be declined.',
    'declined_if' => 'The :attribute field must be declined when :other is :value.',
    'different' => 'The :attribute field and :other must be different.',
    'digits' => 'The :attribute field must be :digits digits.',
    'digits_between' => 'The :attribute field must be between :min and :max digits.',
    'dimensions' => 'The :attribute field has invalid image dimensions.',
    'distinct' => 'The :attribute field has a duplicate value.',
    'doesnt_contain' => 'The :attribute field must not contain any of the following: :values.',
    'doesnt_end_with' => 'The :attribute field must not end with one of the following: :values.',
    'doesnt_start_with' => 'The :attribute field must not start with one of the following: :values.',
    'email' => 'The :attribute field must be a valid email address.',
    'encoding' => 'The :attribute field must be encoded in :encoding.',
    'ends_with' => 'The :attribute field must end with one of the following: :values.',
    'enum' => 'The selected :attribute is invalid.',
    'exists' => 'The selected :attribute is invalid.',
    'extensions' => 'The :attribute field must have one of the following extensions: :values.',
    'file' => 'The :attribute field must be a file.',
    'filled' => 'The :attribute field must have a value.',
    'gt' => [
        'array' => 'The :attribute field must have more than :value items.',
        'file' => 'The :attribute field must be greater than :value kilobytes.',
        'numeric' => 'The :attribute field must be greater than :value.',
        'string' => 'The :attribute field must be greater than :value characters.',
    ],
    'gte' => [
        'array' => 'The :attribute field must have :value items or more.',
        'file' => 'The :attribute field must be greater than or equal to :value kilobytes.',
        'numeric' => 'The :attribute field must be greater than or equal to :value.',
        'string' => 'The :attribute field must be greater than or equal to :value characters.',
    ],
    'hex_color' => 'The :attribute field must be a valid hexadecimal color.',
    'image' => 'The :attribute field must be an image.',
    'in' => 'The selected :attribute is invalid.',
    'in_array' => 'The :attribute field must exist in :other.',
    'in_array_keys' => 'The :attribute field must contain at least one of the following keys: :values.',
    'integer' => 'The :attribute field must be an integer.',
    'ip' => 'The :attribute field must be a valid IP address.',
    'ipv4' => 'The :attribute field must be a valid IPv4 address.',
    'ipv6' => 'The :attribute field must be a valid IPv6 address.',
    'json' => 'The :attribute field must be a valid JSON string.',
    'list' => 'The :attribute field must be a list.',
    'lowercase' => 'The :attribute field must be lowercase.',
    'lt' => [
        'array' => 'The :attribute field must have less than :value items.',
        'file' => 'The :attribute field must be less than :value kilobytes.',
        'numeric' => 'The :attribute field must be less than :value.',
        'string' => 'The :attribute field must be less than :value characters.',
    ],
    'lte' => [
        'array' => 'The :attribute field must not have more than :value items.',
        'file' => 'The :attribute field must be less than or equal to :value kilobytes.',
        'numeric' => 'The :attribute field must be less than or equal to :value.',
        'string' => 'The :attribute field must be less than or equal to :value characters.',
    ],
    'mac_address' => 'The :attribute field must be a valid MAC address.',
    'max' => [
        'array' => 'The :attribute field must not have more than :max items.',
        'file' => 'The :attribute field must not be greater than :max kilobytes.',
        'numeric' => 'The :attribute field must not be greater than :max.',
        'string' => 'The :attribute field must not be greater than :max characters.',
    ],
    'max_digits' => 'The :attribute field must not have more than :max digits.',
    'mimes' => 'The :attribute field must be a file of type: :values.',
    'mimetypes' => 'The :attribute field must be a file of type: :values.',
    'min' => [
        'array' => 'The :attribute field must have at least :min items.',
        'file' => 'The :attribute field must be at least :min kilobytes.',
        'numeric' => 'The :attribute field must be at least :min.',
        'string' => 'The :attribute field must be at least :min characters.',
    ],
    'min_digits' => 'The :attribute field must have at least :min digits.',
    'missing' => 'The :attribute field must be missing.',
    'missing_if' => 'The :attribute field must be missing when :other is :value.',
    'missing_unless' => 'The :attribute field must be missing unless :other is :value.',
    'missing_with' => 'The :attribute field must be missing when :values is present.',
    'missing_with_all' => 'The :attribute field must be missing when :values are present.',
    'multiple_of' => 'The :attribute field must be a multiple of :value.',
    'not_in' => 'The selected :attribute is invalid.',
    'not_regex' => 'The :attribute field format is invalid.',
    'numeric' => 'The :attribute field must be a number.',
    'password' => [
        'letters' => 'The :attribute field must contain at least one letter.',
        'mixed' => 'The :attribute field must contain at least one uppercase and one lowercase letter.',
        'numbers' => 'The :attribute field must contain at least one number.',
        'symbols' => 'The :attribute field must contain at least one symbol.',
        'uncompromised' => 'The given :attribute has appeared in a data leak. Please choose a different :attribute.',
    ],
    'present' => 'The :attribute field must be present.',
    'present_if' => 'The :attribute field must be present when :other is :value.',
    'present_unless' => 'The :attribute field must be present unless :other is :value.',
    'present_with' => 'The :attribute field must be present when :values is present.',
    'present_with_all' => 'The :attribute field must be present when :values are present.',
    'prohibited' => 'The :attribute field is prohibited.',
    'prohibited_if' => 'The :attribute field is prohibited when :other is :value.',
    'prohibited_if_accepted' => 'The :attribute field is prohibited when :other is accepted.',
    'prohibited_if_declined' => 'The :attribute field is prohibited when :other is declined.',
    'prohibited_unless' => 'The :attribute field is prohibited unless :other is in :values.',
    'prohibits' => 'The :attribute field prohibits :other from being present.',
    'regex' => 'The :attribute field format is invalid.',
    'required' => 'The :attribute field is required.',
    'required_array_keys' => 'The :attribute field must contain entries for: :values.',
    'required_if' => 'The :attribute field is required when :other is :value.',
    'required_if_accepted' => 'The :attribute field is required when :other is accepted.',
    'required_if_declined' => 'The :attribute field is required when :other is declined.',
    'required_unless' => 'The :attribute field is required unless :other is in :values.',
    'required_with' => 'The :attribute field is required when :values is present.',
    'required_with_all' => 'The :attribute field is required when :values are present.',
    'required_without' => 'The :attribute field is required when :values is not present.',
    'required_without_all' => 'The :attribute field is required when none of :values are present.',
    'same' => 'The :attribute field must match :other.',
    'size' => [
        'array' => 'The :attribute field must contain :size items.',
        'file' => 'The :attribute field must be :size kilobytes.',
        'numeric' => 'The :attribute field must be :size.',
        'string' => 'The :attribute field must be :size characters.',
    ],
    'starts_with' => 'The :attribute field must start with one of the following: :values.',
    'string' => 'The :attribute field must be a string.',
    'timezone' => 'The :attribute field must be a valid timezone.',
    'unique' => 'The :attribute has already been taken.',
    'uploaded' => 'The :attribute failed to upload.',
    'uppercase' => 'The :attribute field must be uppercase.',
    'url' => 'The :attribute field must be a valid URL.',
    'ulid' => 'The :attribute field must be a valid ULID.',
    'uuid' => 'The :attribute field must be a valid UUID.',

    /*
    |--------------------------------------------------------------------------
    | Custom Validation Language Lines
    |--------------------------------------------------------------------------
    |
    | Here you may specify custom validation messages for attributes using the
    | convention "attribute.rule" to name the lines. This makes it quick to
    | specify a specific custom language line for a given attribute rule.
    |
    */

    'custom' => [
        'attribute-name' => [
            'rule-name' => 'custom-message',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Custom Validation Attributes
    |--------------------------------------------------------------------------
    |
    | The following language lines are used to swap our attribute placeholder
    | with something more reader friendly such as "E-Mail Address" instead
    | of "email". This simply helps us make our message more expressive.
    |
    */

    'attributes' => [],

];
</file>

<file path="package.json">
{
    "$schema": "https://www.schemastore.org/package.json",
    "private": true,
    "type": "module",
    "scripts": {
        "build": "vite build",
        "dev": "vite"
    },
    "devDependencies": {
        "@popperjs/core": "^2.11.6",
        "@tailwindcss/vite": "^4.0.0",
        "axios": "^1.11.0",
        "bootstrap": "^5.2.3",
        "concurrently": "^9.0.1",
        "laravel-vite-plugin": "^2.0.0",
        "sass": "^1.56.1",
        "tailwindcss": "^4.0.0",
        "vite": "^7.0.7"
    }
}
</file>

<file path="phpunit.xml">
<?xml version="1.0" encoding="UTF-8"?>
<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="vendor/phpunit/phpunit/phpunit.xsd"
         bootstrap="vendor/autoload.php"
         colors="true"
>
    <testsuites>
        <testsuite name="Unit">
            <directory>tests/Unit</directory>
        </testsuite>
        <testsuite name="Feature">
            <directory>tests/Feature</directory>
        </testsuite>
    </testsuites>
    <source>
        <include>
            <directory>app</directory>
        </include>
    </source>
    <php>
        <env name="APP_ENV" value="testing"/>
        <env name="APP_MAINTENANCE_DRIVER" value="file"/>
        <env name="BCRYPT_ROUNDS" value="4"/>
        <env name="BROADCAST_CONNECTION" value="null"/>
        <env name="CACHE_STORE" value="array"/>
        <env name="DB_CONNECTION" value="sqlite"/>
        <env name="DB_DATABASE" value=":memory:"/>
        <env name="MAIL_MAILER" value="array"/>
        <env name="QUEUE_CONNECTION" value="sync"/>
        <env name="SESSION_DRIVER" value="array"/>
        <env name="PULSE_ENABLED" value="false"/>
        <env name="TELESCOPE_ENABLED" value="false"/>
        <env name="NIGHTWATCH_ENABLED" value="false"/>
    </php>
</phpunit>
</file>

<file path="public/.htaccess">
<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews -Indexes
    </IfModule>

    RewriteEngine On

    # Handle Authorization Header
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # Handle X-XSRF-Token Header
    RewriteCond %{HTTP:x-xsrf-token} .
    RewriteRule .* - [E=HTTP_X_XSRF_TOKEN:%{HTTP:X-XSRF-Token}]

    # Redirect Trailing Slashes If Not A Folder...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} (.+)/$
    RewriteRule ^ %1 [L,R=301]

    # Send Requests To Front Controller...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule>
</file>

<file path="public/index.php">
<?php

use Illuminate\Foundation\Application;
use Illuminate\Http\Request;

define('LARAVEL_START', microtime(true));

// Determine if the application is in maintenance mode...
if (file_exists($maintenance = __DIR__.'/../storage/framework/maintenance.php')) {
    require $maintenance;
}

// Register the Composer autoloader...
require __DIR__.'/../vendor/autoload.php';

// Bootstrap Laravel and handle the request...
/** @var Application $app */
$app = require_once __DIR__.'/../bootstrap/app.php';

$app->handleRequest(Request::capture());
</file>

<file path="public/robots.txt">
User-agent: *
Disallow:
</file>

<file path="README.md">
# hotel_management
đồ án môn học
</file>

<file path="resources/css/app.css">
@import 'tailwindcss';

@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../storage/framework/views/*.php';
@source '../**/*.blade.php';
@source '../**/*.js';

@theme {
    --font-sans: 'Instrument Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
        'Segoe UI Symbol', 'Noto Color Emoji';
}
</file>

<file path="resources/css/client.css">
/* --- GIAO DIỆN KHÁCH HÀNG (CLIENT) --- */


/* 1. Cấu hình cơ bản */

[x-cloak] {
    display: none !important;
}

body {
    font-family: 'Be Vietnam Pro', sans-serif;
    color: #374151;
    background-color: #f9fafb;
    -webkit-font-smoothing: antialiased;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

.font-serif {
    font-family: 'Playfair Display', serif;
}


/* 2. Scrollbar */

::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
    background: #c5a47e;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #b08d55;
}


/* 3. Layout Main Content */

.main-content {
    flex-grow: 1;
    padding-top: 5rem;
}


/* 4. Flash Messages */

.flash-container {
    max-width: 80rem;
    margin: 1.5rem auto 0;
    padding: 0 1rem;
}

.flash-success {
    background-color: #f0fdf4;
    border-left: 4px solid #22c55e;
    color: #15803d;
    padding: 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    border-radius: 0.375rem;
    margin-bottom: 1rem;
}

.flash-error {
    background-color: #fef2f2;
    border-left: 4px solid #ef4444;
    color: #991b1b;
    padding: 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    border-radius: 0.375rem;
    margin-bottom: 1rem;
}

.flash-icon-success {
    font-size: 1.25rem;
    margin-right: 0.75rem;
    color: #22c55e;
}

.flash-icon-error {
    font-size: 1.25rem;
    margin-right: 0.75rem;
    color: #ef4444;
}

.btn-close-success {
    color: #16a34a;
    cursor: pointer;
}

.btn-close-error {
    color: #dc2626;
    cursor: pointer;
}


/* 5. Footer Styles (Giữ nguyên như cũ) */

.footer-wrapper {
    background-color: #111827;
    color: white;
    margin-top: 5rem;
    border-top: 4px solid #c5a47e;
}

.footer-container {
    max-width: 80rem;
    margin: 0 auto;
    padding: 4rem 1rem 2rem;
}

.footer-grid {
    display: grid;
    grid-template-columns: repeat(1, minmax(0, 1fr));
    gap: 3rem;
    margin-bottom: 3rem;
}

@media (min-width: 768px) {
    .footer-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (min-width: 1024px) {
    .footer-grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
    }
}

.footer-brand {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.footer-logo-icon {
    width: 2rem;
    height: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #c5a47e;
    color: #111827;
    border-radius: 9999px;
}

.footer-logo-text {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: 0.025em;
}

.footer-desc {
    color: #9ca3af;
    font-size: 0.875rem;
    line-height: 1.625;
}

.footer-social-link {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 9999px;
    background-color: #1f2937;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
}

.footer-social-link:hover {
    background-color: #c5a47e;
    color: #111827;
}

.footer-heading {
    font-family: 'Playfair Display', serif;
    font-size: 1.25rem;
    font-weight: 700;
    color: #c5a47e;
    margin-bottom: 1.5rem;
}

.footer-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    color: #9ca3af;
}

.footer-link {
    display: flex;
    align-items: center;
    transition: color 0.3s;
}

.footer-link:hover {
    color: white;
}

.footer-link i {
    margin-right: 0.5rem;
    font-size: 0.75rem;
}

.footer-contact-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
}

.footer-contact-icon {
    color: #c5a47e;
    margin-top: 0.25rem;
}

.footer-input {
    background-color: #1f2937;
    border: none;
    color: white;
    padding: 0.75rem 1rem;
    border-radius: 0.5rem;
    width: 100%;
    outline: none;
}

.footer-input:focus {
    box-shadow: 0 0 0 1px #c5a47e;
}

.footer-btn-submit {
    background-color: #c5a47e;
    color: #111827;
    font-weight: 700;
    padding: 0.75rem;
    border-radius: 0.5rem;
    width: 100%;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
    transition: background-color 0.3s;
    margin-top: 0.5rem;
}

.footer-btn-submit:hover {
    background-color: white;
}

.footer-bottom {
    border-top: 1px solid #1f2937;
    padding-top: 2rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    color: #6b7280;
    font-size: 0.875rem;
}

@media (min-width: 768px) {
    .footer-bottom {
        flex-direction: row;
    }
}


/* --- 6. HEADER STYLES --- */


/* Khung bao ngoài Header */

.header-wrapper {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 50;
    transition: all 0.3s ease-in-out;
    background-color: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid #f3f4f6;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

.header-container {
    max-width: 80rem;
    margin: 0 auto;
    padding: 0 1rem;
}

@media (min-width: 640px) {
    .header-container {
        padding: 0 1.5rem;
    }
}

@media (min-width: 1024px) {
    .header-container {
        padding: 0 2rem;
    }
}

.header-inner {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 5rem;
}


/* Logo */

.logo-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
}

.logo-icon {
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #111827;
    color: #c5a47e;
    border-radius: 9999px;
    border: 1px solid #c5a47e;
    font-size: 1.25rem;
    transition: all 0.5s;
}

.logo-link:hover .logo-icon {
    background-color: #c5a47e;
    color: #111827;
}

.logo-text-wrapper {
    margin-left: 0.5rem;
    display: flex;
    flex-direction: column;
}

.logo-text {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    font-weight: 700;
    color: #111827;
    letter-spacing: 0.025em;
    text-transform: uppercase;
}

.logo-text span {
    color: #c5a47e;
}


/* Menu Desktop */

.nav-menu {
    display: none;
}

@media (min-width: 768px) {
    .nav-menu {
        display: flex;
        gap: 2rem;
    }
}

.nav-link {
    font-size: 0.875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.5rem 0;
    border-bottom: 2px solid transparent;
    transition: all 0.15s;
    color: #4b5563;
}

.nav-link:hover,
.nav-link.active {
    color: #c5a47e;
    border-color: #c5a47e;
}


/* Actions */

.header-actions {
    display: none;
    align-items: center;
    gap: 1.5rem;
}

@media (min-width: 768px) {
    .header-actions {
        display: flex;
    }
}


/* User Button */

.user-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #374151;
    font-weight: 500;
    outline: none;
    transition: color 0.15s;
}

.user-btn:hover {
    color: #c5a47e;
}

.user-avatar {
    width: 2rem;
    height: 2rem;
    border-radius: 9999px;
    background-color: #e5e7eb;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #d1d5db;
    overflow: hidden;
    color: #6b7280;
}


/* Dropdown */

.dropdown-menu {
    position: absolute;
    right: 0;
    margin-top: 0.5rem;
    width: 14rem;
    background-color: white;
    border-radius: 0.375rem;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    padding: 0.25rem 0;
    border: 1px solid #f3f4f6;
    z-index: 50;
}

.dropdown-item {
    display: block;
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    color: #374151;
    transition: background-color 0.15s;
}

.dropdown-item:hover {
    background-color: #f9fafb;
}

.dropdown-item-danger {
    color: #dc2626;
    font-weight: 700;
    border-bottom: 1px solid #f3f4f6;
}


/* Cho link Admin */


/* Guest Buttons */

.btn-login {
    font-size: 0.875rem;
    font-weight: 600;
    color: #111827;
    transition: color 0.15s;
}

.btn-login:hover {
    color: #c5a47e;
}

.btn-register {
    padding: 0.625rem 1.25rem;
    background-color: #111827;
    color: #c5a47e;
    font-size: 0.875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.025em;
    border-radius: 0.25rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    transition: background-color 0.15s;
}

.btn-register:hover {
    background-color: #1f2937;
}


/* Mobile Toggle */

.mobile-toggle {
    display: flex;
    color: #111827;
    padding: 0.5rem;
    font-size: 1.5rem;
}

.mobile-toggle:hover {
    color: #c5a47e;
}

@media (min-width: 768px) {
    .mobile-toggle {
        display: none;
    }
}


/* Mobile Menu */

.mobile-menu-wrapper {
    position: absolute;
    width: 100%;
    height: 100vh;
    z-index: 40;
    background-color: white;
    border-top: 1px solid #f3f4f6;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

@media (min-width: 768px) {
    .mobile-menu-wrapper {
        display: none !important;
    }
}

.mobile-menu-container {
    padding: 1rem 1rem 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.mobile-link {
    display: block;
    padding: 0.75rem;
    font-size: 1rem;
    font-weight: 500;
    color: #111827;
    border-radius: 0.375rem;
    transition: background-color 0.15s;
}

.mobile-link:hover {
    background-color: #f9fafb;
}

.mobile-user-section {
    border-top: 1px solid #f3f4f6;
    padding-top: 1rem;
    margin-top: 0.5rem;
}

.mobile-greeting {
    padding: 0 0.75rem;
    font-size: 0.875rem;
    color: #6b7280;
    margin-bottom: 0.5rem;
}

.mobile-user-link {
    display: block;
    padding: 0.5rem 0.75rem;
    font-size: 1rem;
    color: #374151;
    border-radius: 0.25rem;
}

.mobile-user-link:hover {
    background-color: #f9fafb;
}

.mobile-logout-btn {
    width: 100%;
    text-align: left;
    padding: 0.5rem 0.75rem;
    font-size: 1rem;
    font-weight: 700;
    color: #dc2626;
    background-color: #fef2f2;
    border-radius: 0.25rem;
    margin-top: 0.5rem;
}

.mobile-auth-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 1rem;
    margin-top: 1rem;
    padding: 0 0.75rem;
}

.mobile-btn-login {
    text-align: center;
    padding: 0.75rem;
    border: 1px solid #d1d5db;
    border-radius: 0.5rem;
    color: #374151;
    font-weight: 700;
}

.mobile-btn-register {
    text-align: center;
    padding: 0.75rem;
    background-color: #111827;
    border-radius: 0.5rem;
    color: #c5a47e;
    font-weight: 700;
}
</file>

<file path="resources/js/app.js">
import './bootstrap';
</file>

<file path="resources/js/bootstrap.js">
import 'bootstrap';

/**
 * We'll load the axios HTTP library which allows us to easily issue requests
 * to our Laravel back-end. This library automatically handles sending the
 * CSRF token as a header based on the value of the "XSRF" token cookie.
 */

import axios from 'axios';
window.axios = axios;

window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

/**
 * Echo exposes an expressive API for subscribing to channels and listening
 * for events that are broadcast by Laravel. Echo and event broadcasting
 * allows your team to easily build robust real-time web applications.
 */

// import Echo from 'laravel-echo';

// import Pusher from 'pusher-js';
// window.Pusher = Pusher;

// window.Echo = new Echo({
//     broadcaster: 'pusher',
//     key: import.meta.env.VITE_PUSHER_APP_KEY,
//     cluster: import.meta.env.VITE_PUSHER_APP_CLUSTER ?? 'mt1',
//     wsHost: import.meta.env.VITE_PUSHER_HOST ?? `ws-${import.meta.env.VITE_PUSHER_APP_CLUSTER}.pusher.com`,
//     wsPort: import.meta.env.VITE_PUSHER_PORT ?? 80,
//     wssPort: import.meta.env.VITE_PUSHER_PORT ?? 443,
//     forceTLS: (import.meta.env.VITE_PUSHER_SCHEME ?? 'https') === 'https',
//     enabledTransports: ['ws', 'wss'],
// });
</file>

<file path="resources/js/client.js">
import './bootstrap';

// Log để kiểm tra file đã load thành công
console.log('Tài nguyên Khách hàng (Client Assets) đã tải thành công!');

// --- CÁC SCRIPT TÙY CHỈNH CHO CLIENT ---

// 1. Hiệu ứng Header khi cuộn trang (Sticky Header Effect)
// Khi cuộn xuống > 50px, header sẽ đổi màu nền để nội dung dễ đọc hơn
window.addEventListener('scroll', function() {
    const header = document.querySelector('header');
    if (window.scrollY > 50) {
        header.classList.add('shadow-md', 'bg-white/95'); // Thêm bóng và nền trắng mờ
        header.classList.remove('bg-transparent'); // Xóa nền trong suốt (nếu có)
    } else {
        header.classList.remove('shadow-md', 'bg-white/95');
        // Nếu trang chủ có banner full màn hình, bạn có thể muốn header trong suốt ở đây
    }
});

// 2. Tự động ẩn thông báo Flash Message sau 5 giây (Hỗ trợ thêm cho AlpineJS)
// Lưu ý: Nếu bạn dùng AlpineJS trong blade (x-init) thì đoạn này có thể không cần thiết, 
// nhưng giữ lại để dự phòng cho các thông báo không dùng Alpine.
document.addEventListener('DOMContentLoaded', () => {
    // Tìm phần tử có id="flash-message" (Bạn cần thêm id này vào thẻ div thông báo trong file layout nếu muốn dùng JS thuần)
    const flashMessage = document.getElementById('flash-message');
    if (flashMessage) {
        setTimeout(() => {
            flashMessage.style.transition = "opacity 0.5s ease";
            flashMessage.style.opacity = "0";
            setTimeout(() => flashMessage.remove(), 500); // Xóa khỏi DOM sau khi mờ dần
        }, 5000);
    }
});
</file>

<file path="resources/js/tailwind-config.js">
tailwind.config = {
    theme: {
        extend: {
            fontFamily: {
                sans: ['"Be Vietnam Pro"', 'sans-serif'], // Font cho nội dung
                serif: ['"Playfair Display"', 'serif'], // Font cho tiêu đề sang trọng
            },
            colors: {
                brand: {
                    50: '#f4f7f6',
                    100: '#e0f2fe',
                    500: '#0ea5e9',
                    600: '#0284c7',
                    800: '#1f2937',
                    900: '#111827', // Màu chủ đạo (Xanh đen - Dark Blue)
                    gold: '#c5a47e', // Màu điểm nhấn (Vàng Gold - Luxury)
                    dark: '#1a1a1a',
                }
            }
        }
    }
}
</file>

<file path="resources/sass/_variables.scss">
// Body
$body-bg: #f8fafc;

// Typography
$font-family-sans-serif: 'Nunito', sans-serif;
$font-size-base: 0.9rem;
$line-height-base: 1.6;
</file>

<file path="resources/sass/app.scss">
// Fonts
@import url('https://fonts.bunny.net/css?family=Nunito');

// Variables
@import 'variables';

// Bootstrap
@import 'bootstrap/scss/bootstrap';
</file>

<file path="resources/views/admin/dat_phong/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('content')

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-6"></div>
    <div class="toolbar mb-6 flex items-center justify-between">
        <h1 class="text-2xl font-semibold text-gray-900">Đặt phòng</h1>
    </div>

    <div class="card-common">
        <div class="overflow-x-auto">
            @if($datPhongs->isEmpty())
                <div class="p-6 text-center text-gray-500">Chưa có đặt phòng nào. Hãy thêm mới.</div>
            @else
            <table class="table-common min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Khách hàng</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Phòng đã đặt</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày đến</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày đi</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tổng tiền</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Thanh toán</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trạng thái</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Hành động</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach ($datPhongs as $dp)
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $loop->iteration }}</td>
                        <td class="px-6 py-4 text-sm font-medium text-gray-900">
                            @if($dp->user)
                                {{ $dp->user->name }} <span class="text-xs text-gray-500">({{ $dp->user->email }})</span>
                            @else
                                —
                            @endif
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-700">
                            @if($dp->chiTietDatPhongs && $dp->chiTietDatPhongs->isNotEmpty())
                                @foreach($dp->chiTietDatPhongs as $ct)
                                    @if($ct->phong)
                                        <span class="inline-block mr-2 px-2 py-1 bg-gray-100 rounded text-sm">Phòng {{ $ct->phong->so_phong ?? $ct->phong->id }}</span>
                                    @else
                                        <span class="inline-block mr-2 px-2 py-1 bg-gray-100 rounded text-sm">Phòng #{{ $ct->phong_id }}</span>
                                    @endif
                                @endforeach
                            @else
                                —
                            @endif
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $dp->ngay_den }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $dp->ngay_di }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ number_format($dp->tong_tien ?? 0, 0, ',', '.') }} VND</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $dp->payment_status == 'paid' ? 'Đã thanh toán' : 'Chưa thanh toán' }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $dp->trang_thai ?? '-' }}</td>
                        <td class="px-6 py-4 text-sm text-center">
                            <a href="{{ route('admin.dat-phong.sua', ['id' => $dp->id]) }}" class="text-blue-600 hover:text-blue-800 mr-3" title="Sửa"><i class="fa fa-edit"></i></a>
                            <a href="{{ route('admin.dat-phong.xoa', ['id' => $dp->id]) }}" onclick="return confirm('Bạn có muốn xóa đặt phòng #{{ $dp->id }} không?')" class="text-red-600 hover:text-red-800" title="Xóa"><i class="fa fa-trash"></i></a>
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
            @endif
        </div>
    </div>
</div>

@endsection
</file>

<file path="resources/views/admin/dat_phong/sua.blade.php">
@extends('admin.layouts.dashboard')

@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Sửa đặt phòng</h2>
            <a href="{{ route('admin.dat-phong') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.dat-phong.sua', ['id' => $datPhong->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="user_id">Chọn người dùng (người đặt)</label>
                    <select id="user_id" name="user_id" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                        <option value="">-- Chọn người dùng --</option>
                        @foreach($users as $user)
                            <option value="{{ $user->id }}" {{ old('user_id', $datPhong->user_id) == $user->id ? 'selected' : '' }}>{{ $user->name }} ({{ $user->email }})</option>
                        @endforeach
                    </select>
                    @error('user_id') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_den">Ngày đến</label>
                    <input type="date" id="ngay_den" name="ngay_den" value="{{ old('ngay_den', $datPhong->ngay_den) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('ngay_den') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_di">Ngày đi</label>
                    <input type="date" id="ngay_di" name="ngay_di" value="{{ old('ngay_di', $datPhong->ngay_di) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('ngay_di') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="tong_tien">Tổng tiền (VND)</label>
                    <input type="number" step="0.01" id="tong_tien" name="tong_tien" value="{{ old('tong_tien', $datPhong->tong_tien) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('tong_tien') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="payment_status">Thanh toán</label>
                    <select id="payment_status" name="payment_status" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                        <option value="unpaid" {{ old('payment_status', $datPhong->payment_status) == 'unpaid' ? 'selected' : '' }}>Chưa thanh toán</option>
                        <option value="paid" {{ old('payment_status', $datPhong->payment_status) == 'paid' ? 'selected' : '' }}>Đã thanh toán</option>
                    </select>
                    @error('payment_status') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="promotion_code">Mã khuyến mãi</label>
                    <input type="text" id="promotion_code" name="promotion_code" value="{{ old('promotion_code', $datPhong->promotion_code) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('promotion_code') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="discount_amount">Số tiền giảm (VND)</label>
                    <input type="number" step="0.01" id="discount_amount" name="discount_amount" value="{{ old('discount_amount', $datPhong->discount_amount) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('discount_amount') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ghi_chu">Ghi chú</label>
                    <textarea id="ghi_chu" name="ghi_chu" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">{{ old('ghi_chu', $datPhong->ghi_chu) }}</textarea>
                    @error('ghi_chu') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>
            </div>
            <div class="mt-6 flex items-center justify-end space-x-3">
                <a href="{{ route('admin.dat-phong') }}" class="text-sm text-gray-600 hover:underline">Hủy</a>
                <button type="submit" class="btn-primary">Lưu</button>
            </div>
        </form>
    </div>
</div>
@endsection
@extends('layouts.app')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Sửa đặt phòng</h2>
            <a href="{{ route('admin.dat-phong') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.dat-phong.sua', ['id' => $datPhong->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="user_id">Chọn người dùng (người đặt)</label>
                    <select id="user_id" name="user_id" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                        <option value="">-- Chọn người dùng --</option>
                        @foreach($users as $user)
                            <option value="{{ $user->id }}" {{ old('user_id', $datPhong->user_id) == $user->id ? 'selected' : '' }}>{{ $user->name }} ({{ $user->email }})</option>
                        @endforeach
                    </select>
                    @error('user_id') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_den">Ngày đến</label>
                    <input type="date" id="ngay_den" name="ngay_den" value="{{ old('ngay_den', $datPhong->ngay_den) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('ngay_den') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_di">Ngày đi</label>
                    <input type="date" id="ngay_di" name="ngay_di" value="{{ old('ngay_di', $datPhong->ngay_di) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('ngay_di') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="trang_thai">Trạng thái</label>
                    <input type="text" id="trang_thai" name="trang_thai" value="{{ old('trang_thai', $datPhong->trang_thai) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('trang_thai') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>
            </div>
            <div class="mt-6 flex items-center justify-end space-x-3">
                <a href="{{ route('admin.dat-phong') }}" class="text-sm text-gray-600 hover:underline">Hủy</a>
                <button type="submit" class="btn-primary">Lưu</button>
            </div>
        </form>
    </div>
</div>
@endsection
@extends('layouts.app')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Sửa khuyến mãi</h2>
            <a href="{{ route('khuyen-mai') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('khuyen-mai.sua', ['id' => $khuyenMai->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ten_khuyen_mai">Tên khuyến mãi</label>
                    <input type="text" id="ten_khuyen_mai" name="ten_khuyen_mai" value="{{ old('ten_khuyen_mai', $khuyenMai->ten_khuyen_mai) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ten_khuyen_mai') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ma_khuyen_mai">Mã khuyến mãi</label>
                    <input type="text" id="ma_khuyen_mai" name="ma_khuyen_mai" value="{{ old('ma_khuyen_mai', $khuyenMai->ma_khuyen_mai) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ma_khuyen_mai') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="chiet_khau_phan_tram">Chiết khấu (%)</label>
                    <input type="number" step="0.01" id="chiet_khau_phan_tram" name="chiet_khau_phan_tram" value="{{ old('chiet_khau_phan_tram', $khuyenMai->chiet_khau_phan_tram) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('chiet_khau_phan_tram') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="so_tien_giam_gia">Số tiền giảm (VND)</label>
                    <input type="number" step="0.01" id="so_tien_giam_gia" name="so_tien_giam_gia" value="{{ old('so_tien_giam_gia', $khuyenMai->so_tien_giam_gia) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('so_tien_giam_gia') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_bat_dau">Ngày bắt đầu</label>
                    <input type="date" id="ngay_bat_dau" name="ngay_bat_dau" value="{{ old('ngay_bat_dau', $khuyenMai->ngay_bat_dau) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ngay_bat_dau') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_ket_thuc">Ngày kết thúc</label>
                    <input type="date" id="ngay_ket_thuc" name="ngay_ket_thuc" value="{{ old('ngay_ket_thuc', $khuyenMai->ngay_ket_thuc) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ngay_ket_thuc') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>
            </div>

            <div class="mt-6 flex items-center justify-end space-x-3">
                <a href="{{ route('khuyen-mai') }}" class="text-sm text-gray-600 hover:underline">Hủy</a>
                <button type="submit" class="btn-primary">Lưu</button>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/khuyen_mai/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('content')

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-6"></div>
    <div class="toolbar mb-6">
        <h1 class="text-2xl font-semibold text-gray-900">Khuyến mãi</h1>
        <a href="{{ route('admin.khuyen-mai.them') }}" class="btn-primary inline-flex items-center gap-2 text-sm font-semibold">
            <i class="fa fa-plus"></i> Thêm khuyến mãi
        </a>
    </div>

    <div class="card-common">
        <div class="overflow-x-auto">
            @if($khuyenMais->isEmpty())
                <div class="p-6 text-center text-gray-500">Chưa có khuyến mãi nào. Hãy thêm mới.</div>
            @else
            <table class="table-common min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tên khuyến mãi</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mã khuyến mãi</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Chiết khấu phần trăm</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Số tiền giảm giá</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày bắt đầu</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày kết thúc</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach ($khuyenMais as $km)
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $loop->iteration }}</td>
                        <td class="px-6 py-4 text-sm font-medium text-gray-900">{{ $km->ten_khuyen_mai }}</td>
                        <td class="px-6 py-4 text-sm font-medium text-gray-900">{{ $km->ma_khuyen_mai }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $km->chiet_khau_phan_tram }}%</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ number_format($km->so_tien_giam_gia ?? 0, 0, ',', '.') }} VND</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $km->ngay_bat_dau }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $km->ngay_ket_thuc }}</td>
                        <td class="px-6 py-4 text-sm text-center">
                            <a href="{{ route('admin.khuyen-mai.sua', ['id' => $km->id]) }}" class="text-blue-600 hover:text-blue-800 mr-3" title="Sửa"><i class="fa fa-edit"></i></a>
                            <a href="{{ route('admin.khuyen-mai.xoa', ['id' => $km->id]) }}" onclick="return confirm('Bạn có muốn xóa phòng {{ $km->ten_khuyen_mai }} không?')" class="text-red-600 hover:text-red-800" title="Xóa"><i class="fa fa-trash"></i></a>
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
            @endif
        </div>
    </div>
</div>

@endsection
</file>

<file path="resources/views/admin/khuyen_mai/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Sửa khuyến mãi</h2>
            <a href="{{ route('admin.khuyen-mai') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.khuyen-mai.sua', ['id' => $khuyenMai->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ten_khuyen_mai">Tên khuyến mãi</label>
                    <input type="text" id="ten_khuyen_mai" name="ten_khuyen_mai" value="{{ old('ten_khuyen_mai', $khuyenMai->ten_khuyen_mai) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ten_khuyen_mai') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ma_khuyen_mai">Mã khuyến mãi</label>
                    <input type="text" id="ma_khuyen_mai" name="ma_khuyen_mai" value="{{ old('ma_khuyen_mai', $khuyenMai->ma_khuyen_mai) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ma_khuyen_mai') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="chiet_khau_phan_tram">Chiết khấu (%)</label>
                    <input type="number" step="0.01" id="chiet_khau_phan_tram" name="chiet_khau_phan_tram" value="{{ old('chiet_khau_phan_tram', $khuyenMai->chiet_khau_phan_tram) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('chiet_khau_phan_tram') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="so_tien_giam_gia">Số tiền giảm (VND)</label>
                    <input type="number" step="0.01" id="so_tien_giam_gia" name="so_tien_giam_gia" value="{{ old('so_tien_giam_gia', $khuyenMai->so_tien_giam_gia) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('so_tien_giam_gia') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_bat_dau">Ngày bắt đầu</label>
                    <input type="date" id="ngay_bat_dau" name="ngay_bat_dau" value="{{ old('ngay_bat_dau', $khuyenMai->ngay_bat_dau) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ngay_bat_dau') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_ket_thuc">Ngày kết thúc</label>
                    <input type="date" id="ngay_ket_thuc" name="ngay_ket_thuc" value="{{ old('ngay_ket_thuc', $khuyenMai->ngay_ket_thuc) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ngay_ket_thuc') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>
            </div>

            <div class="mt-6 flex items-center justify-end space-x-3">
                <a href="{{ route('admin.khuyen-mai') }}" class="text-sm text-gray-600 hover:underline">Hủy</a>
                <button type="submit" class="btn-primary">Lưu</button>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/khuyen_mai/them.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
	<div class="card-common p-6">
		<div class="toolbar mb-4">
			<h2 class="text-lg font-semibold">Thêm khuyến mãi</h2>
			<a href="{{ route('admin.khuyen-mai') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
		</div>

		<form action="{{ route('admin.khuyen-mai.store') }}" method="POST">
			@csrf
			<div class="grid grid-cols-1 gap-4">
				<div>
					<label class="block text-sm font-medium text-gray-700" for="ten_khuyen_mai">Tên khuyến mãi</label>
					<input type="text" id="ten_khuyen_mai" name="ten_khuyen_mai" value="{{ old('ten_khuyen_mai') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required />
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700" for="ma_khuyen_mai">Mã khuyến mãi</label>
					<input type="text" id="ma_khuyen_mai" name="ma_khuyen_mai" value="{{ old('ma_khuyen_mai') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required />
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700" for="so_tien_giam_gia">Số tiền giảm (VND)</label>
					<input type="number" step="0.01" id="so_tien_giam_gia" name="so_tien_giam_gia" value="{{ old('so_tien_giam_gia') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
				</div>

				<div class="flex items-center justify-end pt-2">
					<button type="submit" class="btn-primary inline-flex items-center gap-2">
						<i class="fa fa-save"></i> Thêm
					</button>
				</div>
			</div>
		</form>
	</div>
</div>
@endsection
</file>

<file path="resources/views/admin/layouts/dashboard.blade.php">
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@yield('title', 'Admin Dashboard') - Luxury Stay</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS + Alpine.js -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['"Be Vietnam Pro"', 'sans-serif'] },
                    colors: {
                        brand: {
                            900: '#111827', // Màu nền sidebar (Đen xanh)
                            800: '#1f2937',
                            gold: '#c5a47e', // Màu điểm nhấn
                        }
                    }
                }
            }
        }
    </script>
    <style>[x-cloak] { display: none !important; }</style>
</head>
<body class="bg-gray-100 font-sans antialiased text-gray-800" x-data="{ sidebarOpen: false }">

    @include('admin.layouts.sidebar')

        <!-- B. MAIN CONTENT -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Top Header -->
            <header class="bg-white shadow-sm border-b border-gray-200 h-16 flex items-center justify-between px-6 lg:px-8">
                <!-- Mobile Toggle -->
                <button @click="sidebarOpen = !sidebarOpen" class="lg:hidden text-gray-500 focus:outline-none">
                    <i class="fa-solid fa-bars text-2xl"></i>
                </button>

                <!-- Page Title (Breadcrumb simplified) -->
                <h2 class="text-xl font-semibold text-gray-800">@yield('header', 'Dashboard')</h2>

                <!-- Right Actions -->
                <div class="flex items-center space-x-4">
                    <button class="relative text-gray-500 hover:text-brand-900 transition">
                        <i class="fa-regular fa-bell text-xl"></i>
                        <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"></span>
                    </button>
                    <a href="{{ route('home') }}" class="text-sm text-gray-600 hover:text-brand-gold font-medium">
                        Về trang chủ <i class="fa-solid fa-arrow-right ml-1"></i>
                    </a>
                </div>
            </header>

            <!-- Content Body -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6 lg:p-8">
                <!-- Flash Messages -->
                @if(session('success'))
                    <div class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 rounded shadow-sm flex justify-between items-center">
                        <div class="flex items-center"><i class="fa-solid fa-circle-check mr-2"></i> {{ session('success') }}</div>
                    </div>
                @endif

                @yield('content')
            </main>
        </div>
        
        <!-- Overlay for mobile sidebar -->
        <div x-show="sidebarOpen" @click="sidebarOpen = false" x-transition.opacity class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden"></div>
    </div>
</body>
</html>
</file>

<file path="resources/views/admin/layouts/sidebar.blade.php">
<div class="flex h-screen overflow-hidden">
    
    <!-- A. SIDEBAR -->
    <aside class="fixed inset-y-0 left-0 z-50 w-64 bg-brand-900 text-white transition-transform duration-300 transform lg:translate-x-0 lg:static lg:inset-0 flex flex-col"
            :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full'">
        
        <!-- Logo -->
        <div class="flex items-center justify-center h-20 border-b border-gray-800 bg-brand-950">
            <a href="{{ route('admin.dashboard') }}" class="flex items-center gap-2">
                <i class="fa-solid fa-crown text-brand-gold text-2xl"></i>
                <span class="text-xl font-bold tracking-wide">Luxury<span class="text-brand-gold"> Admin </span></span>
            </a>
        </div>

        <!-- Menu Items -->
        <nav class="flex-1 overflow-y-auto py-4 space-y-1 px-3">
            <!-- Dashboard -->
            <a href="{{ route('admin.dashboard') }}" class="flex items-center px-4 py-3 text-sm font-medium rounded-lg hover:bg-gray-800 hover:text-brand-gold transition {{ request()->routeIs('admin.dashboard') ? 'bg-gray-800 text-brand-gold' : 'text-gray-300' }}">
                <i class="fa-solid fa-gauge-high w-6 text-lg"></i>
                <span class="ml-3">Tổng quan</span>
            </a>

            <!-- Quản lý Đặt phòng (Table: dat_phongs) -->
            <p class="px-4 mt-6 mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">Vận hành</p>
            <a href="{{ route('admin.dat-phong') }}" class="flex items-center px-4 py-3 text-sm font-medium rounded-lg text-gray-300 hover:bg-gray-800 hover:text-brand-gold transition">
                <i class="fa-solid fa-calendar-check w-6 text-lg"></i>
                <span class="ml-3">Đặt phòng</span>
                <!-- Badge thông báo giả lập -->
                <span class="ml-auto bg-red-500 text-white py-0.5 px-2 rounded-full text-xs">3</span>
            </a>
            
            <!-- Quản lý Phòng (Table: phongs & loai_phongs) -->
            <div x-data="{ open: false }">
                <button @click="open = !open" class="flex items-center w-full px-4 py-3 text-sm font-medium rounded-lg text-gray-300 hover:bg-gray-800 hover:text-brand-gold transition justify-between">
                    <div class="flex items-center">
                        <i class="fa-solid fa-door-open w-6 text-lg"></i>
                        <span class="ml-3">Phòng & Giá</span>
                    </div>
                    <i class="fa-solid fa-chevron-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
                </button>
                <div x-show="open" class="pl-11 pr-2 space-y-1 mt-1">
                    <a href="{{ route('admin.phong') }}" class="block px-3 py-2 text-sm text-gray-400 hover:text-white rounded hover:bg-gray-700">Danh sách phòng</a>
                    <a href="{{ route('admin.loai-phong') }}" class="block px-3 py-2 text-sm text-gray-400 hover:text-white rounded hover:bg-gray-700">Loại phòng</a>
                </div>
            </div>

            <!-- Quản lý Khuyến mãi (Table: khuyen_mais) -->
            <a href="{{ route('admin.khuyen-mai') }}" class="flex items-center px-4 py-3 text-sm font-medium rounded-lg text-gray-300 hover:bg-gray-800 hover:text-brand-gold transition">
                <i class="fa-solid fa-ticket w-6 text-lg"></i>
                <span class="ml-3">Khuyến mãi</span>
            </a>

            <!-- Quản lý Người dùng (Table: users) -->
            <p class="px-4 mt-6 mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">Hệ thống</p>
            <a href="{{ route('admin.users') }}" class="flex items-center px-4 py-3 text-sm font-medium rounded-lg text-gray-300 hover:bg-gray-800 hover:text-brand-gold transition">
                <i class="fa-solid fa-users w-6 text-lg"></i>
                <span class="ml-3">Người dùng</span>
            </a>
            
            <!-- Doanh thu / Hóa đơn (Table: hoa_dons) -->
            <a href="#" class="flex items-center px-4 py-3 text-sm font-medium rounded-lg text-gray-300 hover:bg-gray-800 hover:text-brand-gold transition">
                <i class="fa-solid fa-chart-line w-6 text-lg"></i>
                <span class="ml-3">Báo cáo doanh thu</span>
            </a>
        </nav>

        <!-- User Info (Bottom Sidebar) -->
        <div class="border-t border-gray-800 p-4">
            <div class="flex items-center">
                <div class="w-9 h-9 rounded-full bg-brand-gold flex items-center justify-center text-brand-900 font-bold">A</div>
                <div class="ml-3">
                    <p class="text-sm font-medium text-white">{{ Auth::user()->name ?? 'Admin' }}</p>
                    <form method="POST" action="{{ route('logout') }}">
                        @csrf
                        <button class="text-xs text-gray-400 hover:text-white">Đăng xuất</button>
                    </form>
                </div>
            </div>
        </div>
    </aside>
</file>

<file path="resources/views/admin/loai_phong/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('content')

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-6"></div>
    <div class="toolbar mb-6">
        <h1 class="text-2xl font-semibold text-gray-900">Các hạng phòng</h1>
        <a href="{{ route('admin.loai-phong.them') }}" class="btn-primary inline-flex items-center gap-2 text-sm font-semibold">
            <i class="fa fa-plus"></i> Thêm loại phòng
        </a>
    </div>

    <div class="card-common">
        <div class="overflow-x-auto">
            @if($loaiPhongs->isEmpty())
                <div class="p-6 text-center text-gray-500">Chưa có loại phòng nào. Hãy thêm mới.</div>
            @else
            <table class="table-common min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tên loại phòng</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Giá</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Số người</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tiện nghi</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach ($loaiPhongs as $lp)
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $loop->iteration }}</td>
                        <td class="px-6 py-4 text-sm font-medium text-gray-900">{{ $lp->ten_loai_phong }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ number_format($lp->gia ?? 0, 0, ',', '.') }} VND</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $lp->so_nguoi ?? '-' }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $lp->tien_nghi }}</td>
                        <td class="px-6 py-4 text-sm text-center">
                            <a href="{{ route('admin.loai-phong.sua', ['id' => $lp->id]) }}" class="text-blue-600 hover:text-blue-800 mr-3" title="Sửa"><i class="fa fa-edit"></i></a>
                            <a href="{{ route('admin.loai-phong.xoa', ['id' => $lp->id]) }}" onclick="return confirm('Bạn có muốn xóa loại phòng {{ $lp->ten_loai_phong }} không?')" class="text-red-600 hover:text-red-800" title="Xóa"><i class="fa fa-trash"></i></a>
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
            @endif
        </div>
    </div>
</div>

@endsection
</file>

<file path="resources/views/admin/loai_phong/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4">
            <h2 class="text-lg font-semibold">Sửa loại phòng</h2>
            <a href="{{ route('admin.loai-phong') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.loai-phong.sua', ['id' => $loaiPhong->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ten_loai_phong">Tên loại phòng</label>
                    <input type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" id="ten_loai_phong" name="ten_loai_phong" value="{{ $loaiPhong->ten_loai_phong }}" required />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="gia">Giá (VND)</label>
                    <input type="number" step="0.01" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" id="gia" name="gia" value="{{ $loaiPhong->gia }}" />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="so_nguoi">Số người</label>
                    <input type="number" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" id="so_nguoi" name="so_nguoi" min="1" value="{{ $loaiPhong->so_nguoi }}" />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="tien_nghi">Tiện nghi (JSON hoặc liệt kê)</label>
                    <textarea class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" id="tien_nghi" name="tien_nghi" rows="3">{{ $loaiPhong->tien_nghi }}</textarea>
                </div>

                <div class="flex items-center justify-end pt-2">
                    <button type="submit" class="btn-primary inline-flex items-center gap-2">
                        <i class="fa fa-save"></i> Lưu
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/loai_phong/them.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
	<div class="card-common p-6">
		<div class="toolbar mb-4">
			<h2 class="text-lg font-semibold">Thêm loại phòng</h2>
			<a href="{{ route('admin.loai-phong') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
		</div>

		<form action="{{ route('admin.loai-phong.store') }}" method="POST">
			@csrf
			<div class="grid grid-cols-1 gap-4">
				<div>
					<label class="block text-sm font-medium text-gray-700" for="ten_loai_phong">Tên loại phòng</label>
					<input type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" id="ten_loai_phong" name="ten_loai_phong" value="{{ old('ten_loai_phong') }}" required />
					@error('ten_loai_phong') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700" for="gia">Giá (VND)</label>
					<input type="number" step="0.01" id="gia" name="gia" value="{{ old('gia') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700" for="so_nguoi">Số người</label>
					<input type="number" id="so_nguoi" name="so_nguoi" value="{{ old('so_nguoi', 1) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" min="1" />
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700" for="tien_nghi">Tiện nghi</label>
					<textarea id="tien_nghi" name="tien_nghi" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" rows="3">{{ old('tien_nghi') }}</textarea>
				</div>

				<div class="flex items-center justify-end pt-2">
					<button type="submit" class="btn-primary inline-flex items-center gap-2">
						<i class="fa fa-save"></i> Thêm
					</button>
				</div>
			</div>
		</form>
	</div>
</div>
@endsection
</file>

<file path="resources/views/admin/phong/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('content')

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-6"></div>
    <div class="toolbar mb-6">
        <h1 class="text-2xl font-semibold text-gray-900">Các phòng</h1>
        <a href="{{ route('admin.phong.them') }}" class="btn-primary inline-flex items-center gap-2 text-sm font-semibold">
            <i class="fa fa-plus"></i> Thêm phòng
        </a>
    </div>

    <div class="card-common">
        <div class="overflow-x-auto">
            @if($phongs->isEmpty())
                <div class="p-6 text-center text-gray-500">Chưa có phòng nào. Hãy thêm mới.</div>
            @else
            <table class="table-common min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Số phòng</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tình trạng</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach ($phongs as $phong)
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $loop->iteration }}</td>
                        <td class="px-6 py-4 text-sm font-medium text-gray-900">{{ $phong->so_phong }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">
                            @php $meta = \App\Models\Phong::tinh_trang_options[$phong->tinh_trang] ?? null; @endphp
                            @if($meta)
                                <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs {{ $meta['class'] }}">
                                    <i class="fa {{ $meta['icon'] }}"></i> {{ $meta['label'] }}
                                </span>
                            @else
                                <span class="text-muted">{{ $phong->tinh_trang }}</span>
                            @endif
                        </td>
                        <td class="px-6 py-4 text-sm text-center">
                            <a href="{{ route('admin.phong.sua', ['id' => $phong->id]) }}" class="text-blue-600 hover:text-blue-800 mr-3" title="Sửa"><i class="fa fa-edit"></i></a>
                            <a href="{{ route('admin.phong.xoa', ['id' => $phong->id]) }}" onclick="return confirm('Bạn có muốn xóa phòng {{ $phong->so_phong }} không?')" class="text-red-600 hover:text-red-800" title="Xóa"><i class="fa fa-trash"></i></a>
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
            @endif
        </div>
    </div>
</div>

@endsection
</file>

<file path="resources/views/admin/phong/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4">
            <h2 class="text-lg font-semibold">Sửa phòng</h2>
            <a href="{{ route('admin.phong') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.phong.sua', ['id' => $phong->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="so_phong">Số phòng</label>
                    <input type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" id="so_phong" name="so_phong" value="{{ $phong->so_phong }}" required />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="loai_phong_id">Loại phòng</label>
                    <select class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" id="loai_phong_id" name="loai_phong_id" required>
                        @foreach($loaiPhongs as $lp)
                            <option value="{{ $lp->id }}" {{ $phong->loai_phong_id == $lp->id ? 'selected' : '' }}>{{ $lp->ten_loai_phong }}</option>
                        @endforeach
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="tinh_trang">Tình trạng</label>
                    <select class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" id="tinh_trang" name="tinh_trang">
                        @foreach(\App\Models\Phong::tinh_trang_options as $key => $meta)
                            <option value="{{ $key }}" {{ $phong->tinh_trang == $key ? 'selected' : '' }}>{{ $meta['label'] }}</option>
                        @endforeach
                    </select>
                </div>

                <div class="flex items-center justify-end pt-2">
                    <button type="submit" class="btn-primary inline-flex items-center gap-2">
                        <i class="fa fa-save"></i> Lưu
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/phong/them.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
	<div class="card-common p-6">
		<div class="toolbar mb-4">
			<h2 class="text-lg font-semibold">Thêm phòng</h2>
			<a href="{{ route('admin.phong') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
		</div>

		<form action="{{ route('admin.phong.store') }}" method="POST">
			@csrf
			<div class="grid grid-cols-1 gap-4">
				<div>
					<label class="block text-sm font-medium text-gray-700" for="so_phong">Số phòng</label>
					<input type="text" id="so_phong" name="so_phong" value="{{ old('so_phong') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required />
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700" for="loai_phong_id">Loại phòng</label>
					<select id="loai_phong_id" name="loai_phong_id" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
						<option value="">-- Chọn loại phòng --</option>
						@foreach(\App\Models\LoaiPhong::all() as $lp)
							<option value="{{ $lp->id }}">{{ $lp->ten_loai_phong }}</option>
						@endforeach
					</select>
				</div>

				<div class="flex items-center justify-end pt-2">
					<button type="submit" class="btn-primary inline-flex items-center gap-2">
						<i class="fa fa-save"></i> Thêm
					</button>
				</div>
			</div>
		</form>
	</div>
</div>
@endsection
</file>

<file path="resources/views/admin/users/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('content')

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-6"></div>
    <div class="toolbar mb-6">
        <h1 class="text-2xl font-semibold text-gray-900">Người dùng</h1>
        <a href="{{ route('admin.user.them') }}" class="btn-primary inline-flex items-center gap-2 text-sm font-semibold">
            <i class="fa fa-plus"></i> Thêm người dùng
        </a>
    </div>

    <div class="card-common">
        <div class="overflow-x-auto">
            @if($users->isEmpty())
                <div class="p-6 text-center text-gray-500">Chưa có khách hàng nào. Hãy thêm mới.</div>
            @else
            <table class="table-common min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tên người dùng</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">số điện thoại</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">CCCD</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Username</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quyền hạn</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Password</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach ($users as $user)
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $loop->iteration }}</td>
                        <td class="px-6 py-4 text-sm font-medium text-gray-900">{{ $user->name}}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $user->email }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $user->phone }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $user->cccd }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $user->username }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $user->role }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">
                            <div class="w-32 truncate font-mono text-xs text-gray-500 bg-gray-100 p-1 rounded border border-gray-200 cursor-help" title="{{ $user->password }}">
                                {{ $user->password }}
                            </div>
                        </td>
                        </td>
                        <td class="px-6 py-4 text-sm text-center">
                            <a href="{{ route('admin.user.sua', ['id' => $user->id]) }}" class="text-blue-600 hover:text-blue-800 mr-3" title="Sửa"><i class="fa fa-edit"></i></a>
                            <a href="{{ route('admin.user.xoa', ['id' => $user->id]) }}" onclick="return confirm('Bạn có muốn xóa phòng {{ $user->name }} không?')" class="text-red-600 hover:text-red-800" title="Xóa"><i class="fa fa-trash"></i></a>
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
            @endif
        </div>
    </div>
</div>

@endsection
</file>

<file path="resources/views/admin/users/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Sửa người dùng</h2>
            <a href="{{ route('admin.user') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.user.sua', ['id' => $user->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="name">Tên</label>
                    <input type="text" id="name" name="name" value="{{ old('name', $user->name) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('name') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="email">Email</label>
                    <input type="email" id="email" name="email" value="{{ old('email', $user->email) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('email') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="phone">Số điện thoại</label>
                    <input type="text" id="phone" name="phone" value="{{ old('phone', $user->phone) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('phone') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="cccd">CCCD</label>
                    <input type="text" id="cccd" name="cccd" value="{{ old('cccd', $user->cccd) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('cccd') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="username">Username</label>
                    <input type="text" id="username" name="username" value="{{ old('username', $user->username) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('username') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="role">Vai trò</label>
                    <select id="role" name="role" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900">
                        <option value="user" {{ old('role', $user->role) == 'user' ? 'selected' : '' }}>User</option>
                        <option value="admin" {{ old('role', $user->role) == 'admin' ? 'selected' : '' }}>Admin</option>
                    </select>
                    @error('role') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="password">Mật khẩu (để trống nếu không đổi)</label>
                    <input type="password" id="password" name="password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('password') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div class="flex items-center justify-end pt-2">
                    <button type="submit" class="btn-primary inline-flex items-center gap-2">
                        <i class="fa fa-save"></i> Lưu
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/users/them.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Thêm người dùng</h2>
            <a href="{{ route('admin.user') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.user.store') }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="name">Tên</label>
                    <input type="text" id="name" name="name" value="{{ old('name') }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('name') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="email">Email</label>
                    <input type="email" id="email" name="email" value="{{ old('email') }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('email') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="phone">Số điện thoại</label>
                    <input type="text" id="phone" name="phone" value="{{ old('phone') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('phone') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="cccd">CCCD</label>
                    <input type="text" id="cccd" name="cccd" value="{{ old('cccd') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('cccd') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="username">Username</label>
                    <input type="text" id="username" name="username" value="{{ old('username') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('username') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="role">Vai trò</label>
                    <select id="role" name="role" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900">
                        <option value="user" {{ old('role') == 'user' ? 'selected' : '' }}>User</option>
                        <option value="admin" {{ old('role') == 'admin' ? 'selected' : '' }}>Admin</option>
                    </select>
                    @error('role') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="password">Mật khẩu</label>
                    <input type="password" id="password" name="password" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('password') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>
            </div>
            <div class="mt-6 flex items-center justify-end space-x-3">
                <a href="{{ route('admin.user') }}" class="text-sm text-gray-600 hover:underline">Hủy</a>
                <button type="submit" class="btn-primary">Thêm</button>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/passwords/confirm.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Confirm Password') }}</div>

                <div class="card-body">
                    {{ __('Please confirm your password before continuing.') }}

                    <form method="POST" action="{{ route('password.confirm') }}">
                        @csrf

                        <div class="row mb-3">
                            <label for="password" class="col-md-4 col-form-label text-md-end">{{ __('Password') }}</label>

                            <div class="col-md-6">
                                <input id="password" type="password" class="form-control @error('password') is-invalid @enderror" name="password" required autocomplete="current-password">

                                @error('password')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-0">
                            <div class="col-md-8 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    {{ __('Confirm Password') }}
                                </button>

                                @if (Route::has('password.request'))
                                    <a class="btn btn-link" href="{{ route('password.request') }}">
                                        {{ __('Forgot Your Password?') }}
                                    </a>
                                @endif
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/passwords/email.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Reset Password') }}</div>

                <div class="card-body">
                    @if (session('status'))
                        <div class="alert alert-success" role="alert">
                            {{ session('status') }}
                        </div>
                    @endif

                    <form method="POST" action="{{ route('password.email') }}">
                        @csrf

                        <div class="row mb-3">
                            <label for="email" class="col-md-4 col-form-label text-md-end">{{ __('Email Address') }}</label>

                            <div class="col-md-6">
                                <input id="email" type="email" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email') }}" required autocomplete="email" autofocus>

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-0">
                            <div class="col-md-6 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    {{ __('Send Password Reset Link') }}
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/passwords/reset.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Reset Password') }}</div>

                <div class="card-body">
                    <form method="POST" action="{{ route('password.update') }}">
                        @csrf

                        <input type="hidden" name="token" value="{{ $token }}">

                        <div class="row mb-3">
                            <label for="email" class="col-md-4 col-form-label text-md-end">{{ __('Email Address') }}</label>

                            <div class="col-md-6">
                                <input id="email" type="email" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ $email ?? old('email') }}" required autocomplete="email" autofocus>

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label for="password" class="col-md-4 col-form-label text-md-end">{{ __('Password') }}</label>

                            <div class="col-md-6">
                                <input id="password" type="password" class="form-control @error('password') is-invalid @enderror" name="password" required autocomplete="new-password">

                                @error('password')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label for="password-confirm" class="col-md-4 col-form-label text-md-end">{{ __('Confirm Password') }}</label>

                            <div class="col-md-6">
                                <input id="password-confirm" type="password" class="form-control" name="password_confirmation" required autocomplete="new-password">
                            </div>
                        </div>

                        <div class="row mb-0">
                            <div class="col-md-6 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    {{ __('Reset Password') }}
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/register.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Register') }}</div>

                <div class="card-body">
                    <form method="POST" action="{{ route('register') }}">
                        @csrf

                        <div class="row mb-3">
                            <label for="name" class="col-md-4 col-form-label text-md-end">{{ __('Name') }}</label>

                            <div class="col-md-6">
                                <input id="name" type="text" class="form-control @error('name') is-invalid @enderror" name="name" value="{{ old('name') }}" required autocomplete="name" autofocus>

                                @error('name')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label for="email" class="col-md-4 col-form-label text-md-end">{{ __('Email Address') }}</label>

                            <div class="col-md-6">
                                <input id="email" type="email" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email') }}" required autocomplete="email">

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label for="password" class="col-md-4 col-form-label text-md-end">{{ __('Password') }}</label>

                            <div class="col-md-6">
                                <input id="password" type="password" class="form-control @error('password') is-invalid @enderror" name="password" required autocomplete="new-password">

                                @error('password')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label for="password-confirm" class="col-md-4 col-form-label text-md-end">{{ __('Confirm Password') }}</label>

                            <div class="col-md-6">
                                <input id="password-confirm" type="password" class="form-control" name="password_confirmation" required autocomplete="new-password">
                            </div>
                        </div>

                        <div class="row mb-0">
                            <div class="col-md-6 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    {{ __('Register') }}
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/verify.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Verify Your Email Address') }}</div>

                <div class="card-body">
                    @if (session('resent'))
                        <div class="alert alert-success" role="alert">
                            {{ __('A fresh verification link has been sent to your email address.') }}
                        </div>
                    @endif

                    {{ __('Before proceeding, please check your email for a verification link.') }}
                    {{ __('If you did not receive the email') }},
                    <form class="d-inline" method="POST" action="{{ route('verification.resend') }}">
                        @csrf
                        <button type="submit" class="btn btn-link p-0 m-0 align-baseline">{{ __('click here to request another') }}</button>.
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/booking/create.blade.php">
@extends('layouts.app')
@section('title', 'Xác nhận đặt phòng')

@section('content')
<div class="bg-gray-50 py-16 min-h-screen">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-10">
            <h1 class="font-serif text-3xl md:text-4xl font-bold text-gray-900 mb-2">Hoàn tất đặt phòng</h1>
            <p class="text-gray-500">Vui lòng kiểm tra lại thông tin trước khi xác nhận.</p>
        </div>

        <form action="{{ route('booking.store') }}" method="POST" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            @csrf
            <!-- Dữ liệu ẩn quan trọng để gửi về Server -->
            <input type="hidden" name="room_type_id" value="{{ $roomType->id }}">
            <input type="hidden" name="check_in" value="{{ $checkIn }}">
            <input type="hidden" name="check_out" value="{{ $checkOut }}">

            <!-- CỘT TRÁI: Thông tin khách & Thanh toán -->
            <div class="lg:col-span-2 space-y-6">
                
                <!-- Box 1: Thông tin khách hàng (Read-only từ Auth) -->
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-lg mb-6 flex items-center text-brand-900 pb-4 border-b border-gray-100">
                        <span class="w-8 h-8 rounded-full bg-brand-900 text-white flex items-center justify-center text-sm mr-3 font-mono">1</span>
                        Thông tin khách hàng
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="group">
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Họ và tên</label>
                            <input type="text" value="{{ Auth::user()->name }}" disabled class="w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 text-gray-700 font-medium cursor-not-allowed group-hover:bg-gray-100 transition">
                        </div>
                        <div class="group">
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Email</label>
                            <input type="text" value="{{ Auth::user()->email }}" disabled class="w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 text-gray-700 cursor-not-allowed group-hover:bg-gray-100 transition">
                        </div>
                        <div class="group">
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Số điện thoại</label>
                            <input type="text" value="{{ Auth::user()->phone }}" disabled class="w-full bg-blue-50 border border-blue-200 rounded-lg px-4 py-3 text-blue-900 font-bold cursor-not-allowed">
                        </div>
                        <div class="group">
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">CCCD / CMND</label>
                            <input type="text" value="{{ Auth::user()->cccd }}" disabled class="w-full bg-blue-50 border border-blue-200 rounded-lg px-4 py-3 text-blue-900 font-bold cursor-not-allowed">
                        </div>
                    </div>

                    <div class="mt-6 flex items-start p-4 bg-yellow-50 text-yellow-800 rounded-xl text-sm border border-yellow-100">
                        <i class="fa-solid fa-circle-info mt-0.5 mr-3 text-yellow-600 text-lg"></i>
                        <div>
                            <p class="font-bold mb-1">Thông tin trên có chính xác không?</p>
                            <p>Đây là thông tin dùng để làm thủ tục nhận phòng. Nếu sai, vui lòng <a href="{{ route('profile.edit') }}" class="underline font-bold text-yellow-900 hover:text-yellow-700">cập nhật hồ sơ</a> trước khi tiếp tục.</p>
                        </div>
                    </div>
                </div>

                <!-- Box 2: Phương thức thanh toán -->
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-lg mb-6 flex items-center text-brand-900 pb-4 border-b border-gray-100">
                        <span class="w-8 h-8 rounded-full bg-brand-900 text-white flex items-center justify-center text-sm mr-3 font-mono">2</span>
                        Thanh toán
                    </h3>
                    
                    <div class="space-y-4">
                        <!-- Option 1: Trả sau -->
                        <label class="relative flex items-start p-5 border-2 rounded-xl cursor-pointer bg-brand-50 border-brand-gold transition-all shadow-sm hover:shadow-md">
                            <div class="flex items-center h-6">
                                <input type="radio" name="payment_method" value="pay_at_hotel" checked class="w-5 h-5 text-brand-900 border-gray-300 focus:ring-brand-900">
                            </div>
                            <div class="ml-4">
                                <span class="block font-bold text-gray-900 text-lg">Thanh toán tại khách sạn</span>
                                <span class="block text-sm text-gray-600 mt-1">Bạn sẽ thanh toán toàn bộ chi phí khi làm thủ tục nhận phòng tại quầy lễ tân.</span>
                                <div class="mt-3 flex gap-2">
                                    <span class="inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-green-100 text-green-800 border border-green-200"><i class="fa-solid fa-money-bill-wave mr-1"></i> Tiền mặt</span>
                                    <span class="inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200"><i class="fa-regular fa-credit-card mr-1"></i> Thẻ tín dụng</span>
                                </div>
                            </div>
                            <i class="fa-solid fa-hotel absolute top-5 right-5 text-2xl text-brand-900/10"></i>
                        </label>

                        <!-- Option 2: VNPay (Disabled) -->
                        <label class="flex items-center p-5 border rounded-xl cursor-not-allowed bg-gray-50 opacity-60">
                            <input type="radio" disabled class="w-5 h-5 text-gray-400 border-gray-300">
                            <div class="ml-4">
                                <span class="block font-bold text-gray-500">Thanh toán Online (VNPay / Momo)</span>
                                <span class="block text-sm text-gray-400">Tính năng đang bảo trì</span>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- CỘT PHẢI: Tóm tắt đơn hàng (Sticky) -->
            <div class="lg:col-span-1">
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border border-gray-100 sticky top-24">
                    <h3 class="font-bold text-gray-900 mb-6 pb-4 border-b border-gray-100 text-center uppercase tracking-wider text-xs">Chi tiết đơn đặt</h3>
                    
                    <!-- Thông tin phòng -->
                    <div class="flex gap-4 mb-6">
                        <img src="https://images.unsplash.com/photo-1590490360182-c33d57733427?w=200&q=80" class="w-20 h-20 object-cover rounded-lg shadow-sm border border-gray-200">
                        <div>
                            <h4 class="font-bold text-brand-900 leading-tight mb-1">{{ $roomType->ten_loai_phong }}</h4>
                            <p class="text-xs text-gray-500"><i class="fa-solid fa-user mr-1"></i> 2 Người lớn</p>
                        </div>
                    </div>

                    <!-- Thời gian -->
                    <div class="space-y-4 text-sm text-gray-600 mb-6 bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <div class="flex justify-between items-center">
                            <div class="text-left">
                                <span class="block text-[10px] text-gray-400 uppercase font-bold">Nhận phòng</span>
                                <span class="font-bold text-gray-900 text-base">{{ \Carbon\Carbon::parse($checkIn)->format('d/m/Y') }}</span>
                            </div>
                            <div class="text-gray-300"><i class="fa-solid fa-arrow-right-long"></i></div>
                            <div class="text-right">
                                <span class="block text-[10px] text-gray-400 uppercase font-bold">Trả phòng</span>
                                <span class="font-bold text-gray-900 text-base">{{ \Carbon\Carbon::parse($checkOut)->format('d/m/Y') }}</span>
                            </div>
                        </div>
                        <div class="border-t border-gray-200 pt-3 text-center">
                            <span class="inline-block bg-white px-3 py-1 rounded-full text-xs font-bold shadow-sm border border-gray-200 text-brand-gold">
                                <i class="fa-regular fa-clock mr-1"></i> {{ $days }} Đêm lưu trú
                            </span>
                        </div>
                    </div>

                    <!-- Chi phí -->
                    <div class="space-y-3 text-sm mb-8">
                        <div class="flex justify-between text-gray-600">
                            <span>Giá phòng</span>
                            <span>{{ number_format($roomType->gia_dem, 0, ',', '.') }}đ x {{ $days }}</span>
                        </div>
                        <div class="flex justify-between text-gray-600">
                            <span>Phí dịch vụ</span>
                            <span class="text-green-600 font-medium">Miễn phí</span>
                        </div>
                        <div class="border-t border-dashed border-gray-200 my-2"></div>
                        <div class="flex justify-between items-center pt-1">
                            <span class="font-bold text-lg text-gray-800">Tổng cộng</span>
                            <span class="font-bold text-2xl text-brand-gold">{{ number_format($totalPrice, 0, ',', '.') }}đ</span>
                        </div>
                    </div>

                    <!-- Nút Submit -->
                    <button type="submit" class="w-full bg-brand-900 text-white font-bold py-4 rounded-xl hover:bg-brand-800 transition duration-300 shadow-xl shadow-brand-900/20 flex items-center justify-center gap-2 group">
                        <span>XÁC NHẬN ĐẶT PHÒNG</span>
                        <i class="fa-solid fa-check group-hover:scale-125 transition-transform"></i>
                    </button>
                    
                    <p class="text-[10px] text-center text-gray-400 mt-4 leading-normal px-2">
                        Bằng việc xác nhận, bạn đồng ý với <a href="#" class="underline hover:text-brand-gold">Điều khoản & Chính sách</a> của Luxury Stay.
                    </p>
                </div>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/booking/success.blade.php">
@extends('layouts.app')
@section('title', 'Đặt phòng thành công')

@section('content')
<div class="min-h-[80vh] flex items-center justify-center bg-gray-50 py-12 px-4">
    <div class="max-w-md w-full bg-white p-8 md:p-12 rounded-3xl shadow-2xl text-center border-t-8 border-brand-gold relative overflow-hidden animate-fade-in-up">
        
        <!-- Background Pattern (Họa tiết chìm) -->
        <div class="absolute top-0 left-0 w-full h-full opacity-[0.03] pointer-events-none" style="background-image: radial-gradient(#111827 1px, transparent 1px); background-size: 20px 20px;"></div>

        <!-- Icon Thành công -->
        <div class="relative mx-auto flex items-center justify-center h-24 w-24 rounded-full bg-green-50 mb-8 animate-bounce-slow">
            <i class="fa-solid fa-check text-5xl text-green-500"></i>
            <!-- Hiệu ứng sóng lan tỏa -->
            <div class="absolute inset-0 rounded-full border-4 border-green-100 opacity-50 animate-ping"></div>
        </div>
        
        <h2 class="text-3xl font-serif font-bold text-brand-900 mb-2">Tuyệt vời!</h2>
        <p class="text-gray-600 mb-8">Yêu cầu đặt phòng của bạn đã được gửi thành công.</p>
        
        <!-- Khu vực hiển thị Mã đơn -->
        <div class="bg-brand-50 border border-brand-gold/20 py-5 px-6 rounded-xl mb-8 relative group cursor-pointer transition hover:shadow-md">
            <p class="text-xs text-gray-500 uppercase tracking-wider mb-2 font-bold">Mã đơn đặt phòng của bạn</p>
            <p class="font-mono text-3xl font-bold text-brand-900 tracking-widest selection:bg-brand-gold selection:text-white">
                #BK-{{ session('booking_id') ?? 'NEW' }}
            </p>
            <!-- Icon trang trí -->
            <div class="absolute -top-3 -right-3 text-brand-gold opacity-20 group-hover:opacity-40 transition-opacity">
                <i class="fa-solid fa-ticket text-6xl transform rotate-12"></i>
            </div>
        </div>

        <p class="text-sm text-gray-500 mb-8 leading-relaxed px-4">
            Chúng tôi sẽ liên hệ với bạn qua số điện thoại <strong class="text-gray-900">{{ Auth::user()->phone ?? '...' }}</strong> trong vòng 30 phút để xác nhận lại thông tin.
        </p>

        <!-- Các nút điều hướng -->
        <div class="space-y-3">
            @if (Route::has('bookings.history'))
            <a href="{{ route('bookings.history') }}" class="block w-full py-3.5 px-4 border border-transparent text-sm font-bold rounded-xl text-white bg-brand-900 hover:bg-brand-800 transition shadow-lg shadow-brand-900/20 transform hover:-translate-y-0.5">
                Xem chi tiết đơn hàng
            </a>
            @endif
            
            <a href="{{ route('trang_chu') }}" class="block w-full py-3.5 px-4 border border-gray-200 text-sm font-bold rounded-xl text-gray-600 bg-white hover:bg-gray-50 transition hover:border-gray-300">
                Về trang chủ
            </a>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/profile/edit.blade.php">
@extends('layouts.app')
@section('title', 'Hồ sơ cá nhân')

@section('content')
<div class="bg-gray-50 min-h-screen py-12">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Breadcrumb -->
        <nav class="flex mb-8 text-sm text-gray-500">
            <a href="{{ route('trang_chu') }}" class="hover:text-brand-gold transition">Trang chủ</a>
            <span class="mx-2 text-gray-300">/</span>
            <span class="text-brand-900 font-medium">Hồ sơ cá nhân</span>
        </nav>

        <!-- Thông báo đặc biệt (nếu bị redirect từ trang đặt phòng về) -->
        @if(session('error'))
            <div class="mb-8 bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg shadow-sm animate-pulse">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fa-solid fa-circle-exclamation text-red-500 text-xl"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm text-red-700 font-bold">
                            {{ session('error') }}
                        </p>
                        <p class="text-xs text-red-600 mt-1">Vui lòng hoàn thiện thông tin dưới đây để tiếp tục.</p>
                    </div>
                </div>
            </div>
        @endif

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            
            <!-- CỘT TRÁI: Sidebar Cá nhân -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden sticky top-24">
                    <!-- Header Sidebar -->
                    <div class="bg-brand-900 p-6 text-center">
                        <div class="w-20 h-20 mx-auto bg-brand-gold rounded-full flex items-center justify-center text-white text-3xl font-serif font-bold shadow-lg border-4 border-white/10">
                            {{ substr($user->name, 0, 1) }}
                        </div>
                        <h2 class="mt-4 text-white font-bold truncate">{{ $user->name }}</h2>
                        <p class="text-brand-gold text-xs uppercase tracking-wider mt-1">Thành viên thân thiết</p>
                    </div>
                    
                    <!-- Menu Links -->
                    <div class="p-2">
                        <a href="{{ route('profile.edit') }}" class="flex items-center px-4 py-3 text-sm font-medium text-brand-900 bg-brand-50 rounded-lg mb-1">
                            <i class="fa-solid fa-user-pen w-6 text-brand-gold"></i>
                            Thông tin cá nhân
                        </a>
                        <a href="{{ route('bookings.history') }}" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-brand-900 rounded-lg transition">
                            <i class="fa-solid fa-clock-rotate-left w-6 text-gray-400"></i>
                            Lịch sử đặt phòng
                        </a>
                        
                        <form method="POST" action="{{ route('logout') }}" class="mt-2 border-t border-gray-100 pt-2">
                            @csrf
                            <button type="submit" class="w-full flex items-center px-4 py-3 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition">
                                <i class="fa-solid fa-right-from-bracket w-6"></i>
                                Đăng xuất
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- CỘT PHẢI: Form Cập nhật -->
            <div class="lg:col-span-3">
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-10">
                    <div class="border-b border-gray-100 pb-6 mb-6 flex justify-between items-center">
                        <div>
                            <h1 class="font-serif text-2xl font-bold text-gray-900">Cập nhật thông tin</h1>
                            <p class="text-sm text-gray-500 mt-1">Quản lý thông tin hồ sơ của bạn để bảo mật và đặt phòng nhanh hơn.</p>
                        </div>
                        <div class="hidden md:block text-brand-gold text-4xl opacity-20">
                            <i class="fa-solid fa-address-card"></i>
                        </div>
                    </div>

                    <form method="POST" action="{{ route('profile.update') }}">
                        @csrf
                        @method('PATCH')

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <!-- 1. Họ và tên -->
                            <div class="md:col-span-2">
                                <label for="name" class="block text-xs font-bold text-gray-500 uppercase mb-2">Họ và tên <span class="text-red-500">*</span></label>
                                <div class="relative">
                                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400">
                                        <i class="fa-regular fa-user"></i>
                                    </span>
                                    <input type="text" name="name" id="name" value="{{ old('name', $user->name) }}" class="pl-10 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-brand-gold focus:border-brand-gold transition" required>
                                </div>
                                @error('name') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                            </div>

                            <!-- 2. Email (Read-only hoặc Editable tùy bạn, thường nên cho sửa nhưng phải check unique) -->
                            <div class="md:col-span-2">
                                <label for="email" class="block text-xs font-bold text-gray-500 uppercase mb-2">Địa chỉ Email <span class="text-red-500">*</span></label>
                                <div class="relative">
                                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400">
                                        <i class="fa-regular fa-envelope"></i>
                                    </span>
                                    <input type="email" name="email" id="email" value="{{ old('email', $user->email) }}" class="pl-10 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-brand-gold focus:border-brand-gold transition" required>
                                </div>
                                @error('email') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                            </div>

                            <!-- 3. Số điện thoại (QUAN TRỌNG) -->
                            <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 md:col-span-1">
                                <label for="phone" class="block text-xs font-bold text-blue-800 uppercase mb-2">Số điện thoại <span class="text-red-500">*</span></label>
                                <div class="relative">
                                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-blue-500">
                                        <i class="fa-solid fa-phone"></i>
                                    </span>
                                    <input type="text" name="phone" id="phone" value="{{ old('phone', $user->phone) }}" class="pl-10 block w-full border-blue-200 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white" placeholder="0901234567" required>
                                </div>
                                <p class="text-[10px] text-blue-600 mt-2">Dùng để liên hệ xác nhận đặt phòng.</p>
                                @error('phone') <p class="text-red-500 text-xs mt-1 font-bold">{{ $message }}</p> @enderror
                            </div>

                            <!-- 4. CCCD (QUAN TRỌNG) -->
                            <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 md:col-span-1">
                                <label for="cccd" class="block text-xs font-bold text-blue-800 uppercase mb-2">CCCD / CMND <span class="text-red-500">*</span></label>
                                <div class="relative">
                                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-blue-500">
                                        <i class="fa-solid fa-id-card"></i>
                                    </span>
                                    <input type="text" name="cccd" id="cccd" value="{{ old('cccd', $user->cccd) }}" class="pl-10 block w-full border-blue-200 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white" placeholder="12 số căn cước" required>
                                </div>
                                <p class="text-[10px] text-blue-600 mt-2">Bắt buộc để làm thủ tục lưu trú.</p>
                                @error('cccd') <p class="text-red-500 text-xs mt-1 font-bold">{{ $message }}</p> @enderror
                            </div>
                        </div>

                        <!-- 5. Mật khẩu (Optional - Thường tách ra trang riêng hoặc accordion, ở đây để đơn giản ta bỏ qua đổi pass, chỉ tập trung thông tin cơ bản) -->
                        
                        <div class="flex items-center justify-end pt-6 border-t border-gray-100">
                            <button type="submit" class="bg-brand-900 text-white font-bold py-3 px-8 rounded-lg hover:bg-brand-800 transition duration-300 shadow-lg transform hover:-translate-y-0.5 flex items-center gap-2">
                                <i class="fa-solid fa-save"></i>
                                <span>Lưu thay đổi</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/rooms/detail.blade.php">
@extends('layouts.app')
@section('title', $room->ten_loai_phong)

@section('content')
<div class="py-12 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Breadcrumb -->
        <nav class="flex mb-8 text-sm text-gray-500">
            <a href="{{ route('trang_chu') }}" class="hover:text-brand-gold transition">Trang chủ</a>
            <span class="mx-2 text-gray-300">/</span>
            <a href="{{ route('phong') }}" class="hover:text-brand-gold transition">Phòng nghỉ</a>
            <span class="mx-2 text-gray-300">/</span>
            <span class="text-brand-900 font-medium border-b border-brand-gold pb-0.5">{{ $room->ten_loai_phong }}</span>
        </nav>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
            <!-- CỘT TRÁI: Hình ảnh & Thông tin -->
            <div class="lg:col-span-2">
                <!-- Ảnh lớn -->
                <div class="rounded-2xl overflow-hidden shadow-2xl mb-8 group relative">
                    <img src="https://images.unsplash.com/photo-1590490360182-c33d57733427?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" 
                         class="w-full h-[500px] object-cover transition duration-700 group-hover:scale-105" alt="Main Image">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-60"></div>
                    <div class="absolute bottom-6 left-6 text-white">
                        <h1 class="font-serif text-3xl md:text-4xl font-bold mb-2">{{ $room->ten_loai_phong }}</h1>
                        <p class="text-sm opacity-90"><i class="fa-solid fa-location-dot mr-2 text-brand-gold"></i> Tầng cao • View thành phố</p>
                    </div>
                </div>
                
                <!-- Mô tả -->
                <div class="prose max-w-none text-gray-600 leading-relaxed mb-10">
                    <h3 class="font-serif text-2xl font-bold text-brand-900 mb-4 border-l-4 border-brand-gold pl-4">Mô tả phòng</h3>
                    <p>{{ $room->mo_ta }}</p>
                    <p>Được thiết kế với phong cách hiện đại pha lẫn nét cổ điển, phòng {{ $room->ten_loai_phong }} mang đến không gian nghỉ dưỡng lý tưởng. Nội thất cao cấp, ánh sáng tự nhiên và các tiện ích công nghệ cao sẽ làm hài lòng những vị khách khó tính nhất.</p>
                </div>

                <!-- Tiện nghi -->
                <div class="bg-gray-50 rounded-2xl p-8 border border-gray-100">
                    <h3 class="font-serif text-2xl font-bold text-brand-900 mb-6">Tiện nghi cao cấp</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-y-6 gap-x-8">
                        <div class="flex items-center text-gray-700"><div class="w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center text-brand-gold mr-3"><i class="fa-solid fa-wifi"></i></div> Wifi tốc độ cao</div>
                        <div class="flex items-center text-gray-700"><div class="w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center text-brand-gold mr-3"><i class="fa-solid fa-tv"></i></div> Smart TV 4K</div>
                        <div class="flex items-center text-gray-700"><div class="w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center text-brand-gold mr-3"><i class="fa-solid fa-snowflake"></i></div> Điều hòa 2 chiều</div>
                        <div class="flex items-center text-gray-700"><div class="w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center text-brand-gold mr-3"><i class="fa-solid fa-martini-glass"></i></div> Mini Bar</div>
                        <div class="flex items-center text-gray-700"><div class="w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center text-brand-gold mr-3"><i class="fa-solid fa-vault"></i></div> Két an toàn</div>
                        <div class="flex items-center text-gray-700"><div class="w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center text-brand-gold mr-3"><i class="fa-solid fa-bath"></i></div> Bồn tắm nằm</div>
                    </div>
                </div>
            </div>

            <!-- CỘT PHẢI: Form Đặt phòng (Sticky) -->
            <div class="lg:col-span-1">
                <div class="bg-white p-8 rounded-2xl shadow-[0_20px_50px_-12px_rgba(0,0,0,0.1)] border border-gray-100 sticky top-24">
                    <div class="flex items-end justify-between mb-6 pb-6 border-b border-gray-100">
                        <div>
                            <span class="block text-xs text-gray-500 font-bold uppercase tracking-wider mb-1">Giá tốt nhất</span>
                            <div class="flex items-baseline">
                                <span class="text-3xl font-serif font-bold text-brand-900">{{ number_format($room->gia_dem, 0, ',', '.') }}đ</span>
                                <span class="text-gray-500 ml-1">/đêm</span>
                            </div>
                        </div>
                        <div class="bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded">
                            <i class="fa-solid fa-check"></i> Có ăn sáng
                        </div>
                    </div>

                    <!-- FORM KIỂM TRA & ĐẶT -->
                    <!-- Action trỏ đến route booking.create (GET) -->
                    <form action="{{ route('booking.create') }}" method="GET">
                        <input type="hidden" name="room_id" value="{{ $room->id }}">
                        
                        <div class="space-y-5 mb-6">
                            <div>
                                <label class="block text-xs font-bold text-gray-700 uppercase mb-2">Ngày nhận phòng</label>
                                <div class="relative">
                                    <input type="date" name="checkin" class="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-brand-gold focus:border-transparent transition cursor-pointer" required min="{{ date('Y-m-d') }}">
                                    <i class="fa-regular fa-calendar absolute left-3 top-3.5 text-brand-gold"></i>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-700 uppercase mb-2">Ngày trả phòng</label>
                                <div class="relative">
                                    <input type="date" name="checkout" class="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-brand-gold focus:border-transparent transition cursor-pointer" required min="{{ date('Y-m-d') }}">
                                    <i class="fa-regular fa-calendar-check absolute left-3 top-3.5 text-brand-gold"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Trạng thái phòng & Nút Submit -->
                        @if($phongTrong > 0)
                            <div class="mb-6 bg-green-50 text-green-800 px-4 py-3 rounded-lg flex items-center text-sm border border-green-200">
                                <i class="fa-solid fa-circle-check mr-3 text-lg"></i> 
                                <div>
                                    <span class="font-bold block">Còn phòng!</span>
                                    <span class="text-xs">Hiện có {{ $phongTrong }} phòng trống cho bạn.</span>
                                </div>
                            </div>
                            <button type="submit" class="w-full bg-brand-900 text-white font-bold py-4 rounded-xl hover:bg-brand-800 transition duration-300 shadow-xl shadow-brand-900/20 transform hover:-translate-y-1 flex justify-center items-center gap-2 group">
                                <span>ĐẶT PHÒNG NGAY</span>
                                <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                            </button>
                        @else
                            <div class="mb-6 bg-red-50 text-red-800 px-4 py-3 rounded-lg flex items-center text-sm border border-red-200">
                                <i class="fa-solid fa-circle-exclamation mr-3 text-lg"></i> 
                                <div>
                                    <span class="font-bold block">Hết phòng</span>
                                    <span class="text-xs">Rất tiếc, loại phòng này hiện không còn trống.</span>
                                </div>
                            </div>
                            <button disabled class="w-full bg-gray-100 text-gray-400 font-bold py-4 rounded-xl cursor-not-allowed border border-gray-200">
                                TẠM HẾT PHÒNG
                            </button>
                        @endif
                        
                        <p class="text-[11px] text-center text-gray-400 mt-4 leading-tight px-4">
                            * Bạn sẽ được yêu cầu đăng nhập và cập nhật hồ sơ để hoàn tất đặt phòng.
                        </p>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/rooms/index.blade.php">
@extends('layouts.app')
@section('title', 'Danh sách phòng nghỉ')

@section('content')
<!-- 1. Header Banner -->
<div class="relative bg-brand-900 py-24 text-center text-white mb-12">
    <!-- Hình nền mờ -->
    <div class="absolute inset-0 overflow-hidden">
        <img src="https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80" 
             alt="Background" 
             class="w-full h-full object-cover opacity-30 transform scale-105">
        <div class="absolute inset-0 bg-gradient-to-b from-brand-900/50 to-brand-900/90"></div>
    </div>
    
    <!-- Nội dung Banner -->
    <div class="relative z-10 max-w-7xl mx-auto px-4">
        <span class="text-brand-gold font-bold tracking-[0.2em] uppercase text-sm mb-4 block animate-fade-in-up">Luxury Collection</span>
        <h1 class="font-serif text-4xl md:text-6xl font-bold mb-6 leading-tight">Bộ Sưu Tập Phòng Nghỉ</h1>
        <p class="text-gray-300 text-lg font-light max-w-2xl mx-auto">
            Khám phá không gian nghỉ dưỡng đẳng cấp, nơi từng chi tiết được chăm chút tỉ mỉ để mang lại sự thoải mái tuyệt đối cho bạn.
        </p>
    </div>
</div>

<!-- 2. Danh sách phòng -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-24">
    
    <!-- Bộ lọc nhanh (Optional) -->
    <div class="flex justify-between items-center mb-8 pb-4 border-b border-gray-100">
        <p class="text-gray-500 text-sm">Hiển thị <span class="font-bold text-gray-900">{{ $rooms->count() }}</span> hạng phòng</p>
        <div class="flex items-center gap-2">
            <span class="text-sm text-gray-500 mr-2">Sắp xếp:</span>
            <select class="text-sm border-gray-300 rounded-md focus:ring-brand-gold focus:border-brand-gold text-gray-700">
                <option>Mặc định</option>
                <option>Giá thấp đến cao</option>
                <option>Giá cao đến thấp</option>
            </select>
        </div>
    </div>

    <!-- Grid Phòng -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        @foreach($rooms as $room)
        <div class="group bg-white rounded-xl shadow-sm hover:shadow-2xl transition-all duration-500 border border-gray-100 overflow-hidden flex flex-col h-full">
            
            <!-- Hình ảnh -->
            <div class="relative h-72 overflow-hidden">
                <img src="https://images.unsplash.com/photo-1618773928121-c32242e63f39?auto=format&fit=crop&w=800&q=80" 
                     alt="{{ $room->ten_loai_phong }}" 
                     class="w-full h-full object-cover transform group-hover:scale-110 transition duration-700">
                
                <!-- Tag giá tiền -->
                <div class="absolute top-4 right-4 bg-white/95 backdrop-blur-md px-4 py-2 rounded-lg shadow-lg border border-gray-100">
                    <span class="text-brand-900 font-bold text-lg font-serif">{{ number_format($room->gia_dem, 0, ',', '.') }}đ</span>
                    <span class="text-xs text-gray-500 font-medium">/đêm</span>
                </div>

                <!-- Overlay khi hover -->
                <div class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            </div>
            
            <!-- Nội dung Card -->
            <div class="p-6 flex flex-col flex-grow">
                <!-- Tên phòng -->
                <h3 class="font-serif text-2xl font-bold text-gray-900 mb-3 group-hover:text-brand-gold transition duration-300">
                    <a href="{{ route('phong.chi-tiet', $room->id) }}">{{ $room->ten_loai_phong }}</a>
                </h3>
                
                <!-- Thông số kỹ thuật -->
                <div class="flex items-center gap-6 text-sm text-gray-500 mb-5 pb-5 border-b border-gray-100">
                    <div class="flex items-center" title="Sức chứa tối đa">
                        <i class="fa-solid fa-user-group text-brand-gold mr-2 text-lg"></i> 
                        <span>{{ $room->suc_chua }} Khách</span>
                    </div>
                    <div class="flex items-center" title="Diện tích phòng">
                        <i class="fa-solid fa-ruler-combined text-brand-gold mr-2 text-lg"></i> 
                        <span>35m²</span>
                    </div>
                    <div class="flex items-center" title="Giường ngủ">
                        <i class="fa-solid fa-bed text-brand-gold mr-2 text-lg"></i> 
                        <span>King Size</span>
                    </div>
                </div>

                <!-- Mô tả ngắn -->
                <p class="text-gray-600 text-sm line-clamp-3 mb-6 flex-grow leading-relaxed">
                    {{ $room->mo_ta ?? 'Trải nghiệm không gian sang trọng với nội thất cao cấp, view thành phố tuyệt đẹp và đầy đủ tiện nghi hiện đại cho kỳ nghỉ của bạn.' }}
                </p>
                
                <!-- Nút hành động -->
                <div class="mt-auto">
                    <a href="{{ route('phong.chi-tiet', $room->id) }}" class="group/btn flex items-center justify-center w-full py-3.5 border border-brand-900 text-brand-900 font-bold rounded-lg hover:bg-brand-900 hover:text-white transition duration-300 text-sm uppercase tracking-wide">
                        <span>Xem chi tiết & Đặt phòng</span>
                        <i class="fa-solid fa-arrow-right ml-2 transform group-hover/btn:translate-x-1 transition-transform"></i>
                    </a>
                </div>
            </div>
        </div>
        @endforeach
    </div>

    <!-- Phân trang -->
    @if($rooms->hasPages())
    <div class="mt-16 flex justify-center">
        <div class="bg-white px-4 py-3 rounded-lg shadow-sm border border-gray-100">
            {{ $rooms->links() }}
        </div>
    </div>
    @endif
</div>

<!-- Section phụ: Cam kết dịch vụ (Optional) -->
<div class="bg-gray-50 py-16 border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
            <div>
                <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm text-brand-gold">
                    <i class="fa-solid fa-medal text-2xl"></i>
                </div>
                <h3 class="font-bold text-gray-900 mb-2">Đảm bảo giá tốt nhất</h3>
                <p class="text-gray-500 text-sm">Cam kết giá thấp nhất khi đặt trực tiếp.</p>
            </div>
            <div>
                <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm text-brand-gold">
                    <i class="fa-solid fa-headset text-2xl"></i>
                </div>
                <h3 class="font-bold text-gray-900 mb-2">Hỗ trợ 24/7</h3>
                <p class="text-gray-500 text-sm">Đội ngũ nhân viên luôn sẵn sàng phục vụ.</p>
            </div>
            <div>
                <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm text-brand-gold">
                    <i class="fa-solid fa-shield-halved text-2xl"></i>
                </div>
                <h3 class="font-bold text-gray-900 mb-2">Thanh toán an toàn</h3>
                <p class="text-gray-500 text-sm">Bảo mật thông tin tuyệt đối.</p>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/layouts/footer.blade.php">
<footer class="footer-wrapper">
    <div class="footer-container">
        <div class="footer-grid">
            
            <!-- 1. Brand Info -->
            <div class="space-y-4">
                <div class="footer-brand">
                     <span class="footer-logo-icon">
                        <i class="fa-solid fa-crown text-sm"></i>
                    </span>
                    <span class="footer-logo-text">Luxury<span class="text-brand-gold">Stay</span></span>
                </div>
                <p class="footer-desc">
                    Nơi giao thoa giữa vẻ đẹp kiến trúc cổ điển và tiện nghi hiện đại. Trải nghiệm kỳ nghỉ khó quên với dịch vụ 5 sao chuẩn quốc tế.
                </p>
                <div class="flex space-x-4 pt-2">
                    <a href="#" class="footer-social-link"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="footer-social-link"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#" class="footer-social-link"><i class="fa-brands fa-tiktok"></i></a>
                </div>
            </div>

            <!-- 2. Links (Khám phá) -->
            <div>
                <h3 class="footer-heading">Khám phá</h3>
                <ul class="footer-list">
                    <li><a href="#" class="footer-link"><i class="fa-solid fa-angle-right"></i> Về chúng tôi</a></li>
                    <li><a href="{{ route('khuyen-mai') }}" class="footer-link"><i class="fa-solid fa-angle-right"></i> Ưu đãi đặc biệt</a></li>
                    <li><a href="#" class="footer-link"><i class="fa-solid fa-angle-right"></i> Thư viện ảnh</a></li>
                </ul>
            </div>

            <!-- 3. Contact (Liên hệ) -->
            <div>
                <h3 class="footer-heading">Liên hệ</h3>
                <!-- Sử dụng class footer-list để căn chỉnh khoảng cách -->
                <ul class="footer-list">
                    <li class="footer-contact-item">
                        <i class="fa-solid fa-location-dot footer-contact-icon"></i>
                        <span>Long Xuyên, An Giang</span>
                    </li>
                    <li class="footer-contact-item">
                        <i class="fa-solid fa-phone footer-contact-icon"></i>
                        <span class="font-semibold text-white">+84 792008096</span>
                    </li>
                    <li class="footer-contact-item">
                        <i class="fa-solid fa-envelope footer-contact-icon"></i>
                        <span>booking@luxurystay.com</span>
                    </li>
                </ul>
            </div>

            <!-- 4. Newsletter (Bản tin) -->
            <div>
                <h3 class="footer-heading">Bản tin</h3>
                <p class="footer-desc mb-4">Đăng ký để nhận mã khuyến mãi giảm giá 10% cho lần đặt đầu tiên.</p>
                <form class="flex flex-col gap-2">
                    <input type="email" placeholder="Email của bạn..." class="footer-input">
                    <button type="submit" class="footer-btn-submit">Đăng ký</button>
                </form>
            </div>
        </div>

        <!-- Bottom Copyright -->
        <div class="footer-bottom">
            <p>&copy; 2025 Luxury Stay Hotel. All rights reserved.</p>
            <div class="flex gap-6 mt-4 md:mt-0">
                <a href="#" class="hover:text-white transition">Chính sách bảo mật</a>
                <a href="#" class="hover:text-white transition">Điều khoản sử dụng</a>
            </div>
        </div>
    </div>
</footer>
</file>

<file path="resources/views/layouts/header.blade.php">
<header x-data="{ mobileMenuOpen: false, userDropdownOpen: false }" class="header-wrapper">
    <div class="header-container">
        <div class="header-inner">
            
            <!-- 1. Logo -->
            <a href="{{ route('trang_chu') }}" class="logo-link group">
                <span class="logo-icon">
                    <i class="fa-solid fa-crown"></i>
                </span>
                <div class="logo-text-wrapper">
                    <span class="logo-text">Luxury<span>Stay</span></span>
                </div>
            </a>

            <!-- 2. Desktop Menu -->
            <nav class="nav-menu">
                <a href="{{ route('trang_chu') }}" class="nav-link {{ request()->routeIs('trang_chu') ? 'active' : '' }}">
                    Trang chủ
                </a>
                <a href="{{ route('phong') }}" class="nav-link {{ request()->routeIs('phong*') ? 'active' : '' }}">
                    Phòng & Suites
                </a>
                <a href="{{ route('khuyen-mai') }}" class="nav-link {{ request()->routeIs('khuyen-mai*') ? 'active' : '' }}">
                    Ưu đãi
                </a>
                <a href="#" class="nav-link">Về chúng tôi</a>
                <a href="#" class="nav-link">Liên hệ</a>
            </nav>

            <!-- 3. Actions (Login/User) -->
            <div class="header-actions">
                @auth
                    <!-- Đã đăng nhập -->
                    <div class="relative">
                        <button @click="userDropdownOpen = !userDropdownOpen" @click.away="userDropdownOpen = false" class="user-btn">
                            <span class="user-name">{{ Auth::user()->name }}</span>
                            <i class="fa-solid fa-angle-down text-xs"></i>
                            <div class="user-avatar">
                                <i class="fa-solid fa-user"></i>
                            </div>
                        </button>

                        <!-- Dropdown Menu -->
                        <div x-show="userDropdownOpen" x-transition x-cloak class="dropdown-menu">
                            @if(Auth::user()->role === 'admin')
                                <a href="{{ route('admin.dashboard') }}" class="dropdown-item dropdown-item-danger">
                                    <i class="fa-solid fa-gauge"></i> Trang quản trị
                                </a>
                            @endif

                            <a href="{{ route('profile.edit') }}" class="dropdown-item">
                                <i class="fa-solid fa-id-card"></i> Hồ sơ cá nhân
                            </a>
                            <a href="{{ route('bookings.history') }}" class="dropdown-item">
                                <i class="fa-solid fa-clock-rotate-left"></i> Lịch sử đặt phòng
                            </a>
                            
                            <form method="POST" action="{{ route('logout') }}" class="border-t border-gray-100 mt-1">
                                @csrf
                                <button type="submit" class="w-full text-left dropdown-item text-red-600">
                                    <i class="fa-solid fa-right-from-bracket"></i> Đăng xuất
                                </button>
                            </form>
                        </div>
                    </div>
                @else
                    <!-- Chưa đăng nhập -->
                    <a href="{{ route('login') }}" class="btn-login">Đăng nhập</a>
                    <a href="{{ route('register') }}" class="btn-register">Đăng ký ngay</a>
                @endauth
            </div>

            <!-- 4. Mobile Toggle -->
            <button @click="mobileMenuOpen = !mobileMenuOpen" class="mobile-toggle">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div x-show="mobileMenuOpen" x-transition x-cloak class="mobile-menu-wrapper">
        <div class="mobile-menu-container">
            <a href="{{ route('trang_chu') }}" class="mobile-link">Trang chủ</a>
            <a href="{{ route('phong') }}" class="mobile-link">Phòng & Suites</a>
            <a href="{{ route('khuyen-mai') }}" class="mobile-link">Ưu đãi</a>
            
            @auth
                <div class="mobile-user-section">
                    <p class="mobile-greeting">Xin chào, <strong>{{ Auth::user()->name }}</strong></p>
                    <a href="{{ route('profile.edit') }}" class="mobile-user-link">Hồ sơ</a>
                    <a href="{{ route('bookings.history') }}" class="mobile-user-link">Lịch sử</a>
                    <form method="POST" action="{{ route('logout') }}">
                        @csrf
                        <button class="mobile-logout-btn">Đăng xuất</button>
                    </form>
                </div>
            @else
                <div class="mobile-auth-grid">
                    <a href="{{ route('login') }}" class="mobile-btn-login">Đăng nhập</a>
                    <a href="{{ route('register') }}" class="mobile-btn-register">Đăng ký</a>
                </div>
            @endauth
        </div>
    </div>
</header>
</file>

<file path="resources/views/layouts/nav.blade.php">
<nav class="hidden md:flex space-x-8">
    <!-- 1. Trang chủ -->
    <!-- Kiểm tra route hiện tại để highlight menu -->
    <a href="{{ route('home') }}" 
       class="text-sm font-medium uppercase tracking-wider transition py-2 border-b-2 hover:text-brand-gold hover:border-brand-gold
       {{ request()->routeIs('trang_chu') ? 'text-brand-gold border-brand-gold' : 'text-gray-600 border-transparent' }}">
        Trang chủ
    </a>

    <!-- 2. Phòng & Suites (Danh sách phòng công khai) -->
    <!-- Link này trỏ về route 'phong' (public) thay vì 'dat-phong' (private) -->
    <a href="{{ route('phong') }}" 
       class="text-sm font-medium uppercase tracking-wider transition py-2 border-b-2 hover:text-brand-gold hover:border-brand-gold
       {{ request()->routeIs('phong*') ? 'text-brand-gold border-brand-gold' : 'text-gray-600 border-transparent' }}">
        Phòng & Suites
    </a>

    <!-- 3. Ưu đãi (Khuyến mãi) -->
    <a href="{{ route('khuyen-mai') }}" 
       class="text-sm font-medium uppercase tracking-wider transition py-2 border-b-2 hover:text-brand-gold hover:border-brand-gold
       {{ request()->routeIs('khuyen-mai*') ? 'text-brand-gold border-brand-gold' : 'text-gray-600 border-transparent' }}">
        Ưu đãi
    </a>

    <!-- 4. Giới thiệu / Liên hệ (Tĩnh) -->
    <a href="#" class="text-sm font-medium uppercase tracking-wider text-gray-600 hover:text-brand-gold transition py-2 border-b-2 border-transparent hover:border-brand-gold">
        Về chúng tôi
    </a>
    
    <a href="#" class="text-sm font-medium uppercase tracking-wider text-gray-600 hover:text-brand-gold transition py-2 border-b-2 border-transparent hover:border-brand-gold">
        Liên hệ
    </a>
</nav>
</file>

<file path="resources/views/welcome.blade.php">
<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>{{ config('app.name', 'Laravel') }}</title>

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.bunny.net">
        <link href="https://fonts.bunny.net/css?family=instrument-sans:400,500,600" rel="stylesheet" />

        <!-- Styles / Scripts -->
        @if (file_exists(public_path('build/manifest.json')) || file_exists(public_path('hot')))
            @vite(['resources/css/app.css', 'resources/js/app.js'])
        @else
            <style>
                /*! tailwindcss v4.0.7 | MIT License | https://tailwindcss.com */@layer theme{:root,:host{--font-sans:'Instrument Sans',ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-serif:ui-serif,Georgia,Cambria,"Times New Roman",Times,serif;--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-50:oklch(.971 .013 17.38);--color-red-100:oklch(.936 .032 17.717);--color-red-200:oklch(.885 .062 18.334);--color-red-300:oklch(.808 .114 19.571);--color-red-400:oklch(.704 .191 22.216);--color-red-500:oklch(.637 .237 25.331);--color-red-600:oklch(.577 .245 27.325);--color-red-700:oklch(.505 .213 27.518);--color-red-800:oklch(.444 .177 26.899);--color-red-900:oklch(.396 .141 25.723);--color-red-950:oklch(.258 .092 26.042);--color-orange-50:oklch(.98 .016 73.684);--color-orange-100:oklch(.954 .038 75.164);--color-orange-200:oklch(.901 .076 70.697);--color-orange-300:oklch(.837 .128 66.29);--color-orange-400:oklch(.75 .183 55.934);--color-orange-500:oklch(.705 .213 47.604);--color-orange-600:oklch(.646 .222 41.116);--color-orange-700:oklch(.553 .195 38.402);--color-orange-800:oklch(.47 .157 37.304);--color-orange-900:oklch(.408 .123 38.172);--color-orange-950:oklch(.266 .079 36.259);--color-amber-50:oklch(.987 .022 95.277);--color-amber-100:oklch(.962 .059 95.617);--color-amber-200:oklch(.924 .12 95.746);--color-amber-300:oklch(.879 .169 91.605);--color-amber-400:oklch(.828 .189 84.429);--color-amber-500:oklch(.769 .188 70.08);--color-amber-600:oklch(.666 .179 58.318);--color-amber-700:oklch(.555 .163 48.998);--color-amber-800:oklch(.473 .137 46.201);--color-amber-900:oklch(.414 .112 45.904);--color-amber-950:oklch(.279 .077 45.635);--color-yellow-50:oklch(.987 .026 102.212);--color-yellow-100:oklch(.973 .071 103.193);--color-yellow-200:oklch(.945 .129 101.54);--color-yellow-300:oklch(.905 .182 98.111);--color-yellow-400:oklch(.852 .199 91.936);--color-yellow-500:oklch(.795 .184 86.047);--color-yellow-600:oklch(.681 .162 75.834);--color-yellow-700:oklch(.554 .135 66.442);--color-yellow-800:oklch(.476 .114 61.907);--color-yellow-900:oklch(.421 .095 57.708);--color-yellow-950:oklch(.286 .066 53.813);--color-lime-50:oklch(.986 .031 120.757);--color-lime-100:oklch(.967 .067 122.328);--color-lime-200:oklch(.938 .127 124.321);--color-lime-300:oklch(.897 .196 126.665);--color-lime-400:oklch(.841 .238 128.85);--color-lime-500:oklch(.768 .233 130.85);--color-lime-600:oklch(.648 .2 131.684);--color-lime-700:oklch(.532 .157 131.589);--color-lime-800:oklch(.453 .124 130.933);--color-lime-900:oklch(.405 .101 131.063);--color-lime-950:oklch(.274 .072 132.109);--color-green-50:oklch(.982 .018 155.826);--color-green-100:oklch(.962 .044 156.743);--color-green-200:oklch(.925 .084 155.995);--color-green-300:oklch(.871 .15 154.449);--color-green-400:oklch(.792 .209 151.711);--color-green-500:oklch(.723 .219 149.579);--color-green-600:oklch(.627 .194 149.214);--color-green-700:oklch(.527 .154 150.069);--color-green-800:oklch(.448 .119 151.328);--color-green-900:oklch(.393 .095 152.535);--color-green-950:oklch(.266 .065 152.934);--color-emerald-50:oklch(.979 .021 166.113);--color-emerald-100:oklch(.95 .052 163.051);--color-emerald-200:oklch(.905 .093 164.15);--color-emerald-300:oklch(.845 .143 164.978);--color-emerald-400:oklch(.765 .177 163.223);--color-emerald-500:oklch(.696 .17 162.48);--color-emerald-600:oklch(.596 .145 163.225);--color-emerald-700:oklch(.508 .118 165.612);--color-emerald-800:oklch(.432 .095 166.913);--color-emerald-900:oklch(.378 .077 168.94);--color-emerald-950:oklch(.262 .051 172.552);--color-teal-50:oklch(.984 .014 180.72);--color-teal-100:oklch(.953 .051 180.801);--color-teal-200:oklch(.91 .096 180.426);--color-teal-300:oklch(.855 .138 181.071);--color-teal-400:oklch(.777 .152 181.912);--color-teal-500:oklch(.704 .14 182.503);--color-teal-600:oklch(.6 .118 184.704);--color-teal-700:oklch(.511 .096 186.391);--color-teal-800:oklch(.437 .078 188.216);--color-teal-900:oklch(.386 .063 188.416);--color-teal-950:oklch(.277 .046 192.524);--color-cyan-50:oklch(.984 .019 200.873);--color-cyan-100:oklch(.956 .045 203.388);--color-cyan-200:oklch(.917 .08 205.041);--color-cyan-300:oklch(.865 .127 207.078);--color-cyan-400:oklch(.789 .154 211.53);--color-cyan-500:oklch(.715 .143 215.221);--color-cyan-600:oklch(.609 .126 221.723);--color-cyan-700:oklch(.52 .105 223.128);--color-cyan-800:oklch(.45 .085 224.283);--color-cyan-900:oklch(.398 .07 227.392);--color-cyan-950:oklch(.302 .056 229.695);--color-sky-50:oklch(.977 .013 236.62);--color-sky-100:oklch(.951 .026 236.824);--color-sky-200:oklch(.901 .058 230.902);--color-sky-300:oklch(.828 .111 230.318);--color-sky-400:oklch(.746 .16 232.661);--color-sky-500:oklch(.685 .169 237.323);--color-sky-600:oklch(.588 .158 241.966);--color-sky-700:oklch(.5 .134 242.749);--color-sky-800:oklch(.443 .11 240.79);--color-sky-900:oklch(.391 .09 240.876);--color-sky-950:oklch(.293 .066 243.157);--color-blue-50:oklch(.97 .014 254.604);--color-blue-100:oklch(.932 .032 255.585);--color-blue-200:oklch(.882 .059 254.128);--color-blue-300:oklch(.809 .105 251.813);--color-blue-400:oklch(.707 .165 254.624);--color-blue-500:oklch(.623 .214 259.815);--color-blue-600:oklch(.546 .245 262.881);--color-blue-700:oklch(.488 .243 264.376);--color-blue-800:oklch(.424 .199 265.638);--color-blue-900:oklch(.379 .146 265.522);--color-blue-950:oklch(.282 .091 267.935);--color-indigo-50:oklch(.962 .018 272.314);--color-indigo-100:oklch(.93 .034 272.788);--color-indigo-200:oklch(.87 .065 274.039);--color-indigo-300:oklch(.785 .115 274.713);--color-indigo-400:oklch(.673 .182 276.935);--color-indigo-500:oklch(.585 .233 277.117);--color-indigo-600:oklch(.511 .262 276.966);--color-indigo-700:oklch(.457 .24 277.023);--color-indigo-800:oklch(.398 .195 277.366);--color-indigo-900:oklch(.359 .144 278.697);--color-indigo-950:oklch(.257 .09 281.288);--color-violet-50:oklch(.969 .016 293.756);--color-violet-100:oklch(.943 .029 294.588);--color-violet-200:oklch(.894 .057 293.283);--color-violet-300:oklch(.811 .111 293.571);--color-violet-400:oklch(.702 .183 293.541);--color-violet-500:oklch(.606 .25 292.717);--color-violet-600:oklch(.541 .281 293.009);--color-violet-700:oklch(.491 .27 292.581);--color-violet-800:oklch(.432 .232 292.759);--color-violet-900:oklch(.38 .189 293.745);--color-violet-950:oklch(.283 .141 291.089);--color-purple-50:oklch(.977 .014 308.299);--color-purple-100:oklch(.946 .033 307.174);--color-purple-200:oklch(.902 .063 306.703);--color-purple-300:oklch(.827 .119 306.383);--color-purple-400:oklch(.714 .203 305.504);--color-purple-500:oklch(.627 .265 303.9);--color-purple-600:oklch(.558 .288 302.321);--color-purple-700:oklch(.496 .265 301.924);--color-purple-800:oklch(.438 .218 303.724);--color-purple-900:oklch(.381 .176 304.987);--color-purple-950:oklch(.291 .149 302.717);--color-fuchsia-50:oklch(.977 .017 320.058);--color-fuchsia-100:oklch(.952 .037 318.852);--color-fuchsia-200:oklch(.903 .076 319.62);--color-fuchsia-300:oklch(.833 .145 321.434);--color-fuchsia-400:oklch(.74 .238 322.16);--color-fuchsia-500:oklch(.667 .295 322.15);--color-fuchsia-600:oklch(.591 .293 322.896);--color-fuchsia-700:oklch(.518 .253 323.949);--color-fuchsia-800:oklch(.452 .211 324.591);--color-fuchsia-900:oklch(.401 .17 325.612);--color-fuchsia-950:oklch(.293 .136 325.661);--color-pink-50:oklch(.971 .014 343.198);--color-pink-100:oklch(.948 .028 342.258);--color-pink-200:oklch(.899 .061 343.231);--color-pink-300:oklch(.823 .12 346.018);--color-pink-400:oklch(.718 .202 349.761);--color-pink-500:oklch(.656 .241 354.308);--color-pink-600:oklch(.592 .249 .584);--color-pink-700:oklch(.525 .223 3.958);--color-pink-800:oklch(.459 .187 3.815);--color-pink-900:oklch(.408 .153 2.432);--color-pink-950:oklch(.284 .109 3.907);--color-rose-50:oklch(.969 .015 12.422);--color-rose-100:oklch(.941 .03 12.58);--color-rose-200:oklch(.892 .058 10.001);--color-rose-300:oklch(.81 .117 11.638);--color-rose-400:oklch(.712 .194 13.428);--color-rose-500:oklch(.645 .246 16.439);--color-rose-600:oklch(.586 .253 17.585);--color-rose-700:oklch(.514 .222 16.935);--color-rose-800:oklch(.455 .188 13.697);--color-rose-900:oklch(.41 .159 10.272);--color-rose-950:oklch(.271 .105 12.094);--color-slate-50:oklch(.984 .003 247.858);--color-slate-100:oklch(.968 .007 247.896);--color-slate-200:oklch(.929 .013 255.508);--color-slate-300:oklch(.869 .022 252.894);--color-slate-400:oklch(.704 .04 256.788);--color-slate-500:oklch(.554 .046 257.417);--color-slate-600:oklch(.446 .043 257.281);--color-slate-700:oklch(.372 .044 257.287);--color-slate-800:oklch(.279 .041 260.031);--color-slate-900:oklch(.208 .042 265.755);--color-slate-950:oklch(.129 .042 264.695);--color-gray-50:oklch(.985 .002 247.839);--color-gray-100:oklch(.967 .003 264.542);--color-gray-200:oklch(.928 .006 264.531);--color-gray-300:oklch(.872 .01 258.338);--color-gray-400:oklch(.707 .022 261.325);--color-gray-500:oklch(.551 .027 264.364);--color-gray-600:oklch(.446 .03 256.802);--color-gray-700:oklch(.373 .034 259.733);--color-gray-800:oklch(.278 .033 256.848);--color-gray-900:oklch(.21 .034 264.665);--color-gray-950:oklch(.13 .028 261.692);--color-zinc-50:oklch(.985 0 0);--color-zinc-100:oklch(.967 .001 286.375);--color-zinc-200:oklch(.92 .004 286.32);--color-zinc-300:oklch(.871 .006 286.286);--color-zinc-400:oklch(.705 .015 286.067);--color-zinc-500:oklch(.552 .016 285.938);--color-zinc-600:oklch(.442 .017 285.786);--color-zinc-700:oklch(.37 .013 285.805);--color-zinc-800:oklch(.274 .006 286.033);--color-zinc-900:oklch(.21 .006 285.885);--color-zinc-950:oklch(.141 .005 285.823);--color-neutral-50:oklch(.985 0 0);--color-neutral-100:oklch(.97 0 0);--color-neutral-200:oklch(.922 0 0);--color-neutral-300:oklch(.87 0 0);--color-neutral-400:oklch(.708 0 0);--color-neutral-500:oklch(.556 0 0);--color-neutral-600:oklch(.439 0 0);--color-neutral-700:oklch(.371 0 0);--color-neutral-800:oklch(.269 0 0);--color-neutral-900:oklch(.205 0 0);--color-neutral-950:oklch(.145 0 0);--color-stone-50:oklch(.985 .001 106.423);--color-stone-100:oklch(.97 .001 106.424);--color-stone-200:oklch(.923 .003 48.717);--color-stone-300:oklch(.869 .005 56.366);--color-stone-400:oklch(.709 .01 56.259);--color-stone-500:oklch(.553 .013 58.071);--color-stone-600:oklch(.444 .011 73.639);--color-stone-700:oklch(.374 .01 67.558);--color-stone-800:oklch(.268 .007 34.298);--color-stone-900:oklch(.216 .006 56.043);--color-stone-950:oklch(.147 .004 49.25);--color-black:#000;--color-white:#fff;--spacing:.25rem;--breakpoint-sm:40rem;--breakpoint-md:48rem;--breakpoint-lg:64rem;--breakpoint-xl:80rem;--breakpoint-2xl:96rem;--container-3xs:16rem;--container-2xs:18rem;--container-xs:20rem;--container-sm:24rem;--container-md:28rem;--container-lg:32rem;--container-xl:36rem;--container-2xl:42rem;--container-3xl:48rem;--container-4xl:56rem;--container-5xl:64rem;--container-6xl:72rem;--container-7xl:80rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--text-5xl:3rem;--text-5xl--line-height:1;--text-6xl:3.75rem;--text-6xl--line-height:1;--text-7xl:4.5rem;--text-7xl--line-height:1;--text-8xl:6rem;--text-8xl--line-height:1;--text-9xl:8rem;--text-9xl--line-height:1;--font-weight-thin:100;--font-weight-extralight:200;--font-weight-light:300;--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--font-weight-extrabold:800;--font-weight-black:900;--tracking-tighter:-.05em;--tracking-tight:-.025em;--tracking-normal:0em;--tracking-wide:.025em;--tracking-wider:.05em;--tracking-widest:.1em;--leading-tight:1.25;--leading-snug:1.375;--leading-normal:1.5;--leading-relaxed:1.625;--leading-loose:2;--radius-xs:.125rem;--radius-sm:.25rem;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--radius-3xl:1.5rem;--radius-4xl:2rem;--shadow-2xs:0 1px #0000000d;--shadow-xs:0 1px 2px 0 #0000000d;--shadow-sm:0 1px 3px 0 #0000001a,0 1px 2px -1px #0000001a;--shadow-md:0 4px 6px -1px #0000001a,0 2px 4px -2px #0000001a;--shadow-lg:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a;--shadow-xl:0 20px 25px -5px #0000001a,0 8px 10px -6px #0000001a;--shadow-2xl:0 25px 50px -12px #00000040;--inset-shadow-2xs:inset 0 1px #0000000d;--inset-shadow-xs:inset 0 1px 1px #0000000d;--inset-shadow-sm:inset 0 2px 4px #0000000d;--drop-shadow-xs:0 1px 1px #0000000d;--drop-shadow-sm:0 1px 2px #00000026;--drop-shadow-md:0 3px 3px #0000001f;--drop-shadow-lg:0 4px 4px #00000026;--drop-shadow-xl:0 9px 7px #0000001a;--drop-shadow-2xl:0 25px 25px #00000026;--ease-in:cubic-bezier(.4,0,1,1);--ease-out:cubic-bezier(0,0,.2,1);--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--animate-ping:ping 1s cubic-bezier(0,0,.2,1)infinite;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--animate-bounce:bounce 1s infinite;--blur-xs:4px;--blur-sm:8px;--blur-md:12px;--blur-lg:16px;--blur-xl:24px;--blur-2xl:40px;--blur-3xl:64px;--perspective-dramatic:100px;--perspective-near:300px;--perspective-normal:500px;--perspective-midrange:800px;--perspective-distant:1200px;--aspect-video:16/9;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-font-feature-settings:var(--font-sans--font-feature-settings);--default-font-variation-settings:var(--font-sans--font-variation-settings);--default-mono-font-family:var(--font-mono);--default-mono-font-feature-settings:var(--font-mono--font-feature-settings);--default-mono-font-variation-settings:var(--font-mono--font-variation-settings)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}body{line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1;color:color-mix(in oklab,currentColor 50%,transparent)}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.absolute{position:absolute}.relative{position:relative}.static{position:static}.inset-0{inset:calc(var(--spacing)*0)}.-mt-\[4\.9rem\]{margin-top:-4.9rem}.-mb-px{margin-bottom:-1px}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.-ml-8{margin-left:calc(var(--spacing)*-8)}.flex{display:flex}.hidden{display:none}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.aspect-\[335\/376\]{aspect-ratio:335/376}.h-1{height:calc(var(--spacing)*1)}.h-1\.5{height:calc(var(--spacing)*1.5)}.h-2{height:calc(var(--spacing)*2)}.h-2\.5{height:calc(var(--spacing)*2.5)}.h-3{height:calc(var(--spacing)*3)}.h-3\.5{height:calc(var(--spacing)*3.5)}.h-14{height:calc(var(--spacing)*14)}.h-14\.5{height:calc(var(--spacing)*14.5)}.min-h-screen{min-height:100vh}.w-1{width:calc(var(--spacing)*1)}.w-1\.5{width:calc(var(--spacing)*1.5)}.w-2{width:calc(var(--spacing)*2)}.w-2\.5{width:calc(var(--spacing)*2.5)}.w-3{width:calc(var(--spacing)*3)}.w-3\.5{width:calc(var(--spacing)*3.5)}.w-\[448px\]{width:448px}.w-full{width:100%}.max-w-\[335px\]{max-width:335px}.max-w-none{max-width:none}.flex-1{flex:1}.shrink-0{flex-shrink:0}.translate-y-0{--tw-translate-y:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.transform{transform:var(--tw-rotate-x)var(--tw-rotate-y)var(--tw-rotate-z)var(--tw-skew-x)var(--tw-skew-y)}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.items-center{align-items:center}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}:where(.space-x-1>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*1)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-x-reverse)))}.overflow-hidden{overflow:hidden}.rounded-full{border-radius:3.40282e38px}.rounded-sm{border-radius:var(--radius-sm)}.rounded-t-lg{border-top-left-radius:var(--radius-lg);border-top-right-radius:var(--radius-lg)}.rounded-br-lg{border-bottom-right-radius:var(--radius-lg)}.rounded-bl-lg{border-bottom-left-radius:var(--radius-lg)}.border{border-style:var(--tw-border-style);border-width:1px}.border-\[\#19140035\]{border-color:#19140035}.border-\[\#e3e3e0\]{border-color:#e3e3e0}.border-black{border-color:var(--color-black)}.border-transparent{border-color:#0000}.bg-\[\#1b1b18\]{background-color:#1b1b18}.bg-\[\#FDFDFC\]{background-color:#fdfdfc}.bg-\[\#dbdbd7\]{background-color:#dbdbd7}.bg-\[\#fff2f2\]{background-color:#fff2f2}.bg-white{background-color:var(--color-white)}.p-6{padding:calc(var(--spacing)*6)}.px-5{padding-inline:calc(var(--spacing)*5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.pb-12{padding-bottom:calc(var(--spacing)*12)}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-\[13px\]{font-size:13px}.leading-\[20px\]{--tw-leading:20px;line-height:20px}.leading-normal{--tw-leading:var(--leading-normal);line-height:var(--leading-normal)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.text-\[\#1b1b18\]{color:#1b1b18}.text-\[\#706f6c\]{color:#706f6c}.text-\[\#F53003\],.text-\[\#f53003\]{color:#f53003}.text-white{color:var(--color-white)}.underline{text-decoration-line:underline}.underline-offset-4{text-underline-offset:4px}.opacity-100{opacity:1}.shadow-\[0px_0px_1px_0px_rgba\(0\,0\,0\,0\.03\)\,0px_1px_2px_0px_rgba\(0\,0\,0\,0\.06\)\]{--tw-shadow:0px 0px 1px 0px var(--tw-shadow-color,#00000008),0px 1px 2px 0px var(--tw-shadow-color,#0000000f);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[inset_0px_0px_0px_1px_rgba\(26\,26\,0\,0\.16\)\]{--tw-shadow:inset 0px 0px 0px 1px var(--tw-shadow-color,#1a1a0029);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.\!filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)!important}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.delay-300{transition-delay:.3s}.duration-750{--tw-duration:.75s;transition-duration:.75s}.not-has-\[nav\]\:hidden:not(:has(:is(nav))){display:none}.before\:absolute:before{content:var(--tw-content);position:absolute}.before\:top-0:before{content:var(--tw-content);top:calc(var(--spacing)*0)}.before\:top-1\/2:before{content:var(--tw-content);top:50%}.before\:bottom-0:before{content:var(--tw-content);bottom:calc(var(--spacing)*0)}.before\:bottom-1\/2:before{content:var(--tw-content);bottom:50%}.before\:left-\[0\.4rem\]:before{content:var(--tw-content);left:.4rem}.before\:border-l:before{content:var(--tw-content);border-left-style:var(--tw-border-style);border-left-width:1px}.before\:border-\[\#e3e3e0\]:before{content:var(--tw-content);border-color:#e3e3e0}@media (hover:hover){.hover\:border-\[\#1915014a\]:hover{border-color:#1915014a}.hover\:border-\[\#19140035\]:hover{border-color:#19140035}.hover\:border-black:hover{border-color:var(--color-black)}.hover\:bg-black:hover{background-color:var(--color-black)}}@media (width>=64rem){.lg\:-mt-\[6\.6rem\]{margin-top:-6.6rem}.lg\:mb-0{margin-bottom:calc(var(--spacing)*0)}.lg\:mb-6{margin-bottom:calc(var(--spacing)*6)}.lg\:-ml-px{margin-left:-1px}.lg\:ml-0{margin-left:calc(var(--spacing)*0)}.lg\:block{display:block}.lg\:aspect-auto{aspect-ratio:auto}.lg\:w-\[438px\]{width:438px}.lg\:max-w-4xl{max-width:var(--container-4xl)}.lg\:grow{flex-grow:1}.lg\:flex-row{flex-direction:row}.lg\:justify-center{justify-content:center}.lg\:rounded-t-none{border-top-left-radius:0;border-top-right-radius:0}.lg\:rounded-tl-lg{border-top-left-radius:var(--radius-lg)}.lg\:rounded-r-lg{border-top-right-radius:var(--radius-lg);border-bottom-right-radius:var(--radius-lg)}.lg\:rounded-br-none{border-bottom-right-radius:0}.lg\:p-8{padding:calc(var(--spacing)*8)}.lg\:p-20{padding:calc(var(--spacing)*20)}}@media (prefers-color-scheme:dark){.dark\:block{display:block}.dark\:hidden{display:none}.dark\:border-\[\#3E3E3A\]{border-color:#3e3e3a}.dark\:border-\[\#eeeeec\]{border-color:#eeeeec}.dark\:bg-\[\#0a0a0a\]{background-color:#0a0a0a}.dark\:bg-\[\#1D0002\]{background-color:#1d0002}.dark\:bg-\[\#3E3E3A\]{background-color:#3e3e3a}.dark\:bg-\[\#161615\]{background-color:#161615}.dark\:bg-\[\#eeeeec\]{background-color:#eeeeec}.dark\:text-\[\#1C1C1A\]{color:#1c1c1a}.dark\:text-\[\#A1A09A\]{color:#a1a09a}.dark\:text-\[\#EDEDEC\]{color:#ededec}.dark\:text-\[\#F61500\]{color:#f61500}.dark\:text-\[\#FF4433\]{color:#f43}.dark\:shadow-\[inset_0px_0px_0px_1px_\#fffaed2d\]{--tw-shadow:inset 0px 0px 0px 1px var(--tw-shadow-color,#fffaed2d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.dark\:before\:border-\[\#3E3E3A\]:before{content:var(--tw-content);border-color:#3e3e3a}@media (hover:hover){.dark\:hover\:border-\[\#3E3E3A\]:hover{border-color:#3e3e3a}.dark\:hover\:border-\[\#62605b\]:hover{border-color:#62605b}.dark\:hover\:border-white:hover{border-color:var(--color-white)}.dark\:hover\:bg-white:hover{background-color:var(--color-white)}}}@starting-style{.starting\:translate-y-4{--tw-translate-y:calc(var(--spacing)*4);translate:var(--tw-translate-x)var(--tw-translate-y)}}@starting-style{.starting\:translate-y-6{--tw-translate-y:calc(var(--spacing)*6);translate:var(--tw-translate-x)var(--tw-translate-y)}}@starting-style{.starting\:opacity-0{opacity:0}}}@keyframes spin{to{transform:rotate(360deg)}}@keyframes ping{75%,to{opacity:0;transform:scale(2)}}@keyframes pulse{50%{opacity:.5}}@keyframes bounce{0%,to{animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:"*";inherits:false;initial-value:rotateX(0)}@property --tw-rotate-y{syntax:"*";inherits:false;initial-value:rotateY(0)}@property --tw-rotate-z{syntax:"*";inherits:false;initial-value:rotateZ(0)}@property --tw-skew-x{syntax:"*";inherits:false;initial-value:skewX(0)}@property --tw-skew-y{syntax:"*";inherits:false;initial-value:skewY(0)}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-content{syntax:"*";inherits:false;initial-value:""}
            </style>
        @endif
    </head>
    <body class="bg-[#FDFDFC] dark:bg-[#0a0a0a] text-[#1b1b18] flex p-6 lg:p-8 items-center lg:justify-center min-h-screen flex-col">
        <header class="w-full lg:max-w-4xl max-w-[335px] text-sm mb-6 not-has-[nav]:hidden">
            @if (Route::has('login'))
                <nav class="flex items-center justify-end gap-4">
                    @auth
                        <a
                            href="{{ url('/dashboard') }}"
                            class="inline-block px-5 py-1.5 dark:text-[#EDEDEC] border-[#19140035] hover:border-[#1915014a] border text-[#1b1b18] dark:border-[#3E3E3A] dark:hover:border-[#62605b] rounded-sm text-sm leading-normal"
                        >
                            Dashboard
                        </a>
                    @else
                        <a
                            href="{{ route('login') }}"
                            class="inline-block px-5 py-1.5 dark:text-[#EDEDEC] text-[#1b1b18] border border-transparent hover:border-[#19140035] dark:hover:border-[#3E3E3A] rounded-sm text-sm leading-normal"
                        >
                            Log in
                        </a>

                        @if (Route::has('register'))
                            <a
                                href="{{ route('register') }}"
                                class="inline-block px-5 py-1.5 dark:text-[#EDEDEC] border-[#19140035] hover:border-[#1915014a] border text-[#1b1b18] dark:border-[#3E3E3A] dark:hover:border-[#62605b] rounded-sm text-sm leading-normal">
                                Register
                            </a>
                        @endif
                    @endauth
                </nav>
            @endif
        </header>
        <div class="flex items-center justify-center w-full transition-opacity opacity-100 duration-750 lg:grow starting:opacity-0">
            <main class="flex max-w-[335px] w-full flex-col-reverse lg:max-w-4xl lg:flex-row">
                <div class="text-[13px] leading-[20px] flex-1 p-6 pb-12 lg:p-20 bg-white dark:bg-[#161615] dark:text-[#EDEDEC] shadow-[inset_0px_0px_0px_1px_rgba(26,26,0,0.16)] dark:shadow-[inset_0px_0px_0px_1px_#fffaed2d] rounded-bl-lg rounded-br-lg lg:rounded-tl-lg lg:rounded-br-none">
                    <h1 class="mb-1 font-medium">Let's get started</h1>
                    <p class="mb-2 text-[#706f6c] dark:text-[#A1A09A]">Laravel has an incredibly rich ecosystem. <br>We suggest starting with the following.</p>
                    <ul class="flex flex-col mb-4 lg:mb-6">
                        <li class="flex items-center gap-4 py-2 relative before:border-l before:border-[#e3e3e0] dark:before:border-[#3E3E3A] before:top-1/2 before:bottom-0 before:left-[0.4rem] before:absolute">
                            <span class="relative py-1 bg-white dark:bg-[#161615]">
                                <span class="flex items-center justify-center rounded-full bg-[#FDFDFC] dark:bg-[#161615] shadow-[0px_0px_1px_0px_rgba(0,0,0,0.03),0px_1px_2px_0px_rgba(0,0,0,0.06)] w-3.5 h-3.5 border dark:border-[#3E3E3A] border-[#e3e3e0]">
                                    <span class="rounded-full bg-[#dbdbd7] dark:bg-[#3E3E3A] w-1.5 h-1.5"></span>
                                </span>
                            </span>
                            <span>
                                Read the
                                <a href="https://laravel.com/docs" target="_blank" class="inline-flex items-center space-x-1 font-medium underline underline-offset-4 text-[#f53003] dark:text-[#FF4433] ml-1">
                                    <span>Documentation</span>
                                    <svg
                                        width="10"
                                        height="11"
                                        viewBox="0 0 10 11"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="w-2.5 h-2.5"
                                    >
                                        <path
                                            d="M7.70833 6.95834V2.79167H3.54167M2.5 8L7.5 3.00001"
                                            stroke="currentColor"
                                            stroke-linecap="square"
                                        />
                                    </svg>
                                </a>
                            </span>
                        </li>
                        <li class="flex items-center gap-4 py-2 relative before:border-l before:border-[#e3e3e0] dark:before:border-[#3E3E3A] before:bottom-1/2 before:top-0 before:left-[0.4rem] before:absolute">
                            <span class="relative py-1 bg-white dark:bg-[#161615]">
                                <span class="flex items-center justify-center rounded-full bg-[#FDFDFC] dark:bg-[#161615] shadow-[0px_0px_1px_0px_rgba(0,0,0,0.03),0px_1px_2px_0px_rgba(0,0,0,0.06)] w-3.5 h-3.5 border dark:border-[#3E3E3A] border-[#e3e3e0]">
                                    <span class="rounded-full bg-[#dbdbd7] dark:bg-[#3E3E3A] w-1.5 h-1.5"></span>
                                </span>
                            </span>
                            <span>
                                Watch video tutorials at
                                <a href="https://laracasts.com" target="_blank" class="inline-flex items-center space-x-1 font-medium underline underline-offset-4 text-[#f53003] dark:text-[#FF4433] ml-1">
                                    <span>Laracasts</span>
                                    <svg
                                        width="10"
                                        height="11"
                                        viewBox="0 0 10 11"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="w-2.5 h-2.5"
                                    >
                                        <path
                                            d="M7.70833 6.95834V2.79167H3.54167M2.5 8L7.5 3.00001"
                                            stroke="currentColor"
                                            stroke-linecap="square"
                                        />
                                    </svg>
                                </a>
                            </span>
                        </li>
                    </ul>
                    <ul class="flex gap-3 text-sm leading-normal">
                        <li>
                            <a href="https://cloud.laravel.com" target="_blank" class="inline-block dark:bg-[#eeeeec] dark:border-[#eeeeec] dark:text-[#1C1C1A] dark:hover:bg-white dark:hover:border-white hover:bg-black hover:border-black px-5 py-1.5 bg-[#1b1b18] rounded-sm border border-black text-white text-sm leading-normal">
                                Deploy now
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="bg-[#fff2f2] dark:bg-[#1D0002] relative lg:-ml-px -mb-px lg:mb-0 rounded-t-lg lg:rounded-t-none lg:rounded-r-lg aspect-[335/376] lg:aspect-auto w-full lg:w-[438px] shrink-0 overflow-hidden">
                    {{-- Laravel Logo --}}
                    <svg class="w-full text-[#F53003] dark:text-[#F61500] transition-all translate-y-0 opacity-100 max-w-none duration-750 starting:opacity-0 starting:translate-y-6" viewBox="0 0 438 104" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.2036 -3H0V102.197H49.5189V86.7187H17.2036V-3Z" fill="currentColor" />
                        <path d="M110.256 41.6337C108.061 38.1275 104.945 35.3731 100.905 33.3681C96.8667 31.3647 92.8016 30.3618 88.7131 30.3618C83.4247 30.3618 78.5885 31.3389 74.201 33.2923C69.8111 35.2456 66.0474 37.928 62.9059 41.3333C59.7643 44.7401 57.3198 48.6726 55.5754 53.1293C53.8287 57.589 52.9572 62.274 52.9572 67.1813C52.9572 72.1925 53.8287 76.8995 55.5754 81.3069C57.3191 85.7173 59.7636 89.6241 62.9059 93.0293C66.0474 96.4361 69.8119 99.1155 74.201 101.069C78.5885 103.022 83.4247 103.999 88.7131 103.999C92.8016 103.999 96.8667 102.997 100.905 100.994C104.945 98.9911 108.061 96.2359 110.256 92.7282V102.195H126.563V32.1642H110.256V41.6337ZM108.76 75.7472C107.762 78.4531 106.366 80.8078 104.572 82.8112C102.776 84.8161 100.606 86.4183 98.0637 87.6206C95.5202 88.823 92.7004 89.4238 89.6103 89.4238C86.5178 89.4238 83.7252 88.823 81.2324 87.6206C78.7388 86.4183 76.5949 84.8161 74.7998 82.8112C73.004 80.8078 71.6319 78.4531 70.6856 75.7472C69.7356 73.0421 69.2644 70.1868 69.2644 67.1821C69.2644 64.1758 69.7356 61.3205 70.6856 58.6154C71.6319 55.9102 73.004 53.5571 74.7998 51.5522C76.5949 49.5495 78.738 47.9451 81.2324 46.7427C83.7252 45.5404 86.5178 44.9396 89.6103 44.9396C92.7012 44.9396 95.5202 45.5404 98.0637 46.7427C100.606 47.9451 102.776 49.5487 104.572 51.5522C106.367 53.5571 107.762 55.9102 108.76 58.6154C109.756 61.3205 110.256 64.1758 110.256 67.1821C110.256 70.1868 109.756 73.0421 108.76 75.7472Z" fill="currentColor" />
                        <path d="M242.805 41.6337C240.611 38.1275 237.494 35.3731 233.455 33.3681C229.416 31.3647 225.351 30.3618 221.262 30.3618C215.974 30.3618 211.138 31.3389 206.75 33.2923C202.36 35.2456 198.597 37.928 195.455 41.3333C192.314 44.7401 189.869 48.6726 188.125 53.1293C186.378 57.589 185.507 62.274 185.507 67.1813C185.507 72.1925 186.378 76.8995 188.125 81.3069C189.868 85.7173 192.313 89.6241 195.455 93.0293C198.597 96.4361 202.361 99.1155 206.75 101.069C211.138 103.022 215.974 103.999 221.262 103.999C225.351 103.999 229.416 102.997 233.455 100.994C237.494 98.9911 240.611 96.2359 242.805 92.7282V102.195H259.112V32.1642H242.805V41.6337ZM241.31 75.7472C240.312 78.4531 238.916 80.8078 237.122 82.8112C235.326 84.8161 233.156 86.4183 230.614 87.6206C228.07 88.823 225.251 89.4238 222.16 89.4238C219.068 89.4238 216.275 88.823 213.782 87.6206C211.289 86.4183 209.145 84.8161 207.35 82.8112C205.554 80.8078 204.182 78.4531 203.236 75.7472C202.286 73.0421 201.814 70.1868 201.814 67.1821C201.814 64.1758 202.286 61.3205 203.236 58.6154C204.182 55.9102 205.554 53.5571 207.35 51.5522C209.145 49.5495 211.288 47.9451 213.782 46.7427C216.275 45.5404 219.068 44.9396 222.16 44.9396C225.251 44.9396 228.07 45.5404 230.614 46.7427C233.156 47.9451 235.326 49.5487 237.122 51.5522C238.917 53.5571 240.312 55.9102 241.31 58.6154C242.306 61.3205 242.806 64.1758 242.806 67.1821C242.805 70.1868 242.305 73.0421 241.31 75.7472Z" fill="currentColor" />
                        <path d="M438 -3H421.694V102.197H438V-3Z" fill="currentColor" />
                        <path d="M139.43 102.197H155.735V48.2834H183.712V32.1665H139.43V102.197Z" fill="currentColor" />
                        <path d="M324.49 32.1665L303.995 85.794L283.498 32.1665H266.983L293.748 102.197H314.242L341.006 32.1665H324.49Z" fill="currentColor" />
                        <path d="M376.571 30.3656C356.603 30.3656 340.797 46.8497 340.797 67.1828C340.797 89.6597 356.094 104 378.661 104C391.29 104 399.354 99.1488 409.206 88.5848L398.189 80.0226C398.183 80.031 389.874 90.9895 377.468 90.9895C363.048 90.9895 356.977 79.3111 356.977 73.269H411.075C413.917 50.1328 398.775 30.3656 376.571 30.3656ZM357.02 61.0967C357.145 59.7487 359.023 43.3761 376.442 43.3761C393.861 43.3761 395.978 59.7464 396.099 61.0967H357.02Z" fill="currentColor" />
                    </svg>

                    {{-- Light Mode 12 SVG --}}
                    <svg class="w-[448px] max-w-none relative -mt-[4.9rem] -ml-8 lg:ml-0 lg:-mt-[6.6rem] dark:hidden" viewBox="0 0 440 376" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4">
                            <path d="M188.263 355.73L188.595 355.73C195.441 348.845 205.766 339.761 219.569 328.477C232.93 317.193 242.978 308.205 249.714 301.511C256.34 294.626 260.867 287.358 263.296 279.708C265.725 272.058 264.565 264.121 259.816 255.896C254.516 246.716 247.062 239.352 237.454 233.805C227.957 228.067 217.908 225.198 207.307 225.198C196.927 225.197 190.136 227.97 186.934 233.516C183.621 238.872 184.726 246.331 190.247 255.894L125.647 255.891C116.371 239.825 112.395 225.481 113.72 212.858C115.265 200.235 121.559 190.481 132.602 183.596C143.754 176.52 158.607 172.982 177.159 172.983C196.594 172.984 215.863 176.523 234.968 183.6C253.961 190.486 271.299 200.241 286.98 212.864C302.661 225.488 315.14 239.833 324.416 255.899C333.03 270.817 336.841 283.918 335.847 295.203C335.075 306.487 331.376 316.336 324.75 324.751C318.346 333.167 308.408 343.494 294.936 355.734L377.094 355.737L405.917 405.656L217.087 405.649L188.263 355.73Z" fill="black" />
                            <path d="M9.11884 226.339L-13.7396 226.338L-42.7286 176.132L43.0733 176.135L175.595 405.649L112.651 405.647L9.11884 226.339Z" fill="black" />
                            <path d="M188.263 355.73L188.595 355.73C195.441 348.845 205.766 339.761 219.569 328.477C232.93 317.193 242.978 308.205 249.714 301.511C256.34 294.626 260.867 287.358 263.296 279.708C265.725 272.058 264.565 264.121 259.816 255.896C254.516 246.716 247.062 239.352 237.454 233.805C227.957 228.067 217.908 225.198 207.307 225.198C196.927 225.197 190.136 227.97 186.934 233.516C183.621 238.872 184.726 246.331 190.247 255.894L125.647 255.891C116.371 239.825 112.395 225.481 113.72 212.858C115.265 200.235 121.559 190.481 132.602 183.596C143.754 176.52 158.607 172.982 177.159 172.983C196.594 172.984 215.863 176.523 234.968 183.6C253.961 190.486 271.299 200.241 286.98 212.864C302.661 225.488 315.14 239.833 324.416 255.899C333.03 270.817 336.841 283.918 335.847 295.203C335.075 306.487 331.376 316.336 324.75 324.751C318.346 333.167 308.408 343.494 294.936 355.734L377.094 355.737L405.917 405.656L217.087 405.649L188.263 355.73Z" stroke="#1B1B18" stroke-width="1" />
                            <path d="M9.11884 226.339L-13.7396 226.338L-42.7286 176.132L43.0733 176.135L175.595 405.649L112.651 405.647L9.11884 226.339Z" stroke="#1B1B18" stroke-width="1" />
                            <path d="M204.592 327.449L204.923 327.449C211.769 320.564 222.094 311.479 235.897 300.196C249.258 288.912 259.306 279.923 266.042 273.23C272.668 266.345 277.195 259.077 279.624 251.427C282.053 243.777 280.893 235.839 276.145 227.615C270.844 218.435 263.39 211.071 253.782 205.524C244.285 199.786 234.236 196.917 223.635 196.916C213.255 196.916 206.464 199.689 203.262 205.235C199.949 210.59 201.054 218.049 206.575 227.612L141.975 227.61C132.699 211.544 128.723 197.2 130.048 184.577C131.593 171.954 137.887 162.2 148.93 155.315C160.083 148.239 174.935 144.701 193.487 144.702C212.922 144.703 232.192 148.242 251.296 155.319C270.289 162.205 287.627 171.96 303.308 184.583C318.989 197.207 331.468 211.552 340.745 227.618C349.358 242.536 353.169 255.637 352.175 266.921C351.403 278.205 347.704 288.055 341.078 296.47C334.674 304.885 324.736 315.213 311.264 327.453L393.422 327.456L422.246 377.375L233.415 377.368L204.592 327.449Z" fill="#F8B803" />
                            <path d="M25.447 198.058L2.58852 198.057L-26.4005 147.851L59.4015 147.854L191.923 377.368L128.979 377.365L25.447 198.058Z" fill="#F8B803" />
                            <path d="M204.592 327.449L204.923 327.449C211.769 320.564 222.094 311.479 235.897 300.196C249.258 288.912 259.306 279.923 266.042 273.23C272.668 266.345 277.195 259.077 279.624 251.427C282.053 243.777 280.893 235.839 276.145 227.615C270.844 218.435 263.39 211.071 253.782 205.524C244.285 199.786 234.236 196.917 223.635 196.916C213.255 196.916 206.464 199.689 203.262 205.235C199.949 210.59 201.054 218.049 206.575 227.612L141.975 227.61C132.699 211.544 128.723 197.2 130.048 184.577C131.593 171.954 137.887 162.2 148.93 155.315C160.083 148.239 174.935 144.701 193.487 144.702C212.922 144.703 232.192 148.242 251.296 155.319C270.289 162.205 287.627 171.96 303.308 184.583C318.989 197.207 331.468 211.552 340.745 227.618C349.358 242.536 353.169 255.637 352.175 266.921C351.403 278.205 347.704 288.055 341.078 296.47C334.674 304.885 324.736 315.213 311.264 327.453L393.422 327.456L422.246 377.375L233.415 377.368L204.592 327.449Z" stroke="#1B1B18" stroke-width="1" />
                            <path d="M25.447 198.058L2.58852 198.057L-26.4005 147.851L59.4015 147.854L191.923 377.368L128.979 377.365L25.447 198.058Z" stroke="#1B1B18" stroke-width="1" />
                        </g>
                        <g style="mix-blend-mode: hard-light" class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4">
                            <path d="M217.342 305.363L217.673 305.363C224.519 298.478 234.844 289.393 248.647 278.11C262.008 266.826 272.056 257.837 278.792 251.144C285.418 244.259 289.945 236.991 292.374 229.341C294.803 221.691 293.643 213.753 288.895 205.529C283.594 196.349 276.14 188.985 266.532 183.438C257.035 177.7 246.986 174.831 236.385 174.83C226.005 174.83 219.214 177.603 216.012 183.149C212.699 188.504 213.804 195.963 219.325 205.527L154.725 205.524C145.449 189.458 141.473 175.114 142.798 162.491C144.343 149.868 150.637 140.114 161.68 133.229C172.833 126.153 187.685 122.615 206.237 122.616C225.672 122.617 244.942 126.156 264.046 133.233C283.039 140.119 300.377 149.874 316.058 162.497C331.739 175.121 344.218 189.466 353.495 205.532C362.108 220.45 365.919 233.551 364.925 244.835C364.153 256.12 360.454 265.969 353.828 274.384C347.424 282.799 337.486 293.127 324.014 305.367L406.172 305.37L434.996 355.289L246.165 355.282L217.342 305.363Z" fill="#F0ACB8" />
                            <path d="M38.197 175.972L15.3385 175.971L-13.6505 125.765L72.1515 125.768L204.673 355.282L141.729 355.279L38.197 175.972Z" fill="#F0ACB8" />
                            <path d="M217.342 305.363L217.673 305.363C224.519 298.478 234.844 289.393 248.647 278.11C262.008 266.826 272.056 257.837 278.792 251.144C285.418 244.259 289.945 236.991 292.374 229.341C294.803 221.691 293.643 213.753 288.895 205.529C283.594 196.349 276.14 188.985 266.532 183.438C257.035 177.7 246.986 174.831 236.385 174.83C226.005 174.83 219.214 177.603 216.012 183.149C212.699 188.504 213.804 195.963 219.325 205.527L154.725 205.524C145.449 189.458 141.473 175.114 142.798 162.491C144.343 149.868 150.637 140.114 161.68 133.229C172.833 126.153 187.685 122.615 206.237 122.616C225.672 122.617 244.942 126.156 264.046 133.233C283.039 140.119 300.377 149.874 316.058 162.497C331.739 175.121 344.218 189.466 353.495 205.532C362.108 220.45 365.919 233.551 364.925 244.835C364.153 256.12 360.454 265.969 353.828 274.384C347.424 282.799 337.486 293.127 324.014 305.367L406.172 305.37L434.996 355.289L246.165 355.282L217.342 305.363Z" stroke="#1B1B18" stroke-width="1" />
                            <path d="M38.197 175.972L15.3385 175.971L-13.6505 125.765L72.1515 125.768L204.673 355.282L141.729 355.279L38.197 175.972Z" stroke="#1B1B18" stroke-width="1" />
                        </g>
                        <g style="mix-blend-mode: plus-darker" class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4">
                            <path d="M230.951 281.792L231.282 281.793C238.128 274.907 248.453 265.823 262.256 254.539C275.617 243.256 285.666 234.267 292.402 227.573C299.027 220.688 303.554 213.421 305.983 205.771C308.412 198.12 307.253 190.183 302.504 181.959C297.203 172.778 289.749 165.415 280.142 159.868C270.645 154.13 260.596 151.26 249.995 151.26C239.615 151.26 232.823 154.033 229.621 159.579C226.309 164.934 227.413 172.393 232.935 181.956L168.335 181.954C159.058 165.888 155.082 151.543 156.407 138.92C157.953 126.298 164.247 116.544 175.289 109.659C186.442 102.583 201.294 99.045 219.846 99.0457C239.281 99.0464 258.551 102.585 277.655 109.663C296.649 116.549 313.986 126.303 329.667 138.927C345.349 151.551 357.827 165.895 367.104 181.961C375.718 196.88 379.528 209.981 378.535 221.265C377.762 232.549 374.063 242.399 367.438 250.814C361.033 259.229 351.095 269.557 337.624 281.796L419.782 281.8L448.605 331.719L259.774 331.712L230.951 281.792Z" fill="#F3BEC7" />
                            <path d="M51.8063 152.402L28.9479 152.401L-0.0411453 102.195L85.7608 102.198L218.282 331.711L155.339 331.709L51.8063 152.402Z" fill="#F3BEC7" />
                            <path d="M230.951 281.792L231.282 281.793C238.128 274.907 248.453 265.823 262.256 254.539C275.617 243.256 285.666 234.267 292.402 227.573C299.027 220.688 303.554 213.421 305.983 205.771C308.412 198.12 307.253 190.183 302.504 181.959C297.203 172.778 289.749 165.415 280.142 159.868C270.645 154.13 260.596 151.26 249.995 151.26C239.615 151.26 232.823 154.033 229.621 159.579C226.309 164.934 227.413 172.393 232.935 181.956L168.335 181.954C159.058 165.888 155.082 151.543 156.407 138.92C157.953 126.298 164.247 116.544 175.289 109.659C186.442 102.583 201.294 99.045 219.846 99.0457C239.281 99.0464 258.551 102.585 277.655 109.663C296.649 116.549 313.986 126.303 329.667 138.927C345.349 151.551 357.827 165.895 367.104 181.961C375.718 196.88 379.528 209.981 378.535 221.265C377.762 232.549 374.063 242.399 367.438 250.814C361.033 259.229 351.095 269.557 337.624 281.796L419.782 281.8L448.605 331.719L259.774 331.712L230.951 281.792Z" stroke="#1B1B18" stroke-width="1" />
                            <path d="M51.8063 152.402L28.9479 152.401L-0.0411453 102.195L85.7608 102.198L218.282 331.711L155.339 331.709L51.8063 152.402Z" stroke="#1B1B18" stroke-width="1" />
                        </g>
                        <g class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4">
                            <path d="M188.467 355.363L188.798 355.363C195.644 348.478 205.969 339.393 219.772 328.11C233.133 316.826 243.181 307.837 249.917 301.144C253.696 297.217 256.792 293.166 259.205 288.991C261.024 285.845 262.455 282.628 263.499 279.341C265.928 271.691 264.768 263.753 260.02 255.529C254.719 246.349 247.265 238.985 237.657 233.438C228.16 227.7 218.111 224.831 207.51 224.83C197.13 224.83 190.339 227.603 187.137 233.149C183.824 238.504 184.929 245.963 190.45 255.527L125.851 255.524C116.574 239.458 112.598 225.114 113.923 212.491C114.615 206.836 116.261 201.756 118.859 197.253C122.061 191.704 126.709 187.03 132.805 183.229C143.958 176.153 158.81 172.615 177.362 172.616C196.797 172.617 216.067 176.156 235.171 183.233C254.164 190.119 271.502 199.874 287.183 212.497C302.864 225.121 315.343 239.466 324.62 255.532C333.233 270.45 337.044 283.551 336.05 294.835C335.46 303.459 333.16 311.245 329.151 318.194C327.915 320.337 326.515 322.4 324.953 324.384C318.549 332.799 308.611 343.127 295.139 355.367L377.297 355.37L406.121 405.289L217.29 405.282L188.467 355.363Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M9.32197 225.972L-13.5365 225.971L-42.5255 175.765L43.2765 175.768L175.798 405.282L112.854 405.279L9.32197 225.972Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M345.247 111.915C329.566 99.2919 312.229 89.5371 293.235 82.6512L235.167 183.228C254.161 190.114 271.498 199.869 287.179 212.492L345.247 111.915Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M382.686 154.964C373.41 138.898 360.931 124.553 345.25 111.93L287.182 212.506C302.863 225.13 315.342 239.475 324.618 255.541L382.686 154.964Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M293.243 82.6472C274.139 75.57 254.869 72.031 235.434 72.0303L177.366 172.607C196.801 172.608 216.071 176.147 235.175 183.224L293.243 82.6472Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M394.118 194.257C395.112 182.973 391.301 169.872 382.688 154.953L324.619 255.53C333.233 270.448 337.044 283.55 336.05 294.834L394.118 194.257Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M235.432 72.0311C216.88 72.0304 202.027 75.5681 190.875 82.6442L132.806 183.221C143.959 176.145 158.812 172.607 177.363 172.608L235.432 72.0311Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M265.59 124.25C276.191 124.251 286.24 127.12 295.737 132.858L237.669 233.435C228.172 227.697 218.123 224.828 207.522 224.827L265.59 124.25Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M295.719 132.859C305.326 138.406 312.78 145.77 318.081 154.95L260.013 255.527C254.712 246.347 247.258 238.983 237.651 233.436L295.719 132.859Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M387.218 217.608C391.227 210.66 393.527 202.874 394.117 194.25L336.049 294.827C335.459 303.451 333.159 311.237 329.15 318.185L387.218 217.608Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M245.211 132.577C248.413 127.03 255.204 124.257 265.584 124.258L207.516 224.835C197.136 224.834 190.345 227.607 187.143 233.154L245.211 132.577Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M318.094 154.945C322.842 163.17 324.002 171.107 321.573 178.757L263.505 279.334C265.934 271.684 264.774 263.746 260.026 255.522L318.094 154.945Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M176.925 96.6737C180.127 91.1249 184.776 86.4503 190.871 82.6499L132.803 183.227C126.708 187.027 122.059 191.702 118.857 197.25L176.925 96.6737Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M387.226 217.606C385.989 219.749 384.59 221.813 383.028 223.797L324.96 324.373C326.522 322.39 327.921 320.326 329.157 318.183L387.226 217.606Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M317.269 188.408C319.087 185.262 320.519 182.045 321.562 178.758L263.494 279.335C262.451 282.622 261.019 285.839 259.201 288.985L317.269 188.408Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M245.208 132.573C241.895 137.928 243 145.387 248.522 154.95L190.454 255.527C184.932 245.964 183.827 238.505 187.14 233.15L245.208 132.573Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M176.93 96.6719C174.331 101.175 172.686 106.255 171.993 111.91L113.925 212.487C114.618 206.831 116.263 201.752 118.862 197.249L176.93 96.6719Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M317.266 188.413C314.853 192.589 311.757 196.64 307.978 200.566L249.91 301.143C253.689 297.216 256.785 293.166 259.198 288.99L317.266 188.413Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M464.198 304.708L435.375 254.789L377.307 355.366L406.13 405.285L464.198 304.708Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M353.209 254.787C366.68 242.548 376.618 232.22 383.023 223.805L324.955 324.382C318.55 332.797 308.612 343.124 295.141 355.364L353.209 254.787Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M435.37 254.787L353.212 254.784L295.144 355.361L377.302 355.364L435.37 254.787Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M183.921 154.947L248.521 154.95L190.453 255.527L125.853 255.524L183.921 154.947Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M171.992 111.914C170.668 124.537 174.643 138.881 183.92 154.947L125.852 255.524C116.575 239.458 112.599 225.114 113.924 212.491L171.992 111.914Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M307.987 200.562C301.251 207.256 291.203 216.244 277.842 227.528L219.774 328.105C233.135 316.821 243.183 307.832 249.919 301.139L307.987 200.562Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M15.5469 75.1797L44.5359 125.386L-13.5321 225.963L-42.5212 175.756L15.5469 75.1797Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M277.836 227.536C264.033 238.82 253.708 247.904 246.862 254.789L188.794 355.366C195.64 348.481 205.965 339.397 219.768 328.113L277.836 227.536Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M275.358 304.706L464.189 304.713L406.12 405.29L217.29 405.283L275.358 304.706Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M44.5279 125.39L67.3864 125.39L9.31834 225.967L-13.5401 225.966L44.5279 125.39Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M101.341 75.1911L233.863 304.705L175.795 405.282L43.2733 175.768L101.341 75.1911ZM15.5431 75.19L-42.525 175.767L43.277 175.77L101.345 75.1932L15.5431 75.19Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M246.866 254.784L246.534 254.784L188.466 355.361L188.798 355.361L246.866 254.784Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M246.539 254.781L275.362 304.701L217.294 405.277L188.471 355.358L246.539 254.781Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M67.3906 125.391L170.923 304.698L112.855 405.275L9.32257 225.967L67.3906 125.391Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                            <path d="M170.921 304.699L233.865 304.701L175.797 405.278L112.853 405.276L170.921 304.699Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="bevel" />
                        </g>
                        <g style="mix-blend-mode: hard-light" class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4">
                            <path d="M246.544 254.79L246.875 254.79C253.722 247.905 264.046 238.82 277.849 227.537C291.21 216.253 301.259 207.264 307.995 200.57C314.62 193.685 319.147 186.418 321.577 178.768C324.006 171.117 322.846 163.18 318.097 154.956C312.796 145.775 305.342 138.412 295.735 132.865C286.238 127.127 276.189 124.258 265.588 124.257C255.208 124.257 248.416 127.03 245.214 132.576C241.902 137.931 243.006 145.39 248.528 154.953L183.928 154.951C174.652 138.885 170.676 124.541 172 111.918C173.546 99.2946 179.84 89.5408 190.882 82.6559C202.035 75.5798 216.887 72.0421 235.439 72.0428C254.874 72.0435 274.144 75.5825 293.248 82.6598C312.242 89.5457 329.579 99.3005 345.261 111.924C360.942 124.548 373.421 138.892 382.697 154.958C391.311 169.877 395.121 182.978 394.128 194.262C393.355 205.546 389.656 215.396 383.031 223.811C376.627 232.226 366.688 242.554 353.217 254.794L435.375 254.797L464.198 304.716L275.367 304.709L246.544 254.79Z" fill="#F0ACB8" />
                            <path d="M246.544 254.79L246.875 254.79C253.722 247.905 264.046 238.82 277.849 227.537C291.21 216.253 301.259 207.264 307.995 200.57C314.62 193.685 319.147 186.418 321.577 178.768C324.006 171.117 322.846 163.18 318.097 154.956C312.796 145.775 305.342 138.412 295.735 132.865C286.238 127.127 276.189 124.258 265.588 124.257C255.208 124.257 248.416 127.03 245.214 132.576C241.902 137.931 243.006 145.39 248.528 154.953L183.928 154.951C174.652 138.885 170.676 124.541 172 111.918C173.546 99.2946 179.84 89.5408 190.882 82.6559C202.035 75.5798 216.887 72.0421 235.439 72.0428C254.874 72.0435 274.144 75.5825 293.248 82.6598C312.242 89.5457 329.579 99.3005 345.261 111.924C360.942 124.548 373.421 138.892 382.697 154.958C391.311 169.877 395.121 182.978 394.128 194.262C393.355 205.546 389.656 215.396 383.031 223.811C376.627 232.226 366.688 242.554 353.217 254.794L435.375 254.797L464.198 304.716L275.367 304.709L246.544 254.79Z" stroke="#1B1B18" stroke-width="1" stroke-linejoin="round" />
                        </g>
                        <g style="mix-blend-mode: hard-light" class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4">
                            <path d="M67.41 125.402L44.5515 125.401L15.5625 75.1953L101.364 75.1985L233.886 304.712L170.942 304.71L67.41 125.402Z" fill="#F0ACB8" />
                            <path d="M67.41 125.402L44.5515 125.401L15.5625 75.1953L101.364 75.1985L233.886 304.712L170.942 304.71L67.41 125.402Z" stroke="#1B1B18" stroke-width="1" />
                        </g>
                    </svg>

                    {{-- Dark Mode 12 SVG --}}
                    <svg class="w-[448px] max-w-none relative -mt-[4.9rem] -ml-8 lg:ml-0 lg:-mt-[6.6rem] hidden dark:block" viewBox="0 0 440 376" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4">
                            <path d="M188.263 355.73L188.595 355.73C195.441 348.845 205.766 339.761 219.569 328.477C232.93 317.193 242.978 308.205 249.714 301.511C256.34 294.626 260.867 287.358 263.296 279.708C265.725 272.058 264.565 264.121 259.816 255.896C254.516 246.716 247.062 239.352 237.454 233.805C227.957 228.067 217.908 225.198 207.307 225.198C196.927 225.197 190.136 227.97 186.934 233.516C183.621 238.872 184.726 246.331 190.247 255.894L125.647 255.891C116.371 239.825 112.395 225.481 113.72 212.858C115.265 200.235 121.559 190.481 132.602 183.596C143.754 176.52 158.607 172.982 177.159 172.983C196.594 172.984 215.863 176.523 234.968 183.6C253.961 190.486 271.299 200.241 286.98 212.864C302.661 225.488 315.14 239.833 324.416 255.899C333.03 270.817 336.841 283.918 335.847 295.203C335.075 306.487 331.376 316.336 324.75 324.751C318.346 333.167 308.408 343.494 294.936 355.734L377.094 355.737L405.917 405.656L217.087 405.649L188.263 355.73Z" fill="black"/>
                            <path d="M9.11884 226.339L-13.7396 226.338L-42.7286 176.132L43.0733 176.135L175.595 405.649L112.651 405.647L9.11884 226.339Z" fill="black"/>
                            <path d="M188.263 355.73L188.595 355.73C195.441 348.845 205.766 339.761 219.569 328.477C232.93 317.193 242.978 308.205 249.714 301.511C256.34 294.626 260.867 287.358 263.296 279.708C265.725 272.058 264.565 264.121 259.816 255.896C254.516 246.716 247.062 239.352 237.454 233.805C227.957 228.067 217.908 225.198 207.307 225.198C196.927 225.197 190.136 227.97 186.934 233.516C183.621 238.872 184.726 246.331 190.247 255.894L125.647 255.891C116.371 239.825 112.395 225.481 113.72 212.858C115.265 200.235 121.559 190.481 132.602 183.596C143.754 176.52 158.607 172.982 177.159 172.983C196.594 172.984 215.863 176.523 234.968 183.6C253.961 190.486 271.299 200.241 286.98 212.864C302.661 225.488 315.14 239.833 324.416 255.899C333.03 270.817 336.841 283.918 335.847 295.203C335.075 306.487 331.376 316.336 324.75 324.751C318.346 333.167 308.408 343.494 294.936 355.734L377.094 355.737L405.917 405.656L217.087 405.649L188.263 355.73Z" stroke="#FF750F" stroke-width="1"/>
                            <path d="M9.11884 226.339L-13.7396 226.338L-42.7286 176.132L43.0733 176.135L175.595 405.649L112.651 405.647L9.11884 226.339Z" stroke="#FF750F" stroke-width="1"/>
                            <path d="M204.592 327.449L204.923 327.449C211.769 320.564 222.094 311.479 235.897 300.196C249.258 288.912 259.306 279.923 266.042 273.23C272.668 266.345 277.195 259.077 279.624 251.427C282.053 243.777 280.893 235.839 276.145 227.615C270.844 218.435 263.39 211.071 253.782 205.524C244.285 199.786 234.236 196.917 223.635 196.916C213.255 196.916 206.464 199.689 203.262 205.235C199.949 210.59 201.054 218.049 206.575 227.612L141.975 227.61C132.699 211.544 128.723 197.2 130.048 184.577C131.593 171.954 137.887 162.2 148.93 155.315C160.083 148.239 174.935 144.701 193.487 144.702C212.922 144.703 232.192 148.242 251.296 155.319C270.289 162.205 287.627 171.96 303.308 184.583C318.989 197.207 331.468 211.552 340.745 227.618C349.358 242.536 353.169 255.637 352.175 266.921C351.403 278.205 347.704 288.055 341.078 296.47C334.674 304.885 324.736 315.213 311.264 327.453L393.422 327.456L422.246 377.375L233.415 377.368L204.592 327.449Z" fill="#391800"/>
                            <path d="M25.447 198.058L2.58852 198.057L-26.4005 147.851L59.4015 147.854L191.923 377.368L128.979 377.365L25.447 198.058Z" fill="#391800"/>
                            <path d="M204.592 327.449L204.923 327.449C211.769 320.564 222.094 311.479 235.897 300.196C249.258 288.912 259.306 279.923 266.042 273.23C272.668 266.345 277.195 259.077 279.624 251.427C282.053 243.777 280.893 235.839 276.145 227.615C270.844 218.435 263.39 211.071 253.782 205.524C244.285 199.786 234.236 196.917 223.635 196.916C213.255 196.916 206.464 199.689 203.262 205.235C199.949 210.59 201.054 218.049 206.575 227.612L141.975 227.61C132.699 211.544 128.723 197.2 130.048 184.577C131.593 171.954 137.887 162.2 148.93 155.315C160.083 148.239 174.935 144.701 193.487 144.702C212.922 144.703 232.192 148.242 251.296 155.319C270.289 162.205 287.627 171.96 303.308 184.583C318.989 197.207 331.468 211.552 340.745 227.618C349.358 242.536 353.169 255.637 352.175 266.921C351.403 278.205 347.704 288.055 341.078 296.47C334.674 304.885 324.736 315.213 311.264 327.453L393.422 327.456L422.246 377.375L233.415 377.368L204.592 327.449Z" stroke="#FF750F" stroke-width="1"/>
                            <path d="M25.447 198.058L2.58852 198.057L-26.4005 147.851L59.4015 147.854L191.923 377.368L128.979 377.365L25.447 198.058Z" stroke="#FF750F" stroke-width="1"/>
                        </g>
                        <g class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4" style="mix-blend-mode:hard-light">
                            <path d="M217.342 305.363L217.673 305.363C224.519 298.478 234.844 289.393 248.647 278.11C262.008 266.826 272.056 257.837 278.792 251.144C285.418 244.259 289.945 236.991 292.374 229.341C294.803 221.691 293.643 213.753 288.895 205.529C283.594 196.349 276.14 188.985 266.532 183.438C257.035 177.7 246.986 174.831 236.385 174.83C226.005 174.83 219.214 177.603 216.012 183.149C212.699 188.504 213.804 195.963 219.325 205.527L154.725 205.524C145.449 189.458 141.473 175.114 142.798 162.491C144.343 149.868 150.637 140.114 161.68 133.229C172.833 126.153 187.685 122.615 206.237 122.616C225.672 122.617 244.942 126.156 264.046 133.233C283.039 140.119 300.377 149.874 316.058 162.497C331.739 175.121 344.218 189.466 353.495 205.532C362.108 220.45 365.919 233.551 364.925 244.835C364.153 256.12 360.454 265.969 353.828 274.384C347.424 282.799 337.486 293.127 324.014 305.367L406.172 305.37L434.996 355.289L246.165 355.282L217.342 305.363Z" fill="#733000"/>
                            <path d="M38.197 175.972L15.3385 175.971L-13.6505 125.765L72.1515 125.768L204.673 355.282L141.729 355.279L38.197 175.972Z" fill="#733000"/>
                            <path d="M217.342 305.363L217.673 305.363C224.519 298.478 234.844 289.393 248.647 278.11C262.008 266.826 272.056 257.837 278.792 251.144C285.418 244.259 289.945 236.991 292.374 229.341C294.803 221.691 293.643 213.753 288.895 205.529C283.594 196.349 276.14 188.985 266.532 183.438C257.035 177.7 246.986 174.831 236.385 174.83C226.005 174.83 219.214 177.603 216.012 183.149C212.699 188.504 213.804 195.963 219.325 205.527L154.725 205.524C145.449 189.458 141.473 175.114 142.798 162.491C144.343 149.868 150.637 140.114 161.68 133.229C172.833 126.153 187.685 122.615 206.237 122.616C225.672 122.617 244.942 126.156 264.046 133.233C283.039 140.119 300.377 149.874 316.058 162.497C331.739 175.121 344.218 189.466 353.495 205.532C362.108 220.45 365.919 233.551 364.925 244.835C364.153 256.12 360.454 265.969 353.828 274.384C347.424 282.799 337.486 293.127 324.014 305.367L406.172 305.37L434.996 355.289L246.165 355.282L217.342 305.363Z" stroke="#FF750F" stroke-width="1"/>
                            <path d="M38.197 175.972L15.3385 175.971L-13.6505 125.765L72.1515 125.768L204.673 355.282L141.729 355.279L38.197 175.972Z" stroke="#FF750F" stroke-width="1"/>
                        </g>
                        <g class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4">
                            <path d="M217.342 305.363L217.673 305.363C224.519 298.478 234.844 289.393 248.647 278.11C262.008 266.826 272.056 257.837 278.792 251.144C285.418 244.259 289.945 236.991 292.374 229.341C294.803 221.691 293.643 213.753 288.895 205.529C283.594 196.349 276.14 188.985 266.532 183.438C257.035 177.7 246.986 174.831 236.385 174.83C226.005 174.83 219.214 177.603 216.012 183.149C212.699 188.504 213.804 195.963 219.325 205.527L154.726 205.524C145.449 189.458 141.473 175.114 142.798 162.491C144.343 149.868 150.637 140.114 161.68 133.229C172.833 126.153 187.685 122.615 206.237 122.616C225.672 122.617 244.942 126.156 264.046 133.233C283.039 140.119 300.377 149.874 316.058 162.497C331.739 175.121 344.218 189.466 353.495 205.532C362.108 220.45 365.919 233.551 364.925 244.835C364.153 256.12 360.454 265.969 353.828 274.384C347.424 282.799 337.486 293.127 324.014 305.367L406.172 305.37L434.996 355.289L246.165 355.282L217.342 305.363Z" stroke="#FF750F" stroke-width="1"/>
                            <path d="M38.197 175.972L15.3385 175.971L-13.6505 125.765L72.1515 125.768L204.673 355.282L141.729 355.279L38.197 175.972Z" stroke="#FF750F" stroke-width="1"/>
                        </g>
                        <g class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4">
                            <path d="M188.467 355.363L188.798 355.363C195.644 348.478 205.969 339.393 219.772 328.11C233.133 316.826 243.181 307.837 249.917 301.144C253.696 297.217 256.792 293.166 259.205 288.991C261.024 285.845 262.455 282.628 263.499 279.341C265.928 271.691 264.768 263.753 260.02 255.529C254.719 246.349 247.265 238.985 237.657 233.438C228.16 227.7 218.111 224.831 207.51 224.83C197.13 224.83 190.339 227.603 187.137 233.149C183.824 238.504 184.929 245.963 190.45 255.527L125.851 255.524C116.574 239.458 112.598 225.114 113.923 212.491C114.615 206.836 116.261 201.756 118.859 197.253C122.061 191.704 126.709 187.03 132.805 183.229C143.958 176.153 158.81 172.615 177.362 172.616C196.797 172.617 216.067 176.156 235.171 183.233C254.164 190.119 271.502 199.874 287.183 212.497C302.864 225.121 315.343 239.466 324.62 255.532C333.233 270.45 337.044 283.551 336.05 294.835C335.46 303.459 333.16 311.245 329.151 318.194C327.915 320.337 326.515 322.4 324.953 324.384C318.549 332.799 308.611 343.127 295.139 355.367L377.297 355.37L406.121 405.289L217.29 405.282L188.467 355.363Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M9.32197 225.972L-13.5365 225.971L-42.5255 175.765L43.2765 175.768L175.798 405.282L112.854 405.279L9.32197 225.972Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M345.247 111.915C329.566 99.2919 312.229 89.5371 293.235 82.6512L235.167 183.228C254.161 190.114 271.498 199.869 287.179 212.492L345.247 111.915Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M382.686 154.964C373.41 138.898 360.931 124.553 345.25 111.93L287.182 212.506C302.863 225.13 315.342 239.475 324.618 255.541L382.686 154.964Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M293.243 82.6472C274.139 75.57 254.869 72.031 235.434 72.0303L177.366 172.607C196.801 172.608 216.071 176.147 235.175 183.224L293.243 82.6472Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M394.118 194.257C395.112 182.973 391.301 169.872 382.688 154.953L324.619 255.53C333.233 270.448 337.044 283.55 336.05 294.834L394.118 194.257Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M235.432 72.0311C216.88 72.0304 202.027 75.5681 190.875 82.6442L132.806 183.221C143.959 176.145 158.812 172.607 177.363 172.608L235.432 72.0311Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M265.59 124.25C276.191 124.251 286.24 127.12 295.737 132.858L237.669 233.435C228.172 227.697 218.123 224.828 207.522 224.827L265.59 124.25Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M295.719 132.859C305.326 138.406 312.78 145.77 318.081 154.95L260.013 255.527C254.712 246.347 247.258 238.983 237.651 233.436L295.719 132.859Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M387.218 217.608C391.227 210.66 393.527 202.874 394.117 194.25L336.049 294.827C335.459 303.451 333.159 311.237 329.15 318.185L387.218 217.608Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M245.211 132.577C248.413 127.03 255.204 124.257 265.584 124.258L207.516 224.835C197.136 224.834 190.345 227.607 187.143 233.154L245.211 132.577Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M318.094 154.945C322.842 163.17 324.002 171.107 321.573 178.757L263.505 279.334C265.934 271.684 264.774 263.746 260.026 255.522L318.094 154.945Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M176.925 96.6737C180.127 91.1249 184.776 86.4503 190.871 82.6499L132.803 183.227C126.708 187.027 122.059 191.702 118.857 197.25L176.925 96.6737Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M387.226 217.606C385.989 219.749 384.59 221.813 383.028 223.797L324.96 324.373C326.522 322.39 327.921 320.326 329.157 318.183L387.226 217.606Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M317.269 188.408C319.087 185.262 320.519 182.045 321.562 178.758L263.494 279.335C262.451 282.622 261.019 285.839 259.201 288.985L317.269 188.408Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M245.208 132.573C241.895 137.928 243 145.387 248.522 154.95L190.454 255.527C184.932 245.964 183.827 238.505 187.14 233.15L245.208 132.573Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M176.93 96.6719C174.331 101.175 172.686 106.255 171.993 111.91L113.925 212.487C114.618 206.831 116.263 201.752 118.862 197.249L176.93 96.6719Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M317.266 188.413C314.853 192.589 311.757 196.64 307.978 200.566L249.91 301.143C253.689 297.216 256.785 293.166 259.198 288.99L317.266 188.413Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M464.198 304.708L435.375 254.789L377.307 355.366L406.13 405.285L464.198 304.708Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M353.209 254.787C366.68 242.548 376.618 232.22 383.023 223.805L324.955 324.382C318.55 332.797 308.612 343.124 295.141 355.364L353.209 254.787Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M435.37 254.787L353.212 254.784L295.144 355.361L377.302 355.364L435.37 254.787Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M183.921 154.947L248.521 154.95L190.453 255.527L125.853 255.524L183.921 154.947Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M171.992 111.914C170.668 124.537 174.643 138.881 183.92 154.947L125.852 255.524C116.575 239.458 112.599 225.114 113.924 212.491L171.992 111.914Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M307.987 200.562C301.251 207.256 291.203 216.244 277.842 227.528L219.774 328.105C233.135 316.821 243.183 307.832 249.919 301.139L307.987 200.562Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M15.5469 75.1797L44.5359 125.386L-13.5321 225.963L-42.5212 175.756L15.5469 75.1797Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M277.836 227.536C264.033 238.82 253.708 247.904 246.862 254.789L188.794 355.366C195.64 348.481 205.965 339.397 219.768 328.113L277.836 227.536Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M275.358 304.706L464.189 304.713L406.12 405.29L217.29 405.283L275.358 304.706Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M44.5279 125.39L67.3864 125.39L9.31834 225.967L-13.5401 225.966L44.5279 125.39Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M101.341 75.1911L233.863 304.705L175.795 405.282L43.2733 175.768L101.341 75.1911ZM15.5431 75.19L-42.525 175.767L43.277 175.77L101.345 75.1932L15.5431 75.19Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M246.866 254.784L246.534 254.784L188.466 355.361L188.798 355.361L246.866 254.784Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M246.539 254.781L275.362 304.701L217.294 405.277L188.471 355.358L246.539 254.781Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M67.3906 125.391L170.923 304.698L112.855 405.275L9.32257 225.967L67.3906 125.391Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                            <path d="M170.921 304.699L233.865 304.701L175.797 405.278L112.853 405.276L170.921 304.699Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="bevel"/>
                        </g>
                        <g class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4" style="mix-blend-mode:hard-light">
                            <path d="M246.544 254.79L246.875 254.79C253.722 247.905 264.046 238.82 277.849 227.537C291.21 216.253 301.259 207.264 307.995 200.57C314.62 193.685 319.147 186.418 321.577 178.768C324.006 171.117 322.846 163.18 318.097 154.956C312.796 145.775 305.342 138.412 295.735 132.865C286.238 127.127 276.189 124.258 265.588 124.257C255.208 124.257 248.416 127.03 245.214 132.576C241.902 137.931 243.006 145.39 248.528 154.953L183.928 154.951C174.652 138.885 170.676 124.541 172 111.918C173.546 99.2946 179.84 89.5408 190.882 82.6559C202.035 75.5798 216.887 72.0421 235.439 72.0428C254.874 72.0435 274.144 75.5825 293.248 82.6598C312.242 89.5457 329.579 99.3005 345.261 111.924C360.942 124.548 373.421 138.892 382.697 154.958C391.311 169.877 395.121 182.978 394.128 194.262C393.355 205.546 389.656 215.396 383.031 223.811C376.627 232.226 366.688 242.554 353.217 254.794L435.375 254.797L464.198 304.716L275.367 304.709L246.544 254.79Z" fill="#4B0600"/>
                            <path d="M246.544 254.79L246.875 254.79C253.722 247.905 264.046 238.82 277.849 227.537C291.21 216.253 301.259 207.264 307.995 200.57C314.62 193.685 319.147 186.418 321.577 178.768C324.006 171.117 322.846 163.18 318.097 154.956C312.796 145.775 305.342 138.412 295.735 132.865C286.238 127.127 276.189 124.258 265.588 124.257C255.208 124.257 248.416 127.03 245.214 132.576C241.902 137.931 243.006 145.39 248.528 154.953L183.928 154.951C174.652 138.885 170.676 124.541 172 111.918C173.546 99.2946 179.84 89.5408 190.882 82.6559C202.035 75.5798 216.887 72.0421 235.439 72.0428C254.874 72.0435 274.144 75.5825 293.248 82.6598C312.242 89.5457 329.579 99.3005 345.261 111.924C360.942 124.548 373.421 138.892 382.697 154.958C391.311 169.877 395.121 182.978 394.128 194.262C393.355 205.546 389.656 215.396 383.031 223.811C376.627 232.226 366.688 242.554 353.217 254.794L435.375 254.797L464.198 304.716L275.367 304.709L246.544 254.79Z" stroke="#FF750F" stroke-width="1" stroke-linejoin="round"/>
                        </g>
                        <g class="transition-all delay-300 translate-y-0 opacity-100 duration-750 starting:opacity-0 starting:translate-y-4" style="mix-blend-mode:hard-light">
                            <path d="M67.41 125.402L44.5515 125.401L15.5625 75.1953L101.364 75.1985L233.886 304.712L170.942 304.71L67.41 125.402Z" fill="#4B0600"/>
                            <path d="M67.41 125.402L44.5515 125.401L15.5625 75.1953L101.364 75.1985L233.886 304.712L170.942 304.71L67.41 125.402Z" stroke="#FF750F" stroke-width="1"/>
                        </g>
                    </svg>
                    <div class="absolute inset-0 rounded-t-lg lg:rounded-t-none lg:rounded-r-lg shadow-[inset_0px_0px_0px_1px_rgba(26,26,0,0.16)] dark:shadow-[inset_0px_0px_0px_1px_#fffaed2d]"></div>
                </div>
            </main>
        </div>

        @if (Route::has('login'))
            <div class="h-14.5 hidden lg:block"></div>
        @endif
    </body>
</html>
</file>

<file path="routes/console.php">
<?php

use Illuminate\Foundation\Inspiring;
use Illuminate\Support\Facades\Artisan;

Artisan::command('inspire', function () {
    $this->comment(Inspiring::quote());
})->purpose('Display an inspiring quote');
</file>

<file path="storage/app/.gitignore">
*
!private/
!public/
!.gitignore
</file>

<file path="storage/app/private/.gitignore">
*
!.gitignore
</file>

<file path="storage/app/public/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/.gitignore">
compiled.php
config.php
down
events.scanned.php
maintenance.php
routes.php
routes.scanned.php
schedule-*
services.json
</file>

<file path="storage/framework/cache/.gitignore">
*
!data/
!.gitignore
</file>

<file path="storage/framework/cache/data/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/sessions/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/testing/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/views/.gitignore">
*
!.gitignore
</file>

<file path="storage/logs/.gitignore">
*
!.gitignore
</file>

<file path="tests/Feature/ExampleTest.php">
<?php

namespace Tests\Feature;

// use Illuminate\Foundation\Testing\RefreshDatabase;
use Tests\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_the_application_returns_a_successful_response(): void
    {
        $response = $this->get('/');

        $response->assertStatus(200);
    }
}
</file>

<file path="tests/TestCase.php">
<?php

namespace Tests;

use Illuminate\Foundation\Testing\TestCase as BaseTestCase;

abstract class TestCase extends BaseTestCase
{
    //
}
</file>

<file path="tests/Unit/ExampleTest.php">
<?php

namespace Tests\Unit;

use PHPUnit\Framework\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_that_true_is_true(): void
    {
        $this->assertTrue(true);
    }
}
</file>

<file path="app/Http/Controllers/Auth/LoginController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\AuthenticatesUsers;
use Illuminate\Http\Request;
use Illuminate\Http\RedirectResponse;
class LoginController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Login Controller
    |--------------------------------------------------------------------------
    |
    | This controller handles authenticating users for the application and
    | redirecting them to your home screen. The controller uses a trait
    | to conveniently provide its functionality to your applications.
    |
    */

    use AuthenticatesUsers;

    /**
     * Where to redirect users after login.
     *
     * @var string
     */
    // protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */

    public function authenticated(Request $request, $user)
    {
        if ($user->role === 'admin') {
            return redirect()->route('admin.dashboard');
        }
        return redirect()->route('home');
    }
    public function __construct()
    {
        $this->middleware('guest')->except('logout');
        $this->middleware('auth')->only('logout');
    }
}
</file>

<file path="app/Http/Controllers/Auth/RegisterController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Models\User;
use Illuminate\Foundation\Auth\RegistersUsers;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Facades\Validator;

class RegisterController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Register Controller
    |--------------------------------------------------------------------------
    |
    | This controller handles the registration of new users as well as their
    | validation and creation. By default this controller uses a trait to
    | provide this functionality without requiring any additional code.
    |
    */

    use RegistersUsers;

    /**
     * Where to redirect users after registration.
     *
     * @var string
     */
    // protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('guest');
    }
     public function redirectTo()
    {
        if (auth()->user()->role === 'admin') {
            return route('admin.dashboard');
        }
        return route('home'); 
    }
    /**
     * Get a validator for an incoming registration request.
     *
     * @param  array  $data
     * @return \Illuminate\Contracts\Validation\Validator
     */
    protected function validator(array $data)
    {
        return Validator::make($data, [
            'name' => ['required', 'string', 'max:255'],
            'email' => ['required', 'string', 'email', 'max:255', 'unique:users'],
            'password' => ['required', 'string', 'min:8', 'confirmed'],
        ]);
    }

    /**
     * Create a new user instance after a valid registration.
     *
     * @param  array  $data
     * @return \App\Models\User
     */
    protected function create(array $data)
    {
        return User::create([
            'name' => $data['name'],
            'email' => $data['email'],
            'password' => Hash::make($data['password']),
            'role' => 'user',
        ]);
    }
}
</file>

<file path="app/Http/Controllers/HomeController.php">
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Models\LoaiPhong;
use App\Models\KhuyenMai;
use Carbon\Carbon;
class HomeController extends Controller
{
    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        // Allow guests to view the public homepage (index)
        $this->middleware('auth')->except(['index']);
    }

    /**
     * Show the application dashboard.
     *
     * @return \Illuminate\Contracts\Support\Renderable
     */
    public function index()
    {
        // Return the public default layout as the homepage.
        // The public layout file is at resources/views/layouts/app.blade.php

        // 1. Lấy danh sách Loại phòng nổi bật (Ví dụ lấy 3 loại phòng đầu tiên hoặc ngẫu nhiên)
        $loaiPhongs = LoaiPhong::take(3)->get();

        // 2. Lấy Khuyến mãi đang hiệu lực (Ngày bắt đầu <= hôm nay <= Ngày kết thúc)
        $now = Carbon::now();
        $khuyenMais = KhuyenMai::whereDate('ngay_bat_dau', '<=', $now)
                               ->whereDate('ngay_ket_thuc', '>=', $now)
                               ->take(2) // Lấy 2 khuyến mãi mới nhất
                               ->get();

        return view('home', compact('loaiPhongs', 'khuyenMais'));

    }
}
</file>

<file path="app/Models/ChiTietDatPhong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class ChiTietDatPhong extends Model
{
    use HasFactory;

    // Định nghĩa tên bảng cho chắc chắn
    protected $table = 'chi_tiet_dat_phongs';

    // QUAN TRỌNG: Khai báo các cột được phép lưu (Mass Assignment)
    // Phải khớp với các trường trong BookingController@store
    // Trong App\Models\ChiTietDatPhong.php
    protected $fillable = [
        'dat_phong_id',
        'loai_phong_id',
        'phong_id',
        'so_luong',
        'don_gia',    // <--- Phải có
        'thanh_tien', // <--- Phải có
    ];

    /**
     * Quan hệ ngược lại với bảng Đặt phòng
     */
    public function datPhong()
    {
        return $this->belongsTo(DatPhong::class, 'dat_phong_id');
    }

    /**
     * Quan hệ với bảng Loại phòng
     */
    public function loaiPhong()
    {
        return $this->belongsTo(LoaiPhong::class, 'loai_phong_id');
    }

    /**
     * Quan hệ với bảng Phòng cụ thể
     */
    public function phong()
    {
        return $this->belongsTo(Phong::class, 'phong_id');
    }
}
</file>

<file path="app/Models/DatPhong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Database\Eloquent\Relations\HasOne;

class DatPhong extends Model
{
    use HasFactory;

    protected $table = 'dat_phongs'; // Định nghĩa rõ tên bảng

    // SỬA LẠI FILLABLE CHO KHỚP VỚI CONTROLLER VÀ DATABASE
    protected $fillable = [
        'user_id',
        'ngay_den',      
        'ngay_di',        
        'tong_tien',      
        'trang_thai',
        'payment_status', 
    ];

    /**
     * The user who made the booking.
     */
    public function user(): BelongsTo
    {
        return $this->belongsTo(User::class);
    }

    /**
     * Booking details for this DatPhong.
     */
    public function chiTietDatPhongs(): HasMany
    {
        return $this->hasMany(ChiTietDatPhong::class, 'dat_phong_id');
    }

    /**
     * Invoice for this booking (one-to-one).
     */
    public function hoaDon(): HasOne
    {
        return $this->hasOne(HoaDon::class, 'dat_phong_id');
    }
}
</file>

<file path="app/Models/KhuyenMai.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;

class KhuyenMai extends Model
{
    protected $fillable = [
        'ten_khuyen_mai',
        'ma_khuyen_mai',
        'chiet_khau_phan_tram',
        'so_tien_giam_gia',
        'ngay_bat_dau',
        'ngay_ket_thuc',
    ];

    // Currently no direct foreign keys in migrations; keep simple model.
}
</file>

<file path="app/Models/Phong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;

class Phong extends Model
{
    protected $table = 'phongs';
    protected $fillable = [
        'loai_phong_id',
        'so_phong',
        'tinh_trang',
    ];

    public const tinh_trang_options = [
        'available' => [
            'label' => 'Phòng trống',
            'class' => 'bg-emerald-100 text-emerald-800 border-emerald-200 ring-emerald-500', // Màu xanh ngọc (Sẵn sàng đón khách)
            'icon' => 'fa-door-open'
        ],
        'occupied' => [
            'label' => 'Đang có khách',
            'class' => 'bg-blue-100 text-blue-800 border-blue-200 ring-blue-500', // Màu xanh dương (Đang sử dụng)
            'icon' => 'fa-user-check'
        ],
        'cleaning' => [
            'label' => 'Đang dọn dẹp',
            'class' => 'bg-amber-100 text-amber-800 border-amber-200 ring-amber-500', // Màu vàng (Cảnh báo nhẹ)
            'icon' => 'fa-broom'
        ],
        'maintenance' => [
            'label' => 'Bảo trì / Sửa chữa',
            'class' => 'bg-red-100 text-red-800 border-red-200 ring-red-500', // Màu đỏ (Không thể dùng)
            'icon' => 'fa-screwdriver-wrench'
        ],
    ];

    /**
     * The LoaiPhong this Phong belongs to.
     */
    public function loaiPhong(): BelongsTo
    {
        return $this->belongsTo(LoaiPhong::class);
    }

    /**
     * Booking details referencing this Phong.
     */
    public function chiTietDatPhongs(): HasMany
    {
        return $this->hasMany(ChiTietDatPhong::class);
    }
}
</file>

<file path="bootstrap/app.php">
<?php

use Illuminate\Foundation\Application;
use Illuminate\Foundation\Configuration\Exceptions;
use Illuminate\Foundation\Configuration\Middleware;

return Application::configure(basePath: dirname(__DIR__))
    ->withRouting(
        web: __DIR__.'/../routes/web.php',
        commands: __DIR__.'/../routes/console.php',
        health: '/up',
    )
    ->withMiddleware(function (Middleware $middleware): void {
        $middleware->alias([
            'check.profile' => \App\Http\Middleware\CheckUserProfile::class,
            
            'admin' => \App\Http\Middleware\AdminMiddleware::class,
        ]);
    })
    ->withExceptions(function (Exceptions $exceptions): void {
        //
    })->create();
</file>

<file path="database/migrations/2025_12_05_181619_create_loai_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('loai_phongs', function (Blueprint $table) {
            $table->id();
            $table->string('ten_loai_phong', 100);
            $table->decimal('gia', 10, 2);
            $table->integer('so_nguoi');
            $table->string(('tien_nghi'))->nullable();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('loai_phongs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181622_create_chi_tiet_dat_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('chi_tiet_dat_phongs', function (Blueprint $table) {
            $table->id();
            $table->foreignId(column: 'dat_phong_id')->constrained(table: 'dat_phongs');
            $table->foreignId('loai_phong_id')->constrained('loai_phongs');
            $table->foreignId('phong_id')->constrained('phongs');
            $table->integer('so_luong');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('chi_tiet_dat_phongs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181623_create_khuyen_mais_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;
use Ramsey\Uuid\Type\Decimal;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('khuyen_mais', function (Blueprint $table) {
            $table->id();
            $table->string('ten_khuyen_mai', 100);
            $table->string('ma_khuyen_mai', 50)->unique();
            $table->decimal('chiet_khau_phan_tram', 5, 2);
            $table->decimal('so_tien_giam_gia',10,2);
            $table->date('ngay_bat_dau');
            $table->date('ngay_ket_thuc');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('khuyen_mais');
    }
};
</file>

<file path="resources/views/auth/login.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card-common">
                <div class="px-6 py-4 border-b font-semibold">{{ __('Login') }}</div>

                <div class="p-6">
                    <form method="POST" action="{{ route('login') }}">
                        @csrf

                        <div class="mb-4">
                            <label for="email" class="block text-sm font-medium text-gray-700">{{ __('Email Address') }}</label>
                            <input id="email" type="email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm @error('email') border-red-500 @enderror" name="email" value="{{ old('email') }}" required autocomplete="email" autofocus>
                            @error('email') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                        </div>

                        <div class="mb-4">
                            <label for="password" class="block text-sm font-medium text-gray-700">{{ __('Password') }}</label>
                            <input id="password" type="password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm @error('password') border-red-500 @enderror" name="password" required autocomplete="current-password">
                            @error('password') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                        </div>

                        <div class="mb-4 flex items-center">
                            <input class="form-checkbox h-4 w-4 text-brand-900" type="checkbox" name="remember" id="remember" {{ old('remember') ? 'checked' : '' }}>
                            <label class="ml-2 text-sm text-gray-700" for="remember">{{ __('Remember Me') }}</label>
                        </div>

                        <div class="flex items-center justify-between">
                            <button type="submit" class="btn-primary">{{ __('Login') }}</button>
                            @if (Route::has('password.request'))
                                <a class="text-sm text-blue-600 hover:underline" href="{{ route('password.request') }}">{{ __('Forgot Your Password?') }}</a>
                            @endif
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="vite.config.js">
import { defineConfig } from 'vite';
import laravel from 'laravel-vite-plugin';

export default defineConfig({
    plugins: [
        laravel({
            input: [
                'resources/sass/app.scss',
                'resources/js/app.js',
                'resources/js/tailwind-config.js',
                'resources/js/client.css',
                'resources/js/client.js',
            ],
            refresh: true,
        }),
    ],
});
</file>

<file path="app/Models/User.php">
<?php

namespace App\Models;

// use Illuminate\Contracts\Auth\MustVerifyEmail;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Notifications\Notifiable;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Str;

class User extends Authenticatable
{
    /** @use HasFactory<\Database\Factories\UserFactory> */
    use HasFactory, Notifiable;

    /**
     * The attributes that are mass assignable.
     *
     * @var list<string>
     */
    protected $fillable = [
        'name',
        'email',
        'cccd',
        'phone',
        'username',
        'role',
        'password',
    ];
    
    public const roles = [
        'admin',
        'user'
    ];

    /**
     * The attributes that should be hidden for serialization.
     *
     * @var list<string>
     */
    protected $hidden = [
        'password',
        'remember_token',
    ];

    /**
     * The attributes that should be cast.
     *
     * @var array<string,string>
     */
    protected $casts = [
        'email_verified_at' => 'datetime',
        'password' => 'hashed',
    ];

    /**
     * Ensure passwords are hashed when set. If a value already looks like
     * a hash (bcrypt/argon prefix), leave it as-is to avoid double-hashing.
     */
    public function setPasswordAttribute(?string $value): void
    {
        if (empty($value)) {
            return;
        }

        // Common hash prefixes (bcrypt, argon)
        if (Str::startsWith($value, ['$2y$', '$2a$', '$argon$', '$argon2i$', '$argon2id$'])) {
            $this->attributes['password'] = $value;
            return;
        }

        $this->attributes['password'] = Hash::make($value);
    }

    /**
     * Get the bookings (dat_phongs) for the user.
     */
    public function datPhongs(): HasMany
    {
        return $this->hasMany(DatPhong::class);
    }
}
</file>

<file path="resources/views/home.blade.php">
@extends('layouts.app')

@section('title', 'Trang chủ - Trải nghiệm nghỉ dưỡng đẳng cấp')

@section('content')

<!-- 1. HERO SECTION & BOOKING FORM -->
<div class="relative h-[85vh] min-h-[600px] w-full bg-gray-900 overflow-hidden">
    <!-- Background Image với lớp phủ tối -->
    <div class="absolute inset-0">
        <img src="https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?q=80&w=2070&auto=format&fit=crop" 
             alt="Luxury Hotel" 
             class="w-full h-full object-cover opacity-60">
        <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent"></div>
    </div>

    <!-- Hero Text -->
    <div class="relative z-10 h-full flex flex-col justify-center items-center text-center px-4 pt-20">
        <span class="text-brand-gold font-bold tracking-[0.2em] uppercase text-sm mb-4 animate-fade-in-up">Chào mừng đến với Luxury Stay</span>
        <h1 class="font-serif text-4xl md:text-6xl lg:text-7xl text-white font-bold leading-tight mb-6 drop-shadow-2xl max-w-4xl mx-auto">
            Nơi Đẳng Cấp Giao Thoa <br> Cùng Sự Bình Yên
        </h1>
        <p class="text-gray-200 text-lg md:text-xl max-w-2xl mx-auto mb-10 font-light">
            Tận hưởng kỳ nghỉ trong mơ với hệ thống phòng suite sang trọng và dịch vụ 5 sao chuẩn quốc tế tại trung tâm thành phố.
        </p>
        
        <!-- Nút cuộn xuống -->
        <a href="#booking-form" class="animate-bounce text-white opacity-80 hover:opacity-100 transition mt-4">
            <i class="fa-solid fa-chevron-down text-3xl"></i>
        </a>
    </div>

</div>

<!-- 3. FEATURED ROOMS (DYNAMIC DATA) -->
<section class="py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <span class="text-brand-gold font-bold uppercase tracking-wider text-sm">Không gian nghỉ dưỡng</span>
            <h2 class="font-serif text-4xl font-bold text-gray-900 mt-2">Hạng phòng nổi bật</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            @if(isset($loaiPhongs) && $loaiPhongs->count() > 0)
                @foreach($loaiPhongs as $phong)
                <!-- Room Card -->
                <div class="group bg-white rounded-lg shadow-sm hover:shadow-xl transition duration-300 border border-gray-100 overflow-hidden flex flex-col h-full">
                    <!-- Ảnh phòng (Có thể thay bằng ảnh thật từ DB nếu có cột 'image') -->
                    <div class="relative h-64 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1611892440504-42a792e24d32?auto=format&fit=crop&w=800&q=80" 
                             alt="{{ $phong->ten_loai_phong }}" 
                             class="w-full h-full object-cover transform group-hover:scale-110 transition duration-700">
                        <div class="absolute top-4 right-4 bg-white/90 backdrop-blur text-brand-900 text-xs font-bold px-3 py-1 rounded uppercase">
                            {{ number_format($phong->gia_dem ?? 0, 0, ',', '.') }}đ / đêm
                        </div>
                    </div>
                    
                    <div class="p-6 flex flex-col flex-grow">
                        <h3 class="font-serif text-2xl font-bold text-gray-900 mb-2 group-hover:text-brand-gold transition">
                            <a href="#">{{ $phong->ten_loai_phong }}</a>
                        </h3>
                        <p class="text-gray-500 text-sm line-clamp-2 mb-4 flex-grow">{{ $phong->mo_ta ?? 'Trải nghiệm không gian sang trọng với đầy đủ tiện nghi hiện đại.' }}</p>
                        
                        <!-- Tiện ích nhỏ -->
                        <div class="flex items-center gap-4 text-gray-400 text-sm mb-6 border-t border-gray-100 pt-4">
                            <span title="Người lớn"><i class="fa-solid fa-user mr-1"></i> 2</span>
                            <span title="Diện tích"><i class="fa-solid fa-ruler-combined mr-1"></i> 35m²</span>
                            <span title="Wifi"><i class="fa-solid fa-wifi mr-1"></i> Free</span>
                        </div>

                        <a href="{{ route('phong') }}" class="block w-full text-center bg-gray-100 text-gray-800 font-bold py-3 rounded hover:bg-brand-900 hover:text-white transition">
                            Chi tiết & Đặt phòng
                        </a>
                    </div>
                </div>
                @endforeach
            @else
                <p class="col-span-3 text-center text-gray-500">Đang cập nhật danh sách phòng...</p>
            @endif
        </div>
        
        <div class="text-center mt-12">
            <a href="{{ route('phong') }}" class="inline-flex items-center justify-center px-8 py-3 border border-brand-900 text-base font-medium rounded-md text-brand-900 bg-transparent hover:bg-brand-900 hover:text-white transition md:text-lg">
                Xem tất cả phòng
            </a>
        </div>
    </div>
</section>

<!-- 4. SERVICES -->
<section class="py-20 bg-brand-900 text-white relative overflow-hidden">
    <!-- Họa tiết nền mờ -->
    <div class="absolute top-0 right-0 p-12 opacity-5 pointer-events-none">
        <i class="fa-solid fa-crown text-9xl"></i>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="text-center mb-16">
            <span class="text-brand-gold font-bold uppercase tracking-wider text-sm">Tiện ích & Dịch vụ</span>
            <h2 class="font-serif text-4xl font-bold text-white mt-2">Tận hưởng kỳ nghỉ trọn vẹn</h2>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
            <!-- Service 1 -->
            <div class="text-center group p-6 rounded-lg hover:bg-white/5 transition">
                <div class="w-16 h-16 mx-auto bg-brand-gold/10 rounded-full flex items-center justify-center text-brand-gold mb-4 group-hover:bg-brand-gold group-hover:text-brand-900 transition">
                    <i class="fa-solid fa-utensils text-2xl"></i>
                </div>
                <h3 class="font-bold text-lg mb-2">Nhà hàng 5 sao</h3>
                <p class="text-gray-400 text-sm">Thưởng thức ẩm thực Á - Âu.</p>
            </div>
            <!-- Service 2 -->
            <div class="text-center group p-6 rounded-lg hover:bg-white/5 transition">
                <div class="w-16 h-16 mx-auto bg-brand-gold/10 rounded-full flex items-center justify-center text-brand-gold mb-4 group-hover:bg-brand-gold group-hover:text-brand-900 transition">
                    <i class="fa-solid fa-person-swimming text-2xl"></i>
                </div>
                <h3 class="font-bold text-lg mb-2">Hồ bơi vô cực</h3>
                <p class="text-gray-400 text-sm">Tầm nhìn toàn cảnh thành phố.</p>
            </div>
            <!-- Service 3 -->
            <div class="text-center group p-6 rounded-lg hover:bg-white/5 transition">
                <div class="w-16 h-16 mx-auto bg-brand-gold/10 rounded-full flex items-center justify-center text-brand-gold mb-4 group-hover:bg-brand-gold group-hover:text-brand-900 transition">
                    <i class="fa-solid fa-spa text-2xl"></i>
                </div>
                <h3 class="font-bold text-lg mb-2">Luxury Spa</h3>
                <p class="text-gray-400 text-sm">Liệu trình thư giãn cao cấp.</p>
            </div>
            <!-- Service 4 -->
            <div class="text-center group p-6 rounded-lg hover:bg-white/5 transition">
                <div class="w-16 h-16 mx-auto bg-brand-gold/10 rounded-full flex items-center justify-center text-brand-gold mb-4 group-hover:bg-brand-gold group-hover:text-brand-900 transition">
                    <i class="fa-solid fa-martini-glass-citrus text-2xl"></i>
                </div>
                <h3 class="font-bold text-lg mb-2">Sky Bar</h3>
                <p class="text-gray-400 text-sm">Cocktail và nhạc sống mỗi tối.</p>
            </div>
        </div>
    </div>
</section>

<!-- 5. PROMOTIONS (DYNAMIC DATA) -->
@if(isset($khuyenMais) && $khuyenMais->count() > 0)
<section class="py-20 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-end mb-12">
            <div>
                <span class="text-brand-gold font-bold uppercase tracking-wider text-sm">Ưu đãi đặc biệt</span>
                <h2 class="font-serif text-4xl font-bold text-gray-900 mt-2">Khuyến mãi dành cho bạn</h2>
            </div>
            <a href="{{ route('khuyen-mai') }}" class="hidden md:inline-block text-brand-900 font-bold hover:text-brand-gold transition">
                Xem tất cả <i class="fa-solid fa-arrow-right ml-1"></i>
            </a>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            @foreach($khuyenMais as $km)
            <div class="bg-white rounded-2xl p-8 shadow-sm hover:shadow-md transition border border-gray-100 flex flex-col md:flex-row items-center gap-6 relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg">HOT</div>
                
                <div class="w-24 h-24 flex-shrink-0 bg-brand-50 rounded-full flex items-center justify-center border-2 border-brand-gold text-brand-gold">
                    <i class="fa-solid fa-gift text-3xl"></i>
                </div>
                
                <div class="flex-grow text-center md:text-left">
                    <h3 class="text-xl font-bold text-gray-900 mb-2">{{ $km->ten_khuyen_mai }}</h3>
                    <p class="text-gray-500 text-sm mb-4 line-clamp-2">{{ $km->mo_ta }}</p>
                    <div class="flex items-center justify-center md:justify-start gap-3">
                        <span class="bg-gray-100 text-gray-600 px-3 py-1 rounded border border-gray-200 font-mono text-sm">
                            Mã: <strong class="text-brand-900">{{ $km->ma_giam_gia }}</strong>
                        </span>
                        <span class="text-red-500 font-bold">
                            @if($km->loai_giam_gia == 'percentage')
                                Giảm {{ $km->gia_tri_giam }}%
                            @else
                                Giảm {{ number_format($km->gia_tri_giam) }}đ
                            @endif
                        </span>
                    </div>
                </div>
                
                <div>
                    <button onclick="navigator.clipboard.writeText('{{ $km->ma_giam_gia }}'); alert('Đã sao chép mã!')" class="text-brand-gold hover:text-brand-900 text-sm font-semibold underline">
                        Sao chép
                    </button>
                </div>
            </div>
            @endforeach
        </div>
    </div>
</section>
@endif

<!-- 6. TESTIMONIALS (STATIC) -->
<section class="py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="font-serif text-4xl font-bold text-gray-900">Khách hàng nói gì về chúng tôi?</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Review 1 -->
            <div class="bg-gray-50 p-8 rounded-xl relative">
                <i class="fa-solid fa-quote-left text-4xl text-brand-gold/20 absolute top-4 left-4"></i>
                <p class="text-gray-600 mb-6 italic relative z-10">"Một trải nghiệm tuyệt vời! Phòng ốc sạch sẽ, nhân viên cực kỳ thân thiện và chuyên nghiệp. Chắc chắn tôi sẽ quay lại."</p>
                <div class="flex items-center gap-4">
                    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User" class="w-12 h-12 rounded-full">
                    <div>
                        <h4 class="font-bold text-gray-900 text-sm">Nguyễn Thu Hà</h4>
                        <div class="text-yellow-400 text-xs">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        </div>
                    </div>
                </div>
            </div>
             <!-- Review 2 -->
             <div class="bg-gray-50 p-8 rounded-xl relative">
                <i class="fa-solid fa-quote-left text-4xl text-brand-gold/20 absolute top-4 left-4"></i>
                <p class="text-gray-600 mb-6 italic relative z-10">"Vị trí khách sạn rất thuận tiện. Đồ ăn sáng ngon và đa dạng. Hồ bơi view đẹp nhất khu vực."</p>
                <div class="flex items-center gap-4">
                    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" class="w-12 h-12 rounded-full">
                    <div>
                        <h4 class="font-bold text-gray-900 text-sm">Trần Minh Tuấn</h4>
                        <div class="text-yellow-400 text-xs">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        </div>
                    </div>
                </div>
            </div>
             <!-- Review 3 -->
             <div class="bg-gray-50 p-8 rounded-xl relative">
                <i class="fa-solid fa-quote-left text-4xl text-brand-gold/20 absolute top-4 left-4"></i>
                <p class="text-gray-600 mb-6 italic relative z-10">"Dịch vụ đẳng cấp 5 sao thực sự. Tôi rất ấn tượng với cách bài trí nội thất trong phòng Suite."</p>
                <div class="flex items-center gap-4">
                    <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="User" class="w-12 h-12 rounded-full">
                    <div>
                        <h4 class="font-bold text-gray-900 text-sm">Sarah Johnson</h4>
                        <div class="text-yellow-400 text-xs">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 7. CTA / CALL TO ACTION -->
<section class="py-16 bg-brand-gold">
    <div class="max-w-4xl mx-auto text-center px-4">
        <h2 class="font-serif text-3xl md:text-4xl font-bold text-brand-900 mb-4">Sẵn sàng cho kỳ nghỉ trong mơ?</h2>
        <p class="text-brand-900/80 mb-8 text-lg">Đặt phòng trực tiếp trên website để nhận ưu đãi tốt nhất và tích điểm thành viên.</p>
        <a href="{{ route('phong') }}" class="inline-block bg-brand-900 text-white font-bold py-4 px-10 rounded shadow-xl hover:bg-white hover:text-brand-900 transition transform hover:-translate-y-1">
            ĐẶT PHÒNG NGAY
        </a>
    </div>
</section>

@endsection
</file>

<file path="routes/web.php">
<?php

use Illuminate\Support\Facades\Route;
use Illuminate\Support\Facades\Auth;

// --- 1. IMPORT ADMIN CONTROLLERS ---
use App\Http\Controllers\Admin\AdminController; 
use App\Http\Controllers\Admin\ChiTietDatPhongController;
use App\Http\Controllers\Admin\DatPhongController; 
use App\Http\Controllers\Admin\HoaDonController;
use App\Http\Controllers\Admin\LoaiPhongController;
use App\Http\Controllers\Admin\PhongController;
use App\Http\Controllers\Admin\UserController;
use App\Http\Controllers\Admin\KhuyenMaiController;

// --- 2. IMPORT CLIENT CONTROLLERS ---
use App\Http\Controllers\Client\PageController;
use App\Http\Controllers\Client\BookingController;
use App\Http\Controllers\ProfileController;

Auth::routes();

/*
|--------------------------------------------------------------------------
| PUBLIC ROUTES (KHÁCH HÀNG - AI CŨNG XEM ĐƯỢC)
|--------------------------------------------------------------------------
*/
Route::get('/', [PageController::class, 'home'])->name('trang_chu');
Route::get('/home', [PageController::class, 'home'])->name('home'); // Alias tránh lỗi cũ

// Danh sách & Chi tiết (Client View)
Route::get('/danh-sach-phong', [PageController::class, 'rooms'])->name('phong');
Route::get('/chi-tiet-phong/{id}', [PageController::class, 'roomDetail'])->name('phong.chi-tiet');
Route::get('/uu-dai', [PageController::class, 'promotions'])->name('khuyen-mai');


/*
|--------------------------------------------------------------------------
| AUTHENTICATED ROUTES (KHÁCH HÀNG ĐÃ ĐĂNG NHẬP)
|--------------------------------------------------------------------------
*/
Route::middleware('auth')->group(function () {
    
    // 1. Hồ sơ cá nhân
    Route::get('/ho-so', [ProfileController::class, 'edit'])->name('profile.edit');
    Route::patch('/ho-so', [ProfileController::class, 'update'])->name('profile.update');

    // 2. Lịch sử đặt phòng (User xem của chính mình)
    // Lưu ý: Cần đảm bảo hàm getDanhSach trong DatPhongController có logic lọc theo Auth::id() nếu user gọi
    Route::get('/lich-su-dat-phong', [DatPhongController::class, 'getDanhSach'])->name('bookings.history');

    // 3. Quy trình đặt phòng (Yêu cầu đủ hồ sơ)
    Route::middleware(['check.profile'])->group(function () {
        Route::get('/dat-phong/xac-nhan', [BookingController::class, 'create'])->name('booking.create');
        Route::post('/dat-phong/luu', [BookingController::class, 'store'])->name('booking.store');
        Route::get('/dat-phong/thanh-cong', [BookingController::class, 'success'])->name('booking.success');
    });
});


/*
|--------------------------------------------------------------------------
| ADMIN ROUTES (QUẢN TRỊ VIÊN)
|--------------------------------------------------------------------------
| Tất cả route trong này đều có tiền tố '/admin'
*/
Route::prefix('admin')
    ->middleware(['auth', \App\Http\Middleware\AdminMiddleware::class]) // Chặn User thường
    ->group(function () {
    
    // Dashboard: domain.com/admin/dashboard
    Route::get('/dashboard', [AdminController::class, 'index'])->name('admin.dashboard');

    // --- NHÓM 1: QUẢN LÝ LOẠI PHÒNG ---
    // URL bắt đầu bằng: /admin/loai-phong
    Route::prefix('loai-phong')->group(function() {
        Route::get('/', [LoaiPhongController::class, 'getDanhSach'])->name('admin.loai-phong');       // Danh sách
        Route::get('/them', [LoaiPhongController::class, 'getThem'])->name('admin.loai-phong.them');   // Form thêm
        Route::post('/them', [LoaiPhongController::class, 'postThem'])->name('admin.loai-phong.store'); // Xử lý thêm
        Route::get('/sua/{id}', [LoaiPhongController::class, 'getSua'])->name('admin.loai-phong.sua'); // Form sửa
        Route::post('/sua/{id}', [LoaiPhongController::class, 'postSua'])->name('admin.loai-phong.update'); // Xử lý sửa
        Route::get('/xoa/{id}', [LoaiPhongController::class, 'getXoa'])->name('admin.loai-phong.xoa'); // Xóa
    });

    // --- NHÓM 2: QUẢN LÝ PHÒNG ---
    // URL bắt đầu bằng: /admin/phong
    Route::prefix('phong')->group(function() {
        Route::get('/', [PhongController::class, 'getDanhSach'])->name('admin.phong');
        Route::get('/them', [PhongController::class, 'getThem'])->name('admin.phong.them');
        Route::post('/them', [PhongController::class, 'postThem'])->name('admin.phong.store');
        Route::get('/sua/{id}', [PhongController::class, 'getSua'])->name('admin.phong.sua');
        Route::post('/sua/{id}', [PhongController::class, 'postSua'])->name('admin.phong.update');
        Route::get('/xoa/{id}', [PhongController::class, 'getXoa'])->name('admin.phong.xoa');
    });

    // --- NHÓM 3: QUẢN LÝ ĐẶT PHÒNG ---
    // URL bắt đầu bằng: /admin/dat-phong
    Route::prefix('dat-phong')->group(function() {
        Route::get('/', [DatPhongController::class, 'getDanhSach'])->name('admin.dat-phong');
        Route::get('/sua/{id}', [DatPhongController::class, 'getSua'])->name('admin.dat-phong.sua');
        Route::post('/sua/{id}', [DatPhongController::class, 'postSua'])->name('admin.dat-phong.update');
        Route::get('/xoa/{id}', [DatPhongController::class, 'getXoa'])->name('admin.dat-phong.xoa');
    });

    // --- NHÓM 4: QUẢN LÝ KHUYẾN MÃI ---
    Route::prefix('khuyen-mai')->group(function() {
        Route::get('/', [KhuyenMaiController::class, 'getDanhSach'])->name('admin.khuyen-mai');
        Route::get('/them', [KhuyenMaiController::class, 'getThem'])->name('admin.khuyen-mai.them');
        Route::post('/them', [KhuyenMaiController::class, 'postThem'])->name('admin.khuyen-mai.store');
        Route::get('/sua/{id}', [KhuyenMaiController::class, 'getSua'])->name('admin.khuyen-mai.sua');
        Route::post('/sua/{id}', [KhuyenMaiController::class, 'postSua'])->name('admin.khuyen-mai.update');
        Route::get('/xoa/{id}', [KhuyenMaiController::class, 'getXoa'])->name('admin.khuyen-mai.xoa');
    });

    // --- NHÓM 5: QUẢN LÝ HÓA ĐƠN ---
    Route::prefix('hoa-don')->group(function() {
        Route::get('/', [HoaDonController::class, 'getDanhSach'])->name('admin.hoa-don');
        Route::get('/sua/{id}', [HoaDonController::class, 'getSua'])->name('admin.hoa-don.sua');
        Route::post('/sua/{id}', [HoaDonController::class, 'postSua'])->name('admin.hoa-don.update');
        Route::get('/xoa/{id}', [HoaDonController::class, 'getXoa'])->name('admin.hoa-don.xoa');
    });
    
    // --- NHÓM 6: QUẢN LÝ NGƯỜI DÙNG (USERS) ---
    // URL bắt đầu bằng: /admin/users (số nhiều cho chuẩn)
    Route::prefix('users')->group(function() {
        Route::get('/', [UserController::class, 'getDanhSach'])->name('admin.users'); // Danh sách
        Route::get('/them', [UserController::class, 'getThem'])->name('admin.user.them'); // Form thêm
        Route::post('/them', [UserController::class, 'postThem'])->name('admin.user.store'); // Xử lý thêm
        Route::get('/sua/{id}', [UserController::class, 'getSua'])->name('admin.user.sua'); // Form sửa
        Route::post('/sua/{id}', [UserController::class, 'postSua'])->name('admin.user.update'); // Xử lý sửa
        Route::get('/xoa/{id}', [UserController::class, 'getXoa'])->name('admin.user.xoa'); // Xóa
    });

});
</file>

<file path="resources/views/layouts/app.blade.php">
<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}" class="scroll-smooth">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="{{ csrf_token() }}">

    <title>@yield('title', 'Luxury Stay') - Hệ thống đặt phòng đẳng cấp</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS (CDN) - Vẫn giữ để dùng cho các trang con nếu cần -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- GỌI ASSETS QUA VITE -->
    <!-- Đã bao gồm config màu, css tùy chỉnh và js logic -->
    @vite([
        'resources/js/tailwind-config.js', 
        'resources/css/client.css', 
        'resources/js/client.js'
    ])

    <!-- Alpine.js -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body>

    @include('layouts.header')

    <!-- MAIN CONTENT -->
    <!-- Sử dụng class 'main-content' thay vì các class Tailwind trực tiếp -->
    <main class="main-content">
        
        <!-- Flash Messages (Thông báo) -->
        <!-- Code HTML giờ đây rất sạch sẽ nhờ sử dụng class từ client.css -->
        @if(session('success') || session('error'))
            <div class="flash-container" x-data="{ show: true }" x-show="show" x-init="setTimeout(() => show = false, 5000)">
                
                @if(session('success'))
                    <div class="flash-success">
                        <div class="flex items-center">
                            <i class="fa-solid fa-circle-check flash-icon-success"></i>
                            <p class="font-medium">{{ session('success') }}</p>
                        </div>
                        <button @click="show = false" class="btn-close-success"><i class="fa-solid fa-xmark"></i></button>
                    </div>
                @endif

                @if(session('error'))
                    <div class="flash-error">
                        <div class="flex items-center">
                            <i class="fa-solid fa-circle-exclamation flash-icon-error"></i>
                            <p class="font-medium">{{ session('error') }}</p>
                        </div>
                        <button @click="show = false" class="btn-close-error"><i class="fa-solid fa-xmark"></i></button>
                    </div>
                @endif

            </div>
        @endif

        @yield('content')
    </main>

    @include('layouts.footer')

    @stack('scripts')
</body>
</html>
</file>

</files>
</file>

<file path="resources/js/app.js">
import './bootstrap';
</file>

<file path="resources/js/bootstrap.js">
import 'bootstrap';

/**
 * We'll load the axios HTTP library which allows us to easily issue requests
 * to our Laravel back-end. This library automatically handles sending the
 * CSRF token as a header based on the value of the "XSRF" token cookie.
 */

import axios from 'axios';
window.axios = axios;

window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

/**
 * Echo exposes an expressive API for subscribing to channels and listening
 * for events that are broadcast by Laravel. Echo and event broadcasting
 * allows your team to easily build robust real-time web applications.
 */

// import Echo from 'laravel-echo';

// import Pusher from 'pusher-js';
// window.Pusher = Pusher;

// window.Echo = new Echo({
//     broadcaster: 'pusher',
//     key: import.meta.env.VITE_PUSHER_APP_KEY,
//     cluster: import.meta.env.VITE_PUSHER_APP_CLUSTER ?? 'mt1',
//     wsHost: import.meta.env.VITE_PUSHER_HOST ?? `ws-${import.meta.env.VITE_PUSHER_APP_CLUSTER}.pusher.com`,
//     wsPort: import.meta.env.VITE_PUSHER_PORT ?? 80,
//     wssPort: import.meta.env.VITE_PUSHER_PORT ?? 443,
//     forceTLS: (import.meta.env.VITE_PUSHER_SCHEME ?? 'https') === 'https',
//     enabledTransports: ['ws', 'wss'],
// });
</file>

<file path="resources/js/tailwind-config.js">
tailwind.config = {
    theme: {
        extend: {
            fontFamily: {
                sans: ['"Be Vietnam Pro"', 'sans-serif'], // Font cho nội dung
                serif: ['"Playfair Display"', 'serif'], // Font cho tiêu đề sang trọng
            },
            colors: {
                brand: {
                    50: '#f4f7f6',
                    100: '#e0f2fe',
                    500: '#0ea5e9',
                    600: '#0284c7',
                    800: '#1f2937',
                    900: '#111827', // Màu chủ đạo (Xanh đen - Dark Blue)
                    gold: '#c5a47e', // Màu điểm nhấn (Vàng Gold - Luxury)
                    dark: '#1a1a1a',
                }
            }
        }
    }
}
</file>

<file path="resources/sass/_variables.scss">
// Body
$body-bg: #f8fafc;

// Typography
$font-family-sans-serif: 'Nunito', sans-serif;
$font-size-base: 0.9rem;
$line-height-base: 1.6;
</file>

<file path="resources/sass/app.scss">
// Fonts
@import url('https://fonts.bunny.net/css?family=Nunito');

// Variables
@import 'variables';

// Bootstrap
@import 'bootstrap/scss/bootstrap';
</file>

<file path="resources/views/admin/dat_phong/hoa_don_chi_tiet.blade.php">
@extends('admin.layouts.dashboard')
@section('content')

<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-6"></div>
    
    <div class="toolbar mb-6 flex items-center justify-between">
        <h1 class="text-2xl font-bold text-gray-900">Hóa đơn #{{ $hoaDon->ma_hoa_don }}</h1>
        <a href="{{ route('admin.dat-phong') }}" class="text-sm text-gray-600 hover:text-gray-900 flex items-center">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    @if(session('success'))
        <div class="p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50" role="alert">{{ session('success') }}</div>
    @endif
    @if(session('error'))
        <div class="p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50" role="alert">{{ session('error') }}</div>
    @endif
    
    <div class="bg-white p-6 md:p-8 rounded-lg shadow-lg border border-gray-100">

        <div class="grid grid-cols-2 border-b pb-4 mb-4 text-sm">
            <div>
                <p class="font-semibold text-gray-800">Khách hàng: {{ $datPhong->user->name ?? 'N/A' }}</p>
                <p class="text-gray-600">Email: {{ $datPhong->user->email ?? 'N/A' }}</p>
                <p class="text-gray-600">SĐT: {{ $datPhong->user->phone ?? 'N/A' }}</p>
            </div>
            <div class="text-right">
                <p class="font-semibold text-gray-800">Mã đơn đặt: #{{ $datPhong->id }}</p>
                <p class="text-gray-600">Ngày lập: {{ \Carbon\Carbon::parse($hoaDon->ngay_lap)->format('d/m/Y H:i') }}</p>
            </div>
        </div>

        <h3 class="text-lg font-bold text-gray-800 mb-3">Chi tiết dịch vụ</h3>
        <table class="w-full text-sm mb-6 border-b border-gray-200">
            <thead>
                <tr class="text-xs font-semibold text-gray-500 uppercase bg-gray-50">
                    <th class="p-2 text-left">Phòng</th>
                    <th class="p-2 text-center">Số đêm</th>
                    <th class="p-2 text-right">Đơn giá/đêm</th>
                    <th class="p-2 text-right">Thành tiền (Gốc)</th>
                </tr>
            </thead>
            <tbody>
                @foreach($datPhong->chiTietDatPhongs as $ct)
                <tr class="border-b">
                    <td class="p-2">
                        {{ $ct->loaiPhong->ten_loai_phong ?? 'N/A' }}
                        <div class="text-xs text-gray-500">Phòng vật lý: **{{ $ct->phong->so_phong ?? 'Chưa gán' }}**</div>
                    </td>
                    <td class="p-2 text-center">{{ $datPhong->ngay_den->diffInDays($datPhong->ngay_di) }}</td>
                    <td class="p-2 text-right">{{ number_format($ct->don_gia, 0, ',', '.') }} đ</td>
                    <td class="p-2 text-right">{{ number_format($ct->thanh_tien, 0, ',', '.') }} đ</td>
                </tr>
                @endforeach
            </tbody>
        </table>

        <div class="flex justify-end">
            <div class="w-full md:w-1/2 space-y-2 text-sm">
                <div class="flex justify-between">
                    <span class="text-gray-600">Tổng tiền gốc:</span>
                    <span class="font-medium">{{ number_format($datPhong->chiTietDatPhongs->sum('thanh_tien'), 0, ',', '.') }} đ</span>
                </div>
                
                <div class="flex justify-between text-red-600 font-bold">
                    <span>Giảm giá (Mã: {{ $datPhong->promotion_code ?? '—' }}):</span>
                    <span>- {{ number_format($datPhong->discount_amount, 0, ',', '.') }} đ</span>
                </div>

                <div class="flex justify-between items-center border-t pt-2 font-bold text-lg">
                    <span class="text-gray-800">TỔNG CỘNG PHẢI THANH TOÁN:</span>
                    <span class="text-blue-600 text-2xl">{{ number_format($datPhong->tong_tien, 0, ',', '.') }} đ</span>
                </div>
            </div>
        </div>

        <div class="mt-8 pt-4 border-t border-dashed">
            <h3 class="text-lg font-bold text-gray-800 mb-3">Xử lý Thanh toán</h3>
            <form action="{{ route('admin.dat-phong.thanh-toan', $datPhong->id) }}" method="POST" class="space-y-4">
                @csrf
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Trạng thái Thanh toán</label>
                        <select name="trang_thai" class="w-full rounded-md border-gray-300 shadow-sm mt-1">
                            <option value="unpaid" {{ $hoaDon->trang_thai == 'unpaid' ? 'selected' : '' }}>Chưa thanh toán</option>
                            <option value="paid" {{ $hoaDon->trang_thai == 'paid' ? 'selected' : '' }}>Đã thanh toán</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Phương thức thanh toán</label>
                        <select name="phuong_thuc_thanh_toan" class="w-full rounded-md border-gray-300 shadow-sm mt-1">
                            <option value="cash" {{ $hoaDon->phuong_thuc_thanh_toan == 'cash' ? 'selected' : '' }}>Tiền mặt/Quầy</option>
                            <option value="banking" {{ $hoaDon->phuong_thuc_thanh_toan == 'banking' ? 'selected' : '' }}>Chuyển khoản</option>
                            <option value="online" {{ $hoaDon->phuong_thuc_thanh_toan == 'online' ? 'selected' : '' }}>Online (VNPay/Momo)</option>
                        </select>
                    </div>
                </div>

                <div class="text-right">
                    <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-medium">
                        <i class="fa fa-save"></i> Cập nhật Thanh toán
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/dat_phong/sua.blade.php">
@extends('admin.layouts.dashboard')

@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Sửa đặt phòng</h2>
            <a href="{{ route('admin.dat-phong') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.dat-phong.sua', ['id' => $datPhong->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="user_id">Chọn người dùng (người đặt)</label>
                    <select id="user_id" name="user_id" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                        <option value="">-- Chọn người dùng --</option>
                        @foreach($users as $user)
                            <option value="{{ $user->id }}" {{ old('user_id', $datPhong->user_id) == $user->id ? 'selected' : '' }}>{{ $user->name }} ({{ $user->email }})</option>
                        @endforeach
                    </select>
                    @error('user_id') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_den">Ngày đến</label>
                    <input type="date" id="ngay_den" name="ngay_den" value="{{ old('ngay_den', $datPhong->ngay_den) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('ngay_den') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_di">Ngày đi</label>
                    <input type="date" id="ngay_di" name="ngay_di" value="{{ old('ngay_di', $datPhong->ngay_di) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('ngay_di') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="tong_tien">Tổng tiền (VND)</label>
                    <input type="number" step="0.01" id="tong_tien" name="tong_tien" value="{{ old('tong_tien', $datPhong->tong_tien) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('tong_tien') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="payment_status">Thanh toán</label>
                    <select id="payment_status" name="payment_status" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                        <option value="unpaid" {{ old('payment_status', $datPhong->payment_status) == 'unpaid' ? 'selected' : '' }}>Chưa thanh toán</option>
                        <option value="paid" {{ old('payment_status', $datPhong->payment_status) == 'paid' ? 'selected' : '' }}>Đã thanh toán</option>
                    </select>
                    @error('payment_status') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="promotion_code">Mã khuyến mãi</label>
                    <input type="text" id="promotion_code" name="promotion_code" value="{{ old('promotion_code', $datPhong->promotion_code) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('promotion_code') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="discount_amount">Số tiền giảm (VND)</label>
                    <input type="number" step="0.01" id="discount_amount" name="discount_amount" value="{{ old('discount_amount', $datPhong->discount_amount) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('discount_amount') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ghi_chu">Ghi chú</label>
                    <textarea id="ghi_chu" name="ghi_chu" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">{{ old('ghi_chu', $datPhong->ghi_chu) }}</textarea>
                    @error('ghi_chu') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>
            </div>
            <div class="mt-6 flex items-center justify-end space-x-3">
                <a href="{{ route('admin.dat-phong') }}" class="text-sm text-gray-600 hover:underline">Hủy</a>
                <button type="submit" class="btn-primary">Lưu</button>
            </div>
        </form>
    </div>
</div>
@endsection
@extends('layouts.app')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Sửa đặt phòng</h2>
            <a href="{{ route('admin.dat-phong') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.dat-phong.sua', ['id' => $datPhong->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="user_id">Chọn người dùng (người đặt)</label>
                    <select id="user_id" name="user_id" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                        <option value="">-- Chọn người dùng --</option>
                        @foreach($users as $user)
                            <option value="{{ $user->id }}" {{ old('user_id', $datPhong->user_id) == $user->id ? 'selected' : '' }}>{{ $user->name }} ({{ $user->email }})</option>
                        @endforeach
                    </select>
                    @error('user_id') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_den">Ngày đến</label>
                    <input type="date" id="ngay_den" name="ngay_den" value="{{ old('ngay_den', $datPhong->ngay_den) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('ngay_den') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_di">Ngày đi</label>
                    <input type="date" id="ngay_di" name="ngay_di" value="{{ old('ngay_di', $datPhong->ngay_di) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('ngay_di') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="trang_thai">Trạng thái</label>
                    <input type="text" id="trang_thai" name="trang_thai" value="{{ old('trang_thai', $datPhong->trang_thai) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
                    @error('trang_thai') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>
            </div>
            <div class="mt-6 flex items-center justify-end space-x-3">
                <a href="{{ route('admin.dat-phong') }}" class="text-sm text-gray-600 hover:underline">Hủy</a>
                <button type="submit" class="btn-primary">Lưu</button>
            </div>
        </form>
    </div>
</div>
@endsection
@extends('layouts.app')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Sửa khuyến mãi</h2>
            <a href="{{ route('khuyen-mai') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('khuyen-mai.sua', ['id' => $khuyenMai->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ten_khuyen_mai">Tên khuyến mãi</label>
                    <input type="text" id="ten_khuyen_mai" name="ten_khuyen_mai" value="{{ old('ten_khuyen_mai', $khuyenMai->ten_khuyen_mai) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ten_khuyen_mai') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ma_khuyen_mai">Mã khuyến mãi</label>
                    <input type="text" id="ma_khuyen_mai" name="ma_khuyen_mai" value="{{ old('ma_khuyen_mai', $khuyenMai->ma_khuyen_mai) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ma_khuyen_mai') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="chiet_khau_phan_tram">Chiết khấu (%)</label>
                    <input type="number" step="0.01" id="chiet_khau_phan_tram" name="chiet_khau_phan_tram" value="{{ old('chiet_khau_phan_tram', $khuyenMai->chiet_khau_phan_tram) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('chiet_khau_phan_tram') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="so_tien_giam_gia">Số tiền giảm (VND)</label>
                    <input type="number" step="0.01" id="so_tien_giam_gia" name="so_tien_giam_gia" value="{{ old('so_tien_giam_gia', $khuyenMai->so_tien_giam_gia) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('so_tien_giam_gia') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_bat_dau">Ngày bắt đầu</label>
                    <input type="date" id="ngay_bat_dau" name="ngay_bat_dau" value="{{ old('ngay_bat_dau', $khuyenMai->ngay_bat_dau) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ngay_bat_dau') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_ket_thuc">Ngày kết thúc</label>
                    <input type="date" id="ngay_ket_thuc" name="ngay_ket_thuc" value="{{ old('ngay_ket_thuc', $khuyenMai->ngay_ket_thuc) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ngay_ket_thuc') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>
            </div>

            <div class="mt-6 flex items-center justify-end space-x-3">
                <a href="{{ route('khuyen-mai') }}" class="text-sm text-gray-600 hover:underline">Hủy</a>
                <button type="submit" class="btn-primary">Lưu</button>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/khuyen_mai/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('content')

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-6"></div>
    <div class="toolbar mb-6">
        <h1 class="text-2xl font-semibold text-gray-900">Khuyến mãi</h1>
        <a href="{{ route('admin.khuyen-mai.them') }}" class="btn-primary inline-flex items-center gap-2 text-sm font-semibold">
            <i class="fa fa-plus"></i> Thêm khuyến mãi
        </a>
    </div>

    <div class="card-common">
        <div class="overflow-x-auto">
            @if($khuyenMais->isEmpty())
                <div class="p-6 text-center text-gray-500">Chưa có khuyến mãi nào. Hãy thêm mới.</div>
            @else
            <table class="table-common min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tên khuyến mãi</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mã khuyến mãi</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Chiết khấu phần trăm</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Số tiền giảm giá</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày bắt đầu</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày kết thúc</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach ($khuyenMais as $km)
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $loop->iteration }}</td>
                        <td class="px-6 py-4 text-sm font-medium text-gray-900">{{ $km->ten_khuyen_mai }}</td>
                        <td class="px-6 py-4 text-sm font-medium text-gray-900">{{ $km->ma_khuyen_mai }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $km->chiet_khau_phan_tram }}%</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ number_format($km->so_tien_giam_gia ?? 0, 0, ',', '.') }} VND</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $km->ngay_bat_dau }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $km->ngay_ket_thuc }}</td>
                        <td class="px-6 py-4 text-sm text-center">
                            <a href="{{ route('admin.khuyen-mai.sua', ['id' => $km->id]) }}" class="text-blue-600 hover:text-blue-800 mr-3" title="Sửa"><i class="fa fa-edit"></i></a>
                            <a href="{{ route('admin.khuyen-mai.xoa', ['id' => $km->id]) }}" onclick="return confirm('Bạn có muốn xóa phòng {{ $km->ten_khuyen_mai }} không?')" class="text-red-600 hover:text-red-800" title="Xóa"><i class="fa fa-trash"></i></a>
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
            @endif
        </div>
    </div>
</div>

@endsection
</file>

<file path="resources/views/admin/khuyen_mai/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Sửa khuyến mãi</h2>
            <a href="{{ route('admin.khuyen-mai') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.khuyen-mai.sua', ['id' => $khuyenMai->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ten_khuyen_mai">Tên khuyến mãi</label>
                    <input type="text" id="ten_khuyen_mai" name="ten_khuyen_mai" value="{{ old('ten_khuyen_mai', $khuyenMai->ten_khuyen_mai) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ten_khuyen_mai') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ma_khuyen_mai">Mã khuyến mãi</label>
                    <input type="text" id="ma_khuyen_mai" name="ma_khuyen_mai" value="{{ old('ma_khuyen_mai', $khuyenMai->ma_khuyen_mai) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ma_khuyen_mai') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="chiet_khau_phan_tram">Chiết khấu (%)</label>
                    <input type="number" step="0.01" id="chiet_khau_phan_tram" name="chiet_khau_phan_tram" value="{{ old('chiet_khau_phan_tram', $khuyenMai->chiet_khau_phan_tram) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('chiet_khau_phan_tram') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="so_tien_giam_gia">Số tiền giảm (VND)</label>
                    <input type="number" step="0.01" id="so_tien_giam_gia" name="so_tien_giam_gia" value="{{ old('so_tien_giam_gia', $khuyenMai->so_tien_giam_gia) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('so_tien_giam_gia') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_bat_dau">Ngày bắt đầu</label>
                    <input type="date" id="ngay_bat_dau" name="ngay_bat_dau" value="{{ old('ngay_bat_dau', $khuyenMai->ngay_bat_dau) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ngay_bat_dau') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="ngay_ket_thuc">Ngày kết thúc</label>
                    <input type="date" id="ngay_ket_thuc" name="ngay_ket_thuc" value="{{ old('ngay_ket_thuc', $khuyenMai->ngay_ket_thuc) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('ngay_ket_thuc') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>
            </div>

            <div class="mt-6 flex items-center justify-end space-x-3">
                <a href="{{ route('admin.khuyen-mai') }}" class="text-sm text-gray-600 hover:underline">Hủy</a>
                <button type="submit" class="btn-primary">Lưu</button>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/khuyen_mai/them.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
	<div class="card-common p-6">
		<div class="toolbar mb-4">
			<h2 class="text-lg font-semibold">Thêm khuyến mãi</h2>
			<a href="{{ route('admin.khuyen-mai') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
		</div>

		<form action="{{ route('admin.khuyen-mai.store') }}" method="POST">
			@csrf
			<div class="grid grid-cols-1 gap-4">
				<div>
					<label class="block text-sm font-medium text-gray-700" for="ten_khuyen_mai">Tên khuyến mãi</label>
					<input type="text" id="ten_khuyen_mai" name="ten_khuyen_mai" value="{{ old('ten_khuyen_mai') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required />
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700" for="ma_khuyen_mai">Mã khuyến mãi</label>
					<input type="text" id="ma_khuyen_mai" name="ma_khuyen_mai" value="{{ old('ma_khuyen_mai') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required />
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700" for="so_tien_giam_gia">Số tiền giảm (VND)</label>
					<input type="number" step="0.01" id="so_tien_giam_gia" name="so_tien_giam_gia" value="{{ old('so_tien_giam_gia') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" />
				</div>

				<div class="flex items-center justify-end pt-2">
					<button type="submit" class="btn-primary inline-flex items-center gap-2">
						<i class="fa fa-save"></i> Thêm
					</button>
				</div>
			</div>
		</form>
	</div>
</div>
@endsection
</file>

<file path="resources/views/admin/layouts/dashboard.blade.php">
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@yield('title', 'Admin Dashboard') - Luxury Stay</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS + Alpine.js -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['"Be Vietnam Pro"', 'sans-serif'] },
                    colors: {
                        brand: {
                            900: '#111827', // Màu nền sidebar (Đen xanh)
                            800: '#1f2937',
                            gold: '#c5a47e', // Màu điểm nhấn
                        }
                    }
                }
            }
        }
    </script>
    <style>[x-cloak] { display: none !important; }</style>
</head>
<body class="bg-gray-100 font-sans antialiased text-gray-800" x-data="{ sidebarOpen: false }">

    @include('admin.layouts.sidebar')

        <!-- B. MAIN CONTENT -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Top Header -->
            <header class="bg-white shadow-sm border-b border-gray-200 h-16 flex items-center justify-between px-6 lg:px-8">
                <!-- Mobile Toggle -->
                <button @click="sidebarOpen = !sidebarOpen" class="lg:hidden text-gray-500 focus:outline-none">
                    <i class="fa-solid fa-bars text-2xl"></i>
                </button>

                <!-- Page Title (Breadcrumb simplified) -->
                <h2 class="text-xl font-semibold text-gray-800">@yield('header', 'Dashboard')</h2>

                <!-- Right Actions -->
                <div class="flex items-center space-x-4">
                    <button class="relative text-gray-500 hover:text-brand-900 transition">
                        <i class="fa-regular fa-bell text-xl"></i>
                        <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"></span>
                    </button>
                    <a href="{{ route('home') }}" class="text-sm text-gray-600 hover:text-brand-gold font-medium">
                        Về trang chủ <i class="fa-solid fa-arrow-right ml-1"></i>
                    </a>
                </div>
            </header>

            <!-- Content Body -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6 lg:p-8">
                <!-- Flash Messages -->
                @if(session('success'))
                    <div class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 rounded shadow-sm flex justify-between items-center">
                        <div class="flex items-center"><i class="fa-solid fa-circle-check mr-2"></i> {{ session('success') }}</div>
                    </div>
                @endif

                @yield('content')
            </main>
        </div>
        
        <!-- Overlay for mobile sidebar -->
        <div x-show="sidebarOpen" @click="sidebarOpen = false" x-transition.opacity class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden"></div>
    </div>
</body>
</html>
</file>

<file path="resources/views/admin/phong/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('content')

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-6"></div>
    <div class="toolbar mb-6">
        <h1 class="text-2xl font-semibold text-gray-900">Các phòng</h1>
        <a href="{{ route('admin.phong.them') }}" class="btn-primary inline-flex items-center gap-2 text-sm font-semibold">
            <i class="fa fa-plus"></i> Thêm phòng
        </a>
    </div>

    <div class="card-common">
        <div class="overflow-x-auto">
            @if($phongs->isEmpty())
                <div class="p-6 text-center text-gray-500">Chưa có phòng nào. Hãy thêm mới.</div>
            @else
            <table class="table-common min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Số phòng</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tình trạng</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach ($phongs as $phong)
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $loop->iteration }}</td>
                        <td class="px-6 py-4 text-sm font-medium text-gray-900">{{ $phong->so_phong }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">
                            @php $meta = \App\Models\Phong::tinh_trang_options[$phong->tinh_trang] ?? null; @endphp
                            @if($meta)
                                <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs {{ $meta['class'] }}">
                                    <i class="fa {{ $meta['icon'] }}"></i> {{ $meta['label'] }}
                                </span>
                            @else
                                <span class="text-muted">{{ $phong->tinh_trang }}</span>
                            @endif
                        </td>
                        <td class="px-6 py-4 text-sm text-center">
                            <a href="{{ route('admin.phong.sua', ['id' => $phong->id]) }}" class="text-blue-600 hover:text-blue-800 mr-3" title="Sửa"><i class="fa fa-edit"></i></a>
                            <a href="{{ route('admin.phong.xoa', ['id' => $phong->id]) }}" onclick="return confirm('Bạn có muốn xóa phòng {{ $phong->so_phong }} không?')" class="text-red-600 hover:text-red-800" title="Xóa"><i class="fa fa-trash"></i></a>
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
            @endif
        </div>
    </div>
</div>

@endsection
</file>

<file path="resources/views/admin/phong/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4">
            <h2 class="text-lg font-semibold">Sửa phòng</h2>
            <a href="{{ route('admin.phong') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.phong.sua', ['id' => $phong->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="so_phong">Số phòng</label>
                    <input type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" id="so_phong" name="so_phong" value="{{ $phong->so_phong }}" required />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="loai_phong_id">Loại phòng</label>
                    <select class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" id="loai_phong_id" name="loai_phong_id" required>
                        @foreach($loaiPhongs as $lp)
                            <option value="{{ $lp->id }}" {{ $phong->loai_phong_id == $lp->id ? 'selected' : '' }}>{{ $lp->ten_loai_phong }}</option>
                        @endforeach
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="tinh_trang">Tình trạng</label>
                    <select class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" id="tinh_trang" name="tinh_trang">
                        @foreach(\App\Models\Phong::tinh_trang_options as $key => $meta)
                            <option value="{{ $key }}" {{ $phong->tinh_trang == $key ? 'selected' : '' }}>{{ $meta['label'] }}</option>
                        @endforeach
                    </select>
                </div>

                <div class="flex items-center justify-end pt-2">
                    <button type="submit" class="btn-primary inline-flex items-center gap-2">
                        <i class="fa fa-save"></i> Lưu
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/phong/them.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
	<div class="card-common p-6">
		<div class="toolbar mb-4">
			<h2 class="text-lg font-semibold">Thêm phòng</h2>
			<a href="{{ route('admin.phong') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
		</div>

		<form action="{{ route('admin.phong.store') }}" method="POST">
			@csrf
			<div class="grid grid-cols-1 gap-4">
				<div>
					<label class="block text-sm font-medium text-gray-700" for="so_phong">Số phòng</label>
					<input type="text" id="so_phong" name="so_phong" value="{{ old('so_phong') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required />
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700" for="loai_phong_id">Loại phòng</label>
					<select id="loai_phong_id" name="loai_phong_id" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
						<option value="">-- Chọn loại phòng --</option>
						@foreach(\App\Models\LoaiPhong::all() as $lp)
							<option value="{{ $lp->id }}">{{ $lp->ten_loai_phong }}</option>
						@endforeach
					</select>
				</div>

				<div class="flex items-center justify-end pt-2">
					<button type="submit" class="btn-primary inline-flex items-center gap-2">
						<i class="fa fa-save"></i> Thêm
					</button>
				</div>
			</div>
		</form>
	</div>
</div>
@endsection
</file>

<file path="resources/views/auth/passwords/confirm.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Confirm Password') }}</div>

                <div class="card-body">
                    {{ __('Please confirm your password before continuing.') }}

                    <form method="POST" action="{{ route('password.confirm') }}">
                        @csrf

                        <div class="row mb-3">
                            <label for="password" class="col-md-4 col-form-label text-md-end">{{ __('Password') }}</label>

                            <div class="col-md-6">
                                <input id="password" type="password" class="form-control @error('password') is-invalid @enderror" name="password" required autocomplete="current-password">

                                @error('password')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-0">
                            <div class="col-md-8 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    {{ __('Confirm Password') }}
                                </button>

                                @if (Route::has('password.request'))
                                    <a class="btn btn-link" href="{{ route('password.request') }}">
                                        {{ __('Forgot Your Password?') }}
                                    </a>
                                @endif
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/passwords/email.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Reset Password') }}</div>

                <div class="card-body">
                    @if (session('status'))
                        <div class="alert alert-success" role="alert">
                            {{ session('status') }}
                        </div>
                    @endif

                    <form method="POST" action="{{ route('password.email') }}">
                        @csrf

                        <div class="row mb-3">
                            <label for="email" class="col-md-4 col-form-label text-md-end">{{ __('Email Address') }}</label>

                            <div class="col-md-6">
                                <input id="email" type="email" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email') }}" required autocomplete="email" autofocus>

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-0">
                            <div class="col-md-6 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    {{ __('Send Password Reset Link') }}
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/passwords/reset.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Reset Password') }}</div>

                <div class="card-body">
                    <form method="POST" action="{{ route('password.update') }}">
                        @csrf

                        <input type="hidden" name="token" value="{{ $token }}">

                        <div class="row mb-3">
                            <label for="email" class="col-md-4 col-form-label text-md-end">{{ __('Email Address') }}</label>

                            <div class="col-md-6">
                                <input id="email" type="email" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ $email ?? old('email') }}" required autocomplete="email" autofocus>

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label for="password" class="col-md-4 col-form-label text-md-end">{{ __('Password') }}</label>

                            <div class="col-md-6">
                                <input id="password" type="password" class="form-control @error('password') is-invalid @enderror" name="password" required autocomplete="new-password">

                                @error('password')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label for="password-confirm" class="col-md-4 col-form-label text-md-end">{{ __('Confirm Password') }}</label>

                            <div class="col-md-6">
                                <input id="password-confirm" type="password" class="form-control" name="password_confirmation" required autocomplete="new-password">
                            </div>
                        </div>

                        <div class="row mb-0">
                            <div class="col-md-6 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    {{ __('Reset Password') }}
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/register.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Register') }}</div>

                <div class="card-body">
                    <form method="POST" action="{{ route('register') }}">
                        @csrf

                        <div class="row mb-3">
                            <label for="name" class="col-md-4 col-form-label text-md-end">{{ __('Name') }}</label>

                            <div class="col-md-6">
                                <input id="name" type="text" class="form-control @error('name') is-invalid @enderror" name="name" value="{{ old('name') }}" required autocomplete="name" autofocus>

                                @error('name')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label for="email" class="col-md-4 col-form-label text-md-end">{{ __('Email Address') }}</label>

                            <div class="col-md-6">
                                <input id="email" type="email" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email') }}" required autocomplete="email">

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label for="password" class="col-md-4 col-form-label text-md-end">{{ __('Password') }}</label>

                            <div class="col-md-6">
                                <input id="password" type="password" class="form-control @error('password') is-invalid @enderror" name="password" required autocomplete="new-password">

                                @error('password')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label for="password-confirm" class="col-md-4 col-form-label text-md-end">{{ __('Confirm Password') }}</label>

                            <div class="col-md-6">
                                <input id="password-confirm" type="password" class="form-control" name="password_confirmation" required autocomplete="new-password">
                            </div>
                        </div>

                        <div class="row mb-0">
                            <div class="col-md-6 offset-md-4">
                                <button type="submit" class="btn btn-primary">
                                    {{ __('Register') }}
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/verify.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Verify Your Email Address') }}</div>

                <div class="card-body">
                    @if (session('resent'))
                        <div class="alert alert-success" role="alert">
                            {{ __('A fresh verification link has been sent to your email address.') }}
                        </div>
                    @endif

                    {{ __('Before proceeding, please check your email for a verification link.') }}
                    {{ __('If you did not receive the email') }},
                    <form class="d-inline" method="POST" action="{{ route('verification.resend') }}">
                        @csrf
                        <button type="submit" class="btn btn-link p-0 m-0 align-baseline">{{ __('click here to request another') }}</button>.
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/booking/success.blade.php">
@extends('layouts.app')
@section('title', 'Đặt phòng thành công')

@section('content')
<div class="min-h-[80vh] flex items-center justify-center bg-gray-50 py-12 px-4">
    <div class="max-w-md w-full bg-white p-8 md:p-12 rounded-3xl shadow-2xl text-center border-t-8 border-brand-gold relative overflow-hidden animate-fade-in-up">
        
        <!-- Background Pattern (Họa tiết chìm) -->
        <div class="absolute top-0 left-0 w-full h-full opacity-[0.03] pointer-events-none" style="background-image: radial-gradient(#111827 1px, transparent 1px); background-size: 20px 20px;"></div>

        <!-- Icon Thành công -->
        <div class="relative mx-auto flex items-center justify-center h-24 w-24 rounded-full bg-green-50 mb-8 animate-bounce-slow">
            <i class="fa-solid fa-check text-5xl text-green-500"></i>
            <!-- Hiệu ứng sóng lan tỏa -->
            <div class="absolute inset-0 rounded-full border-4 border-green-100 opacity-50 animate-ping"></div>
        </div>
        
        <h2 class="text-3xl font-serif font-bold text-brand-900 mb-2">Tuyệt vời!</h2>
        <p class="text-gray-600 mb-8">Yêu cầu đặt phòng của bạn đã được gửi thành công.</p>
        
        <!-- Khu vực hiển thị Mã đơn -->
        <div class="bg-brand-50 border border-brand-gold/20 py-5 px-6 rounded-xl mb-8 relative group cursor-pointer transition hover:shadow-md">
            <p class="text-xs text-gray-500 uppercase tracking-wider mb-2 font-bold">Mã đơn đặt phòng của bạn</p>
            <p class="font-mono text-3xl font-bold text-brand-900 tracking-widest selection:bg-brand-gold selection:text-white">
                #BK-{{ session('booking_id') ?? 'NEW' }}
            </p>
            <!-- Icon trang trí -->
            <div class="absolute -top-3 -right-3 text-brand-gold opacity-20 group-hover:opacity-40 transition-opacity">
                <i class="fa-solid fa-ticket text-6xl transform rotate-12"></i>
            </div>
        </div>

        <p class="text-sm text-gray-500 mb-8 leading-relaxed px-4">
            Chúng tôi sẽ liên hệ với bạn qua số điện thoại <strong class="text-gray-900">{{ Auth::user()->phone ?? '...' }}</strong> trong vòng 30 phút để xác nhận lại thông tin.
        </p>

        <!-- Các nút điều hướng -->
        <div class="space-y-3">
            @if (Route::has('bookings.history'))
            <a href="{{ route('bookings.history') }}" class="block w-full py-3.5 px-4 border border-transparent text-sm font-bold rounded-xl text-white bg-brand-900 hover:bg-brand-800 transition shadow-lg shadow-brand-900/20 transform hover:-translate-y-0.5">
                Xem chi tiết đơn hàng
            </a>
            @endif
            
            <a href="{{ route('trang_chu') }}" class="block w-full py-3.5 px-4 border border-gray-200 text-sm font-bold rounded-xl text-gray-600 bg-white hover:bg-gray-50 transition hover:border-gray-300">
                Về trang chủ
            </a>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/profile/edit.blade.php">
@extends('layouts.app')
@section('title', 'Hồ sơ cá nhân')

@section('content')
<div class="bg-gray-50 min-h-screen py-12">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Breadcrumb -->
        <nav class="flex mb-8 text-sm text-gray-500">
            <a href="{{ route('trang_chu') }}" class="hover:text-brand-gold transition">Trang chủ</a>
            <span class="mx-2 text-gray-300">/</span>
            <span class="text-brand-900 font-medium">Hồ sơ cá nhân</span>
        </nav>

        <!-- Thông báo đặc biệt (nếu bị redirect từ trang đặt phòng về) -->
        @if(session('error'))
            <div class="mb-8 bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg shadow-sm animate-pulse">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fa-solid fa-circle-exclamation text-red-500 text-xl"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm text-red-700 font-bold">
                            {{ session('error') }}
                        </p>
                        <p class="text-xs text-red-600 mt-1">Vui lòng hoàn thiện thông tin dưới đây để tiếp tục.</p>
                    </div>
                </div>
            </div>
        @endif

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            
            <!-- CỘT TRÁI: Sidebar Cá nhân -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden sticky top-24">
                    <!-- Header Sidebar -->
                    <div class="bg-brand-900 p-6 text-center">
                        <div class="w-20 h-20 mx-auto bg-brand-gold rounded-full flex items-center justify-center text-white text-3xl font-serif font-bold shadow-lg border-4 border-white/10">
                            {{ substr($user->name, 0, 1) }}
                        </div>
                        <h2 class="mt-4 text-white font-bold truncate">{{ $user->name }}</h2>
                        <p class="text-brand-gold text-xs uppercase tracking-wider mt-1">Thành viên thân thiết</p>
                    </div>
                    
                    <!-- Menu Links -->
                    <div class="p-2">
                        <a href="{{ route('profile.edit') }}" class="flex items-center px-4 py-3 text-sm font-medium text-brand-900 bg-brand-50 rounded-lg mb-1">
                            <i class="fa-solid fa-user-pen w-6 text-brand-gold"></i>
                            Thông tin cá nhân
                        </a>
                        <a href="{{ route('bookings.history') }}" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-brand-900 rounded-lg transition">
                            <i class="fa-solid fa-clock-rotate-left w-6 text-gray-400"></i>
                            Lịch sử đặt phòng
                        </a>
                        
                        <form method="POST" action="{{ route('logout') }}" class="mt-2 border-t border-gray-100 pt-2">
                            @csrf
                            <button type="submit" class="w-full flex items-center px-4 py-3 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition">
                                <i class="fa-solid fa-right-from-bracket w-6"></i>
                                Đăng xuất
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- CỘT PHẢI: Form Cập nhật -->
            <div class="lg:col-span-3">
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-10">
                    <div class="border-b border-gray-100 pb-6 mb-6 flex justify-between items-center">
                        <div>
                            <h1 class="font-serif text-2xl font-bold text-gray-900">Cập nhật thông tin</h1>
                            <p class="text-sm text-gray-500 mt-1">Quản lý thông tin hồ sơ của bạn để bảo mật và đặt phòng nhanh hơn.</p>
                        </div>
                        <div class="hidden md:block text-brand-gold text-4xl opacity-20">
                            <i class="fa-solid fa-address-card"></i>
                        </div>
                    </div>

                    <form method="POST" action="{{ route('profile.update') }}">
                        @csrf
                        @method('PATCH')

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <!-- 1. Họ và tên -->
                            <div class="md:col-span-2">
                                <label for="name" class="block text-xs font-bold text-gray-500 uppercase mb-2">Họ và tên <span class="text-red-500">*</span></label>
                                <div class="relative">
                                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400">
                                        <i class="fa-regular fa-user"></i>
                                    </span>
                                    <input type="text" name="name" id="name" value="{{ old('name', $user->name) }}" class="pl-10 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-brand-gold focus:border-brand-gold transition" required>
                                </div>
                                @error('name') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                            </div>

                            <!-- 2. Email (Read-only hoặc Editable tùy bạn, thường nên cho sửa nhưng phải check unique) -->
                            <div class="md:col-span-2">
                                <label for="email" class="block text-xs font-bold text-gray-500 uppercase mb-2">Địa chỉ Email <span class="text-red-500">*</span></label>
                                <div class="relative">
                                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400">
                                        <i class="fa-regular fa-envelope"></i>
                                    </span>
                                    <input type="email" name="email" id="email" value="{{ old('email', $user->email) }}" class="pl-10 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-brand-gold focus:border-brand-gold transition" required>
                                </div>
                                @error('email') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                            </div>

                            <!-- 3. Số điện thoại (QUAN TRỌNG) -->
                            <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 md:col-span-1">
                                <label for="phone" class="block text-xs font-bold text-blue-800 uppercase mb-2">Số điện thoại <span class="text-red-500">*</span></label>
                                <div class="relative">
                                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-blue-500">
                                        <i class="fa-solid fa-phone"></i>
                                    </span>
                                    <input type="text" name="phone" id="phone" value="{{ old('phone', $user->phone) }}" class="pl-10 block w-full border-blue-200 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white" placeholder="0901234567" required>
                                </div>
                                <p class="text-[10px] text-blue-600 mt-2">Dùng để liên hệ xác nhận đặt phòng.</p>
                                @error('phone') <p class="text-red-500 text-xs mt-1 font-bold">{{ $message }}</p> @enderror
                            </div>

                            <!-- 4. CCCD (QUAN TRỌNG) -->
                            <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 md:col-span-1">
                                <label for="cccd" class="block text-xs font-bold text-blue-800 uppercase mb-2">CCCD / CMND <span class="text-red-500">*</span></label>
                                <div class="relative">
                                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-blue-500">
                                        <i class="fa-solid fa-id-card"></i>
                                    </span>
                                    <input type="text" name="cccd" id="cccd" value="{{ old('cccd', $user->cccd) }}" class="pl-10 block w-full border-blue-200 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white" placeholder="12 số căn cước" required>
                                </div>
                                <p class="text-[10px] text-blue-600 mt-2">Bắt buộc để làm thủ tục lưu trú.</p>
                                @error('cccd') <p class="text-red-500 text-xs mt-1 font-bold">{{ $message }}</p> @enderror
                            </div>
                        </div>

                        <!-- 5. Mật khẩu (Optional - Thường tách ra trang riêng hoặc accordion, ở đây để đơn giản ta bỏ qua đổi pass, chỉ tập trung thông tin cơ bản) -->
                        
                        <div class="flex items-center justify-end pt-6 border-t border-gray-100">
                            <button type="submit" class="bg-brand-900 text-white font-bold py-3 px-8 rounded-lg hover:bg-brand-800 transition duration-300 shadow-lg transform hover:-translate-y-0.5 flex items-center gap-2">
                                <i class="fa-solid fa-save"></i>
                                <span>Lưu thay đổi</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/layouts/footer.blade.php">
<footer class="footer-wrapper">
    <div class="footer-container">
        <div class="footer-grid">
            
            <!-- 1. Brand Info -->
            <div class="space-y-4">
                <div class="footer-brand">
                     <span class="footer-logo-icon">
                        <i class="fa-solid fa-crown text-sm"></i>
                    </span>
                    <span class="footer-logo-text">Luxury<span class="text-brand-gold">Stay</span></span>
                </div>
                <p class="footer-desc">
                    Nơi giao thoa giữa vẻ đẹp kiến trúc cổ điển và tiện nghi hiện đại. Trải nghiệm kỳ nghỉ khó quên với dịch vụ 5 sao chuẩn quốc tế.
                </p>
                <div class="flex space-x-4 pt-2">
                    <a href="#" class="footer-social-link"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="footer-social-link"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#" class="footer-social-link"><i class="fa-brands fa-tiktok"></i></a>
                </div>
            </div>

            <!-- 2. Links (Khám phá) -->
            <div>
                <h3 class="footer-heading">Khám phá</h3>
                <ul class="footer-list">
                    <li><a href="#" class="footer-link"><i class="fa-solid fa-angle-right"></i> Về chúng tôi</a></li>
                    <li><a href="{{ route('khuyen-mai') }}" class="footer-link"><i class="fa-solid fa-angle-right"></i> Ưu đãi đặc biệt</a></li>
                    <li><a href="#" class="footer-link"><i class="fa-solid fa-angle-right"></i> Thư viện ảnh</a></li>
                </ul>
            </div>

            <!-- 3. Contact (Liên hệ) -->
            <div>
                <h3 class="footer-heading">Liên hệ</h3>
                <!-- Sử dụng class footer-list để căn chỉnh khoảng cách -->
                <ul class="footer-list">
                    <li class="footer-contact-item">
                        <i class="fa-solid fa-location-dot footer-contact-icon"></i>
                        <span>Long Xuyên, An Giang</span>
                    </li>
                    <li class="footer-contact-item">
                        <i class="fa-solid fa-phone footer-contact-icon"></i>
                        <span class="font-semibold text-white">+84 792008096</span>
                    </li>
                    <li class="footer-contact-item">
                        <i class="fa-solid fa-envelope footer-contact-icon"></i>
                        <span>booking@luxurystay.com</span>
                    </li>
                </ul>
            </div>

            <!-- 4. Newsletter (Bản tin) -->
            <div>
                <h3 class="footer-heading">Bản tin</h3>
                <p class="footer-desc mb-4">Đăng ký để nhận mã khuyến mãi giảm giá 10% cho lần đặt đầu tiên.</p>
                <form class="flex flex-col gap-2">
                    <input type="email" placeholder="Email của bạn..." class="footer-input">
                    <button type="submit" class="footer-btn-submit">Đăng ký</button>
                </form>
            </div>
        </div>

        <!-- Bottom Copyright -->
        <div class="footer-bottom">
            <p>&copy; 2025 Luxury Stay Hotel. All rights reserved.</p>
            <div class="flex gap-6 mt-4 md:mt-0">
                <a href="#" class="hover:text-white transition">Chính sách bảo mật</a>
                <a href="#" class="hover:text-white transition">Điều khoản sử dụng</a>
            </div>
        </div>
    </div>
</footer>
</file>

<file path="routes/console.php">
<?php

use Illuminate\Foundation\Inspiring;
use Illuminate\Support\Facades\Artisan;

Artisan::command('inspire', function () {
    $this->comment(Inspiring::quote());
})->purpose('Display an inspiring quote');
</file>

<file path="storage/app/.gitignore">
*
!private/
!public/
!.gitignore
</file>

<file path="storage/app/private/.gitignore">
*
!.gitignore
</file>

<file path="storage/app/public/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/.gitignore">
compiled.php
config.php
down
events.scanned.php
maintenance.php
routes.php
routes.scanned.php
schedule-*
services.json
</file>

<file path="storage/framework/cache/.gitignore">
*
!data/
!.gitignore
</file>

<file path="storage/framework/cache/data/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/sessions/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/testing/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/views/.gitignore">
*
!.gitignore
</file>

<file path="storage/logs/.gitignore">
*
!.gitignore
</file>

<file path="tests/Feature/ExampleTest.php">
<?php

namespace Tests\Feature;

// use Illuminate\Foundation\Testing\RefreshDatabase;
use Tests\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_the_application_returns_a_successful_response(): void
    {
        $response = $this->get('/');

        $response->assertStatus(200);
    }
}
</file>

<file path="tests/TestCase.php">
<?php

namespace Tests;

use Illuminate\Foundation\Testing\TestCase as BaseTestCase;

abstract class TestCase extends BaseTestCase
{
    //
}
</file>

<file path="tests/Unit/ExampleTest.php">
<?php

namespace Tests\Unit;

use PHPUnit\Framework\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_that_true_is_true(): void
    {
        $this->assertTrue(true);
    }
}
</file>

<file path="app/Http/Controllers/Admin/DatPhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\DatPhong;
use App\Models\User;
use App\Models\Phong; // <-- Import Model Phong
use App\Models\HoaDon; // <-- ĐÃ THÊM LOGIC CHO HÓA ĐƠN
use App\Models\ChiTietDatPhong; // <-- Đã có
use Illuminate\Http\Request;
use Illuminate\Support\Facades\DB; // <-- Import DB

class DatPhongController extends Controller
{
    /**
     * Hiển thị danh sách các đơn đặt phòng (Sử dụng Eager Loading).
     */
    public function getDanhSach()
    {
        $datPhongs = DatPhong::with(['user', 'chiTietDatPhongs.loaiPhong', 'chiTietDatPhongs.phong'])
                             ->orderBy('created_at', 'desc')
                             ->get();
        
        return view('admin.dat_phong.danh_sach', compact('datPhongs'));
    }

    // Các hàm getThem, postThem, getSua, postSua giữ nguyên...
    public function getThem()
    {
        $users = User::all();
        return view('admin.dat_phong.them', compact('users'));
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'user_id' => 'required|exists:users,id',
            'ngay_den' => 'required|date',
            'ngay_di' => 'required|date|after_or_equal:ngay_den',
            'trang_thai' => 'nullable|string|max:50',
        ]);

        $orm = new DatPhong();
        $orm->user_id = $data['user_id'];
        $orm->ngay_den = $data['ngay_den'];
        $orm->ngay_di = $data['ngay_di'];
        $orm->trang_thai = $data['trang_thai'] ?? 'pending'; 
        $orm->save();
        
        return redirect()->route('admin.dat-phong')->with('success', 'Thêm đơn đặt phòng thành công!');
    }
    
    public function getSua($id)
    {
        $datPhong = DatPhong::findOrFail($id);
        $users = User::all();
        return view('admin.dat_phong.sua', compact('datPhong', 'users'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'user_id' => 'required|exists:users,id',
            'ngay_den' => 'required|date',
            'ngay_di' => 'required|date|after_or_equal:ngay_den',
            'trang_thai' => 'nullable|string|max:50',
        ]);

        $orm = DatPhong::findOrFail($id);
        $orm->user_id = $data['user_id'];
        $orm->ngay_den = $data['ngay_den'];
        $orm->ngay_di = $data['ngay_di'];
        $orm->trang_thai = $data['trang_thai'] ?? $orm->trang_thai;
        $orm->save();
        
        return redirect()->route('admin.dat-phong')->with('success', 'Cập nhật đơn đặt phòng thành công!');
    }

    // --- HÀM XỬ LÝ HÓA ĐƠN & THANH TOÁN (FIXED) ---
    
    /**
     * Hiển thị chi tiết hóa đơn / Trang xử lý thanh toán.
     * [FIXED: Đảm bảo truyền phuong_thuc_thanh_toan khi tạo mới]
     * @param int $dat_phong_id ID của đơn đặt phòng
     */
    public function getHoaDon($dat_phong_id)
    {
        // Lấy thông tin đơn đặt phòng chi tiết
        $datPhong = DatPhong::with(['user', 'chiTietDatPhongs.loaiPhong', 'chiTietDatPhongs.phong'])
                             ->findOrFail($dat_phong_id);

        // Lấy hoặc tạo mới hóa đơn nếu chưa tồn tại
        $hoaDon = HoaDon::firstOrCreate(
            ['dat_phong_id' => $dat_phong_id],
            [
                'ma_hoa_don' => 'HD' . time() . rand(100, 999), 
                'ngay_lap' => now(),
                'tong_tien' => $datPhong->tong_tien, 
                // FIX LỖI: Lấy phương thức thanh toán từ đơn đặt để tạo hóa đơn
                'phuong_thuc_thanh_toan' => $datPhong->payment_method ?? 'cash',
                'trang_thai' => $datPhong->payment_status,
            ]
        );

        return view('admin.dat_phong.hoa_don_chi_tiet', compact('datPhong', 'hoaDon'));
    }
    
    /**
     * Xử lý cập nhật trạng thái thanh toán của Hóa đơn và Đơn đặt phòng.
     * @param int $dat_phong_id ID của đơn đặt phòng
     */
    public function postThanhToan(Request $request, $dat_phong_id)
    {
        $request->validate([
            'trang_thai' => 'required|in:paid,unpaid', 
            'phuong_thuc_thanh_toan' => 'required|string',
        ]);
        
        DB::beginTransaction();
        try {
            $hoaDon = HoaDon::where('dat_phong_id', $dat_phong_id)->firstOrFail();
            $hoaDon->update([
                'trang_thai' => $request->trang_thai,
                'phuong_thuc_thanh_toan' => $request->phuong_thuc_thanh_toan,
            ]);

            $datPhong = DatPhong::findOrFail($dat_phong_id);
            $datPhong->update([
                'payment_status' => $request->trang_thai,
                'payment_method' => $request->phuong_thuc_thanh_toan,
            ]);
            
            DB::commit();
            return back()->with('success', 'Cập nhật trạng thái thanh toán thành công!');

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi khi cập nhật thanh toán: ' . $e->getMessage());
        }
    }


    // --- HÀM XÓA ĐƠN ĐẶT PHÒNG ĐƠN LẺ ---
    public function getXoa($id)
    {
        DB::beginTransaction();
        try {
            $datPhong = DatPhong::with('chiTietDatPhongs')->findOrFail($id);
            $chiTiet = $datPhong->chiTietDatPhongs->first();
            
            // 1. Nhả phòng (nếu phòng đang bị khóa)
            if ($chiTiet && $chiTiet->phong_id) {
                $phong = Phong::find($chiTiet->phong_id);
                if ($phong && $phong->tinh_trang === 'booked') {
                    $phong->update(['tinh_trang' => 'available']);
                }
            }
            
            // 2. Xóa đơn và các chi tiết/hóa đơn liên quan
            $datPhong->delete();

            DB::commit();
            return redirect()->route('admin.dat-phong')->with('success', 'Đã xóa vĩnh viễn đơn đặt phòng thành công!');

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi hệ thống khi xóa đơn: ' . $e->getMessage());
        }
    }

    /**
     * Xử lý Xóa Hàng Loạt đơn đặt phòng (Mass Delete).
     */
    public function xoaHangLoat(Request $request)
    {
        $request->validate([
            'ids' => 'required|array',
            'ids.*' => 'exists:dat_phongs,id', 
        ]);

        $ids = $request->ids;
        $deletedCount = 0;

        DB::beginTransaction();
        try {
            $datPhongs = DatPhong::with('chiTietDatPhongs')->whereIn('id', $ids)->get();

            foreach ($datPhongs as $datPhong) {
                // 1. NHẢ PHÒNG (NẾU ĐÃ KHÓA)
                $chiTiet = $datPhong->chiTietDatPhongs->first();
                if ($chiTiet && $chiTiet->phong_id) {
                    $phong = Phong::find($chiTiet->phong_id);
                    if ($phong && $phong->tinh_trang === 'booked') {
                        $phong->update(['tinh_trang' => 'available']);
                    }
                }

                // 2. XÓA BẢN GHI
                $datPhong->delete();
                $deletedCount++;
            }

            DB::commit();
            return redirect()->route('admin.dat-phong')
                             ->with('success', "Đã xóa thành công $deletedCount đơn đặt phòng và mở lại các phòng tương ứng!");

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi hệ thống khi xóa hàng loạt: ' . $e->getMessage());
        }
    }
    
    // --- LOGIC DUYỆT ĐƠN VÀ KHÓA PHÒNG (Giữ nguyên) ---
    public function duyetDon($id)
    {
        DB::beginTransaction();
        try {
            $datPhong = DatPhong::with('chiTietDatPhongs')->findOrFail($id);
            if ($datPhong->trang_thai !== 'pending') {
                return back()->with('error', 'Đơn này đã được xử lý rồi!');
            }
            $chiTiet = $datPhong->chiTietDatPhongs->first();
            if (!$chiTiet) {
                return back()->with('error', 'Lỗi: Đơn này không có chi tiết phòng.');
            }
            $phong = Phong::find($chiTiet->phong_id);
            if (!$phong || $phong->tinh_trang !== 'available') {
                DB::rollBack();
                return back()->with('error', 'Lỗi: Phòng vật lý (' . ($phong->so_phong ?? 'N/A') . ') hiện không trống.');
            }

            $phong->update(['tinh_trang' => 'booked']);
            $datPhong->update([
                'trang_thai' => 'confirmed',
                'payment_status' => ($datPhong->payment_method === 'online') ? 'awaiting_payment' : $datPhong->payment_status, 
            ]);

            DB::commit();
            return back()->with('success', 'Đã duyệt đơn và khóa phòng (' . $phong->so_phong . ') thành công!');

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi hệ thống khi duyệt đơn: ' . $e->getMessage());
        }
    }

    public function huyDon($id)
    {
        DB::beginTransaction();
        try {
            $datPhong = DatPhong::with('chiTietDatPhongs')->findOrFail($id);
            $chiTiet = $datPhong->chiTietDatPhongs->first();
            
            if ($chiTiet && $chiTiet->phong_id) {
                $phong = Phong::find($chiTiet->phong_id);
                if ($phong && $phong->tinh_trang === 'booked') {
                    $phong->update(['tinh_trang' => 'available']);
                }
            }

            $datPhong->update(['trang_thai' => 'cancelled']);

            DB::commit();
            return back()->with('success', 'Đã hủy đơn và mở lại phòng thành công!');

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi hệ thống khi hủy đơn: ' . $e->getMessage());
        }
    }
}
</file>

<file path="app/Http/Controllers/Admin/LoaiPhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\LoaiPhong;
use App\Models\TienNghi; // [QUAN TRỌNG] Import model tiện nghi
use Illuminate\Http\Request;
use Illuminate\Support\Str;
use Illuminate\Support\Facades\File;

class LoaiPhongController extends Controller
{
    public function getDanhSach()
    {
        // Eager load tienNghis để hiển thị danh sách tiện nghi ở trang index (nếu cần)
        $loaiPhongs = LoaiPhong::with('tienNghis')->get();
        return view('admin.loai_phong.danh_sach', compact('loaiPhongs'));
    }

    // --- CHỨC NĂNG THÊM MỚI ---
    public function getThem()
    {
        // Lấy danh sách tất cả tiện nghi để hiển thị Checkbox
        $tienNghis = TienNghi::all();
        return view('admin.loai_phong.them', compact('tienNghis'));
    }

    public function postThem(Request $request)
    {
        // 1. Validate
        $request->validate([
            'ten_loai_phong' => 'required|string|max:100',
            'gia' => 'nullable|numeric',
            'so_nguoi' => 'nullable|integer',
            'dien_tich' => 'nullable|integer',
            'hinh_anh' => 'nullable|image|mimes:jpeg,png,jpg,gif|max:2048',
            // Validate mảng tiện nghi (gửi từ checkbox name="tien_nghi[]")
            'tien_nghi' => 'nullable|array', 
            'tien_nghi.*' => 'exists:tien_nghis,id', // Đảm bảo ID tiện nghi tồn tại
        ]);

        // 2. Lưu thông tin cơ bản Loại Phòng
        $orm = new LoaiPhong();
        $orm->ten_loai_phong = $request->ten_loai_phong;
        $orm->gia = $request->gia ?? 0;
        $orm->so_nguoi = $request->so_nguoi ?? 1;
        $orm->dien_tich = $request->dien_tich ?? 0;
        // Lưu ý: Cột 'tien_nghi' (string) trong bảng loai_phongs giờ không dùng nữa 
        // vì đã có bảng trung gian, nên ta có thể bỏ qua hoặc để null.

        // 3. Xử lý Upload Ảnh
        if ($request->hasFile('hinh_anh')) {
            $file = $request->file('hinh_anh');
            $filename = time() . '_' . $file->getClientOriginalName();
            $file->move(public_path('uploads/phongs'), $filename);
            $orm->hinh_anh = 'uploads/phongs/' . $filename;
        }

        $orm->save(); // Lưu xong mới có ID để gán quan hệ

        // 4. [QUAN TRỌNG] Lưu Tiện nghi vào bảng trung gian
        if ($request->has('tien_nghi')) {
            // attach: Thêm các dòng vào bảng loai_phong_tien_nghi
            $orm->tienNghis()->attach($request->tien_nghi);
        }

        return redirect()->route('admin.loai-phong')->with('success', 'Thêm mới thành công!');
    }
    
    // --- CHỨC NĂNG CẬP NHẬT (SỬA) ---
    public function getSua($id)
    {
        // Lấy loại phòng kèm theo các tiện nghi đã được gán
        $loaiPhong = LoaiPhong::with('tienNghis')->findOrFail($id);
        
        // Lấy tất cả tiện nghi để hiển thị checkbox
        $tienNghis = TienNghi::all();
        
        // Tạo mảng các ID tiện nghi đã chọn (để check sẵn trong View)
        // Ví dụ: [1, 3, 5]
        $selectedTienNghis = $loaiPhong->tienNghis->pluck('id')->toArray();

        return view('admin.loai_phong.sua', compact('loaiPhong', 'tienNghis', 'selectedTienNghis'));
    }

    public function postSua(Request $request, $id)
    {
        // 1. Validate
        $request->validate([
            'ten_loai_phong' => 'required|string|max:100',
            'gia' => 'nullable|numeric',
            'so_nguoi' => 'nullable|integer',
            'dien_tich' => 'nullable|integer',
            'hinh_anh' => 'nullable|image|mimes:jpeg,png,jpg,gif|max:2048',
            'tien_nghi' => 'nullable|array', // Mảng ID tiện nghi
        ]);

        $orm = LoaiPhong::findOrFail($id);
        
        // 2. Cập nhật thông tin cơ bản
        $orm->ten_loai_phong = $request->ten_loai_phong;
        if ($request->has('gia')) $orm->gia = $request->gia;
        if ($request->has('so_nguoi')) $orm->so_nguoi = $request->so_nguoi;
        if ($request->has('dien_tich')) $orm->dien_tich = $request->dien_tich;
        // 3. Xử lý Ảnh mới (nếu có)
        if ($request->hasFile('hinh_anh')) {
            // Xóa ảnh cũ
            if ($orm->hinh_anh && File::exists(public_path($orm->hinh_anh))) {
                File::delete(public_path($orm->hinh_anh));
            }
            // Up ảnh mới
            $file = $request->file('hinh_anh');
            $filename = time() . '_' . $file->getClientOriginalName();
            $file->move(public_path('uploads/phongs'), $filename);
            $orm->hinh_anh = 'uploads/phongs/' . $filename;
        }

        $orm->save();

        // 4. [QUAN TRỌNG] Đồng bộ tiện nghi (Sync)
        // Hàm sync sẽ: Xóa hết các ID cũ không có trong mảng gửi lên và Thêm các ID mới vào.
        // Nếu $request->tien_nghi là null (bỏ chọn hết), nó sẽ xóa sạch liên kết.
        $orm->tienNghis()->sync($request->input('tien_nghi', []));

        return redirect()->route('admin.loai-phong')->with('success', 'Cập nhật thành công!');
    }

    // --- CHỨC NĂNG XÓA ---
    public function getXoa($id)
    {
        $orm = LoaiPhong::findOrFail($id);
        
        // Xóa liên kết tiện nghi trong bảng trung gian
        $orm->tienNghis()->detach(); 

        // Xóa file ảnh
        if ($orm->hinh_anh && File::exists(public_path($orm->hinh_anh))) {
            File::delete(public_path($orm->hinh_anh));
        }

        $orm->delete();
        
        return redirect()->route('admin.loai-phong')->with('success', 'Xóa thành công!');
    }
}
</file>

<file path="app/Http/Controllers/Admin/UserController.php">
<?php

namespace App\Http\Controllers\Admin; // Namespace chuẩn

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Validation\Rule;
use App\Models\User;
use Illuminate\Support\Facades\Hash;

class UserController extends Controller
{
    /**
     * 1. HÀM INDEX (Sửa lỗi Method not exist)
     * Hiển thị danh sách khách hàng (Chỉ lấy Role = user)
     */
    public function getDanhSach()
    {
        // Thêm ->paginate(10) để thực thi câu lệnh và phân trang
        // Nếu thiếu ->paginate() hoặc ->get(), biến $users chỉ là câu lệnh SQL chưa chạy -> Lỗi View
        $users = User::where('role', 'user')
                     ->orderBy('created_at', 'desc')
                     ->paginate(10);

        return view('admin.users.danh_sach', compact('users'));
    }

    /**
     * Hiển thị form thêm mới
     */
    public function getThem()
    {
        return view('admin.users.them');
    }

    /**
     * Xử lý lưu khách hàng mới
     */
    public function postThem(Request $request)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => 'required|email|unique:users,email',
            'phone' => 'required|string|max:15|unique:users,phone',
            'cccd' => 'required|string|max:20|unique:users,cccd',
            'password' => 'required|string|min:6',
        ]);

        $orm = new User();
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'];
        $orm->cccd = $data['cccd'];
        $orm->role = 'user'; // Gán cứng là user
        $orm->password = Hash::make($data['password']);
        $orm->save();

        return redirect()->route('admin.users')->with('success', 'Thêm khách hàng thành công!');
    }

    /**
     * Hiển thị form sửa
     */
    public function getSua($id)
    {
        $user = User::findOrFail($id);
        return view('admin.users.sua', compact('user'));
    }

    /**
     * Xử lý cập nhật
     */
    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => ['required', 'email', Rule::unique('users', 'email')->ignore($id)],
            'phone' => ['required', 'string', 'max:15', Rule::unique('users', 'phone')->ignore($id)],
            'cccd' => ['required', 'string', 'max:20', Rule::unique('users', 'cccd')->ignore($id)],
            'password' => 'nullable|string|min:6',
        ]);

        $orm = User::findOrFail($id);
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'];
        $orm->cccd = $data['cccd'];
        
        if (!empty($data['password'])) {
            $orm->password = Hash::make($data['password']);
        }
        
        $orm->save();
        
        return redirect()->route('admin.users')->with('success', 'Cập nhật thành công!');
    }

    /**
     * Xóa tài khoản
     */
    public function getXoa($id)
    {
        $orm = User::findOrFail($id);
        
        if ($orm->role === 'admin') {
            return redirect()->route('admin.users')->with('error', 'Không thể xóa Admin!');
        }

        $orm->delete();
        return redirect()->route('admin.users')->with('success', 'Đã xóa khách hàng.');
    }
}
</file>

<file path="app/Http/Controllers/Auth/LoginController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\AuthenticatesUsers;
use Illuminate\Http\Request;
use Illuminate\Http\RedirectResponse;
class LoginController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Login Controller
    |--------------------------------------------------------------------------
    |
    | This controller handles authenticating users for the application and
    | redirecting them to your home screen. The controller uses a trait
    | to conveniently provide its functionality to your applications.
    |
    */

    use AuthenticatesUsers;

    /**
     * Where to redirect users after login.
     *
     * @var string
     */
    // protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */

    public function authenticated(Request $request, $user)
    {
        if ($user->role === 'admin') {
            return redirect()->route('admin.dashboard');
        }
        return redirect()->route('home');
    }
    public function __construct()
    {
        $this->middleware('guest')->except('logout');
        $this->middleware('auth')->only('logout');
    }
}
</file>

<file path="app/Http/Controllers/Auth/RegisterController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Models\User;
use Illuminate\Foundation\Auth\RegistersUsers;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Facades\Validator;

class RegisterController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Register Controller
    |--------------------------------------------------------------------------
    |
    | This controller handles the registration of new users as well as their
    | validation and creation. By default this controller uses a trait to
    | provide this functionality without requiring any additional code.
    |
    */

    use RegistersUsers;

    /**
     * Where to redirect users after registration.
     *
     * @var string
     */
    // protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('guest');
    }
     public function redirectTo()
    {
        if (auth()->user()->role === 'admin') {
            return route('admin.dashboard');
        }
        return route('home'); 
    }
    /**
     * Get a validator for an incoming registration request.
     *
     * @param  array  $data
     * @return \Illuminate\Contracts\Validation\Validator
     */
    protected function validator(array $data)
    {
        return Validator::make($data, [
            'name' => ['required', 'string', 'max:255'],
            'email' => ['required', 'string', 'email', 'max:255', 'unique:users'],
            'password' => ['required', 'string', 'min:8', 'confirmed'],
        ]);
    }

    /**
     * Create a new user instance after a valid registration.
     *
     * @param  array  $data
     * @return \App\Models\User
     */
    protected function create(array $data)
    {
        return User::create([
            'name' => $data['name'],
            'email' => $data['email'],
            'password' => Hash::make($data['password']),
            'role' => 'user',
        ]);
    }
}
</file>

<file path="app/Http/Controllers/Client/BookingController.php">
<?php

namespace App\Http\Controllers\Client;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Models\LoaiPhong;
use App\Models\DatPhong;
use App\Models\ChiTietDatPhong;
use App\Models\Phong;
use App\Models\KhuyenMai;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\DB;
use Carbon\Carbon;

class BookingController extends Controller
{
    /**
     * Hiển thị form xác nhận đặt phòng (FIXED)
     */
    public function create(Request $request)
    {
        $loaiPhongId = $request->room_id;
        $checkIn = $request->checkin;
        $checkOut = $request->checkout;

        if (!$loaiPhongId || !$checkIn || !$checkOut) {
            return redirect()->route('phong.danh-sach')
                ->with('error', 'Vui lòng chọn ngày và loại phòng trước!');
        }

        $roomType = LoaiPhong::findOrFail($loaiPhongId);
        
        $start = Carbon::parse($checkIn);
        $end = Carbon::parse($checkOut);
        $days = $start->diffInDays($end) ?: 1;
        
        $totalPrice = $roomType->gia * $days;

        return view('client.booking.create', compact('roomType', 'checkIn', 'checkOut', 'days', 'totalPrice'));
    }


    /**
     * Xử lý lưu đơn đặt phòng (Store) - Phân luồng Thanh toán.
     */
    public function store(Request $request)
    {
        // 1. Validate
        $request->validate([
            'room_id' => 'required|exists:loai_phongs,id',
            'checkin' => 'required|date|after_or_equal:today',
            'checkout' => 'required|date|after:checkin',
            'promotion_code' => 'nullable|string|max:50',
            'discount_amount' => 'nullable|numeric|min:0',
            'payment_method' => 'required|in:pay_at_hotel,online', 
        ]);

        DB::beginTransaction();
        try {
            // 2. Tìm phòng vật lý trống
            $phongTrong = Phong::where('loai_phong_id', $request->room_id)
                               ->where('tinh_trang', 'available')
                               ->first();

            if (!$phongTrong) {
                DB::rollBack();
                return back()->with('error', 'Rất tiếc, loại phòng này vừa hết chỗ hoặc đang bảo trì.');
            }

            // 3. Tính toán lại tổng tiền cuối cùng
            $loaiPhong = LoaiPhong::find($request->room_id);
            $ngayDen = Carbon::parse($request->checkin);
            $ngayDi = Carbon::parse($request->checkout);
            $days = $ngayDen->diffInDays($ngayDi) ?: 1;
            
            $originalTotal = $loaiPhong->gia * $days;
            $discountAmount = $request->discount_amount ?? 0;
            $finalTotal = $originalTotal - $discountAmount;
            $promotionCode = $request->promotion_code ? strtoupper($request->promotion_code) : null;
            
            // 4. Tạo đơn DatPhong (Trạng thái luôn là 'pending' ban đầu)
            $booking = DatPhong::create([
                'user_id' => Auth::id(),
                'ngay_den' => $request->checkin,
                'ngay_di' => $request->checkout,
                'tong_tien' => $finalTotal,
                'trang_thai' => 'pending', 
                'payment_status' => 'unpaid', 
                'payment_method' => $request->payment_method, 
                'promotion_code' => $promotionCode,
                'discount_amount' => $discountAmount,
                'ghi_chu' => $request->ghi_chu ?? null,
            ]);

            // 5. Tạo ChiTietDatPhong
            ChiTietDatPhong::create([
                'dat_phong_id' => $booking->id,
                'loai_phong_id' => $loaiPhong->id,
                'phong_id' => $phongTrong->id,
                'so_luong' => 1,
                'don_gia' => $loaiPhong->gia,
                'thanh_tien' => $originalTotal,
            ]);

            DB::commit();
            
            // 6. PHÂN LUỒNG XỬ LÝ THANH TOÁN
            if ($request->payment_method === 'online') {
                // Khách chọn Online: Chuyển hướng đến cổng thanh toán
                return $this->redirectToPaymentGateway($booking); 
            } else {
                // Khách chọn Trực tiếp: Đơn pending, chờ Admin duyệt thủ công
                $msg = 'Đặt phòng thành công! Đang chờ Admin xác nhận đơn.';
                return redirect()->route('booking.success')->with('success', $msg);
            }

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi hệ thống: ' . $e->getMessage());
        }
    }
    
    /**
     * Hàm giả lập chuyển hướng đến cổng thanh toán (HÀM NÀY CẦN THAY THẾ)
     */
    protected function redirectToPaymentGateway(DatPhong $booking)
    {
        // Trong thực tế, bạn sẽ tạo URL thanh toán và redirect tại đây.
        // Ví dụ: Tạo URL VNPAY và return redirect($vnpayUrl); 

        // Giả lập: Chuyển hướng thành công ngay lập tức về hàm callback
        return redirect()->route('payment.callback', [
            'order_id' => $booking->id,
            'is_success' => 1, // 1: Success, 0: Failed
            'amount' => $booking->tong_tien
        ]);
    }

    /**
     * Xử lý callback từ cổng thanh toán (TỰ ĐỘNG DUYỆT ĐƠN & KHÓA PHÒNG)
     * Yêu cầu route: Route::get('/payment/callback', [BookingController::class, 'paymentCallback'])->name('payment.callback');
     */
    public function paymentCallback(Request $request) 
    {
        // 1. [Bảo mật] Xác thực chữ ký/signature của cổng thanh toán (Bỏ qua trong code mẫu)
        
        $bookingId = $request->order_id; 
        
        // 2. Xử lý logic khi thanh toán THÀNH CÔNG
        if ($request->is_success == 1) { 
            
            DB::beginTransaction();
            try {
                $datPhong = DatPhong::with('chiTietDatPhongs')->findOrFail($bookingId);
                
                // Kiểm tra nếu đơn đã được duyệt/thanh toán rồi thì bỏ qua
                if ($datPhong->trang_thai === 'confirmed' && $datPhong->payment_status === 'paid') {
                    DB::rollBack();
                    return redirect()->route('booking.success')->with('success', 'Thanh toán đã được xác nhận và đơn đã duyệt trước đó.');
                }

                // 3. TỰ ĐỘNG DUYỆT ĐƠN & KHÓA PHÒNG
                $chiTiet = $datPhong->chiTietDatPhongs->first();
                $phong = Phong::find($chiTiet->phong_id);
                
                if ($phong && $phong->tinh_trang === 'available') {
                    $phong->update(['tinh_trang' => 'booked']); // KHÓA PHÒNG
                }
                
                // Cập nhật trạng thái đơn: confirmed & paid
                $datPhong->update([
                    'trang_thai' => 'confirmed',
                    'payment_status' => 'paid', // ĐÃ THANH TOÁN
                ]);
                
                DB::commit();
                return redirect()->route('booking.success')->with('success', 'Thanh toán thành công! Đơn đặt phòng của bạn đã được xác nhận và giữ phòng.');

            } catch (\Exception $e) {
                DB::rollBack();
                return redirect()->route('booking.success')->with('error', 'Thanh toán thành công nhưng có lỗi xảy ra khi duyệt đơn: ' . $e->getMessage());
            }
        } else {
            // Thanh toán thất bại
            return redirect()->route('booking.success')->with('error', 'Thanh toán thất bại. Đơn đặt phòng của bạn chưa được xác nhận.');
        }
    }


    /**
     * Hàm API kiểm tra và tính toán giảm giá (dùng AJAX).
     */
    public function checkPromotion(Request $request)
    {
        // 1. Validate input
        $request->validate([
            'code' => 'required|string|max:50',
            'original_total' => 'required|numeric|min:0', // Tổng tiền gốc
        ]);

        $code = strtoupper($request->code);
        $originalTotal = $request->original_total;
        $discountAmount = 0;

        // 2. Tìm mã hợp lệ và còn hạn
        $khuyenMai = KhuyenMai::where('ma_khuyen_mai', $code)
            ->whereDate('ngay_bat_dau', '<=', Carbon::now())
            ->whereDate('ngay_ket_thuc', '>=', Carbon::now())
            ->first();

        if (!$khuyenMai) {
            return response()->json([
                'success' => false,
                'discount_amount' => 0,
                'final_total' => $originalTotal,
                'message' => 'Mã không hợp lệ hoặc đã hết hạn.'
            ], 200);
        }

        // 3. Tính toán giảm giá
        if ($khuyenMai->chiet_khau_phan_tram > 0) {
            $discountAmount = $originalTotal * ($khuyenMai->chiet_khau_phan_tram / 100);
        } else {
            $discountAmount = $khuyenMai->so_tien_giam_gia;
        }

        if ($discountAmount > $originalTotal) {
            $discountAmount = $originalTotal;
        }

        $finalTotal = $originalTotal - $discountAmount;

        // 4. Trả về kết quả thành công
        return response()->json([
            'success' => true,
            'discount_amount' => round($discountAmount),
            'final_total' => round($finalTotal),
            'message' => 'Áp dụng mã thành công! Bạn được giảm ' . number_format(round($discountAmount)) . 'đ.'
        ], 200);
    }

    public function success() {
        return view('client.booking.success');
    }
}
</file>

<file path="app/Http/Controllers/Client/PageController.php">
<?php

namespace App\Http\Controllers\Client;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Carbon\Carbon;

// --- 1. IMPORT MODELS ---
use App\Models\LoaiPhong;
use App\Models\Phong;
use App\Models\KhuyenMai;
use App\Models\TienNghi;

class PageController extends Controller
{
    /**
     * Trang chủ
     */
    public function home()
    {
        $loaiPhongs = LoaiPhong::take(3)->get();
        $khuyenMais = KhuyenMai::where('ngay_ket_thuc', '>=', Carbon::today())->take(2)->get();

        return view('home', compact('loaiPhongs', 'khuyenMais'));
    }

    /**
     * Danh sách Loại Phòng (Tìm kiếm & Lọc & Sắp xếp)
     */
    public function rooms(Request $request)
    {
        $query = LoaiPhong::query();

        // 1. ĐẾM SỐ PHÒNG TRỐNG (SỬA LẠI TÊN CỘT VÀ GIÁ TRỊ)
        // Cột trong DB là 'tinh_trang', giá trị là 'available'
        $query->withCount(['phongs' => function ($q) {
            $q->where('tinh_trang', 'available'); 
        }]);

        // 2. CÁC BỘ LỌC
        
        // Lọc Giá Min
        if ($request->filled('min_price')) {
            $query->where('gia', '>=', $request->input('min_price'));
        }
        
        // Lọc Giá Max
        if ($request->filled('max_price')) {
            $query->where('gia', '<=', $request->input('max_price'));
        }

        // Lọc Sức chứa
        if ($request->filled('capacity')) {
            $capacities = $request->input('capacity');
            $query->where(function($q) use ($capacities) {
                $q->whereIn('suc_chua', $capacities); // Lưu ý: DB bạn là 'so_nguoi' hay 'suc_chua'? 
                // Trong file SQL là 'so_nguoi', nếu code lỗi cột suc_chua thì đổi thành so_nguoi nhé.
                // Tạm thời mình giữ 'suc_chua' theo các bước trước, nếu lỗi báo mình đổi lại 'so_nguoi'.
                if (in_array('4', $capacities)) {
                    $q->orWhere('suc_chua', '>=', 4);
                }
            });
        }

        // Lọc Tiện nghi
        if ($request->filled('amenities')) {
            $amenities = $request->input('amenities');
            $query->whereHas('tienNghis', function($q) use ($amenities) {
                $q->whereIn('tien_nghis.id', $amenities); 
            });
        }

        // Lọc Loại phòng (Checkbox)
        if ($request->filled('room_types')) {
            $query->whereIn('id', $request->input('room_types'));
        }

        // 3. SẮP XẾP CHÍNH (Đẩy phòng còn trống lên trên)
        $query->orderBy('phongs_count', 'desc');

        // 4. SẮP XẾP PHỤ
        if ($request->filled('sort')) {
            $sort = $request->input('sort');
            switch ($sort) {
                case 'price_asc':
                    $query->orderBy('gia', 'asc');
                    break;
                case 'price_desc':
                    $query->orderBy('gia', 'desc');
                    break;
                default:
                    $query->orderBy('created_at', 'desc');
                    break;
            }
        } else {
            $query->orderBy('created_at', 'desc');
        }

        // 5. Phân trang
        $rooms = $query->paginate(9)->withQueryString();
        
        // 6. Lấy dữ liệu cho Sidebar
        $tienNghis = TienNghi::all();
        $allLoaiPhongs = LoaiPhong::select('id', 'ten_loai_phong')->get();

        return view('client.rooms.index', compact('rooms', 'tienNghis', 'allLoaiPhongs'));
    }

    /**
     * Chi tiết Loại Phòng
     */
    public function roomDetail($id)
    {
        $room = LoaiPhong::with(['tienNghis', 'phongs'])->findOrFail($id);
        
        // SỬA LẠI: Đếm số phòng trống thực tế theo cột 'tinh_trang'
        $phongTrong = $room->phongs->where('tinh_trang', 'available')->count(); 

        // Gợi ý phòng khác (Lưu ý cột so_nguoi/suc_chua)
        $relatedRooms = LoaiPhong::where('so_nguoi', $room->so_nguoi) // SQL của bạn dùng 'so_nguoi'
                             ->where('id', '!=', $id)
                             ->take(3)
                             ->get();

        return view('client.rooms.detail', compact('room', 'relatedRooms', 'phongTrong'));
    }

    /**
     * Trang khuyến mãi
     */
    public function promotions()
    {
        $promotions = KhuyenMai::where('ngay_ket_thuc', '>=', Carbon::today())->get();
        return view('client.promotions.index', compact('promotions'));
    }
}
</file>

<file path="app/Http/Controllers/HomeController.php">
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Models\LoaiPhong;
use App\Models\KhuyenMai;
use Carbon\Carbon;
class HomeController extends Controller
{
    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        // Allow guests to view the public homepage (index)
        $this->middleware('auth')->except(['index']);
    }

    /**
     * Show the application dashboard.
     *
     * @return \Illuminate\Contracts\Support\Renderable
     */
    public function index()
    {
        // Return the public default layout as the homepage.
        // The public layout file is at resources/views/layouts/app.blade.php

        // 1. Lấy danh sách Loại phòng nổi bật (Ví dụ lấy 3 loại phòng đầu tiên hoặc ngẫu nhiên)
        $loaiPhongs = LoaiPhong::take(3)->get();

        // 2. Lấy Khuyến mãi đang hiệu lực (Ngày bắt đầu <= hôm nay <= Ngày kết thúc)
        $now = Carbon::now();
        $khuyenMais = KhuyenMai::whereDate('ngay_bat_dau', '<=', $now)
                               ->whereDate('ngay_ket_thuc', '>=', $now)
                               ->take(2) // Lấy 2 khuyến mãi mới nhất
                               ->get();

        return view('home', compact('loaiPhongs', 'khuyenMais'));

    }
}
</file>

<file path="app/Models/ChiTietDatPhong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class ChiTietDatPhong extends Model
{
    use HasFactory;

    // Định nghĩa tên bảng cho chắc chắn
    protected $table = 'chi_tiet_dat_phongs';

    // QUAN TRỌNG: Khai báo các cột được phép lưu (Mass Assignment)
    // Phải khớp với các trường trong BookingController@store
    // Trong App\Models\ChiTietDatPhong.php
    protected $fillable = [
        'dat_phong_id',
        'loai_phong_id',
        'phong_id',
        'so_luong',
        'don_gia',    // <--- Phải có
        'thanh_tien', // <--- Phải có
    ];

    /**
     * Quan hệ ngược lại với bảng Đặt phòng
     */
    public function datPhong()
    {
        return $this->belongsTo(DatPhong::class, 'dat_phong_id');
    }

    /**
     * Quan hệ với bảng Loại phòng
     */
    public function loaiPhong()
    {
        return $this->belongsTo(LoaiPhong::class, 'loai_phong_id');
    }

    /**
     * Quan hệ với bảng Phòng cụ thể
     */
    public function phong()
    {
        return $this->belongsTo(Phong::class, 'phong_id');
    }
}
</file>

<file path="app/Models/DatPhong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Database\Eloquent\Relations\HasOne;

class DatPhong extends Model
{
    use HasFactory;

    protected $table = 'dat_phongs'; // Định nghĩa rõ tên bảng

    // SỬA LẠI FILLABLE CHO KHỚP VỚI CONTROLLER VÀ DATABASE
    protected $fillable = [
        'user_id',
        'ngay_den',      
        'ngay_di',        
        'tong_tien',      
        'trang_thai',
        'payment_status', 
    ];

    /**
     * The user who made the booking.
     */
    public function user(): BelongsTo
    {
        return $this->belongsTo(User::class);
    }

    /**
     * Booking details for this DatPhong.
     */
    public function chiTietDatPhongs(): HasMany
    {
        return $this->hasMany(ChiTietDatPhong::class, 'dat_phong_id');
    }

    /**
     * Invoice for this booking (one-to-one).
     */
    public function hoaDon(): HasOne
    {
        return $this->hasOne(HoaDon::class, 'dat_phong_id');
    }
}
</file>

<file path="app/Models/Phong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;

class Phong extends Model
{
    protected $table = 'phongs';
    protected $fillable = [
        'loai_phong_id',
        'so_phong',
        'tinh_trang',
    ];

    public const tinh_trang_options = [
        'available' => [
            'label' => 'Phòng trống',
            'class' => 'bg-emerald-100 text-emerald-800 border-emerald-200 ring-emerald-500', // Màu xanh ngọc (Sẵn sàng đón khách)
            'icon' => 'fa-door-open'
        ],
        'occupied' => [
            'label' => 'Đang có khách',
            'class' => 'bg-blue-100 text-blue-800 border-blue-200 ring-blue-500', // Màu xanh dương (Đang sử dụng)
            'icon' => 'fa-user-check'
        ],
        'cleaning' => [
            'label' => 'Đang dọn dẹp',
            'class' => 'bg-amber-100 text-amber-800 border-amber-200 ring-amber-500', // Màu vàng (Cảnh báo nhẹ)
            'icon' => 'fa-broom'
        ],
        'maintenance' => [
            'label' => 'Bảo trì / Sửa chữa',
            'class' => 'bg-red-100 text-red-800 border-red-200 ring-red-500', // Màu đỏ (Không thể dùng)
            'icon' => 'fa-screwdriver-wrench'
        ],
    ];

    /**
     * The LoaiPhong this Phong belongs to.
     */
    public function loaiPhong(): BelongsTo
    {
        return $this->belongsTo(LoaiPhong::class);
    }

    /**
     * Booking details referencing this Phong.
     */
    public function chiTietDatPhongs(): HasMany
    {
        return $this->hasMany(ChiTietDatPhong::class);
    }
}
</file>

<file path="bootstrap/app.php">
<?php

use Illuminate\Foundation\Application;
use Illuminate\Foundation\Configuration\Exceptions;
use Illuminate\Foundation\Configuration\Middleware;

return Application::configure(basePath: dirname(__DIR__))
    ->withRouting(
        web: __DIR__.'/../routes/web.php',
        commands: __DIR__.'/../routes/console.php',
        health: '/up',
    )
    ->withMiddleware(function (Middleware $middleware): void {
        $middleware->alias([
            'check.profile' => \App\Http\Middleware\CheckUserProfile::class,
            
            'admin' => \App\Http\Middleware\AdminMiddleware::class,
        ]);
    })
    ->withExceptions(function (Exceptions $exceptions): void {
        //
    })->create();
</file>

<file path="database/migrations/0001_01_01_000000_create_users_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('users', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->string('email')->unique();
            $table->string('cccd')->nullable();
            $table->string('phone')->nullable();
			$table->string('role')->default('user');
            $table->timestamp('email_verified_at')->nullable();
            $table->string('password');
            $table->rememberToken();
            $table->timestamps();
        });

        Schema::create('password_reset_tokens', function (Blueprint $table) {
            $table->string('email')->primary();
            $table->string('token');
            $table->timestamp('created_at')->nullable();
        });

        Schema::create('sessions', function (Blueprint $table) {
            $table->string('id')->primary();
            $table->foreignId('user_id')->nullable()->index();
            $table->string('ip_address', 45)->nullable();
            $table->text('user_agent')->nullable();
            $table->longText('payload');
            $table->integer('last_activity')->index();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('users');
        Schema::dropIfExists('password_reset_tokens');
        Schema::dropIfExists('sessions');
    }
};
</file>

<file path="database/migrations/2025_12_05_181622_create_chi_tiet_dat_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('chi_tiet_dat_phongs', function (Blueprint $table) {
            $table->id();
            $table->foreignId(column: 'dat_phong_id')->constrained(table: 'dat_phongs');
            $table->foreignId('loai_phong_id')->constrained('loai_phongs');
            $table->foreignId('phong_id')->constrained('phongs');
            $table->integer('so_luong');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('chi_tiet_dat_phongs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181623_create_khuyen_mais_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;
use Ramsey\Uuid\Type\Decimal;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('khuyen_mais', function (Blueprint $table) {
            $table->id();
            $table->string('ten_khuyen_mai', 100);
            $table->string('ma_khuyen_mai', 50)->unique();
            $table->decimal('chiet_khau_phan_tram', 5, 2);
            $table->decimal('so_tien_giam_gia',10,2);
            $table->date('ngay_bat_dau');
            $table->date('ngay_ket_thuc');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('khuyen_mais');
    }
};
</file>

<file path="resources/css/app.css">
@import 'tailwindcss';
@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../storage/framework/views/*.php';
@source '../**/*.blade.php';
@source '../**/*.js';
@theme {
    --font-sans: 'Instrument Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
</file>

<file path="resources/css/client.css">
/* =========================================
   1. VARIABLES & GLOBAL CONFIG (Cấu hình chung)
   ========================================= */

:root {
    --primary-dark: #111827;
    /* Gray-900 */
    --primary-gold: #c5a059;
    /* Brand Gold - Màu mới */
    --gold-hover: #b08d55;
    /* Màu hover cũ */
    --text-main: #1f2937;
    /* Gray-800 */
    --text-light: #6b7280;
    /* Gray-500 */
    --bg-light: #f9fafb;
    /* Gray-50 */
    --white: #ffffff;
    --font-serif: 'Playfair Display', ui-serif, Georgia, serif;
    --font-sans: 'Be Vietnam Pro', sans-serif;
    --container-width: 1280px;
}

[x-cloak] {
    display: none !important;
}

body {
    font-family: var(--font-sans);
    color: #374151;
    background-color: var(--bg-light);
    -webkit-font-smoothing: antialiased;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}


/* Scrollbar */

::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
    background: var(--primary-gold);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--gold-hover);
}


/* Layout Main Content */

.main-content {
    flex-grow: 1;
    padding-top: 5rem;
    /* Để tránh header fixed đè lên */
}


/* Container chung */

.container {
    max-width: var(--container-width);
    margin: 0 auto;
    padding: 0 1rem;
}


/* =========================================
   2. TYPOGRAPHY & BUTTONS (Dùng chung)
   ========================================= */

.section-header {
    text-align: center;
    margin-bottom: 4rem;
}

.sub-title {
    color: var(--primary-gold);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-size: 0.875rem;
    display: block;
    margin-bottom: 0.5rem;
}

.main-title {
    font-family: var(--font-serif);
    font-size: 2.25rem;
    font-weight: 700;
    color: var(--primary-dark);
    line-height: 1.2;
}

.main-title.light {
    color: var(--white);
}


/* Buttons Style */

.btn {
    display: inline-block;
    padding: 0.75rem 2rem;
    border-radius: 0.375rem;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.3s ease;
    cursor: pointer;
    border: none;
}

.btn-primary {
    background-color: var(--primary-dark);
    color: var(--white);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.btn-primary:hover {
    background-color: var(--primary-gold);
    color: var(--primary-dark);
    transform: translateY(-2px);
}

.btn-outline {
    background-color: transparent;
    border: 1px solid var(--primary-dark);
    color: var(--primary-dark);
}

.btn-outline:hover {
    background-color: var(--primary-dark);
    color: var(--white);
}

.btn-text {
    color: var(--primary-dark);
    font-weight: 700;
}

.btn-text:hover {
    color: var(--primary-gold);
}


/* =========================================
   3. HEADER & NAVIGATION
   ========================================= */

.header-wrapper {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 50;
    transition: all 0.3s ease-in-out;
    /* --- PHẦN QUAN TRỌNG ĐÃ CHỈNH SỬA --- */
    /* 0.8 nghĩa là độ rõ 80% (hơi trong suốt). Bạn có thể giảm xuống 0.7 hoặc 0.6 nếu muốn trong hơn */
    background-color: rgba(255, 255, 255, 0.5);
    /* Hiệu ứng làm mờ hậu cảnh (như kính mờ) để chữ vẫn dễ đọc */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    /* ------------------------------------ */
    border-bottom: 1px solid rgba(255, 255, 255, 0.3);
    /* Viền cũng nên mờ đi chút cho đẹp */
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
}

.header-container {
    max-width: 80rem;
    margin: 0 auto;
    padding: 0 1rem;
}

@media (min-width: 640px) {
    .header-container {
        padding: 0 1.5rem;
    }
}

@media (min-width: 1024px) {
    .header-container {
        padding: 0 2rem;
    }
}

.header-inner {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 5rem;
}


/* Logo */

.logo-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
}

.logo-icon {
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #111827;
    color: var(--primary-gold);
    border-radius: 9999px;
    border: 1px solid var(--primary-gold);
    font-size: 1.25rem;
    transition: all 0.5s;
}

.logo-link:hover .logo-icon {
    background-color: var(--primary-gold);
    color: #111827;
}

.logo-text {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    font-weight: 700;
    color: #111827;
    letter-spacing: 0.025em;
    text-transform: uppercase;
    margin-left: 0.5rem;
}

.logo-text span {
    color: var(--primary-gold);
}


/* Main Navigation (Desktop) */

.main-nav {
    display: none;
    gap: 2rem;
}

@media (min-width: 768px) {
    .main-nav {
        display: flex;
        flex-direction: row;
        align-items: center;
    }
}

.nav-link {
    font-size: 0.875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.5rem 0;
    border-bottom: 2px solid transparent;
    color: #4b5563;
    transition: all 0.3s ease;
    text-decoration: none;
}

.nav-link:hover,
.nav-link.active {
    color: var(--primary-gold);
    border-bottom-color: var(--primary-gold);
}


/* User Actions & Mobile Toggle */

.header-actions {
    display: none;
    align-items: center;
    gap: 1.5rem;
}

@media (min-width: 768px) {
    .header-actions {
        display: flex;
    }
}

.mobile-toggle {
    display: flex;
    color: #111827;
    padding: 0.5rem;
    font-size: 1.5rem;
}

.mobile-toggle:hover {
    color: var(--primary-gold);
}

@media (min-width: 768px) {
    .mobile-toggle {
        display: none;
    }
}


/* User Dropdown & Auth Buttons */

.user-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #374151;
    font-weight: 500;
    outline: none;
    transition: color 0.15s;
}

.user-btn:hover {
    color: var(--primary-gold);
}

.user-avatar {
    width: 2rem;
    height: 2rem;
    border-radius: 9999px;
    background-color: #e5e7eb;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #d1d5db;
    overflow: hidden;
    color: #6b7280;
}

.dropdown-menu {
    position: absolute;
    right: 0;
    margin-top: 0.5rem;
    width: 14rem;
    background-color: white;
    border-radius: 0.375rem;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    padding: 0.25rem 0;
    border: 1px solid #f3f4f6;
    z-index: 50;
}

.dropdown-item {
    display: block;
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    color: #374151;
    transition: background-color 0.15s;
}

.dropdown-item:hover {
    background-color: #f9fafb;
}

.dropdown-item-danger {
    color: #dc2626;
    font-weight: 700;
    border-bottom: 1px solid #f3f4f6;
}

.btn-login {
    font-size: 0.875rem;
    font-weight: 600;
    color: #111827;
    transition: color 0.15s;
}

.btn-login:hover {
    color: var(--primary-gold);
}

.btn-register {
    padding: 0.625rem 1.25rem;
    background-color: #111827;
    color: var(--primary-gold);
    font-size: 0.875rem;
    font-weight: 700;
    text-transform: uppercase;
    border-radius: 0.25rem;
    transition: background-color 0.15s;
}

.btn-register:hover {
    background-color: #1f2937;
}


/* Mobile Menu Wrapper */

.mobile-menu-wrapper {
    position: absolute;
    width: 100%;
    height: 100vh;
    z-index: 40;
    background-color: white;
    border-top: 1px solid #f3f4f6;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

@media (min-width: 768px) {
    .mobile-menu-wrapper {
        display: none !important;
    }
}

.mobile-menu-container {
    padding: 1rem 1rem 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.mobile-link {
    display: block;
    padding: 0.75rem;
    font-size: 1rem;
    font-weight: 500;
    color: #111827;
    border-radius: 0.375rem;
}

.mobile-link:hover {
    background-color: #f9fafb;
}


/* =========================================
   4. HOME PAGE SECTIONS
   ========================================= */


/* Hero Section */

.hero {
    position: relative;
    height: 85vh;
    min-height: 750px;
    width: 100%;
    background-color: var(--primary-dark);
    overflow: hidden;
}

.hero-bg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.6;
}

.hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, var(--primary-dark), transparent);
}

.hero-content {
    position: relative;
    z-index: 10;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 0 1rem;
}

.hero-heading {
    font-family: var(--font-serif);
    font-size: 2.5rem;
    color: var(--white);
    font-weight: 700;
    margin-bottom: 1.5rem;
    text-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
}

@media (min-width: 768px) {
    .hero-heading {
        font-size: 4rem;
    }
}

.hero-desc {
    color: #e5e7eb;
    font-size: 1.125rem;
    max-width: 40rem;
    margin-bottom: 2.5rem;
}

.scroll-down {
    color: var(--white);
    opacity: 0.8;
    font-size: 2rem;
    animation: bounce 2s infinite;
}

@keyframes bounce {
    0%,
    100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(10px);
    }
}


/* Rooms Section */

.section-rooms {
    padding: 5rem 0;
    background-color: var(--white);
}

.room-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
}

@media (min-width: 768px) {
    .room-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (min-width: 1024px) {
    .room-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

.room-card {
    background: var(--white);
    border: 1px solid #f3f4f6;
    border-radius: 0.5rem;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
}

.room-card:hover {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    transform: translateY(-5px);
}

.room-img-wrap {
    position: relative;
    height: 16rem;
    overflow: hidden;
}

.room-img-wrap img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.7s;
}

.room-card:hover .room-img-wrap img {
    transform: scale(1.1);
}

.room-price {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: rgba(255, 255, 255, 0.9);
    padding: 0.25rem 0.75rem;
    font-weight: 700;
    font-size: 0.75rem;
    border-radius: 0.25rem;
    text-transform: uppercase;
}

.room-body {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.room-name {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.room-name a {
    color: var(--primary-dark);
    text-decoration: none;
    transition: color 0.2s;
}

.room-name a:hover {
    color: var(--primary-gold);
}

.room-desc {
    color: var(--text-light);
    font-size: 0.875rem;
    margin-bottom: 1rem;
    flex-grow: 1;
}

.room-meta {
    display: flex;
    gap: 1rem;
    padding-top: 1rem;
    margin-bottom: 1.5rem;
    border-top: 1px solid #f3f4f6;
    color: #9ca3af;
    font-size: 0.875rem;
}

.room-btn-wrapper {
    text-align: center;
    margin-top: 3rem;
}


/* Services Section */

.section-services {
    padding: 5rem 0;
    background-color: var(--primary-dark);
    color: var(--white);
    position: relative;
    overflow: hidden;
}

.service-bg-icon {
    position: absolute;
    top: 0;
    right: 0;
    padding: 3rem;
    opacity: 0.05;
    font-size: 8rem;
    pointer-events: none;
}

.service-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
}

@media (min-width: 768px) {
    .service-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

.service-item {
    text-align: center;
    padding: 1.5rem;
    border-radius: 0.5rem;
    transition: background 0.3s;
}

.service-item:hover {
    background-color: rgba(255, 255, 255, 0.05);
}

.service-icon {
    width: 4rem;
    height: 4rem;
    margin: 0 auto 1rem;
    background: rgba(197, 160, 89, 0.1);
    color: var(--primary-gold);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    transition: all 0.3s;
}

.service-item:hover .service-icon {
    background: var(--primary-gold);
    color: var(--primary-dark);
}

.service-title {
    font-weight: 700;
    font-size: 1.125rem;
    margin-bottom: 0.5rem;
}

.service-text {
    color: #9ca3af;
    font-size: 0.875rem;
}


/* Promotion Section */

.section-promo {
    padding: 5rem 0;
    background-color: var(--bg-light);
}

.promo-header-flex {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-bottom: 3rem;
}

.promo-header-flex .btn-text {
    display: none;
}

@media(min-width: 768px) {
    .promo-header-flex .btn-text {
        display: inline-block;
    }
}

.promo-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
}

@media(min-width: 768px) {
    .promo-grid {
        grid-template-columns: 1fr 1fr;
    }
}

.promo-card {
    background: var(--white);
    border-radius: 1rem;
    padding: 2rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5rem;
    border: 1px solid #f3f4f6;
}

@media(min-width: 768px) {
    .promo-card {
        flex-direction: row;
        text-align: left;
    }
}

.promo-badge {
    position: absolute;
    top: 0;
    right: 0;
    background: #ef4444;
    color: white;
    font-size: 0.75rem;
    font-weight: 700;
    padding: 0.25rem 0.75rem;
    border-bottom-left-radius: 0.5rem;
}

.promo-icon {
    width: 6rem;
    height: 6rem;
    flex-shrink: 0;
    background: #fefce8;
    border: 2px solid var(--primary-gold);
    color: var(--primary-gold);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
}

.promo-info h3 {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-main);
    margin-bottom: 0.5rem;
}

.promo-desc {
    color: var(--text-light);
    font-size: 0.875rem;
    margin-bottom: 1rem;
}

.promo-meta {
    display: flex;
    gap: 0.75rem;
    align-items: center;
    justify-content: center;
}

@media(min-width: 768px) {
    .promo-meta {
        justify-content: flex-start;
    }
}

.code-box {
    background: #f3f4f6;
    padding: 0.25rem 0.75rem;
    border-radius: 0.25rem;
    font-family: monospace;
    font-size: 0.875rem;
    border: 1px solid #e5e7eb;
}

.discount-val {
    color: #ef4444;
    font-weight: 700;
}

.copy-btn {
    background: none;
    border: none;
    color: var(--primary-gold);
    text-decoration: underline;
    font-weight: 600;
    cursor: pointer;
    font-size: 0.875rem;
}

.copy-btn:hover {
    color: var(--primary-dark);
}


/* Testimonials Section */

.section-testimonial {
    padding: 5rem 0;
    background-color: var(--white);
}

.testimonial-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
}

@media(min-width: 768px) {
    .testimonial-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

.testimonial-card {
    background: var(--bg-light);
    padding: 2rem;
    border-radius: 0.75rem;
    position: relative;
}

.quote-icon {
    position: absolute;
    top: 1rem;
    left: 1rem;
    font-size: 2rem;
    color: rgba(197, 160, 89, 0.2);
}

.testimonial-text {
    position: relative;
    z-index: 10;
    font-style: italic;
    color: var(--text-light);
    margin-bottom: 1.5rem;
}

.user-profile {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.user-avatar {
    width: 3rem;
    height: 3rem;
    border-radius: 50%;
}

.user-name {
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--text-main);
}

.star-rating {
    color: #facc15;
    font-size: 0.75rem;
}


/* CTA Section */

.section-cta {
    padding: 4rem 1rem;
    background-color: var(--primary-gold);
    text-align: center;
}

.cta-content {
    max-width: 56rem;
    margin: 0 auto;
}

.cta-title {
    font-family: var(--font-serif);
    font-size: 2.25rem;
    font-weight: 700;
    color: var(--primary-dark);
    margin-bottom: 1rem;
}

.cta-text {
    color: rgba(17, 24, 39, 0.8);
    font-size: 1.125rem;
    margin-bottom: 2rem;
}


/* =========================================
   5. FLASH MESSAGES & FOOTER
   ========================================= */


/* Flash Messages */

.flash-container {
    max-width: 80rem;
    margin: 1.5rem auto 0;
    padding: 0 1rem;
}

.flash-success,
.flash-error {
    padding: 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    border-radius: 0.375rem;
    margin-bottom: 1rem;
}

.flash-success {
    background-color: #f0fdf4;
    border-left: 4px solid #22c55e;
    color: #15803d;
}

.flash-error {
    background-color: #fef2f2;
    border-left: 4px solid #ef4444;
    color: #991b1b;
}

.flash-icon-success {
    font-size: 1.25rem;
    margin-right: 0.75rem;
    color: #22c55e;
}

.flash-icon-error {
    font-size: 1.25rem;
    margin-right: 0.75rem;
    color: #ef4444;
}

.btn-close-success {
    color: #16a34a;
    cursor: pointer;
}

.btn-close-error {
    color: #dc2626;
    cursor: pointer;
}


/* Footer */

.footer-wrapper {
    background-color: #111827;
    color: white;
    margin-top: 5rem;
    border-top: 4px solid var(--primary-gold);
}

.footer-container {
    max-width: 80rem;
    margin: 0 auto;
    padding: 4rem 1rem 2rem;
}

.footer-grid {
    display: grid;
    grid-template-columns: repeat(1, minmax(0, 1fr));
    gap: 3rem;
    margin-bottom: 3rem;
}

@media (min-width: 768px) {
    .footer-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (min-width: 1024px) {
    .footer-grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
    }
}

.footer-brand {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.footer-logo-icon {
    width: 2rem;
    height: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--primary-gold);
    color: #111827;
    border-radius: 9999px;
}

.footer-logo-text {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: 0.025em;
}

.footer-desc {
    color: #9ca3af;
    font-size: 0.875rem;
    line-height: 1.625;
}

.footer-social-link {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 9999px;
    background-color: #1f2937;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
}

.footer-social-link:hover {
    background-color: var(--primary-gold);
    color: #111827;
}

.footer-heading {
    font-family: var(--font-serif);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--primary-gold);
    margin-bottom: 1.5rem;
}

.footer-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    color: #9ca3af;
}

.footer-link {
    display: flex;
    align-items: center;
    transition: color 0.3s;
}

.footer-link:hover {
    color: white;
}

.footer-link i {
    margin-right: 0.5rem;
    font-size: 0.75rem;
}

.footer-contact-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
}

.footer-contact-icon {
    color: var(--primary-gold);
    margin-top: 0.25rem;
}

.footer-input {
    background-color: #1f2937;
    border: none;
    color: white;
    padding: 0.75rem 1rem;
    border-radius: 0.5rem;
    width: 100%;
    outline: none;
}

.footer-input:focus {
    box-shadow: 0 0 0 1px var(--primary-gold);
}

.footer-btn-submit {
    background-color: var(--primary-gold);
    color: #111827;
    font-weight: 700;
    padding: 0.75rem;
    border-radius: 0.5rem;
    width: 100%;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
    transition: background-color 0.3s;
    margin-top: 0.5rem;
}

.footer-btn-submit:hover {
    background-color: white;
}

.footer-bottom {
    border-top: 1px solid #1f2937;
    padding-top: 2rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    color: #6b7280;
    font-size: 0.875rem;
}

@media (min-width: 768px) {
    .footer-bottom {
        flex-direction: row;
    }
}

html {
    scroll-behavior: smooth;
    /* Giúp cuộn trang mượt mà */
}


/* =========================================
   6. ANIMATIONS (Thêm mới)
   ========================================= */

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translate3d(0, 40px, 0);
    }
    to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
    }
}

.animate-fade-in-up {
    animation-name: fadeInUp;
    animation-duration: 0.8s;
    animation-fill-mode: both;
}


/* =========================================
   7. ROOM LISTING PAGE (Trang danh sách)
   ========================================= */


/* --- Page Banner (Banner đầu trang) --- */

.page-banner {
    position: relative;
    background-color: var(--primary-dark);
    padding: 6rem 0;
    text-align: center;
    color: var(--white);
    margin-bottom: 3rem;
    overflow: hidden;
}

.banner-bg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
}

.banner-bg img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.3;
    transform: scale(1.05);
}

.banner-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to bottom, rgba(17, 24, 39, 0.5), rgba(17, 24, 39, 0.9));
}

.banner-content {
    position: relative;
    z-index: 10;
    max-width: 80rem;
    margin: 0 auto;
    padding: 0 1rem;
}

.banner-subtitle {
    color: var(--primary-gold);
    font-weight: 700;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    font-size: 0.875rem;
    display: block;
    margin-bottom: 1rem;
}

.banner-title {
    font-family: var(--font-serif);
    font-size: 2.25rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    line-height: 1.2;
}

@media (min-width: 768px) {
    .banner-title {
        font-size: 3.75rem;
    }
}

.banner-desc {
    color: #d1d5db;
    /* Gray-300 */
    font-size: 1.125rem;
    font-weight: 300;
    max-width: 42rem;
    margin: 0 auto;
}


/* --- Filter Bar (Bộ lọc) --- */

.filter-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #f3f4f6;
}

.filter-count {
    color: var(--text-light);
    font-size: 0.875rem;
}

.filter-count strong {
    color: var(--primary-dark);
    font-weight: 700;
}

.filter-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.filter-select {
    font-size: 0.875rem;
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    padding: 0.25rem 2rem 0.25rem 0.5rem;
    color: #374151;
    outline: none;
}

.filter-select:focus {
    border-color: var(--primary-gold);
    box-shadow: 0 0 0 1px var(--primary-gold);
}


/* --- Cập nhật .room-card (Nâng cấp giao diện Luxury) --- */


/* Ghi đè hoặc cập nhật vào class .room-card cũ ở phần 4 */

.room-card {
    background: var(--white);
    border-radius: 0.75rem;
    border: 1px solid #f3f4f6;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    height: 100%;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    transition: all 0.5s ease;
}

.room-card:hover {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    transform: translateY(-4px);
    /* Nhẹ nhàng hơn */
}


/* Ảnh phòng lớn hơn cho trang danh sách */

.room-card .room-img-wrap {
    height: 18rem;
    /* Tăng từ 16rem lên 18rem (h-72) */
    position: relative;
    overflow: hidden;
}


/* Hiệu ứng overlay đen khi hover */

.room-overlay-hover {
    position: absolute;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.2);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.room-card:hover .room-overlay-hover {
    opacity: 1;
}


/* Tag giá tiền kiểu mới (Glassmorphism) */

.room-price-tag {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background-color: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    border: 1px solid #f3f4f6;
    z-index: 10;
}

.room-price-amount {
    color: var(--primary-dark);
    font-weight: 700;
    font-size: 1.125rem;
    font-family: var(--font-serif);
}

.room-price-unit {
    font-size: 0.75rem;
    color: var(--text-light);
    font-weight: 500;
}


/* Nội dung card */

.room-body {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.room-title-link {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary-dark);
    text-decoration: none;
    transition: color 0.3s;
    display: block;
    margin-bottom: 0.75rem;
}

.room-card:hover .room-title-link {
    color: var(--primary-gold);
}

.room-specs {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    font-size: 0.875rem;
    color: var(--text-light);
    margin-bottom: 1.25rem;
    padding-bottom: 1.25rem;
    border-bottom: 1px solid #f3f4f6;
}

.spec-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.spec-item i {
    color: var(--primary-gold);
    font-size: 1.125rem;
}

.room-short-desc {
    color: #4b5563;
    /* Gray-600 */
    font-size: 0.875rem;
    line-height: 1.625;
    margin-bottom: 1.5rem;
    flex-grow: 1;
    /* Line clamp 3 dòng */
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}


/* Nút full width trong card */

.btn-card-action {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    padding: 0.875rem;
    border: 1px solid var(--primary-dark);
    color: var(--primary-dark);
    font-weight: 700;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.025em;
    border-radius: 0.5rem;
    text-decoration: none;
    transition: all 0.3s;
    background: transparent;
    margin-top: auto;
}

.btn-card-action:hover {
    background-color: var(--primary-dark);
    color: var(--white);
}

.btn-card-action i {
    margin-left: 0.5rem;
    transition: transform 0.3s;
}

.btn-card-action:hover i {
    transform: translateX(4px);
}


/* --- Pagination (Phân trang) --- */

.pagination-wrapper {
    margin-top: 4rem;
    display: flex;
    justify-content: center;
}

.pagination-box {
    background: var(--white);
    padding: 0.75rem 1rem;
    border-radius: 0.5rem;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    border: 1px solid #f3f4f6;
}


/* --- Guarantee Section (Cam kết dịch vụ - Cuối trang) --- */

.section-guarantee {
    background-color: #f9fafb;
    /* Gray-50 */
    padding: 4rem 0;
    border-top: 1px solid #e5e7eb;
}

.guarantee-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    text-align: center;
}

@media (min-width: 768px) {
    .guarantee-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

.guarantee-icon-box {
    width: 4rem;
    height: 4rem;
    background-color: var(--white);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    color: var(--primary-gold);
    font-size: 1.5rem;
}

.guarantee-title {
    font-weight: 700;
    color: var(--primary-dark);
    margin-bottom: 0.5rem;
}

.guarantee-desc {
    color: var(--text-light);
    font-size: 0.875rem;
}


/* =========================================
   8. FILTER SIDEBAR (Bộ lọc nâng cao)
   ========================================= */


/* Layout 2 cột: Sidebar + List */

.listing-layout {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    position: relative;
}

@media (min-width: 1024px) {
    .listing-layout {
        display: grid;
        grid-template-columns: 280px 1fr;
        /* Sidebar 280px, còn lại là list */
        align-items: start;
    }
}


/* Sidebar Wrapper */

.sidebar-filter {
    background-color: var(--white);
    border: 1px solid #f3f4f6;
    border-radius: 0.75rem;
    padding: 1.5rem;
    position: sticky;
    top: 6rem;
    /* Để khi cuộn trang, sidebar trượt theo */
    z-index: 10;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.filter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #f3f4f6;
}

.filter-title {
    font-family: var(--font-serif);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--primary-dark);
}

.btn-reset {
    font-size: 0.75rem;
    color: var(--text-light);
    text-decoration: underline;
    cursor: pointer;
    background: none;
    border: none;
}

.btn-reset:hover {
    color: var(--primary-gold);
}


/* Các nhóm lọc */

.filter-group {
    margin-bottom: 1.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px dashed #e5e7eb;
}

.filter-group:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.filter-group-title {
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--primary-dark);
    margin-bottom: 1rem;
    display: block;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}


/* Input range (Khoảng giá) */

.price-inputs {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.form-input {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    outline: none;
    transition: border-color 0.2s;
}

.form-input:focus {
    border-color: var(--primary-gold);
    box-shadow: 0 0 0 1px var(--primary-gold);
}

.price-separator {
    color: #9ca3af;
}


/* Custom Checkbox Style */

.checkbox-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.checkbox-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    cursor: pointer;
    font-size: 0.875rem;
    color: #4b5563;
    transition: color 0.2s;
}

.checkbox-item:hover {
    color: var(--primary-gold);
}

.checkbox-item input[type="checkbox"] {
    accent-color: var(--primary-gold);
    /* Màu check mặc định của trình duyệt */
    width: 1rem;
    height: 1rem;
    cursor: pointer;
}

.checkbox-count {
    margin-left: auto;
    font-size: 0.75rem;
    color: #9ca3af;
}


/* Nút Lọc Mobile (Chỉ hiện ở mobile) */

.mobile-filter-btn {
    display: block;
    width: 100%;
    margin-bottom: 1rem;
}

@media (min-width: 1024px) {
    .mobile-filter-btn {
        display: none;
    }
}


/* =========================================
   9. UTILITIES & HELPER CLASSES (Thêm mới để làm sạch Blade)
   ========================================= */


/* Thay thế cho style="padding-bottom: 6rem" */

.pb-section {
    padding-bottom: 6rem;
}


/* Thay thế cho style="width: 100%" ở nút */

.w-full {
    width: 100%;
}


/* Wrapper cho nút submit bộ lọc */

.filter-submit-wrap {
    margin-top: 1.5rem;
}


/* =========================================
   10. EMPTY STATE (Trạng thái không tìm thấy)
   ========================================= */


/* Thay thế cho cụm style dài dòng khi không tìm thấy phòng */

.empty-state-container {
    grid-column: 1 / -1;
    /* Tràn hết số cột */
    text-align: center;
    padding: 4rem 1rem;
}

.empty-state-icon {
    font-size: 4rem;
    color: #d1d5db;
    /* Gray-300 */
    margin-bottom: 1rem;
}

.empty-state-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--primary-dark);
}

.empty-state-text {
    color: var(--text-light);
    margin-top: 0.5rem;
    margin-bottom: 1.5rem;
}


/* =========================================
   11. MOBILE FILTER TOGGLE (Xử lý ẩn/hiện lọc trên Mobile)
   ========================================= */

@media (max-width: 1023px) {
    /* Mặc định ẩn Sidebar trên mobile */
    .sidebar-filter {
        display: none;
        margin-bottom: 2rem;
    }
    /* Khi có class .active (do JS thêm vào) thì hiện ra */
    .sidebar-filter.active {
        display: block;
        animation: fadeInUp 0.5s ease;
        /* Hiệu ứng trượt lên nhẹ */
    }
}


/* --- TRẠNG THÁI HẾT PHÒNG (SOLD OUT) --- */


/* Làm mờ và xám màu card */

.room-card.sold-out {
    opacity: 0.7;
    filter: grayscale(100%);
    /* Chuyển ảnh sang trắng đen */
    background-color: #f3f4f6;
    pointer-events: none;
    /* Không cho click vào link */
    position: relative;
}


/* Vẫn cho phép click vào nút xem chi tiết (để khách biết tại sao hết) */

.room-card.sold-out .btn-card-action {
    pointer-events: auto;
    background-color: #9ca3af;
    border-color: #9ca3af;
    color: white;
    cursor: not-allowed;
}


/* Nhãn HẾT PHÒNG đè lên ảnh */

.sold-out-badge {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-15deg);
    background-color: rgba(220, 38, 38, 0.9);
    /* Màu đỏ đậm */
    color: white;
    padding: 0.75rem 2rem;
    font-size: 1.5rem;
    font-weight: 800;
    text-transform: uppercase;
    border: 4px solid white;
    z-index: 20;
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
    white-space: nowrap;
}
</file>

<file path="resources/js/client.js">
import './bootstrap';

// Log kiểm tra
console.log('Client Assets Loaded via Vite!');

document.addEventListener('DOMContentLoaded', () => {

    // ==========================================
    // 1. XỬ LÝ HEADER TRONG SUỐT -> CÓ NỀN (Sticky Header)
    // ==========================================
    const header = document.querySelector('.header-wrapper');

    if (header) {
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                // Thêm class .is-scrolled (đã định nghĩa trong CSS: nền trắng mờ, bóng đổ)
                header.classList.add('is-scrolled');
            } else {
                // Gỡ class để trở về trạng thái trong suốt
                header.classList.remove('is-scrolled');
            }
        });
    }

    // ==========================================
    // 2. XỬ LÝ MENU MOBILE (Toggle) - Phần còn thiếu
    // ==========================================
    const mobileToggleBtn = document.querySelector('.mobile-toggle');
    const mobileMenu = document.querySelector('.mobile-menu-wrapper');

    if (mobileToggleBtn && mobileMenu) {
        mobileToggleBtn.addEventListener('click', (e) => {
            e.preventDefault();
            // Toggle class 'is-open' để hiện/ẩn menu
            mobileMenu.classList.toggle('is-open');

            // Đổi icon từ 3 gạch sang dấu X (nếu dùng FontAwesome)
            const icon = mobileToggleBtn.querySelector('i');
            if (icon) {
                if (mobileMenu.classList.contains('is-open')) {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-xmark');
                } else {
                    icon.classList.remove('fa-xmark');
                    icon.classList.add('fa-bars');
                }
            }
        });
    }

    // ==========================================
    // 3. TỰ ĐỘNG ẨN FLASH MESSAGE (Thông báo thành công/lỗi)
    // ==========================================
    const flashMessages = document.querySelectorAll('.flash-success, .flash-error');

    if (flashMessages.length > 0) {
        flashMessages.forEach(msg => {
            // Đợi 5 giây (5000ms) rồi bắt đầu mờ dần
            setTimeout(() => {
                msg.style.transition = "opacity 0.5s ease";
                msg.style.opacity = "0";

                // Sau khi mờ hẳn thì xóa khỏi DOM
                setTimeout(() => msg.remove(), 500);
            }, 5000);

            // Nếu người dùng bấm nút tắt (dấu X) thủ công
            const closeBtn = msg.querySelector('.btn-close-success, .btn-close-error');
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    msg.style.display = 'none';
                });
            }
        });
    }

});
</file>

<file path="resources/views/admin/dat_phong/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('content')

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-6"></div>
    
    <div class="toolbar mb-6 flex items-center justify-between">
        <h1 class="text-2xl font-semibold text-gray-900">Quản lý Đơn đặt phòng</h1>
    </div>

    @if(session('success'))
        <div class="p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50" role="alert">
            <span class="font-medium">Thành công!</span> {{ session('success') }}
        </div>
    @endif
    @if(session('error'))
        <div class="p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50" role="alert">
            <span class="font-medium">Lỗi!</span> {{ session('error') }}
        </div>
    @endif
    
    <div class="card-common bg-white shadow rounded-lg overflow-hidden">
        
        <form action="{{ route('admin.dat-phong.xoa-hang-loat') }}" method="POST" onsubmit="return confirm('Bạn có chắc chắn muốn XÓA VĨNH VIỄN các đơn đặt phòng đã chọn? Hành động này không thể hoàn tác và sẽ mở lại phòng.')">
            @csrf
            @method('DELETE') 

            <div class="toolbar p-4 flex justify-between items-center">
                <p class="text-sm text-gray-600">Tổng số đơn: {{ $datPhongs->count() }}</p>
                <button type="submit" id="mass-delete-btn" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition text-sm font-medium disabled:opacity-50" disabled>
                    <i class="fa fa-trash"></i> Xóa đã chọn (0)
                </button>
            </div>

            <div class="overflow-x-auto">
                @if($datPhongs->isEmpty())
                    <div class="p-10 text-center flex flex-col items-center justify-center text-gray-500">
                        <i class="fa-solid fa-hotel text-4xl mb-3 text-gray-300"></i>
                        <p>Chưa có đơn đặt phòng nào trong hệ thống.</p>
                    </div>
                @else
                <table class="table-common min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-3 py-3 text-left w-10">
                                <input type="checkbox" id="select-all" class="rounded text-brand-900 border-gray-300">
                            </th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mã Đơn</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Khách hàng</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Chi tiết Phòng</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tổng tiền</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trạng thái</th>
                            <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20">Hóa đơn</th>
                            <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24">Xử lý Đơn</th>
                            <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-16">Sửa</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-100">
                        @foreach ($datPhongs as $dp)
                        <tr class="hover:bg-gray-50">
                            
                            <td class="px-3 py-4">
                                <input type="checkbox" name="ids[]" value="{{ $dp->id }}" class="row-checkbox rounded text-brand-900 border-gray-300">
                            </td>

                            <td class="px-6 py-4 text-sm font-semibold text-gray-900">#{{ $dp->id }}</td>
                            
                            <td class="px-6 py-4 text-sm font-medium text-gray-900">
                                @if($dp->user)
                                    {{ $dp->user->name }} 
                                    <div class="text-xs text-gray-500">{{ $dp->user->phone }}</div>
                                @else
                                    —
                                @endif
                            </td>
                            
                            <td class="px-6 py-4 text-xs text-gray-700">
                                @if($dp->chiTietDatPhongs && $dp->chiTietDatPhongs->isNotEmpty())
                                    @php $ct = $dp->chiTietDatPhongs->first(); @endphp
                                    <div class="font-medium">{{ $ct->loaiPhong->ten_loai_phong ?? 'N/A' }}</div>
                                    <div class="text-gray-500">Phòng: **{{ $ct->phong->so_phong ?? 'Chưa gán' }}**</div>
                                @else
                                    —
                                @endif
                            </td>
                            
                            <td class="px-6 py-4 text-sm font-bold">
                                <div class="text-gray-900">{{ number_format($dp->tong_tien, 0, ',', '.') }} VND</div>
                                @if($dp->discount_amount > 0)
                                    <div class="text-xs text-red-500">Giảm: {{ number_format($dp->discount_amount) }}đ ({{ $dp->promotion_code }})</div>
                                @endif
                            </td>
                            
                            <td class="px-6 py-4 text-center">
                                @php
                                    $status = $dp->trang_thai;
                                    $payment = $dp->payment_status;

                                    if ($status == 'pending') $badgeClass = 'bg-yellow-100 text-yellow-800';
                                    elseif ($status == 'confirmed') $badgeClass = 'bg-blue-100 text-blue-800';
                                    elseif ($status == 'cancelled') $badgeClass = 'bg-red-100 text-red-800';
                                    else $badgeClass = 'bg-gray-100 text-gray-800';
                                @endphp
                                
                                <span class="inline-block px-2 py-0.5 rounded-full text-xs font-medium {{ $badgeClass }} mb-1">
                                    {{ ucfirst($status) }}
                                </span>
                                
                                <div class="text-xs text-gray-500">
                                    @if($payment == 'paid')
                                        <span class="text-green-600 font-medium">Đã TT</span>
                                    @else
                                        <span class="text-red-500">Chưa TT</span>
                                    @endif
                                </div>
                            </td>
                            
                            <td class="px-6 py-4 text-center">
                                <a href="{{ route('admin.dat-phong.hoa-don', $dp->id) }}" 
                                   class="btn-action inline-flex items-center px-3 py-1 bg-indigo-500 text-white rounded-md hover:bg-indigo-600 transition text-xs font-medium" 
                                   title="Xem chi tiết thanh toán/Hóa đơn">
                                    <i class="fa-solid fa-file-invoice-dollar"></i>
                                </a>
                            </td>
                            
                            <td class="px-6 py-4 text-center text-xs">
                                <div class="flex flex-col space-y-1 items-center justify-center">
                                    @if($dp->trang_thai == 'pending')
                                        <a href="{{ route('admin.dat-phong.duyet', $dp->id) }}" 
                                           class="text-green-600 hover:text-green-800" 
                                           onclick="return confirm('DUYỆT đơn và KHÓA phòng này?')" 
                                           title="Duyệt đơn">
                                            <i class="fa-solid fa-check mr-1"></i> Duyệt
                                        </a>
                                        <a href="{{ route('admin.dat-phong.huy', $dp->id) }}" 
                                           class="text-red-600 hover:text-red-800" 
                                           onclick="return confirm('HỦY đơn #{{ $dp->id }}?')" 
                                           title="Hủy đơn">
                                            <i class="fa-solid fa-times mr-1"></i> Hủy
                                        </a>
                                        
                                    @elseif($dp->trang_thai == 'confirmed')
                                        <a href="{{ route('admin.dat-phong.huy', $dp->id) }}" 
                                           class="text-blue-600 hover:text-blue-800" 
                                           onclick="return confirm('Xác nhận khách đã TRẢ PHÒNG và MỞ lại phòng?')" 
                                           title="Trả phòng">
                                            <i class="fa-solid fa-arrow-right-from-bracket mr-1"></i> Trả phòng
                                        </a>
                                    @else
                                        <span class="text-gray-400 italic">—</span>
                                    @endif
                                </div>
                            </td>

                            <td class="px-6 py-4 text-center">
                                <a href="{{ route('admin.dat-phong.sua', ['id' => $dp->id]) }}" 
                                   class="text-blue-600 hover:text-blue-800" 
                                   title="Sửa thông tin cơ bản">
                                    <i class="fa fa-edit"></i>
                                </a>
                            </td>
                        </tr>
                        @endforeach
                    </tbody>
                </table>
                @endif
            </div>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const selectAll = document.getElementById('select-all');
        const checkboxes = document.querySelectorAll('.row-checkbox');
        const deleteBtn = document.getElementById('mass-delete-btn');

        function updateDeleteButton() {
            const checkedCount = document.querySelectorAll('.row-checkbox:checked').length;
            deleteBtn.textContent = 'Xóa đã chọn (' + checkedCount + ')';
            deleteBtn.disabled = checkedCount === 0;
        }

        selectAll.addEventListener('change', function() {
            checkboxes.forEach(cb => {
                cb.checked = selectAll.checked;
            });
            updateDeleteButton();
        });

        checkboxes.forEach(cb => {
            cb.addEventListener('change', function() {
                if (!this.checked) {
                    selectAll.checked = false;
                } else {
                    const allChecked = Array.from(checkboxes).every(c => c.checked);
                    selectAll.checked = allChecked;
                }
                updateDeleteButton();
            });
        });

        updateDeleteButton(); // Khởi tạo lần đầu
    });
</script>

@endsection
</file>

<file path="resources/views/admin/layouts/sidebar.blade.php">
<div class="flex h-screen overflow-hidden">
    
    <!-- A. SIDEBAR -->
    <aside class="fixed inset-y-0 left-0 z-50 w-64 bg-brand-900 text-white transition-transform duration-300 transform lg:translate-x-0 lg:static lg:inset-0 flex flex-col"
            :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full'">
        
        <!-- Logo -->
        <div class="flex items-center justify-center h-20 border-b border-gray-800 bg-brand-950">
            <a href="{{ route('admin.dashboard') }}" class="flex items-center gap-2">
                <i class="fa-solid fa-crown text-brand-gold text-2xl"></i>
                <span class="text-xl font-bold tracking-wide">Luxury<span class="text-brand-gold"> Admin </span></span>
            </a>
        </div>

        <!-- Menu Items -->
        <nav class="flex-1 overflow-y-auto py-4 space-y-1 px-3">
            <!-- Dashboard -->
            <a href="{{ route('admin.dashboard') }}" class="flex items-center px-4 py-3 text-sm font-medium rounded-lg hover:bg-gray-800 hover:text-brand-gold transition {{ request()->routeIs('admin.dashboard') ? 'bg-gray-800 text-brand-gold' : 'text-gray-300' }}">
                <i class="fa-solid fa-gauge-high w-6 text-lg"></i>
                <span class="ml-3">Tổng quan</span>
            </a>

            <!-- Quản lý Đặt phòng (Table: dat_phongs) -->
            <p class="px-4 mt-6 mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">Vận hành</p>
            <a href="{{ route('admin.dat-phong') }}" class="flex items-center px-4 py-3 text-sm font-medium rounded-lg text-gray-300 hover:bg-gray-800 hover:text-brand-gold transition">
                <i class="fa-solid fa-calendar-check w-6 text-lg"></i>
                <span class="ml-3">Đặt phòng</span>
                <!-- Badge thông báo giả lập -->
                <span class="ml-auto bg-red-500 text-white py-0.5 px-2 rounded-full text-xs">3</span>
            </a>
            
            <!-- Quản lý Phòng (Table: phongs & loai_phongs) -->
            <div x-data="{ open: false }">
                <button @click="open = !open" class="flex items-center w-full px-4 py-3 text-sm font-medium rounded-lg text-gray-300 hover:bg-gray-800 hover:text-brand-gold transition justify-between">
                    <div class="flex items-center">
                        <i class="fa-solid fa-door-open w-6 text-lg"></i>
                        <span class="ml-3">Phòng & Giá</span>
                    </div>
                    <i class="fa-solid fa-chevron-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
                </button>
                <div x-show="open" class="pl-11 pr-2 space-y-1 mt-1">
                    <a href="{{ route('admin.phong') }}" class="block px-3 py-2 text-sm text-gray-400 hover:text-white rounded hover:bg-gray-700">Danh sách phòng</a>
                    <a href="{{ route('admin.loai-phong') }}" class="block px-3 py-2 text-sm text-gray-400 hover:text-white rounded hover:bg-gray-700">Loại phòng</a>
                </div>
            </div>

             <a href="{{ route('admin.tien-nghi') }}" class="flex items-center px-4 py-3 text-sm font-medium rounded-lg text-gray-300 hover:bg-gray-800 hover:text-brand-gold transition">
                <i class="fa-solid fa-ticket w-6 text-lg"></i>
                <span class="ml-3">Tiện nghi</span>
            </a>
            

            <!-- Quản lý Khuyến mãi (Table: khuyen_mais) -->
            <a href="{{ route('admin.khuyen-mai') }}" class="flex items-center px-4 py-3 text-sm font-medium rounded-lg text-gray-300 hover:bg-gray-800 hover:text-brand-gold transition">
                <i class="fa-solid fa-ticket w-6 text-lg"></i>
                <span class="ml-3">Khuyến mãi</span>
            </a>

            <!-- Quản lý Người dùng (Table: users) -->
            <p class="px-4 mt-6 mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">Hệ thống</p>
            <a href="{{ route('admin.users') }}" class="flex items-center px-4 py-3 text-sm font-medium rounded-lg text-gray-300 hover:bg-gray-800 hover:text-brand-gold transition">
                <i class="fa-solid fa-users w-6 text-lg"></i>
                <span class="ml-3">Người dùng</span>
            </a>
            
            <!-- Doanh thu / Hóa đơn (Table: hoa_dons) -->
            <a href="#" class="flex items-center px-4 py-3 text-sm font-medium rounded-lg text-gray-300 hover:bg-gray-800 hover:text-brand-gold transition">
                <i class="fa-solid fa-chart-line w-6 text-lg"></i>
                <span class="ml-3">Báo cáo doanh thu</span>
            </a>
        </nav>

        <!-- User Info (Bottom Sidebar) -->
        <div class="border-t border-gray-800 p-4">
            <div class="flex items-center">
                <div class="w-9 h-9 rounded-full bg-brand-gold flex items-center justify-center text-brand-900 font-bold">A</div>
                <div class="ml-3">
                    <p class="text-sm font-medium text-white">{{ Auth::user()->name ?? 'Admin' }}</p>
                    <form method="POST" action="{{ route('logout') }}">
                        @csrf
                        <button class="text-xs text-gray-400 hover:text-white">Đăng xuất</button>
                    </form>
                </div>
            </div>
        </div>
    </aside>
</file>

<file path="resources/views/admin/loai_phong/danh_sach.blade.php">
@extends('admin.layouts.dashboard')

@section('content')

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-6"></div>
    
    <div class="toolbar mb-6 flex justify-between items-center">
        <h1 class="text-2xl font-bold text-gray-900">Quản lý Hạng phòng</h1>
        <a href="{{ route('admin.loai-phong.them') }}" class="btn-primary inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-semibold shadow-sm">
            <i class="fa fa-plus"></i> Thêm mới
        </a>
    </div>

    <div class="card-common bg-white shadow rounded-lg overflow-hidden">
        <div class="overflow-x-auto">
            @if($loaiPhongs->isEmpty())
                <div class="p-10 text-center flex flex-col items-center justify-center text-gray-500">
                    <i class="fa-solid fa-folder-open text-4xl mb-3 text-gray-300"></i>
                    <p>Chưa có loại phòng nào. Hãy thêm mới ngay!</p>
                </div>
            @else
            <table class="table-common min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16">#</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24">Hình ảnh</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tên loại phòng</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Chi tiết</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3">Tiện nghi</th>
                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24">Hành động</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach ($loaiPhongs as $lp)
                    <tr class="hover:bg-gray-50 transition-colors">
                        <td class="px-6 py-4 text-sm text-gray-500">{{ $loop->iteration }}</td>
                        
                        <td class="px-6 py-4 text-sm">
                            <div class="h-12 w-20 rounded overflow-hidden border border-gray-200 bg-gray-100">
                                @if($lp->hinh_anh)
                                    <img src="{{ asset($lp->hinh_anh) }}" alt="{{ $lp->ten_loai_phong }}" class="h-full w-full object-cover">
                                @else
                                    <div class="h-full w-full flex items-center justify-center text-gray-400">
                                        <i class="fa-regular fa-image"></i>
                                    </div>
                                @endif
                            </div>
                        </td>

                        <td class="px-6 py-4">
                            <div class="text-sm font-semibold text-gray-900">{{ $lp->ten_loai_phong }}</div>
                            <div class="text-sm text-blue-600 font-medium">{{ number_format($lp->gia, 0, ',', '.') }} đ / đêm</div>
                        </td>

                        <td class="px-6 py-4 text-sm text-gray-700 space-y-1">
                            <div class="flex items-center gap-2">
                                <i class="fa-solid fa-user-group text-gray-400 w-4"></i>
                                <span>{{ $lp->so_nguoi }} người</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fa-solid fa-ruler-combined text-gray-400 w-4"></i>
                                <span>{{ $lp->dien_tich ?? '--' }} m²</span>
                            </div>
                        </td>

                        <td class="px-6 py-4">
                            <div class="flex flex-wrap gap-1">
                                {{-- Duyệt qua quan hệ tienNghis --}}
                                @forelse($lp->tienNghis as $tn)
                                    <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-50 text-blue-700 border border-blue-100">
                                        {{ $tn->ten_tien_nghi }}
                                    </span>
                                @empty
                                    <span class="text-xs text-gray-400 italic">Không có tiện nghi</span>
                                @endforelse
                            </div>
                        </td>

                        <td class="px-6 py-4 text-center">
                            <div class="flex items-center justify-center gap-3">
                                <a href="{{ route('admin.loai-phong.sua', ['id' => $lp->id]) }}" 
                                   class="text-gray-500 hover:text-blue-600 transition-colors" 
                                   title="Sửa">
                                    <i class="fa-solid fa-pen-to-square text-lg"></i>
                                </a>
                                <a href="{{ route('admin.loai-phong.xoa', ['id' => $lp->id]) }}" 
                                   onclick="return confirm('Cảnh báo: Bạn có chắc muốn xóa loại phòng này? Hành động này sẽ xóa cả các phòng vật lý thuộc loại này.')" 
                                   class="text-gray-500 hover:text-red-600 transition-colors" 
                                   title="Xóa">
                                    <i class="fa-solid fa-trash-can text-lg"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
            @endif
        </div>
    </div>
</div>

@endsection
</file>

<file path="resources/views/admin/loai_phong/sua.blade.php">
@extends('admin.layouts.dashboard')

@section('content')
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6 bg-white rounded-lg shadow">
        
        <div class="toolbar mb-6 flex justify-between items-center border-b pb-4">
            <h2 class="text-xl font-bold text-gray-800">Cập nhật loại phòng</h2>
            <a href="{{ route('admin.loai-phong') }}" class="text-sm text-gray-600 hover:text-gray-900 flex items-center transition-colors">
                <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
            </a>
        </div>

        <form action="{{ route('admin.loai-phong.update', ['id' => $loaiPhong->id]) }}" method="POST" enctype="multipart/form-data">
            @csrf
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" for="ten_loai_phong">
                            Tên loại phòng <span class="text-red-500">*</span>
                        </label>
                        <input type="text" 
                               class="w-full rounded-md border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold sm:text-sm" 
                               id="ten_loai_phong" name="ten_loai_phong" 
                               value="{{ old('ten_loai_phong', $loaiPhong->ten_loai_phong) }}" 
                               required />
                        @error('ten_loai_phong') <p class="text-red-600 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="gia">
                                Giá (VNĐ) <span class="text-red-500">*</span>
                            </label>
                            <input type="number" id="gia" name="gia" 
                                   value="{{ old('gia', $loaiPhong->gia) }}" 
                                   class="w-full rounded-md border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold sm:text-sm" required />
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="so_nguoi">
                                Sức chứa <span class="text-red-500">*</span>
                            </label>
                            <input type="number" id="so_nguoi" name="so_nguoi" 
                                   value="{{ old('so_nguoi', $loaiPhong->so_nguoi) }}" 
                                   class="w-full rounded-md border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold sm:text-sm" min="1" required />
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" for="dien_tich">
                            Diện tích (m²)
                        </label>
                        <input type="number" id="dien_tich" name="dien_tich" 
                               value="{{ old('dien_tich', $loaiPhong->dien_tich) }}" 
                               class="w-full rounded-md border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold sm:text-sm" />
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tiện nghi phòng</label>
                        @if(isset($tienNghis) && count($tienNghis) > 0)
                            <div class="grid grid-cols-2 gap-3 p-4 border border-gray-200 rounded-md bg-gray-50 max-h-60 overflow-y-auto">
                                @foreach($tienNghis as $tn)
                                    <label class="inline-flex items-center space-x-2 cursor-pointer group">
                                        <input type="checkbox" 
                                               name="tien_nghi[]" 
                                               value="{{ $tn->id }}" 
                                               {{-- Kiểm tra: Nếu ID này có trong danh sách đã lưu -> Checked --}}
                                               {{ in_array($tn->id, $selectedTienNghis ?? []) ? 'checked' : '' }}
                                               class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                                        <span class="text-sm text-gray-700 group-hover:text-blue-600 transition-colors">
                                            @if($tn->icon) <i class="{{ $tn->icon }} mr-1 text-gray-400"></i> @endif
                                            {{ $tn->ten_tien_nghi }}
                                        </span>
                                    </label>
                                @endforeach
                            </div>
                        @else
                            <div class="p-4 bg-yellow-50 text-yellow-700 text-sm rounded-md border border-yellow-200">
                                Chưa có tiện nghi nào trong hệ thống.
                            </div>
                        @endif
                    </div>
                </div>

                <div class="space-y-4">
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Hình ảnh hiện tại</label>
                        
                        <div class="mb-2 h-48 w-full rounded-md border border-gray-200 bg-gray-100 flex items-center justify-center overflow-hidden relative group">
                            @if($loaiPhong->hinh_anh)
                                <img src="{{ asset($loaiPhong->hinh_anh) }}" alt="Current Image" class="h-full w-full object-cover">
                            @else
                                <span class="text-gray-400 text-sm">Chưa có ảnh</span>
                            @endif
                            
                            <img id="preview-img" src="#" class="absolute inset-0 h-full w-full object-cover hidden z-10">
                        </div>

                        <label class="block text-sm font-medium text-gray-700 mb-1" for="hinh_anh">
                            Thay đổi ảnh mới (Nếu cần)
                        </label>
                        <input class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" 
                               id="hinh_anh" name="hinh_anh" type="file" accept="image/*" onchange="previewImage(event)">
                        @error('hinh_anh') <p class="text-red-600 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                </div>
            </div>

            <div class="flex items-center justify-end pt-6 mt-6 border-t border-gray-200 gap-3">
                <a href="{{ route('admin.loai-phong') }}" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm font-medium transition-colors">
                    Hủy bỏ
                </a>
                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium shadow-sm transition-colors flex items-center gap-2">
                    <i class="fa fa-save"></i> Cập nhật
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    function previewImage(event) {
        const reader = new FileReader();
        reader.onload = function(){
            const output = document.getElementById('preview-img');
            output.src = reader.result;
            output.classList.remove('hidden'); // Hiện ảnh preview
        };
        reader.readAsDataURL(event.target.files[0]);
    }
</script>
@endsection
</file>

<file path="resources/views/admin/loai_phong/them.blade.php">
@extends('admin.layouts.dashboard')

@section('content')
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6 bg-white rounded-lg shadow">
        
        <div class="toolbar mb-6 flex justify-between items-center border-b pb-4">
            <h2 class="text-xl font-bold text-gray-800">Thêm loại phòng mới</h2>
            <a href="{{ route('admin.loai-phong') }}" class="text-sm text-gray-600 hover:text-gray-900 flex items-center transition-colors">
                <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
            </a>
        </div>

        <form action="{{ route('admin.loai-phong.store') }}" method="POST" enctype="multipart/form-data">
            @csrf
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" for="ten_loai_phong">
                            Tên loại phòng <span class="text-red-500">*</span>
                        </label>
                        <input type="text" class="w-full rounded-md border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold sm:text-sm" 
                               id="ten_loai_phong" name="ten_loai_phong" value="{{ old('ten_loai_phong') }}" 
                               placeholder="VD: Phòng Deluxe King" required />
                        @error('ten_loai_phong') <p class="text-red-600 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="gia">
                                Giá (VNĐ) <span class="text-red-500">*</span>
                            </label>
                            <input type="number" id="gia" name="gia" value="{{ old('gia') }}" step="1000"
                                   class="w-full rounded-md border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold sm:text-sm" required />
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1" for="so_nguoi">
                                Sức chứa (Người) <span class="text-red-500">*</span>
                            </label>
                            <input type="number" id="so_nguoi" name="so_nguoi" value="{{ old('so_nguoi', 2) }}" 
                                   class="w-full rounded-md border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold sm:text-sm" min="1" required />
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" for="dien_tich">
                            Diện tích (m²)
                        </label>
                        <input type="number" id="dien_tich" name="dien_tich" value="{{ old('dien_tich') }}" 
                               placeholder="VD: 35" class="w-full rounded-md border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold sm:text-sm" />
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tiện nghi phòng</label>
                        
                        @if(isset($tienNghis) && count($tienNghis) > 0)
                            <div class="grid grid-cols-2 gap-3 p-4 border border-gray-200 rounded-md bg-gray-50 max-h-60 overflow-y-auto">
                                @foreach($tienNghis as $tn)
                                    <label class="inline-flex items-center space-x-2 cursor-pointer group">
                                        <input type="checkbox" 
                                               name="tien_nghi[]" 
                                               value="{{ $tn->id }}" 
                                               class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                                        <span class="text-sm text-gray-700 group-hover:text-blue-600 transition-colors">
                                            @if($tn->icon) <i class="{{ $tn->icon }} mr-1 text-gray-400"></i> @endif
                                            {{ $tn->ten_tien_nghi }}
                                        </span>
                                    </label>
                                @endforeach
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Chọn các tiện nghi có sẵn trong phòng này.</p>
                        @else
                            <div class="p-4 bg-yellow-50 text-yellow-700 text-sm rounded-md border border-yellow-200">
                                Chưa có tiện nghi nào. Vui lòng thêm tiện nghi trước.
                            </div>
                        @endif
                    </div>
                </div>

                <div class="space-y-4">
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" for="hinh_anh">
                            Hình ảnh đại diện
                        </label>
                        <div class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:border-brand-gold transition-colors">
                            <div class="space-y-1 text-center">
                                <i class="fa-solid fa-image text-gray-400 text-3xl mb-2"></i>
                                <div class="flex text-sm text-gray-600">
                                    <label for="hinh_anh" class="relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none">
                                        <span>Tải ảnh lên</span>
                                        <input id="hinh_anh" name="hinh_anh" type="file" class="sr-only" accept="image/*" onchange="previewImage(event)">
                                    </label>
                                    <p class="pl-1">hoặc kéo thả vào đây</p>
                                </div>
                                <p class="text-xs text-gray-500">PNG, JPG, GIF tối đa 2MB</p>
                            </div>
                        </div>
                        <div id="image-preview" class="mt-4 hidden text-center">
                            <p class="text-xs text-gray-500 mb-2">Xem trước:</p>
                            <img id="preview-img" src="#" alt="Preview" class="h-48 w-full object-cover rounded-md border border-gray-200">
                        </div>
                        @error('hinh_anh') <p class="text-red-600 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>
                </div>
            </div>

            <div class="flex items-center justify-end pt-6 mt-6 border-t border-gray-200 gap-3">
                <a href="{{ route('admin.loai-phong') }}" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm font-medium transition-colors">
                    Hủy bỏ
                </a>
                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium shadow-sm transition-colors flex items-center gap-2">
                    <i class="fa fa-save"></i> Lưu Loại Phòng
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    function previewImage(event) {
        const reader = new FileReader();
        reader.onload = function(){
            const output = document.getElementById('preview-img');
            output.src = reader.result;
            document.getElementById('image-preview').classList.remove('hidden');
        };
        reader.readAsDataURL(event.target.files[0]);
    }
</script>
@endsection
</file>

<file path="resources/views/admin/users/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('content')

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-6"></div>
    <div class="toolbar mb-6">
        <h1 class="text-2xl font-semibold text-gray-900">Người dùng</h1>
        <a href="{{ route('admin.user.them') }}" class="btn-primary inline-flex items-center gap-2 text-sm font-semibold">
            <i class="fa fa-plus"></i> Thêm người dùng
        </a>
    </div>

    <div class="card-common">
        <div class="overflow-x-auto">
            @if($users->isEmpty())
                <div class="p-6 text-center text-gray-500">Chưa có khách hàng nào. Hãy thêm mới.</div>
            @else
            <table class="table-common min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tên người dùng</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">số điện thoại</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">CCCD</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quyền hạn</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Password</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach ($users as $user)
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $loop->iteration }}</td>
                        <td class="px-6 py-4 text-sm font-medium text-gray-900">{{ $user->name}}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $user->email }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $user->phone }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $user->cccd }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">{{ $user->role }}</td>
                        <td class="px-6 py-4 text-sm text-gray-700">
                            <div class="w-32 truncate font-mono text-xs text-gray-500 bg-gray-100 p-1 rounded border border-gray-200 cursor-help" title="{{ $user->password }}">
                                {{ $user->password }}
                            </div>
                        </td>
                        </td>
                        <td class="px-6 py-4 text-sm text-center">
                            <a href="{{ route('admin.user.sua', ['id' => $user->id]) }}" class="text-blue-600 hover:text-blue-800 mr-3" title="Sửa"><i class="fa fa-edit"></i></a>
                            <a href="{{ route('admin.user.xoa', ['id' => $user->id]) }}" onclick="return confirm('Bạn có muốn xóa phòng {{ $user->name }} không?')" class="text-red-600 hover:text-red-800" title="Xóa"><i class="fa fa-trash"></i></a>
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
            @endif
        </div>
    </div>
</div>

@endsection
</file>

<file path="resources/views/admin/users/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Sửa người dùng</h2>
            <a href="{{ route('admin.user') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.user.sua', ['id' => $user->id]) }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="name">Tên</label>
                    <input type="text" id="name" name="name" value="{{ old('name', $user->name) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('name') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="email">Email</label>
                    <input type="email" id="email" name="email" value="{{ old('email', $user->email) }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('email') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="phone">Số điện thoại</label>
                    <input type="text" id="phone" name="phone" value="{{ old('phone', $user->phone) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('phone') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="cccd">CCCD</label>
                    <input type="text" id="cccd" name="cccd" value="{{ old('cccd', $user->cccd) }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('cccd') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="role">Vai trò</label>
                    <select id="role" name="role" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900">
                        <option value="user" {{ old('role', $user->role) == 'user' ? 'selected' : '' }}>User</option>
                        <option value="admin" {{ old('role', $user->role) == 'admin' ? 'selected' : '' }}>Admin</option>
                    </select>
                    @error('role') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="password">Mật khẩu (để trống nếu không đổi)</label>
                    <input type="password" id="password" name="password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('password') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div class="flex items-center justify-end pt-2">
                    <button type="submit" class="btn-primary inline-flex items-center gap-2">
                        <i class="fa fa-save"></i> Lưu
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/users/them.blade.php">
@extends('admin.layouts.dashboard')
@section('content')
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="card-common p-6">
        <div class="toolbar mb-4 flex items-center justify-between">
            <h2 class="text-lg font-semibold">Thêm người dùng</h2>
            <a href="{{ route('admin.user') }}" class="text-sm text-gray-600 hover:text-gray-900">&larr; Quay lại</a>
        </div>

        <form action="{{ route('admin.user.store') }}" method="POST">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700" for="name">Tên</label>
                    <input type="text" id="name" name="name" value="{{ old('name') }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('name') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="email">Email</label>
                    <input type="email" id="email" name="email" value="{{ old('email') }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('email') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="phone">Số điện thoại</label>
                    <input type="text" id="phone" name="phone" value="{{ old('phone') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('phone') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="cccd">CCCD</label>
                    <input type="text" id="cccd" name="cccd" value="{{ old('cccd') }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('cccd') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="role">Vai trò</label>
                    <select id="role" name="role" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900">
                        <option value="user" {{ old('role') == 'user' ? 'selected' : '' }}>User</option>
                        <option value="admin" {{ old('role') == 'admin' ? 'selected' : '' }}>Admin</option>
                    </select>
                    @error('role') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700" for="password">Mật khẩu</label>
                    <input type="password" id="password" name="password" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-brand-900 focus:border-brand-900" />
                    @error('password') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                </div>
            </div>
            <div class="mt-6 flex items-center justify-end space-x-3">
                <a href="{{ route('admin.user') }}" class="text-sm text-gray-600 hover:underline">Hủy</a>
                <button type="submit" class="btn-primary">Thêm</button>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/login.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card-common">
                <div class="px-6 py-4 border-b font-semibold">{{ __('Login') }}</div>

                <div class="p-6">
                    <form method="POST" action="{{ route('login') }}">
                        @csrf

                        <div class="mb-4">
                            <label for="email" class="block text-sm font-medium text-gray-700">{{ __('Email Address') }}</label>
                            <input id="email" type="email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm @error('email') border-red-500 @enderror" name="email" value="{{ old('email') }}" required autocomplete="email" autofocus>
                            @error('email') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                        </div>

                        <div class="mb-4">
                            <label for="password" class="block text-sm font-medium text-gray-700">{{ __('Password') }}</label>
                            <input id="password" type="password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm @error('password') border-red-500 @enderror" name="password" required autocomplete="current-password">
                            @error('password') <p class="text-red-600 text-sm mt-1">{{ $message }}</p> @enderror
                        </div>

                        <div class="mb-4 flex items-center">
                            <input class="form-checkbox h-4 w-4 text-brand-900" type="checkbox" name="remember" id="remember" {{ old('remember') ? 'checked' : '' }}>
                            <label class="ml-2 text-sm text-gray-700" for="remember">{{ __('Remember Me') }}</label>
                        </div>

                        <div class="flex items-center justify-between">
                            <button type="submit" class="btn-primary">{{ __('Login') }}</button>
                            @if (Route::has('password.request'))
                                <a class="text-sm text-blue-600 hover:underline" href="{{ route('password.request') }}">{{ __('Forgot Your Password?') }}</a>
                            @endif
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/booking/create.blade.php">
@extends('layouts.app')
@section('title', 'Xác nhận đặt phòng')

@section('content')
<div class="bg-gray-50 py-16 min-h-screen">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <div class="text-center mb-10">
            <h1 class="font-serif text-3xl md:text-4xl font-bold text-gray-900 mb-2">Hoàn tất đặt phòng</h1>
            <p class="text-gray-500">Vui lòng kiểm tra lại thông tin và áp dụng ưu đãi trước khi xác nhận.</p>
            
            {{-- Hiển thị thông báo lỗi/thành công từ Controller --}}
            @if(session('error'))
                <div class="mt-4 bg-red-100 text-red-800 p-3 rounded-lg text-sm">{{ session('error') }}</div>
            @endif
        </div>

        <form action="{{ route('booking.store') }}" method="POST" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            @csrf
            <input type="hidden" name="room_id" value="{{ $roomType->id }}">
            <input type="hidden" name="checkin" value="{{ $checkIn }}">
            <input type="hidden" name="checkout" value="{{ $checkOut }}">

            <div class="lg:col-span-2 space-y-6">
                
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-lg mb-6 flex items-center text-brand-900 pb-4 border-b border-gray-100">
                        <span class="w-8 h-8 rounded-full bg-brand-900 text-white flex items-center justify-center text-sm mr-3 font-mono">1</span>
                        Thông tin đăng ký
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                        <div class="group">
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Họ và tên</label>
                            <span class="block bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 text-gray-700 font-medium">{{ Auth::user()->name }}</span>
                        </div>
                        <div class="group">
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Số điện thoại</label>
                            <span class="block bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 text-gray-700 font-medium">{{ Auth::user()->phone ?? 'Chưa cập nhật' }}</span>
                        </div>
                        <div class="col-span-full mt-2">
                             <p class="text-xs text-gray-500 italic">
                                Vui lòng đảm bảo thông tin trên là chính xác. Nếu cần thay đổi, bạn có thể <a href="{{ route('profile.edit') }}" class="underline font-bold text-brand-gold hover:text-brand-900">cập nhật hồ sơ</a>.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-lg mb-6 flex items-center text-brand-900 pb-4 border-b border-gray-100">
                        <span class="w-8 h-8 rounded-full bg-brand-900 text-white flex items-center justify-center text-sm mr-3 font-mono">2</span>
                        Mã khuyến mãi
                    </h3>
                    <div class="flex gap-3">
                        <input type="text" 
                               name="promotion_code" 
                               value="{{ old('promotion_code') }}"
                               placeholder="Nhập mã giảm giá (VD: SUMMER2025)..." 
                               class="flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm uppercase">
                    </div>
                    @error('promotion_code') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                </div>
                
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-lg mb-6 flex items-center text-brand-900 pb-4 border-b border-gray-100">
                        <span class="w-8 h-8 rounded-full bg-brand-900 text-white flex items-center justify-center text-sm mr-3 font-mono">3</span>
                        Lựa chọn thanh toán
                    </h3>
                    
                    <div class="space-y-4">
                        <label class="relative flex items-start p-5 border-2 rounded-xl cursor-pointer transition-all {{ old('payment_method') == 'pay_at_hotel' ? 'bg-brand-50 border-brand-gold' : 'border-gray-200 hover:border-brand-gold' }}">
                            <div class="flex items-center h-6">
                                <input type="radio" name="payment_method" value="pay_at_hotel" checked 
                                       class="w-5 h-5 text-brand-900 border-gray-300 focus:ring-brand-900">
                            </div>
                            <div class="ml-4">
                                <span class="block font-bold text-gray-900 text-lg">Thanh toán tại khách sạn</span>
                                <span class="block text-sm text-gray-600 mt-1">Bạn sẽ thanh toán khi làm thủ tục nhận phòng (Check-in).</span>
                            </div>
                            <i class="fa-solid fa-hotel absolute top-5 right-5 text-2xl text-brand-900/10"></i>
                        </label>

                        <label class="relative flex items-start p-5 border rounded-xl cursor-pointer transition-all {{ old('payment_method') == 'online' ? 'bg-brand-50 border-brand-gold' : 'border-gray-200 hover:border-brand-gold' }}">
                             <div class="flex items-center h-6">
                                <input type="radio" name="payment_method" value="online" 
                                       class="w-5 h-5 text-brand-900 border-gray-300 focus:ring-brand-900">
                            </div>
                            <div class="ml-4">
                                <span class="block font-bold text-gray-900 text-lg">Thanh toán Online (Sau khi Admin duyệt)</span>
                                <span class="block text-sm text-gray-600 mt-1">Sau khi đơn được duyệt, bạn sẽ nhận link thanh toán qua email.</span>
                            </div>
                            <i class="fa-brands fa-cc-paypal absolute top-5 right-5 text-2xl text-brand-900/10"></i>
                        </label>
                    </div>
                    @error('payment_method') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                </div>
            </div>

            <div class="lg:col-span-1">
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border border-gray-100 sticky top-24">
                    <h3 class="font-bold text-gray-900 mb-6 pb-4 border-b border-gray-100 text-center uppercase tracking-wider text-xs">Chi tiết đơn đặt</h3>
                    
                    <div class="flex gap-4 mb-6">
                        <img src="{{ $roomType->hinh_anh ? asset($roomType->hinh_anh) : asset('uploads/home/phongdefault.png') }}" 
                             class="w-20 h-20 object-cover rounded-lg shadow-sm border border-gray-200">
                        <div>
                            <h4 class="font-bold text-brand-900 leading-tight mb-1">{{ $roomType->ten_loai_phong }}</h4>
                            <p class="text-xs text-gray-500"><i class="fa-solid fa-user mr-1"></i> {{ $roomType->so_nguoi }} Khách</p>
                        </div>
                    </div>

                    <div class="space-y-4 text-sm text-gray-600 mb-6 bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <div class="flex justify-between items-center">
                            <div class="text-left">
                                <span class="block text-[10px] text-gray-400 uppercase font-bold">Nhận phòng</span>
                                <span class="font-bold text-gray-900 text-base">{{ \Carbon\Carbon::parse($checkIn)->format('d/m/Y') }}</span>
                            </div>
                            <div class="text-gray-300"><i class="fa-solid fa-arrow-right-long"></i></div>
                            <div class="text-right">
                                <span class="block text-[10px] text-gray-400 uppercase font-bold">Trả phòng</span>
                                <span class="font-bold text-gray-900 text-base">{{ \Carbon\Carbon::parse($checkOut)->format('d/m/Y') }}</span>
                            </div>
                        </div>
                        <div class="border-t border-gray-200 pt-3 text-center">
                            <span class="inline-block bg-white px-3 py-1 rounded-full text-xs font-bold shadow-sm border border-gray-200 text-brand-gold">
                                <i class="fa-regular fa-clock mr-1"></i> {{ $days }} Đêm lưu trú
                            </span>
                        </div>
                    </div>

                    <div class="space-y-3 text-sm mb-8">
                        <div class="flex justify-between text-gray-600">
                            <span>Giá phòng</span>
                            <span>{{ number_format($roomType->gia, 0, ',', '.') }}đ x {{ $days }}</span>
                        </div>
                        <div class="flex justify-between text-gray-600">
                            <span>Giá gốc tạm tính</span>
                            <span class="font-medium text-gray-900">{{ number_format($totalPrice, 0, ',', '.') }}đ</span>
                        </div>
                        <div class="flex justify-between text-red-500 font-medium">
                            <span>Giảm giá (Mã KM)</span>
                            <span>- 0đ</span>
                        </div>
                        
                        <div class="border-t border-dashed border-gray-200 my-2"></div>
                        
                        <div class="flex justify-between items-center pt-1">
                            <span class="font-bold text-lg text-gray-800">Tổng cộng (Tạm tính)</span>
                            <span class="font-bold text-2xl text-brand-gold">{{ number_format($totalPrice, 0, ',', '.') }}đ</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">Tổng tiền cuối cùng sẽ được xác nhận sau khi mã khuyến mãi được Admin kiểm tra.</p>
                    </div>

                    <button type="submit" class="w-full bg-brand-900 text-white font-bold py-4 rounded-xl hover:bg-brand-800 transition duration-300 shadow-xl shadow-brand-900/20 flex items-center justify-center gap-2 group">
                        <span>GỬI YÊU CẦU ĐẶT PHÒNG</span>
                        <i class="fa-solid fa-check group-hover:scale-125 transition-transform"></i>
                    </button>
                    
                    <p class="text-[10px] text-center text-gray-400 mt-4 leading-normal px-2">
                        Bằng việc xác nhận, bạn đồng ý với <a href="#" class="underline hover:text-brand-gold">Điều khoản & Chính sách</a> của Luxury Stay.
                    </p>
                </div>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/layouts/header.blade.php">
<header x-data="{ mobileMenuOpen: false, userDropdownOpen: false }" class="header-wrapper">
    <div class="header-container">
        <div class="header-inner">
            
            <!-- 1. Logo -->
            <a href="{{ route('trang_chu') }}" class="logo-link group">
                <span class="logo-icon">
                    <i class="fa-solid fa-crown"></i>
                </span>
                <div class="logo-text-wrapper">
                    <span class="logo-text">Luxury<span>Stay</span></span>
                </div>
            </a>

            <!-- 2. Desktop Menu -->
            @include('layouts.nav')

            <!-- 3. Actions (Login/User) -->
            <div class="header-actions">
                @auth
                    <!-- Đã đăng nhập -->
                    <div class="relative">
                        <button @click="userDropdownOpen = !userDropdownOpen" @click.away="userDropdownOpen = false" class="user-btn">
                            <span class="user-name">{{ Auth::user()->name }}</span>
                            <i class="fa-solid fa-angle-down text-xs"></i>
                            <div class="user-avatar">
                                <i class="fa-solid fa-user"></i>
                            </div>
                        </button>

                        <!-- Dropdown Menu -->
                        <div x-show="userDropdownOpen" x-transition x-cloak class="dropdown-menu">
                            @if(Auth::user()->role === 'admin')
                                <a href="{{ route('admin.dashboard') }}" class="dropdown-item dropdown-item-danger">
                                    <i class="fa-solid fa-gauge"></i> Trang quản trị
                                </a>
                            @endif

                            <a href="{{ route('profile.edit') }}" class="dropdown-item">
                                <i class="fa-solid fa-id-card"></i> Hồ sơ cá nhân
                            </a>
                            <a href="{{ route('bookings.history') }}" class="dropdown-item">
                                <i class="fa-solid fa-clock-rotate-left"></i> Lịch sử đặt phòng
                            </a>
                            
                            <form method="POST" action="{{ route('logout') }}" class="border-t border-gray-100 mt-1">
                                @csrf
                                <button type="submit" class="w-full text-left dropdown-item text-red-600">
                                    <i class="fa-solid fa-right-from-bracket"></i> Đăng xuất
                                </button>
                            </form>
                        </div>
                    </div>
                @else
                    <!-- Chưa đăng nhập -->
                    <a href="{{ route('login') }}" class="btn-login">Đăng nhập</a>
                    <a href="{{ route('register') }}" class="btn-register">Đăng ký ngay</a>
                @endauth
            </div>

            <!-- 4. Mobile Toggle -->
            <button @click="mobileMenuOpen = !mobileMenuOpen" class="mobile-toggle">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div x-show="mobileMenuOpen" x-transition x-cloak class="mobile-menu-wrapper">
        <div class="mobile-menu-container">
            <a href="{{ route('trang_chu') }}" class="mobile-link">Trang chủ</a>
            <a href="{{ route('phong.danh-sach') }}" class="mobile-link">Phòng & Suites</a>
            <a href="{{ route('khuyen-mai') }}" class="mobile-link">Ưu đãi</a>
            
            @auth
                <div class="mobile-user-section">
                    <p class="mobile-greeting">Xin chào, <strong>{{ Auth::user()->name }}</strong></p>
                    <a href="{{ route('profile.edit') }}" class="mobile-user-link">Hồ sơ</a>
                    <a href="{{ route('bookings.history') }}" class="mobile-user-link">Lịch sử</a>
                    <form method="POST" action="{{ route('logout') }}">
                        @csrf
                        <button class="mobile-logout-btn">Đăng xuất</button>
                    </form>
                </div>
            @else
                <div class="mobile-auth-grid">
                    <a href="{{ route('login') }}" class="mobile-btn-login">Đăng nhập</a>
                    <a href="{{ route('register') }}" class="mobile-btn-register">Đăng ký</a>
                </div>
            @endauth
        </div>
    </div>
</header>
</file>

<file path="resources/views/layouts/nav.blade.php">
<nav class="main-nav">
    <a href="{{ route('home') }}" 
       class="nav-link {{ request()->routeIs('trang_chu') ? 'active' : '' }}">
        Trang chủ
    </a>

    <a href="{{ route('phong.danh-sach') }}" 
       class="nav-link {{ request()->routeIs('phong*') ? 'active' : '' }}">
        Phòng & Suites
    </a>

    <a href="{{ route('khuyen-mai') }}" 
       class="nav-link {{ request()->routeIs('khuyen-mai*') ? 'active' : '' }}">
        Ưu đãi
    </a>

    <a href="#" class="nav-link">
        Về chúng tôi
    </a>
    
    <a href="#" class="nav-link">
        Liên hệ
    </a>
</nav>
</file>

<file path="vite.config.js">
import { defineConfig } from 'vite';
import laravel from 'laravel-vite-plugin';

export default defineConfig({
    plugins: [
        laravel({
            input: [
                'resources/sass/app.scss',
                'resources/js/app.js',
                'resources/js/tailwind-config.js',
                'resources/js/client.css',
                'resources/js/client.js',
            ],
            refresh: true,
        }),
    ],
});
</file>

<file path="app/Models/KhuyenMai.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class KhuyenMai extends Model
{
    use HasFactory;
    
    // Đảm bảo tên cột khớp với bảng khuyến_mais của bạn
    protected $fillable = [
        'ten_khuyen_mai', 
        'ma_khuyen_mai', 
        'chiet_khau_phan_tram', // Thêm cột này
        'so_tien_giam_gia',    // Thêm cột này
        'ngay_bat_dau', 
        'ngay_ket_thuc',
    ];
    
    // Đảm bảo kiểu dữ liệu là số thập phân
    protected $casts = [
        'chiet_khau_phan_tram' => 'float',
        'so_tien_giam_gia' => 'float',
        'ngay_bat_dau' => 'date',
        'ngay_ket_thuc' => 'date',
    ];
}
</file>

<file path="app/Models/LoaiPhong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\HasMany;

class LoaiPhong extends Model
{

	protected $fillable = [
        'ten_loai_phong', 
        'gia', 
        'suc_chua', 
        'dien_tich',
		'hinh_anh',
    ];

	public function tienNghis() {
    	return $this->belongsToMany(
            TienNghi::class, 
            'loai_phong_tien_nghi', // 1. Tên bảng trung gian ĐÚNG (theo database)
            'loai_phong_id',        // 2. Khóa ngoại của bảng hiện tại (loai_phongs)
            'tien_nghi_id'          // 3. Khóa ngoại của bảng kia (tien_nghis)
		);
	}

	public function phongs(): HasMany
	{
		return $this->hasMany(Phong::class);
	}

	/**
	 * Get the booking details for this LoaiPhong.
	 */
	public function chiTietDatPhongs(): HasMany
	{
		return $this->hasMany(ChiTietDatPhong::class, 'loai_phong_id');
	}
}
</file>

<file path="database/migrations/2025_12_05_181619_create_loai_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('loai_phongs', function (Blueprint $table) {
            $table->id();
            $table->string('ten_loai_phong', 100);
            $table->decimal('gia', 10, 2);
            $table->integer('so_nguoi');
            $table->integer('dien_tich');
            $table->string('hinh_anh')->nullable();
            $table->string(('tien_nghi'))->nullable();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('loai_phongs');
    }
};
</file>

<file path="resources/views/client/rooms/detail.blade.php">
@extends('layouts.app')
@section('title', $room->ten_loai_phong)

@section('content')
<div class="py-12 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <nav class="flex mb-8 text-sm text-gray-500">
            <a href="{{ route('trang_chu') }}" class="hover:text-brand-gold transition">Trang chủ</a>
            <span class="mx-2 text-gray-300">/</span>
            <a href="{{ route('phong.danh-sach') }}" class="hover:text-brand-gold transition">Phòng nghỉ</a>
            <span class="mx-2 text-gray-300">/</span>
            <span class="text-brand-900 font-medium border-b border-brand-gold pb-0.5">{{ $room->ten_loai_phong }}</span>
        </nav>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
            
            <div class="lg:col-span-2">
                
                <div class="rounded-2xl overflow-hidden shadow-2xl mb-8 group relative h-[500px]">
                    <img src="{{ $room->hinh_anh ? asset($room->hinh_anh) : asset('uploads/home/phongdefault.png') }}" 
                         class="w-full h-full object-cover transition duration-700 group-hover:scale-105" 
                         alt="{{ $room->ten_loai_phong }}">
                    
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-80"></div>
                    
                    <div class="absolute bottom-8 left-8 text-white">
                        <h1 class="font-serif text-3xl md:text-4xl font-bold mb-3 shadow-sm">{{ $room->ten_loai_phong }}</h1>
                        <div class="flex items-center space-x-4 text-sm font-medium">
                            <span><i class="fa-solid fa-user-group text-brand-gold mr-2"></i> {{ $room->so_nguoi }} Khách</span>
                            <span><i class="fa-solid fa-ruler-combined text-brand-gold mr-2"></i> {{ $room->dien_tich ?? '--' }} m²</span>
                            <span><i class="fa-solid fa-bed text-brand-gold mr-2"></i> 1 Giường King</span>
                        </div>
                    </div>
                </div>
                
                <div class="prose max-w-none text-gray-600 leading-relaxed mb-10">
                    <h3 class="font-serif text-2xl font-bold text-brand-900 mb-4 border-l-4 border-brand-gold pl-4">Mô tả phòng</h3>
                    <p class="mb-4">{{ $room->mo_ta ?? 'Chưa có mô tả chi tiết cho hạng phòng này.' }}</p>
                    <p>Được thiết kế với phong cách hiện đại pha lẫn nét cổ điển, phòng {{ $room->ten_loai_phong }} mang đến không gian nghỉ dưỡng lý tưởng. Nội thất cao cấp, ánh sáng tự nhiên và các tiện ích công nghệ cao sẽ làm hài lòng những vị khách khó tính nhất.</p>
                </div>

                <div class="bg-gray-50 rounded-2xl p-8 border border-gray-100">
                    <h3 class="font-serif text-2xl font-bold text-brand-900 mb-6">Tiện nghi cao cấp</h3>
                    
                    @if($room->tienNghis && $room->tienNghis->count() > 0)
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-y-6 gap-x-8">
                            @foreach($room->tienNghis as $tn)
                                <div class="flex items-center text-gray-700 group">
                                    <div class="w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center text-brand-gold mr-3 group-hover:bg-brand-gold group-hover:text-white transition-colors">
                                        <i class="{{ $tn->icon ?? 'fa-solid fa-check' }}"></i>
                                    </div>
                                    <span class="font-medium">{{ $tn->ten_tien_nghi }}</span>
                                </div>
                            @endforeach
                        </div>
                    @else
                        <p class="text-gray-500 italic">Đang cập nhật danh sách tiện nghi...</p>
                    @endif
                </div>
            </div>

            <div class="lg:col-span-1">
                <div class="bg-white p-8 rounded-2xl shadow-[0_20px_50px_-12px_rgba(0,0,0,0.1)] border border-gray-100 sticky top-24">
                    <div class="flex items-end justify-between mb-6 pb-6 border-b border-gray-100">
                        <div>
                            <span class="block text-xs text-gray-500 font-bold uppercase tracking-wider mb-1">Giá tốt nhất</span>
                            <div class="flex items-baseline">
                                <span class="text-3xl font-serif font-bold text-brand-900">{{ number_format($room->gia, 0, ',', '.') }}đ</span>
                                <span class="text-gray-500 ml-1">/đêm</span>
                            </div>
                        </div>
                        <div class="bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded">
                            <i class="fa-solid fa-check"></i> Có ăn sáng
                        </div>
                    </div>

                    <form action="{{ route('booking.create') }}" method="GET">
                        <input type="hidden" name="room_id" value="{{ $room->id }}">
                        
                        <div class="space-y-5 mb-6">
                            <div>
                                <label class="block text-xs font-bold text-gray-700 uppercase mb-2">Ngày nhận phòng</label>
                                <div class="relative">
                                    <input type="date" name="checkin" class="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-brand-gold focus:border-transparent transition cursor-pointer" required min="{{ date('Y-m-d') }}">
                                    <i class="fa-regular fa-calendar absolute left-3 top-3.5 text-brand-gold"></i>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-700 uppercase mb-2">Ngày trả phòng</label>
                                <div class="relative">
                                    <input type="date" name="checkout" class="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-brand-gold focus:border-transparent transition cursor-pointer" required min="{{ date('Y-m-d') }}">
                                    <i class="fa-regular fa-calendar-check absolute left-3 top-3.5 text-brand-gold"></i>
                                </div>
                            </div>
                        </div>

                        @if($phongTrong > 0)
                            <div class="mb-6 bg-green-50 text-green-800 px-4 py-3 rounded-lg flex items-center text-sm border border-green-200">
                                <i class="fa-solid fa-circle-check mr-3 text-lg"></i> 
                                <div>
                                    <span class="font-bold block">Còn phòng!</span>
                                    <span class="text-xs">Hiện có {{ $phongTrong }} phòng trống cho bạn.</span>
                                </div>
                            </div>
                            <button type="submit" class="w-full bg-brand-900 text-white font-bold py-4 rounded-xl hover:bg-brand-800 transition duration-300 shadow-xl shadow-brand-900/20 transform hover:-translate-y-1 flex justify-center items-center gap-2 group">
                                <span>ĐẶT PHÒNG NGAY</span>
                                <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                            </button>
                        @else
                            <div class="mb-6 bg-red-50 text-red-800 px-4 py-3 rounded-lg flex items-center text-sm border border-red-200">
                                <i class="fa-solid fa-circle-exclamation mr-3 text-lg"></i> 
                                <div>
                                    <span class="font-bold block">Hết phòng</span>
                                    <span class="text-xs">Rất tiếc, loại phòng này hiện không còn trống.</span>
                                </div>
                            </div>
                            <button disabled class="w-full bg-gray-100 text-gray-400 font-bold py-4 rounded-xl cursor-not-allowed border border-gray-200">
                                TẠM HẾT PHÒNG
                            </button>
                        @endif
                        
                        <p class="text-[11px] text-center text-gray-400 mt-4 leading-tight px-4">
                            * Bạn sẽ được yêu cầu đăng nhập và cập nhật hồ sơ để hoàn tất đặt phòng.
                        </p>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/rooms/index.blade.php">
@extends('layouts.app')
@section('title', 'Danh sách phòng nghỉ')

@section('content')

<div class="page-banner">
    <div class="banner-bg">
        <img src="{{ asset('uploads/home/home.png') }}" 
             alt="Luxury Hotel Background">
        <div class="banner-overlay"></div>
    </div>
    
    <div class="banner-content">
        <span class="banner-subtitle animate-fade-in-up">Luxury Collection</span>
        <h1 class="banner-title animate-fade-in-up">Danh sách phòng nghỉ</h1>
        <p class="banner-desc animate-fade-in-up">
            Khám phá không gian nghỉ dưỡng đẳng cấp, nơi từng chi tiết được chăm chút tỉ mỉ để mang lại sự thoải mái tuyệt đối cho bạn.
        </p>
    </div>
</div>

<div class="container pb-section">

    <button type="button" class="btn btn-primary mobile-filter-btn" onclick="document.querySelector('.sidebar-filter').classList.toggle('active')">
        <i class="fa-solid fa-filter mr-2"></i> Bộ lọc tìm kiếm
    </button>
    
    <div class="listing-layout">
        
        <aside class="sidebar-filter">
            <form action="{{ route('phong.danh-sach') }}" method="GET" id="filter-form">
                
                <div class="filter-header">
                    <span class="filter-title">Bộ lọc</span>
                    <a href="{{ route('phong.danh-sach') }}" class="btn-reset">Đặt lại</a>
                </div>

                <div class="filter-group">
                    <label class="filter-group-title">Khoảng giá (đêm)</label>
                    <div class="price-inputs">
                        <input type="number" name="min_price" class="form-input" 
                            placeholder="Từ" value="{{ request('min_price') }}"
                            min="0" step="100000"> 
                        <span class="price-separator">-</span>
                        <input type="number" name="max_price" class="form-input" 
                            placeholder="Đến" value="{{ request('max_price') }}"
                            min="0" step="100000">
                    </div>
                </div>

                <div class="filter-group">
                    <label class="filter-group-title">Hạng phòng</label>
                    <div class="checkbox-list" style="max-height: 200px; overflow-y: auto;">
                        @foreach($allLoaiPhongs as $type)
                            <label class="checkbox-item">
                                <input type="checkbox" name="room_types[]" value="{{ $type->id }}" 
                                    {{ in_array($type->id, request('room_types', [])) ? 'checked' : '' }}>
                                <span>{{ $type->ten_loai_phong }}</span>
                            </label>
                        @endforeach
                    </div>
                </div>

                <div class="filter-group">
                    <label class="filter-group-title">Sức chứa</label>
                    <div class="checkbox-list">
                        <label class="checkbox-item">
                            <input type="checkbox" name="capacity[]" value="1" 
                                {{ in_array('1', request('capacity', [])) ? 'checked' : '' }}>
                            <span>1 Khách</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="capacity[]" value="2" 
                                {{ in_array('2', request('capacity', [])) ? 'checked' : '' }}>
                            <span>2 Khách</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="capacity[]" value="3" 
                                {{ in_array('3', request('capacity', [])) ? 'checked' : '' }}>
                            <span>3 Khách</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="capacity[]" value="4" 
                                {{ in_array('4', request('capacity', [])) ? 'checked' : '' }}>
                            <span>Gia đình (4+ Khách)</span>
                        </label>
                    </div>
                </div>

                <div class="filter-group">
                    <label class="filter-group-title">Tiện nghi</label>
                    <div class="checkbox-list">
                        @foreach($tienNghis as $item)
                            <label class="checkbox-item">
                                <input type="checkbox" name="amenities[]" value="{{ $item->id }}" 
                                    {{ in_array($item->id, request('amenities', [])) ? 'checked' : '' }}>
                                <span>{{ $item->ten_tien_nghi }}</span>
                            </label>
                        @endforeach
                    </div>
                </div>

                <div class="filter-submit-wrap">
                    <button type="submit" class="btn btn-primary w-full">
                        Áp dụng lọc
                    </button>
                </div>
            </form>
        </aside>

        <main>
            <div class="filter-bar">
                <p class="filter-count">
                    Tìm thấy <strong>{{ $rooms->total() }}</strong> hạng phòng phù hợp
                </p>
                <div class="filter-actions">
                    <span class="text-sm text-gray-500 mr-2">Sắp xếp:</span>
                    <select name="sort" class="filter-select" form="filter-form" onchange="this.form.submit()">
                        <option value="default" {{ request('sort') == 'default' ? 'selected' : '' }}>Mặc định</option>
                        <option value="price_asc" {{ request('sort') == 'price_asc' ? 'selected' : '' }}>Giá thấp đến cao</option>
                        <option value="price_desc" {{ request('sort') == 'price_desc' ? 'selected' : '' }}>Giá cao đến thấp</option>
                    </select>
                </div>
            </div>

            <div class="room-grid">
                @forelse($rooms as $room)
                
                {{-- LOGIC: Hết phòng khi phongs_count = 0 --}}
                @php
                    $isSoldOut = $room->phongs_count == 0;
                @endphp

                <div class="room-card group {{ $isSoldOut ? 'sold-out' : '' }}">
                    
                    <div class="room-img-wrap">
                        <img src="{{ $room->hinh_anh ? asset($room->hinh_anh) : asset('uploads/home/phongdefault.png') }}" 
                            alt="{{ $room->ten_loai_phong }}"
                            class="w-full h-full object-cover">
                        
                        @if($isSoldOut)
                            <div class="sold-out-badge">Hết phòng</div>
                        @else
                            <div class="room-price-tag">
                                <span class="room-price-amount">{{ number_format($room->gia, 0, ',', '.') }}đ</span>
                                <span class="room-price-unit">/đêm</span>
                            </div>
                        @endif
                        
                        <div class="room-overlay-hover"></div>
                    </div>
                    
                    <div class="room-body">
                        <h3>
                            <a href="{{ route('phong.chi-tiet', $room->id) }}" class="room-title-link">
                                {{ $room->ten_loai_phong }}
                            </a>
                        </h3>
                        
                        <div class="room-specs">
                            <div class="spec-item" title="Sức chứa tối đa">
                                <i class="fa-solid fa-user-group"></i> 
                                <span>{{ $room->suc_chua }} Khách</span>
                            </div>

                            <div class="spec-item" title="Diện tích phòng">
                                <i class="fa-solid fa-ruler-combined"></i> 
                                <span>{{ $room->dien_tich ? $room->dien_tich . 'm²' : '-- m²' }}</span>
                            </div>

                            {{-- Hiển thị trạng thái phòng --}}
                            <div class="spec-item" style="color: {{ $isSoldOut ? '#ef4444' : '#22c55e' }}">
                                <i class="fa-solid fa-door-open"></i> 
                                <span>{{ $isSoldOut ? 'Hết phòng' : 'Còn ' . $room->phongs_count . ' phòng' }}</span>
                            </div>
                        </div>

                        <p class="room-short-desc">
                            {{ $room->mo_ta ?? 'Trải nghiệm không gian sang trọng với nội thất cao cấp...' }}
                        </p>
                        
                        @if($isSoldOut)
                            <button class="btn-card-action" disabled>
                                <span>Tạm hết</span>
                            </button>
                        @else
                            <a href="{{ route('phong.chi-tiet', $room->id) }}" class="btn-card-action group/btn">
                                <span>Xem chi tiết</span>
                                <i class="fa-solid fa-arrow-right"></i>
                            </a>
                        @endif
                    </div>
                </div>
                @empty
                <div class="empty-state-container">
                    <div class="empty-state-icon">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                    <h3 class="empty-state-title">Không tìm thấy phòng phù hợp</h3>
                    <p class="empty-state-text">
                        Vui lòng thử điều chỉnh lại bộ lọc của bạn.
                    </p>
                    <a href="{{ route('phong.danh-sach') }}" class="btn btn-outline">Xóa bộ lọc</a>
                </div>
                @endforelse
            </div>

            @if($rooms->hasPages())
            <div class="pagination-wrapper">
                <div class="pagination-box">
                    {{ $rooms->appends(request()->query())->links() }}
                </div>
            </div>
            @endif
        </main>
    </div>
</div>

<div class="section-guarantee">
    <div class="container">
        <div class="guarantee-grid">
            <div>
                <div class="guarantee-icon-box"><i class="fa-solid fa-medal"></i></div>
                <h3 class="guarantee-title">Đảm bảo giá tốt nhất</h3>
                <p class="guarantee-desc">Cam kết giá thấp nhất khi đặt trực tiếp.</p>
            </div>
            <div>
                <div class="guarantee-icon-box"><i class="fa-solid fa-headset"></i></div>
                <h3 class="guarantee-title">Hỗ trợ 24/7</h3>
                <p class="guarantee-desc">Đội ngũ nhân viên luôn sẵn sàng phục vụ.</p>
            </div>
            <div>
                <div class="guarantee-icon-box"><i class="fa-solid fa-shield-halved"></i></div>
                <h3 class="guarantee-title">Thanh toán an toàn</h3>
                <p class="guarantee-desc">Bảo mật thông tin tuyệt đối.</p>
            </div>
        </div>
    </div>
</div>

@endsection
</file>

<file path="app/Models/User.php">
<?php

namespace App\Models;

// use Illuminate\Contracts\Auth\MustVerifyEmail;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Notifications\Notifiable;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Str;

class User extends Authenticatable
{
    /** @use HasFactory<\Database\Factories\UserFactory> */
    use HasFactory, Notifiable;

    /**
     * The attributes that are mass assignable.
     *
     * @var list<string>
     */
    protected $fillable = [
        'name',
        'email',
        'cccd',
        'phone',
        'role',
        'password',
    ];
    
    public const roles = [
        'admin',
        'user'
    ];

    /**
     * The attributes that should be hidden for serialization.
     *
     * @var list<string>
     */
    protected $hidden = [
        'password',
        'remember_token',
    ];

    /**
     * The attributes that should be cast.
     *
     * @var array<string,string>
     */
    protected $casts = [
        'email_verified_at' => 'datetime',
        'password' => 'hashed',
    ];

    /**
     * Ensure passwords are hashed when set. If a value already looks like
     * a hash (bcrypt/argon prefix), leave it as-is to avoid double-hashing.
     */
    public function setPasswordAttribute(?string $value): void
    {
        if (empty($value)) {
            return;
        }

        // Common hash prefixes (bcrypt, argon)
        if (Str::startsWith($value, ['$2y$', '$2a$', '$argon$', '$argon2i$', '$argon2id$'])) {
            $this->attributes['password'] = $value;
            return;
        }

        $this->attributes['password'] = Hash::make($value);
    }

    /**
     * Get the bookings (dat_phongs) for the user.
     */
    public function datPhongs(): HasMany
    {
        return $this->hasMany(DatPhong::class);
    }
}
</file>

<file path="resources/views/home.blade.php">
@extends('layouts.app')
@section('title', 'Trang chủ - Trải nghiệm nghỉ dưỡng đẳng cấp')

@section('content')

<div class="hero">
    <img src="{{ asset('uploads/home/home.png') }}" 
         alt="Luxury Hotel" class="hero-bg">
    <div class="hero-overlay"></div>

    <div class="hero-content">
        <span class="sub-title" style="color: var(--primary-gold);">Chào mừng đến với Luxury Stay</span>
        <h1 class="hero-heading">
            Nơi Đẳng Cấp Giao Thoa <br> Cùng Sự Bình Yên
        </h1>
        <p class="hero-desc">
            Tận hưởng kỳ nghỉ trong mơ với hệ thống phòng suite sang trọng và dịch vụ 5 sao chuẩn quốc tế tại trung tâm thành phố.
        </p>
        
        <a href="#rooms" class="scroll-down">
            <i class="fa-solid fa-chevron-down"></i>
        </a>
    </div>
</div>

<section id="rooms" class="section-rooms">
    <div class="container">
        <div class="section-header">
            <span class="sub-title">Không gian nghỉ dưỡng</span>
            <h2 class="main-title">Hạng phòng nổi bật</h2>
        </div>

        <div class="room-grid">
            @if(isset($loaiPhongs) && $loaiPhongs->count() > 0)
                @foreach($loaiPhongs as $phong)
                <div class="room-card group">
                    <div class="room-img-wrap">
                        <img src="{{ $phong->hinh_anh ? asset($phong->hinh_anh) : asset('uploads/home/phongdefault.png') }}" 
                            alt="{{ $phong->ten_loai_phong }}"
                            class="w-full h-full object-cover">
                        
                        <div class="room-price-tag">
                            <span class="room-price-amount">{{ number_format($phong->gia, 0, ',', '.') }}đ</span>
                            <span class="room-price-unit">/đêm</span>
                        </div>
                        
                        <div class="room-overlay-hover"></div>
                    </div>
                    
                    <div class="room-body">
                        <h3 class="room-name">
                            <a href="{{ route('phong.chi-tiet', $phong->id) }}" class="room-title-link">
                                {{ $phong->ten_loai_phong }}
                            </a>
                        </h3>
                        
                        <div class="room-specs">
                            <div class="spec-item" title="Sức chứa">
                                <i class="fa-solid fa-user-group"></i> 
                                <span>{{ $phong->so_nguoi }} Khách</span> </div>
                            <div class="spec-item" title="Diện tích">
                                <i class="fa-solid fa-ruler-combined"></i> 
                                <span>{{ $phong->dien_tich ? $phong->dien_tich.'m²' : '-- m²' }}</span>
                            </div>
                        </div>

                        <p class="room-short-desc">
                            {{ $phong->mo_ta ?? 'Trải nghiệm không gian sang trọng với đầy đủ tiện nghi hiện đại.' }}
                        </p>
                        
                        <a href="{{ route('phong.chi-tiet', $phong->id) }}" class="btn-card-action group/btn">
                            <span>Chi tiết & Đặt phòng</span>
                            <i class="fa-solid fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
                @endforeach
            @else
                <p style="text-align: center; color: #999; grid-column: 1/-1; padding: 2rem;">
                    Đang cập nhật danh sách phòng...
                </p>
            @endif
        </div>
        
        <div class="room-btn-wrapper">
            <a href="{{ route('phong.danh-sach') }}" class="btn btn-outline">
                Xem tất cả phòng
            </a>
        </div>
    </div>
</section>

<section class="section-services">
    <div class="service-bg-icon">
        <i class="fa-solid fa-crown"></i>
    </div>

    <div class="container" style="position: relative; z-index: 2;">
        <div class="section-header">
            <span class="sub-title">Tiện ích & Dịch vụ</span>
            <h2 class="main-title light">Tận hưởng kỳ nghỉ trọn vẹn</h2>
        </div>

        <div class="service-grid">
            <div class="service-item">
                <div class="service-icon"><i class="fa-solid fa-utensils"></i></div>
                <h3 class="service-title">Nhà hàng 5 sao</h3>
                <p class="service-text">Thưởng thức ẩm thực Á - Âu.</p>
            </div>
            <div class="service-item">
                <div class="service-icon"><i class="fa-solid fa-person-swimming"></i></div>
                <h3 class="service-title">Hồ bơi vô cực</h3>
                <p class="service-text">Tầm nhìn toàn cảnh thành phố.</p>
            </div>
            <div class="service-item">
                <div class="service-icon"><i class="fa-solid fa-spa"></i></div>
                <h3 class="service-title">Luxury Spa</h3>
                <p class="service-text">Liệu trình thư giãn cao cấp.</p>
            </div>
            <div class="service-item">
                <div class="service-icon"><i class="fa-solid fa-martini-glass-citrus"></i></div>
                <h3 class="service-title">Sky Bar</h3>
                <p class="service-text">Cocktail và nhạc sống mỗi tối.</p>
            </div>
        </div>
    </div>
</section>

@if(isset($khuyenMais) && $khuyenMais->count() > 0)
<section class="section-promo">
    <div class="container">
        <div class="promo-header-flex">
            <div>
                <span class="sub-title">Ưu đãi đặc biệt</span>
                <h2 class="main-title">Khuyến mãi dành cho bạn</h2>
            </div>
            <a href="{{ route('khuyen-mai') }}" class="btn-text">
                Xem tất cả <i class="fa-solid fa-arrow-right"></i>
            </a>
        </div>

        <div class="promo-grid">
            @foreach($khuyenMais as $km)
            <div class="promo-card">
                <div class="promo-badge">HOT</div>
                
                <div class="promo-icon">
                    <i class="fa-solid fa-gift"></i>
                </div>
                
                <div class="promo-info" style="flex-grow: 1;">
                    <h3>{{ $km->ten_khuyen_mai }}</h3>
                    <p class="promo-desc" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                        {{ $km->mo_ta }}
                    </p>
                    <div class="promo-meta">
                        <span class="code-box">
                            Mã: <strong>{{ $km->ma_khuyen_mai }}</strong> </span>
                        <span class="discount-val">
                            @if($km->chiet_khau_phan_tram > 0) -{{ $km->chiet_khau_phan_tram }}%
                            @else
                                -{{ number_format($km->so_tien_giam_gia) }}đ
                            @endif
                        </span>
                    </div>
                </div>
                
                <div>
                    <button onclick="navigator.clipboard.writeText('{{ $km->ma_khuyen_mai }}'); alert('Đã sao chép mã!')" class="copy-btn">
                        Sao chép
                    </button>
                </div>
            </div>
            @endforeach
        </div>
    </div>
</section>
@endif

<section class="section-testimonial">
    <div class="container">
        <div class="section-header">
            <h2 class="main-title">Khách hàng nói gì về chúng tôi?</h2>
        </div>

        <div class="testimonial-grid">
            <div class="testimonial-card">
                <i class="fa-solid fa-quote-left quote-icon"></i>
                <p class="testimonial-text">"Một trải nghiệm tuyệt vời! Phòng ốc sạch sẽ, nhân viên cực kỳ thân thiện và chuyên nghiệp."</p>
                <div class="user-profile">
                    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User" class="user-avatar">
                    <div>
                        <h4 class="user-name">Nguyễn Thu Hà</h4>
                        <div class="star-rating">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="testimonial-card">
                <i class="fa-solid fa-quote-left quote-icon"></i>
                <p class="testimonial-text">"Vị trí khách sạn rất thuận tiện. Đồ ăn sáng ngon và đa dạng. Hồ bơi view đẹp nhất khu vực."</p>
                <div class="user-profile">
                    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" class="user-avatar">
                    <div>
                        <h4 class="user-name">Trần Minh Tuấn</h4>
                        <div class="star-rating">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="testimonial-card">
                <i class="fa-solid fa-quote-left quote-icon"></i>
                <p class="testimonial-text">"Dịch vụ đẳng cấp 5 sao thực sự. Tôi rất ấn tượng với cách bài trí nội thất trong phòng Suite."</p>
                <div class="user-profile">
                    <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="User" class="user-avatar">
                    <div>
                        <h4 class="user-name">Sarah Johnson</h4>
                        <div class="star-rating">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="section-cta">
    <div class="cta-content">
        <h2 class="cta-title">Sẵn sàng cho kỳ nghỉ trong mơ?</h2>
        <p class="cta-text">Đặt phòng trực tiếp trên website để nhận ưu đãi tốt nhất và tích điểm thành viên.</p>
        <a href="{{ route('phong.danh-sach') }}" class="btn btn-primary" style="background-color: var(--primary-dark);">
            ĐẶT PHÒNG NGAY
        </a>
    </div>
</section>

@endsection
</file>

<file path="routes/web.php">
<?php

use Illuminate\Support\Facades\Route;
use Illuminate\Support\Facades\Auth;

// --- 1. IMPORT ADMIN CONTROLLERS ---
use App\Http\Controllers\Admin\AdminController; 
use App\Http\Controllers\Admin\ChiTietDatPhongController;
use App\Http\Controllers\Admin\DatPhongController; 
use App\Http\Controllers\Admin\HoaDonController;
use App\Http\Controllers\Admin\LoaiPhongController;
use App\Http\Controllers\Admin\PhongController;
use App\Http\Controllers\Admin\UserController;
use App\Http\Controllers\Admin\KhuyenMaiController;
use App\Http\Controllers\Admin\TienNghiController;

// --- 2. IMPORT CLIENT CONTROLLERS ---
use App\Http\Controllers\Client\PageController;
use App\Http\Controllers\Client\BookingController;
use App\Http\Controllers\ProfileController;

Auth::routes();

/*
|--------------------------------------------------------------------------
| PUBLIC ROUTES (KHÁCH HÀNG)
|--------------------------------------------------------------------------
*/

// Trang chủ
Route::get('/', [PageController::class, 'home'])->name('trang_chu');
Route::get('/home', [PageController::class, 'home'])->name('home');

// === QUAN TRỌNG: Route này tên là 'phong.danh-sach' ===
Route::get('/danh-sach-phong', [PageController::class, 'rooms'])->name('phong.danh-sach');

// Chi tiết phòng
Route::get('/chi-tiet-phong/{id}', [PageController::class, 'roomDetail'])->name('phong.chi-tiet');

// Trang ưu đãi
Route::get('/uu-dai', [PageController::class, 'promotions'])->name('khuyen-mai');

// [MỚI] API kiểm tra mã khuyến mãi
Route::post('/api/check-promo', [BookingController::class, 'checkPromotion'])->name('api.check.promo');


/*
|--------------------------------------------------------------------------
| AUTHENTICATED ROUTES (KHÁCH HÀNG ĐÃ ĐĂNG NHẬP)
|--------------------------------------------------------------------------
*/
Route::middleware('auth')->group(function () {
    
    // 1. Hồ sơ cá nhân
    Route::get('/ho-so', [ProfileController::class, 'edit'])->name('profile.edit');
    Route::patch('/ho-so', [ProfileController::class, 'update'])->name('profile.update');

    // 2. Lịch sử đặt phòng
    Route::get('/lich-su-dat-phong', [DatPhongController::class, 'getDanhSach'])->name('bookings.history');

    // 3. Quy trình đặt phòng (Yêu cầu có Profile)
    Route::middleware(['check.profile'])->group(function () {
        Route::get('/dat-phong/xac-nhan', [BookingController::class, 'create'])->name('booking.create');
        Route::post('/dat-phong/luu', [BookingController::class, 'store'])->name('booking.store');
        Route::get('/dat-phong/thanh-cong', [BookingController::class, 'success'])->name('booking.success');
    });
});


/*
|--------------------------------------------------------------------------
| ADMIN ROUTES (QUẢN TRỊ VIÊN)
|--------------------------------------------------------------------------
*/
Route::prefix('admin')
    ->middleware(['auth', \App\Http\Middleware\AdminMiddleware::class])
    ->group(function () {
    
    Route::get('/dashboard', [AdminController::class, 'index'])->name('admin.dashboard');

    // Quản lý Loại phòng
    Route::prefix('loai-phong')->group(function() {
        Route::get('/', [LoaiPhongController::class, 'getDanhSach'])->name('admin.loai-phong');
        Route::get('/them', [LoaiPhongController::class, 'getThem'])->name('admin.loai-phong.them');
        Route::post('/them', [LoaiPhongController::class, 'postThem'])->name('admin.loai-phong.store');
        Route::get('/sua/{id}', [LoaiPhongController::class, 'getSua'])->name('admin.loai-phong.sua');
        Route::post('/sua/{id}', [LoaiPhongController::class, 'postSua'])->name('admin.loai-phong.update');
        Route::get('/xoa/{id}', [LoaiPhongController::class, 'getXoa'])->name('admin.loai-phong.xoa');
    });

    // Quản lý Phòng
    Route::prefix('phong')->group(function() {
        Route::get('/', [PhongController::class, 'getDanhSach'])->name('admin.phong');
        Route::get('/them', [PhongController::class, 'getThem'])->name('admin.phong.them');
        Route::post('/them', [PhongController::class, 'postThem'])->name('admin.phong.store');
        Route::get('/sua/{id}', [PhongController::class, 'getSua'])->name('admin.phong.sua');
        Route::post('/sua/{id}', [PhongController::class, 'postSua'])->name('admin.phong.update');
        Route::get('/xoa/{id}', [PhongController::class, 'getXoa'])->name('admin.phong.xoa');
    });

    // Quản lý Đặt phòng
Route::prefix('dat-phong')->group(function() {
    Route::get('/', [DatPhongController::class, 'getDanhSach'])->name('admin.dat-phong');
    

    Route::delete('/xoa-hang-loat', [DatPhongController::class, 'xoaHangLoat'])->name('admin.dat-phong.xoa-hang-loat');

    // [MỚI] Xem chi tiết hóa đơn/Thanh toán
    Route::get('/hoa-don/{id}', [DatPhongController::class, 'getHoaDon'])->name('admin.dat-phong.hoa-don'); 
    
    // [MỚI] Xử lý cập nhật trạng thái thanh toán
    Route::post('/thanh-toan/{id}', [DatPhongController::class, 'postThanhToan'])->name('admin.dat-phong.thanh-toan');  

    // [MỚI] Route DUYỆT ĐƠN (Khóa phòng)
    Route::get('/duyet/{id}', [DatPhongController::class, 'duyetDon'])->name('admin.dat-phong.duyet'); 
    
    // [MỚI] Route HỦY ĐƠN (Mở lại phòng)
    Route::get('/huy/{id}', [DatPhongController::class, 'huyDon'])->name('admin.dat-phong.huy'); 
    
    // (Các route cũ giữ nguyên)
    Route::get('/sua/{id}', [DatPhongController::class, 'getSua'])->name('admin.dat-phong.sua');
    Route::post('/sua/{id}', [DatPhongController::class, 'postSua'])->name('admin.dat-phong.update');
    Route::get('/xoa/{id}', [DatPhongController::class, 'getXoa'])->name('admin.dat-phong.xoa');
});

    // Quản lý Khuyến mãi
    Route::prefix('khuyen-mai')->group(function() {
        Route::get('/', [KhuyenMaiController::class, 'getDanhSach'])->name('admin.khuyen-mai');
        Route::get('/them', [KhuyenMaiController::class, 'getThem'])->name('admin.khuyen-mai.them');
        Route::post('/them', [KhuyenMaiController::class, 'postThem'])->name('admin.khuyen-mai.store');
        Route::get('/sua/{id}', [KhuyenMaiController::class, 'getSua'])->name('admin.khuyen-mai.sua');
        Route::post('/sua/{id}', [KhuyenMaiController::class, 'postSua'])->name('admin.khuyen-mai.update');
        Route::get('/xoa/{id}', [KhuyenMaiController::class, 'getXoa'])->name('admin.khuyen-mai.xoa');
    });

    // Quản lý Hóa đơn
    Route::prefix('hoa-don')->group(function() {
        Route::get('/', [HoaDonController::class, 'getDanhSach'])->name('admin.hoa-don');
        Route::get('/sua/{id}', [HoaDonController::class, 'getSua'])->name('admin.hoa-don.sua');
        Route::post('/sua/{id}', [HoaDonController::class, 'postSua'])->name('admin.hoa-don.update');
        Route::get('/xoa/{id}', [HoaDonController::class, 'getXoa'])->name('admin.hoa-don.xoa');
    });
    
    // Quản lý Users
    Route::prefix('users')->group(function() {
        Route::get('/', [UserController::class, 'getDanhSach'])->name('admin.users');
        Route::get('/them', [UserController::class, 'getThem'])->name('admin.user.them');
        Route::post('/them', [UserController::class, 'postThem'])->name('admin.user.store');
        Route::get('/sua/{id}', [UserController::class, 'getSua'])->name('admin.user.sua');
        Route::post('/sua/{id}', [UserController::class, 'postSua'])->name('admin.user.update');
        Route::get('/xoa/{id}', [UserController::class, 'getXoa'])->name('admin.user.xoa');
    });

    // Quản lý Tiện nghi
    Route::prefix('tien-nghi')->group(function() {
        Route::get('/', [TienNghiController::class, 'getDanhSach'])->name('admin.tien-nghi');
        Route::get('/them', [TienNghiController::class, 'getThem'])->name('admin.tien-nghi.them');
        Route::post('/them', [TienNghiController::class, 'postThem'])->name('admin.tien-nghi.store');
        Route::get('/sua/{id}', [TienNghiController::class, 'getSua'])->name('admin.tien-nghi.sua');
        Route::post('/sua/{id}', [TienNghiController::class, 'postSua'])->name('admin.tien-nghi.update');
        Route::get('/xoa/{id}', [TienNghiController::class, 'getXoa'])->name('admin.tien-nghi.xoa');
    });
});
</file>

<file path="resources/views/layouts/app.blade.php">
<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}" class="scroll-smooth">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="{{ csrf_token() }}">

    <title>@yield('title', 'Luxury Stay') - Hệ thống đặt phòng đẳng cấp</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS (CDN) - Vẫn giữ để dùng cho các trang con nếu cần -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- GỌI ASSETS QUA VITE -->
    <!-- Đã bao gồm config màu, css tùy chỉnh và js logic -->
    @vite([
        'resources/js/tailwind-config.js',
        'resources/css/client.css', 
        'resources/js/client.js'
    ])

    <!-- Alpine.js -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body>

    @include('layouts.header')
    <!-- MAIN CONTENT -->
    <!-- Sử dụng class 'main-content' thay vì các class Tailwind trực tiếp -->
    <main class="main-content">
        
        <!-- Flash Messages (Thông báo) -->
        <!-- Code HTML giờ đây rất sạch sẽ nhờ sử dụng class từ client.css -->
        @if(session('success') || session('error'))
            <div class="flash-container" x-data="{ show: true }" x-show="show" x-init="setTimeout(() => show = false, 5000)">
                
                @if(session('success'))
                    <div class="flash-success">
                        <div class="flex items-center">
                            <i class="fa-solid fa-circle-check flash-icon-success"></i>
                            <p class="font-medium">{{ session('success') }}</p>
                        </div>
                        <button @click="show = false" class="btn-close-success"><i class="fa-solid fa-xmark"></i></button>
                    </div>
                @endif

                @if(session('error'))
                    <div class="flash-error">
                        <div class="flex items-center">
                            <i class="fa-solid fa-circle-exclamation flash-icon-error"></i>
                            <p class="font-medium">{{ session('error') }}</p>
                        </div>
                        <button @click="show = false" class="btn-close-error"><i class="fa-solid fa-xmark"></i></button>
                    </div>
                @endif

            </div>
        @endif

        @yield('content')
    </main>

    @include('layouts.footer')

    @stack('scripts')
</body>
</html>
</file>

</files>
</file>

<file path="config/app.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Application Name
    |--------------------------------------------------------------------------
    |
    | This value is the name of your application, which will be used when the
    | framework needs to place the application's name in a notification or
    | other UI elements where an application name needs to be displayed.
    |
    */

    'name' => env('APP_NAME', 'Laravel'),

    /*
    |--------------------------------------------------------------------------
    | Application Environment
    |--------------------------------------------------------------------------
    |
    | This value determines the "environment" your application is currently
    | running in. This may determine how you prefer to configure various
    | services the application utilizes. Set this in your ".env" file.
    |
    */

    'env' => env('APP_ENV', 'production'),

    /*
    |--------------------------------------------------------------------------
    | Application Debug Mode
    |--------------------------------------------------------------------------
    |
    | When your application is in debug mode, detailed error messages with
    | stack traces will be shown on every error that occurs within your
    | application. If disabled, a simple generic error page is shown.
    |
    */

    'debug' => (bool) env('APP_DEBUG', false),

    /*
    |--------------------------------------------------------------------------
    | Application URL
    |--------------------------------------------------------------------------
    |
    | This URL is used by the console to properly generate URLs when using
    | the Artisan command line tool. You should set this to the root of
    | the application so that it's available within Artisan commands.
    |
    */

    'url' => env('APP_URL', 'http://localhost'),

    /*
    |--------------------------------------------------------------------------
    | Application Timezone
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default timezone for your application, which
    | will be used by the PHP date and date-time functions. The timezone
    | is set to "UTC" by default as it is suitable for most use cases.
    |
    */

    'timezone' => 'UTC',

    /*
    |--------------------------------------------------------------------------
    | Application Locale Configuration
    |--------------------------------------------------------------------------
    |
    | The application locale determines the default locale that will be used
    | by Laravel's translation / localization methods. This option can be
    | set to any locale for which you plan to have translation strings.
    |
    */

    'locale' => env('APP_LOCALE', 'en'),

    'fallback_locale' => env('APP_FALLBACK_LOCALE', 'en'),

    'faker_locale' => env('APP_FAKER_LOCALE', 'en_US'),

    /*
    |--------------------------------------------------------------------------
    | Encryption Key
    |--------------------------------------------------------------------------
    |
    | This key is utilized by Laravel's encryption services and should be set
    | to a random, 32 character string to ensure that all encrypted values
    | are secure. You should do this prior to deploying the application.
    |
    */

    'cipher' => 'AES-256-CBC',

    'key' => env('APP_KEY'),

    'previous_keys' => [
        ...array_filter(
            explode(',', (string) env('APP_PREVIOUS_KEYS', ''))
        ),
    ],

    /*
    |--------------------------------------------------------------------------
    | Maintenance Mode Driver
    |--------------------------------------------------------------------------
    |
    | These configuration options determine the driver used to determine and
    | manage Laravel's "maintenance mode" status. The "cache" driver will
    | allow maintenance mode to be controlled across multiple machines.
    |
    | Supported drivers: "file", "cache"
    |
    */

    'maintenance' => [
        'driver' => env('APP_MAINTENANCE_DRIVER', 'file'),
        'store' => env('APP_MAINTENANCE_STORE', 'database'),
    ],

];
</file>

<file path="config/auth.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Authentication Defaults
    |--------------------------------------------------------------------------
    |
    | This option defines the default authentication "guard" and password
    | reset "broker" for your application. You may change these values
    | as required, but they're a perfect start for most applications.
    |
    */

    'defaults' => [
        'guard' => env('AUTH_GUARD', 'web'),
        'passwords' => env('AUTH_PASSWORD_BROKER', 'users'),
    ],

    /*
    |--------------------------------------------------------------------------
    | Authentication Guards
    |--------------------------------------------------------------------------
    |
    | Next, you may define every authentication guard for your application.
    | Of course, a great default configuration has been defined for you
    | which utilizes session storage plus the Eloquent user provider.
    |
    | All authentication guards have a user provider, which defines how the
    | users are actually retrieved out of your database or other storage
    | system used by the application. Typically, Eloquent is utilized.
    |
    | Supported: "session"
    |
    */

    'guards' => [
        'web' => [
            'driver' => 'session',
            'provider' => 'users',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | User Providers
    |--------------------------------------------------------------------------
    |
    | All authentication guards have a user provider, which defines how the
    | users are actually retrieved out of your database or other storage
    | system used by the application. Typically, Eloquent is utilized.
    |
    | If you have multiple user tables or models you may configure multiple
    | providers to represent the model / table. These providers may then
    | be assigned to any extra authentication guards you have defined.
    |
    | Supported: "database", "eloquent"
    |
    */

    'providers' => [
        'users' => [
            'driver' => 'eloquent',
            'model' => env('AUTH_MODEL', App\Models\User::class),
        ],

        // 'users' => [
        //     'driver' => 'database',
        //     'table' => 'users',
        // ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Resetting Passwords
    |--------------------------------------------------------------------------
    |
    | These configuration options specify the behavior of Laravel's password
    | reset functionality, including the table utilized for token storage
    | and the user provider that is invoked to actually retrieve users.
    |
    | The expiry time is the number of minutes that each reset token will be
    | considered valid. This security feature keeps tokens short-lived so
    | they have less time to be guessed. You may change this as needed.
    |
    | The throttle setting is the number of seconds a user must wait before
    | generating more password reset tokens. This prevents the user from
    | quickly generating a very large amount of password reset tokens.
    |
    */

    'passwords' => [
        'users' => [
            'provider' => 'users',
            'table' => env('AUTH_PASSWORD_RESET_TOKEN_TABLE', 'password_reset_tokens'),
            'expire' => 60,
            'throttle' => 60,
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Password Confirmation Timeout
    |--------------------------------------------------------------------------
    |
    | Here you may define the number of seconds before a password confirmation
    | window expires and users are asked to re-enter their password via the
    | confirmation screen. By default, the timeout lasts for three hours.
    |
    */

    'password_timeout' => env('AUTH_PASSWORD_TIMEOUT', 10800),

];
</file>

<file path="config/cache.php">
<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Cache Store
    |--------------------------------------------------------------------------
    |
    | This option controls the default cache store that will be used by the
    | framework. This connection is utilized if another isn't explicitly
    | specified when running a cache operation inside the application.
    |
    */

    'default' => env('CACHE_STORE', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Cache Stores
    |--------------------------------------------------------------------------
    |
    | Here you may define all of the cache "stores" for your application as
    | well as their drivers. You may even define multiple stores for the
    | same cache driver to group types of items stored in your caches.
    |
    | Supported drivers: "array", "database", "file", "memcached",
    |                    "redis", "dynamodb", "octane",
    |                    "failover", "null"
    |
    */

    'stores' => [

        'array' => [
            'driver' => 'array',
            'serialize' => false,
        ],

        'database' => [
            'driver' => 'database',
            'connection' => env('DB_CACHE_CONNECTION'),
            'table' => env('DB_CACHE_TABLE', 'cache'),
            'lock_connection' => env('DB_CACHE_LOCK_CONNECTION'),
            'lock_table' => env('DB_CACHE_LOCK_TABLE'),
        ],

        'file' => [
            'driver' => 'file',
            'path' => storage_path('framework/cache/data'),
            'lock_path' => storage_path('framework/cache/data'),
        ],

        'memcached' => [
            'driver' => 'memcached',
            'persistent_id' => env('MEMCACHED_PERSISTENT_ID'),
            'sasl' => [
                env('MEMCACHED_USERNAME'),
                env('MEMCACHED_PASSWORD'),
            ],
            'options' => [
                // Memcached::OPT_CONNECT_TIMEOUT => 2000,
            ],
            'servers' => [
                [
                    'host' => env('MEMCACHED_HOST', '127.0.0.1'),
                    'port' => env('MEMCACHED_PORT', 11211),
                    'weight' => 100,
                ],
            ],
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => env('REDIS_CACHE_CONNECTION', 'cache'),
            'lock_connection' => env('REDIS_CACHE_LOCK_CONNECTION', 'default'),
        ],

        'dynamodb' => [
            'driver' => 'dynamodb',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'table' => env('DYNAMODB_CACHE_TABLE', 'cache'),
            'endpoint' => env('DYNAMODB_ENDPOINT'),
        ],

        'octane' => [
            'driver' => 'octane',
        ],

        'failover' => [
            'driver' => 'failover',
            'stores' => [
                'database',
                'array',
            ],
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Cache Key Prefix
    |--------------------------------------------------------------------------
    |
    | When utilizing the APC, database, memcached, Redis, and DynamoDB cache
    | stores, there might be other applications using the same cache. For
    | that reason, you may prefix every cache key to avoid collisions.
    |
    */

    'prefix' => env('CACHE_PREFIX', Str::slug((string) env('APP_NAME', 'laravel')).'-cache-'),

];
</file>

<file path="config/database.php">
<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Database Connection Name
    |--------------------------------------------------------------------------
    |
    | Here you may specify which of the database connections below you wish
    | to use as your default connection for database operations. This is
    | the connection which will be utilized unless another connection
    | is explicitly specified when you execute a query / statement.
    |
    */

    'default' => env('DB_CONNECTION', 'sqlite'),

    /*
    |--------------------------------------------------------------------------
    | Database Connections
    |--------------------------------------------------------------------------
    |
    | Below are all of the database connections defined for your application.
    | An example configuration is provided for each database system which
    | is supported by Laravel. You're free to add / remove connections.
    |
    */

    'connections' => [

        'sqlite' => [
            'driver' => 'sqlite',
            'url' => env('DB_URL'),
            'database' => env('DB_DATABASE', database_path('database.sqlite')),
            'prefix' => '',
            'foreign_key_constraints' => env('DB_FOREIGN_KEYS', true),
            'busy_timeout' => null,
            'journal_mode' => null,
            'synchronous' => null,
            'transaction_mode' => 'DEFERRED',
        ],

        'mysql' => [
            'driver' => 'mysql',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => env('DB_CHARSET', 'utf8mb4'),
            'collation' => env('DB_COLLATION', 'utf8mb4_unicode_ci'),
            'prefix' => '',
            'prefix_indexes' => true,
            'strict' => true,
            'engine' =>  env('DB_ENGINE', 'InnoDB'),
            'options' => extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

        'mariadb' => [
            'driver' => 'mariadb',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => env('DB_CHARSET', 'utf8mb4'),
            'collation' => env('DB_COLLATION', 'utf8mb4_unicode_ci'),
            'prefix' => '',
            'prefix_indexes' => true,
            'strict' => true,
            'engine' => null,
            'options' => extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

        'pgsql' => [
            'driver' => 'pgsql',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '5432'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => env('DB_CHARSET', 'utf8'),
            'prefix' => '',
            'prefix_indexes' => true,
            'search_path' => 'public',
            'sslmode' => 'prefer',
        ],

        'sqlsrv' => [
            'driver' => 'sqlsrv',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', 'localhost'),
            'port' => env('DB_PORT', '1433'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => env('DB_CHARSET', 'utf8'),
            'prefix' => '',
            'prefix_indexes' => true,
            // 'encrypt' => env('DB_ENCRYPT', 'yes'),
            // 'trust_server_certificate' => env('DB_TRUST_SERVER_CERTIFICATE', 'false'),
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Migration Repository Table
    |--------------------------------------------------------------------------
    |
    | This table keeps track of all the migrations that have already run for
    | your application. Using this information, we can determine which of
    | the migrations on disk haven't actually been run on the database.
    |
    */

    'migrations' => [
        'table' => 'migrations',
        'update_date_on_publish' => true,
    ],

    /*
    |--------------------------------------------------------------------------
    | Redis Databases
    |--------------------------------------------------------------------------
    |
    | Redis is an open source, fast, and advanced key-value store that also
    | provides a richer body of commands than a typical key-value system
    | such as Memcached. You may define your connection settings here.
    |
    */

    'redis' => [

        'client' => env('REDIS_CLIENT', 'phpredis'),

        'options' => [
            'cluster' => env('REDIS_CLUSTER', 'redis'),
            'prefix' => env('REDIS_PREFIX', Str::slug((string) env('APP_NAME', 'laravel')).'-database-'),
            'persistent' => env('REDIS_PERSISTENT', false),
        ],

        'default' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_DB', '0'),
            'max_retries' => env('REDIS_MAX_RETRIES', 3),
            'backoff_algorithm' => env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),
            'backoff_base' => env('REDIS_BACKOFF_BASE', 100),
            'backoff_cap' => env('REDIS_BACKOFF_CAP', 1000),
        ],

        'cache' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_CACHE_DB', '1'),
            'max_retries' => env('REDIS_MAX_RETRIES', 3),
            'backoff_algorithm' => env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),
            'backoff_base' => env('REDIS_BACKOFF_BASE', 100),
            'backoff_cap' => env('REDIS_BACKOFF_CAP', 1000),
        ],

    ],

];
</file>

<file path="config/filesystems.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Filesystem Disk
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default filesystem disk that should be used
    | by the framework. The "local" disk, as well as a variety of cloud
    | based disks are available to your application for file storage.
    |
    */

    'default' => env('FILESYSTEM_DISK', 'local'),

    /*
    |--------------------------------------------------------------------------
    | Filesystem Disks
    |--------------------------------------------------------------------------
    |
    | Below you may configure as many filesystem disks as necessary, and you
    | may even configure multiple disks for the same driver. Examples for
    | most supported storage drivers are configured here for reference.
    |
    | Supported drivers: "local", "ftp", "sftp", "s3"
    |
    */

    'disks' => [

        'local' => [
            'driver' => 'local',
            'root' => storage_path('app/private'),
            'serve' => true,
            'throw' => false,
            'report' => false,
        ],

        'public' => [
            'driver' => 'local',
            'root' => storage_path('app/public'),
            'url' => env('APP_URL').'/storage',
            'visibility' => 'public',
            'throw' => false,
            'report' => false,
        ],

        's3' => [
            'driver' => 's3',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION'),
            'bucket' => env('AWS_BUCKET'),
            'url' => env('AWS_URL'),
            'endpoint' => env('AWS_ENDPOINT'),
            'use_path_style_endpoint' => env('AWS_USE_PATH_STYLE_ENDPOINT', false),
            'throw' => false,
            'report' => false,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Symbolic Links
    |--------------------------------------------------------------------------
    |
    | Here you may configure the symbolic links that will be created when the
    | `storage:link` Artisan command is executed. The array keys should be
    | the locations of the links and the values should be their targets.
    |
    */

    'links' => [
        public_path('storage') => storage_path('app/public'),
    ],

];
</file>

<file path="config/logging.php">
<?php

use Monolog\Handler\NullHandler;
use Monolog\Handler\StreamHandler;
use Monolog\Handler\SyslogUdpHandler;
use Monolog\Processor\PsrLogMessageProcessor;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Log Channel
    |--------------------------------------------------------------------------
    |
    | This option defines the default log channel that is utilized to write
    | messages to your logs. The value provided here should match one of
    | the channels present in the list of "channels" configured below.
    |
    */

    'default' => env('LOG_CHANNEL', 'stack'),

    /*
    |--------------------------------------------------------------------------
    | Deprecations Log Channel
    |--------------------------------------------------------------------------
    |
    | This option controls the log channel that should be used to log warnings
    | regarding deprecated PHP and library features. This allows you to get
    | your application ready for upcoming major versions of dependencies.
    |
    */

    'deprecations' => [
        'channel' => env('LOG_DEPRECATIONS_CHANNEL', 'null'),
        'trace' => env('LOG_DEPRECATIONS_TRACE', false),
    ],

    /*
    |--------------------------------------------------------------------------
    | Log Channels
    |--------------------------------------------------------------------------
    |
    | Here you may configure the log channels for your application. Laravel
    | utilizes the Monolog PHP logging library, which includes a variety
    | of powerful log handlers and formatters that you're free to use.
    |
    | Available drivers: "single", "daily", "slack", "syslog",
    |                    "errorlog", "monolog", "custom", "stack"
    |
    */

    'channels' => [

        'stack' => [
            'driver' => 'stack',
            'channels' => explode(',', (string) env('LOG_STACK', 'single')),
            'ignore_exceptions' => false,
        ],

        'single' => [
            'driver' => 'single',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'daily' => [
            'driver' => 'daily',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'days' => env('LOG_DAILY_DAYS', 14),
            'replace_placeholders' => true,
        ],

        'slack' => [
            'driver' => 'slack',
            'url' => env('LOG_SLACK_WEBHOOK_URL'),
            'username' => env('LOG_SLACK_USERNAME', 'Laravel Log'),
            'emoji' => env('LOG_SLACK_EMOJI', ':boom:'),
            'level' => env('LOG_LEVEL', 'critical'),
            'replace_placeholders' => true,
        ],

        'papertrail' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => env('LOG_PAPERTRAIL_HANDLER', SyslogUdpHandler::class),
            'handler_with' => [
                'host' => env('PAPERTRAIL_URL'),
                'port' => env('PAPERTRAIL_PORT'),
                'connectionString' => 'tls://'.env('PAPERTRAIL_URL').':'.env('PAPERTRAIL_PORT'),
            ],
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'stderr' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => StreamHandler::class,
            'handler_with' => [
                'stream' => 'php://stderr',
            ],
            'formatter' => env('LOG_STDERR_FORMATTER'),
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'syslog' => [
            'driver' => 'syslog',
            'level' => env('LOG_LEVEL', 'debug'),
            'facility' => env('LOG_SYSLOG_FACILITY', LOG_USER),
            'replace_placeholders' => true,
        ],

        'errorlog' => [
            'driver' => 'errorlog',
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'null' => [
            'driver' => 'monolog',
            'handler' => NullHandler::class,
        ],

        'emergency' => [
            'path' => storage_path('logs/laravel.log'),
        ],

    ],

];
</file>

<file path="config/queue.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Queue Connection Name
    |--------------------------------------------------------------------------
    |
    | Laravel's queue supports a variety of backends via a single, unified
    | API, giving you convenient access to each backend using identical
    | syntax for each. The default queue connection is defined below.
    |
    */

    'default' => env('QUEUE_CONNECTION', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Queue Connections
    |--------------------------------------------------------------------------
    |
    | Here you may configure the connection options for every queue backend
    | used by your application. An example configuration is provided for
    | each backend supported by Laravel. You're also free to add more.
    |
    | Drivers: "sync", "database", "beanstalkd", "sqs", "redis",
    |          "deferred", "background", "failover", "null"
    |
    */

    'connections' => [

        'sync' => [
            'driver' => 'sync',
        ],

        'database' => [
            'driver' => 'database',
            'connection' => env('DB_QUEUE_CONNECTION'),
            'table' => env('DB_QUEUE_TABLE', 'jobs'),
            'queue' => env('DB_QUEUE', 'default'),
            'retry_after' => (int) env('DB_QUEUE_RETRY_AFTER', 90),
            'after_commit' => false,
        ],

        'beanstalkd' => [
            'driver' => 'beanstalkd',
            'host' => env('BEANSTALKD_QUEUE_HOST', 'localhost'),
            'queue' => env('BEANSTALKD_QUEUE', 'default'),
            'retry_after' => (int) env('BEANSTALKD_QUEUE_RETRY_AFTER', 90),
            'block_for' => 0,
            'after_commit' => false,
        ],

        'sqs' => [
            'driver' => 'sqs',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'prefix' => env('SQS_PREFIX', 'https://sqs.us-east-1.amazonaws.com/your-account-id'),
            'queue' => env('SQS_QUEUE', 'default'),
            'suffix' => env('SQS_SUFFIX'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'after_commit' => false,
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => env('REDIS_QUEUE_CONNECTION', 'default'),
            'queue' => env('REDIS_QUEUE', 'default'),
            'retry_after' => (int) env('REDIS_QUEUE_RETRY_AFTER', 90),
            'block_for' => null,
            'after_commit' => false,
        ],

        'deferred' => [
            'driver' => 'deferred',
        ],

        'background' => [
            'driver' => 'background',
        ],

        'failover' => [
            'driver' => 'failover',
            'connections' => [
                'database',
                'deferred',
            ],
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Job Batching
    |--------------------------------------------------------------------------
    |
    | The following options configure the database and table that store job
    | batching information. These options can be updated to any database
    | connection and table which has been defined by your application.
    |
    */

    'batching' => [
        'database' => env('DB_CONNECTION', 'sqlite'),
        'table' => 'job_batches',
    ],

    /*
    |--------------------------------------------------------------------------
    | Failed Queue Jobs
    |--------------------------------------------------------------------------
    |
    | These options configure the behavior of failed queue job logging so you
    | can control how and where failed jobs are stored. Laravel ships with
    | support for storing failed jobs in a simple file or in a database.
    |
    | Supported drivers: "database-uuids", "dynamodb", "file", "null"
    |
    */

    'failed' => [
        'driver' => env('QUEUE_FAILED_DRIVER', 'database-uuids'),
        'database' => env('DB_CONNECTION', 'sqlite'),
        'table' => 'failed_jobs',
    ],

];
</file>

<file path="config/session.php">
<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Session Driver
    |--------------------------------------------------------------------------
    |
    | This option determines the default session driver that is utilized for
    | incoming requests. Laravel supports a variety of storage options to
    | persist session data. Database storage is a great default choice.
    |
    | Supported: "file", "cookie", "database", "memcached",
    |            "redis", "dynamodb", "array"
    |
    */

    'driver' => env('SESSION_DRIVER', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Session Lifetime
    |--------------------------------------------------------------------------
    |
    | Here you may specify the number of minutes that you wish the session
    | to be allowed to remain idle before it expires. If you want them
    | to expire immediately when the browser is closed then you may
    | indicate that via the expire_on_close configuration option.
    |
    */

    'lifetime' => (int) env('SESSION_LIFETIME', 120),

    'expire_on_close' => env('SESSION_EXPIRE_ON_CLOSE', false),

    /*
    |--------------------------------------------------------------------------
    | Session Encryption
    |--------------------------------------------------------------------------
    |
    | This option allows you to easily specify that all of your session data
    | should be encrypted before it's stored. All encryption is performed
    | automatically by Laravel and you may use the session like normal.
    |
    */

    'encrypt' => env('SESSION_ENCRYPT', false),

    /*
    |--------------------------------------------------------------------------
    | Session File Location
    |--------------------------------------------------------------------------
    |
    | When utilizing the "file" session driver, the session files are placed
    | on disk. The default storage location is defined here; however, you
    | are free to provide another location where they should be stored.
    |
    */

    'files' => storage_path('framework/sessions'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Connection
    |--------------------------------------------------------------------------
    |
    | When using the "database" or "redis" session drivers, you may specify a
    | connection that should be used to manage these sessions. This should
    | correspond to a connection in your database configuration options.
    |
    */

    'connection' => env('SESSION_CONNECTION'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Table
    |--------------------------------------------------------------------------
    |
    | When using the "database" session driver, you may specify the table to
    | be used to store sessions. Of course, a sensible default is defined
    | for you; however, you're welcome to change this to another table.
    |
    */

    'table' => env('SESSION_TABLE', 'sessions'),

    /*
    |--------------------------------------------------------------------------
    | Session Cache Store
    |--------------------------------------------------------------------------
    |
    | When using one of the framework's cache driven session backends, you may
    | define the cache store which should be used to store the session data
    | between requests. This must match one of your defined cache stores.
    |
    | Affects: "dynamodb", "memcached", "redis"
    |
    */

    'store' => env('SESSION_STORE'),

    /*
    |--------------------------------------------------------------------------
    | Session Sweeping Lottery
    |--------------------------------------------------------------------------
    |
    | Some session drivers must manually sweep their storage location to get
    | rid of old sessions from storage. Here are the chances that it will
    | happen on a given request. By default, the odds are 2 out of 100.
    |
    */

    'lottery' => [2, 100],

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Name
    |--------------------------------------------------------------------------
    |
    | Here you may change the name of the session cookie that is created by
    | the framework. Typically, you should not need to change this value
    | since doing so does not grant a meaningful security improvement.
    |
    */

    'cookie' => env(
        'SESSION_COOKIE',
        Str::slug((string) env('APP_NAME', 'laravel')).'-session'
    ),

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Path
    |--------------------------------------------------------------------------
    |
    | The session cookie path determines the path for which the cookie will
    | be regarded as available. Typically, this will be the root path of
    | your application, but you're free to change this when necessary.
    |
    */

    'path' => env('SESSION_PATH', '/'),

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Domain
    |--------------------------------------------------------------------------
    |
    | This value determines the domain and subdomains the session cookie is
    | available to. By default, the cookie will be available to the root
    | domain and all subdomains. Typically, this shouldn't be changed.
    |
    */

    'domain' => env('SESSION_DOMAIN'),

    /*
    |--------------------------------------------------------------------------
    | HTTPS Only Cookies
    |--------------------------------------------------------------------------
    |
    | By setting this option to true, session cookies will only be sent back
    | to the server if the browser has a HTTPS connection. This will keep
    | the cookie from being sent to you when it can't be done securely.
    |
    */

    'secure' => env('SESSION_SECURE_COOKIE'),

    /*
    |--------------------------------------------------------------------------
    | HTTP Access Only
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will prevent JavaScript from accessing the
    | value of the cookie and the cookie will only be accessible through
    | the HTTP protocol. It's unlikely you should disable this option.
    |
    */

    'http_only' => env('SESSION_HTTP_ONLY', true),

    /*
    |--------------------------------------------------------------------------
    | Same-Site Cookies
    |--------------------------------------------------------------------------
    |
    | This option determines how your cookies behave when cross-site requests
    | take place, and can be used to mitigate CSRF attacks. By default, we
    | will set this value to "lax" to permit secure cross-site requests.
    |
    | See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#samesitesamesite-value
    |
    | Supported: "lax", "strict", "none", null
    |
    */

    'same_site' => env('SESSION_SAME_SITE', 'lax'),

    /*
    |--------------------------------------------------------------------------
    | Partitioned Cookies
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will tie the cookie to the top-level site for
    | a cross-site context. Partitioned cookies are accepted by the browser
    | when flagged "secure" and the Same-Site attribute is set to "none".
    |
    */

    'partitioned' => env('SESSION_PARTITIONED_COOKIE', false),

];
</file>

<file path="config/vnpay.php">
<?php
// Tên file: config/vnpay.php

$appUrl = env('APP_URL');
// Đảm bảo APP_URL không kết thúc bằng dấu '/', nếu có thì loại bỏ
$baseUrl = rtrim($appUrl, '/');

return [
    // Mã Merchant (TmnCode)
    'vnp_tmn_code' => env('VNPAY_TMN_CODE'),
    
    // Chuỗi bí mật để tạo Hash
    'vnp_hash_secret' => env('VNPAY_HASH_SECRET'),
    
    // URL chuyển đến cổng thanh toán (Sandbox)
    'vnp_url' => env('VNPAY_URL', 'https://sandbox.vnpayment.vn/paymentv2/vpcpay.html'),
    
    // [FIXED RETURN URL] URL xử lý kết quả trả về:
    // Sẽ là: http://127.0.0.1/hotel_management/public/payment/callback
    'vnp_return_url' => $baseUrl . '/payment/callback',
    
    // Command cố định cho lệnh thanh toán
    'vnp_command' => 'pay',
    
    // Phiên bản API
    'vnp_version' => '2.1.0',
    
    // Đơn vị tiền tệ mặc định
    'vnp_curr_code' => 'VND',

    // Loại hình thanh toán
    'vnp_order_type' => 'other',
];
</file>

<file path="database/.gitignore">
*.sqlite*
</file>

<file path="database/factories/UserFactory.php">
<?php

namespace Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Str;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\User>
 */
class UserFactory extends Factory
{
    /**
     * The current password being used by the factory.
     */
    protected static ?string $password;

    /**
     * Define the model's default state.
     *
     * @return array<string, mixed>
     */
    public function definition(): array
    {
        return [
            'name' => fake()->name(),
            'email' => fake()->unique()->safeEmail(),
            'email_verified_at' => now(),
            'password' => static::$password ??= Hash::make('password'),
            'remember_token' => Str::random(10),
        ];
    }

    /**
     * Indicate that the model's email address should be unverified.
     */
    public function unverified(): static
    {
        return $this->state(fn (array $attributes) => [
            'email_verified_at' => null,
        ]);
    }
}
</file>

<file path="database/migrations/0001_01_01_000001_create_cache_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('cache', function (Blueprint $table) {
            $table->string('key')->primary();
            $table->mediumText('value');
            $table->integer('expiration');
        });

        Schema::create('cache_locks', function (Blueprint $table) {
            $table->string('key')->primary();
            $table->string('owner');
            $table->integer('expiration');
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('cache');
        Schema::dropIfExists('cache_locks');
    }
};
</file>

<file path="database/migrations/0001_01_01_000002_create_jobs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('jobs', function (Blueprint $table) {
            $table->id();
            $table->string('queue')->index();
            $table->longText('payload');
            $table->unsignedTinyInteger('attempts');
            $table->unsignedInteger('reserved_at')->nullable();
            $table->unsignedInteger('available_at');
            $table->unsignedInteger('created_at');
        });

        Schema::create('job_batches', function (Blueprint $table) {
            $table->string('id')->primary();
            $table->string('name');
            $table->integer('total_jobs');
            $table->integer('pending_jobs');
            $table->integer('failed_jobs');
            $table->longText('failed_job_ids');
            $table->mediumText('options')->nullable();
            $table->integer('cancelled_at')->nullable();
            $table->integer('created_at');
            $table->integer('finished_at')->nullable();
        });

        Schema::create('failed_jobs', function (Blueprint $table) {
            $table->id();
            $table->string('uuid')->unique();
            $table->text('connection');
            $table->text('queue');
            $table->longText('payload');
            $table->longText('exception');
            $table->timestamp('failed_at')->useCurrent();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('jobs');
        Schema::dropIfExists('job_batches');
        Schema::dropIfExists('failed_jobs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181620_create_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('phongs', function (Blueprint $table) {
            $table->id();
            $table->foreignId(column: 'loai_phong_id')->constrained(table: 'loai_phongs')->onDelete('cascade');
            $table->string('so_phong');
            $table->string('tinh_trang')->default('available');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('phongs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181621_create_dat_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('dat_phongs', function (Blueprint $table) {
            $table->id();
            $table->foreignId('user_id')->constrained('users');
            $table->date('ngay_den');
            $table->date('ngay_di');
            $table->decimal('tong_tien', 12, 2);
            $table->string('trang_thai')->default('pending');
            $table->string('payment_status')->default('unpaid');
            $table->text('ghi_chu')->nullable();
            $table->string('promotion_code')->nullable();
            $table->decimal('discount_amount', 10, 2)->default(0);
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('dat_phongs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181624_create_hoa_dons_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('hoa_dons', function (Blueprint $table) {
            $table->id();
            $table->foreignId('dat_phong_id')->constrained('dat_phongs')->onDelete('cascade');
            $table->string('ma_hoa_don')->unique();
            $table->DateTime('ngay_lap');
            $table->decimal('tong_tien', 12, 2);
            $table->string('phuong_thuc_thanh_toan');
            $table->string('trang_thai')->default('unpaid');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('hoa_dons');
    }
};
</file>

<file path="database/migrations/2025_12_10_041323_add_price_cols_to_chi_tiet_dat_phongs.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::table('chi_tiet_dat_phongs', function (Blueprint $table) {
            // Kiểm tra nếu chưa có thì mới thêm
            if (!Schema::hasColumn('chi_tiet_dat_phongs', 'don_gia')) {
                $table->decimal('don_gia', 15, 2)->default(0)->after('so_luong'); // Giá tại thời điểm đặt
            }
            
            if (!Schema::hasColumn('chi_tiet_dat_phongs', 'thanh_tien')) {
                $table->decimal('thanh_tien', 15, 2)->default(0)->after('don_gia'); // Tổng tiền (đơn giá * số lượng)
            }
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::table('chi_tiet_dat_phongs', function (Blueprint $table) {
            $table->dropColumn(['don_gia', 'thanh_tien']);
        });
    }
};
</file>

<file path="database/migrations/2025_12_10_130034_create_tien_nghis_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        // 1. Bảng lưu tên các tiện nghi (Wifi, AC, Tivi...)
        Schema::create('tien_nghis', function (Blueprint $table) {
            $table->id();
            $table->string('ten_tien_nghi'); // Ví dụ: "Wifi tốc độ cao"
            $table->string('ma_tien_nghi')->unique(); // Ví dụ: "wifi", "ac", "tv" (Dùng để lọc trong code)
            $table->string('icon')->nullable(); // Ví dụ: font-awesome class "fa-wifi"
            $table->timestamps();
        });

        // 2. Bảng trung gian (Pivot Table) nối Loại phòng & Tiện nghi
        Schema::create('loai_phong_tien_nghi', function (Blueprint $table) {
            $table->id();
            
            // Khóa ngoại trỏ về bảng loai_phongs
            $table->unsignedBigInteger('loai_phong_id');
            $table->foreign('loai_phong_id')->references('id')->on('loai_phongs')->onDelete('cascade');

            // Khóa ngoại trỏ về bảng tien_nghis
            $table->unsignedBigInteger('tien_nghi_id');
            $table->foreign('tien_nghi_id')->references('id')->on('tien_nghis')->onDelete('cascade');
        });
    }   
    public function down(): void
    {
        Schema::dropIfExists('tien_nghis');
    }
};
</file>

<file path="database/migrations/2025_12_11_052751_add_payment_method_to_dat_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::table('dat_phongs', function (Blueprint $table) {
            // [FIXED] Thêm cột payment_method, sau cột payment_status
            if (!Schema::hasColumn('dat_phongs', 'payment_method')) {
                $table->string('payment_method')->default('pay_at_hotel')->after('payment_status');
            }
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::table('dat_phongs', function (Blueprint $table) {
            if (Schema::hasColumn('dat_phongs', 'payment_method')) {
                $table->dropColumn('payment_method');
            }
        });
    }
};
</file>

<file path="database/migrations/2025_12_12_063827_create_notifications_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('notifications', function (Blueprint $table) {
            $table->uuid('id')->primary();
            $table->string('type');
            $table->morphs('notifiable');
            $table->text('data');
            $table->timestamp('read_at')->nullable();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('notifications');
    }
};
</file>

<file path="database/seeders/DatabaseSeeder.php">
<?php

namespace Database\Seeders;

use App\Models\User;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;

class DatabaseSeeder extends Seeder
{
    use WithoutModelEvents;

    /**
     * Seed the application's database.
     */
    public function run(): void
    {
        // User::factory(10)->create();

        User::factory()->create([
            'name' => 'Test User',
            'email' => 'test@example.com',
        ]);
    }
}
</file>

<file path="docs/asset_cleanup.md">
Asset cleanup summary

Mục tiêu
- Gom tất cả CSS/JS client vào 2 manifest: `resources/css/client/app.css` và `resources/js/client/app.js`.
- Comment (không xóa) các include per-view đã thừa để dễ khôi phục.

Files changed (views where per-view @vite includes were commented)
- resources/views/auth/register.blade.php
  - Commented `@vite(['resources/css/register.css'])` and `@vite(['resources/js/register.js'])` — vì đã import vào `app.css` / `app.js`.
- resources/views/auth/login.blade.php
  - Commented `@vite(['resources/css/login.css'])` and the `@push('scripts')` block that included `resources/js/login.js`.
- resources/views/auth/passwords/reset.blade.php
  - Commented `@vite(['resources/css/password.css', 'resources/js/password.js'])`.
- resources/views/auth/passwords/email.blade.php
  - Commented `@vite(['resources/css/password.css', 'resources/js/password.js'])`.
- resources/views/auth/passwords/confirm.blade.php
  - Commented `@vite(['resources/css/password.css', 'resources/js/password.js'])`.
- resources/views/client/booking/history.blade.php
  - Commented the duplicate `home.css` include earlier and left only `history.css` (kept comment explaining rationale).

Centralized manifest files added
- resources/css/client/app.css — imports per-page CSS via CSS `@import`.
- resources/js/client/app.js — imports per-page JS modules via ES imports.

Layout update
- resources/views/layouts/app.blade.php
  - Replaced multiple per-page entries in the `@vite([...])` call with:
    - `'resources/js/tailwind-config.js'`
    - `'resources/css/client/app.css'`
    - `'resources/js/client/app.js'`
  - This reduces duplicate loads and makes maintenance easier.

How to revert or customize
- To exclude a CSS/JS from the global bundle (load only on specific page):
  1. Remove its `@import` (CSS) or `import` (JS) from the manifest files.
  2. Uncomment the per-view `@vite([...])` call in that view file (see commented lines in views).

Notes / Caveats
- Vite will still build all referenced assets; after these changes run your usual build/dev commands:

  npm run dev
  npm run build

- The CSS `@import` paths assume the current structure; if you reorganize files, update imports accordingly.
- The JS manifest imports expect the referenced JS files to use ES module exports or side-effect initialization. If a script assumes it is loaded only on a specific page and references DOM elements immediately, you may see errors when it runs on pages without those elements. In that case move initialization behind DOM checks or load that script only on specific pages.

If bạn muốn, mình có thể tiếp tục:
- Bổ sung một file CSS nhỏ để style pagination (ví dụ `resources/css/client/pagination.css`) và import vào `app.css`.
- Chạy một lần `npm run build` hoặc `npm run dev` (cần môi trường Node trên máy bạn) để kiểm tra bundle.
- Tách một số script khỏi `app.js` nếu gặp lỗi side-effect trên trang không có DOM element tương ứng.
</file>

<file path="lang/en/auth.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Authentication Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines are used during authentication for various
    | messages that we need to display to the user. You are free to modify
    | these language lines according to your application's requirements.
    |
    */

    'failed' => 'These credentials do not match our records.',
    'password' => 'The provided password is incorrect.',
    'throttle' => 'Too many login attempts. Please try again in :seconds seconds.',

];
</file>

<file path="lang/en/pagination.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Pagination Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines are used by the paginator library to build
    | the simple pagination links. You are free to change them to anything
    | you want to customize your views to better match your application.
    |
    */

    'previous' => '&laquo; Previous',
    'next' => 'Next &raquo;',

];
</file>

<file path="lang/en/passwords.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Password Reset Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines are the default lines which match reasons
    | that are given by the password broker for a password update attempt
    | outcome such as failure due to an invalid password / reset token.
    |
    */

    'reset' => 'Your password has been reset.',
    'sent' => 'We have emailed your password reset link.',
    'throttled' => 'Please wait before retrying.',
    'token' => 'This password reset token is invalid.',
    'user' => "We can't find a user with that email address.",

];
</file>

<file path="lang/en/validation.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Validation Language Lines
    |--------------------------------------------------------------------------
    |
    | The following language lines contain the default error messages used by
    | the validator class. Some of these rules have multiple versions such
    | as the size rules. Feel free to tweak each of these messages here.
    |
    */

    'accepted' => 'The :attribute field must be accepted.',
    'accepted_if' => 'The :attribute field must be accepted when :other is :value.',
    'active_url' => 'The :attribute field must be a valid URL.',
    'after' => 'The :attribute field must be a date after :date.',
    'after_or_equal' => 'The :attribute field must be a date after or equal to :date.',
    'alpha' => 'The :attribute field must only contain letters.',
    'alpha_dash' => 'The :attribute field must only contain letters, numbers, dashes, and underscores.',
    'alpha_num' => 'The :attribute field must only contain letters and numbers.',
    'any_of' => 'The :attribute field is invalid.',
    'array' => 'The :attribute field must be an array.',
    'ascii' => 'The :attribute field must only contain single-byte alphanumeric characters and symbols.',
    'before' => 'The :attribute field must be a date before :date.',
    'before_or_equal' => 'The :attribute field must be a date before or equal to :date.',
    'between' => [
        'array' => 'The :attribute field must have between :min and :max items.',
        'file' => 'The :attribute field must be between :min and :max kilobytes.',
        'numeric' => 'The :attribute field must be between :min and :max.',
        'string' => 'The :attribute field must be between :min and :max characters.',
    ],
    'boolean' => 'The :attribute field must be true or false.',
    'can' => 'The :attribute field contains an unauthorized value.',
    'confirmed' => 'The :attribute field confirmation does not match.',
    'contains' => 'The :attribute field is missing a required value.',
    'current_password' => 'The password is incorrect.',
    'date' => 'The :attribute field must be a valid date.',
    'date_equals' => 'The :attribute field must be a date equal to :date.',
    'date_format' => 'The :attribute field must match the format :format.',
    'decimal' => 'The :attribute field must have :decimal decimal places.',
    'declined' => 'The :attribute field must be declined.',
    'declined_if' => 'The :attribute field must be declined when :other is :value.',
    'different' => 'The :attribute field and :other must be different.',
    'digits' => 'The :attribute field must be :digits digits.',
    'digits_between' => 'The :attribute field must be between :min and :max digits.',
    'dimensions' => 'The :attribute field has invalid image dimensions.',
    'distinct' => 'The :attribute field has a duplicate value.',
    'doesnt_contain' => 'The :attribute field must not contain any of the following: :values.',
    'doesnt_end_with' => 'The :attribute field must not end with one of the following: :values.',
    'doesnt_start_with' => 'The :attribute field must not start with one of the following: :values.',
    'email' => 'The :attribute field must be a valid email address.',
    'encoding' => 'The :attribute field must be encoded in :encoding.',
    'ends_with' => 'The :attribute field must end with one of the following: :values.',
    'enum' => 'The selected :attribute is invalid.',
    'exists' => 'The selected :attribute is invalid.',
    'extensions' => 'The :attribute field must have one of the following extensions: :values.',
    'file' => 'The :attribute field must be a file.',
    'filled' => 'The :attribute field must have a value.',
    'gt' => [
        'array' => 'The :attribute field must have more than :value items.',
        'file' => 'The :attribute field must be greater than :value kilobytes.',
        'numeric' => 'The :attribute field must be greater than :value.',
        'string' => 'The :attribute field must be greater than :value characters.',
    ],
    'gte' => [
        'array' => 'The :attribute field must have :value items or more.',
        'file' => 'The :attribute field must be greater than or equal to :value kilobytes.',
        'numeric' => 'The :attribute field must be greater than or equal to :value.',
        'string' => 'The :attribute field must be greater than or equal to :value characters.',
    ],
    'hex_color' => 'The :attribute field must be a valid hexadecimal color.',
    'image' => 'The :attribute field must be an image.',
    'in' => 'The selected :attribute is invalid.',
    'in_array' => 'The :attribute field must exist in :other.',
    'in_array_keys' => 'The :attribute field must contain at least one of the following keys: :values.',
    'integer' => 'The :attribute field must be an integer.',
    'ip' => 'The :attribute field must be a valid IP address.',
    'ipv4' => 'The :attribute field must be a valid IPv4 address.',
    'ipv6' => 'The :attribute field must be a valid IPv6 address.',
    'json' => 'The :attribute field must be a valid JSON string.',
    'list' => 'The :attribute field must be a list.',
    'lowercase' => 'The :attribute field must be lowercase.',
    'lt' => [
        'array' => 'The :attribute field must have less than :value items.',
        'file' => 'The :attribute field must be less than :value kilobytes.',
        'numeric' => 'The :attribute field must be less than :value.',
        'string' => 'The :attribute field must be less than :value characters.',
    ],
    'lte' => [
        'array' => 'The :attribute field must not have more than :value items.',
        'file' => 'The :attribute field must be less than or equal to :value kilobytes.',
        'numeric' => 'The :attribute field must be less than or equal to :value.',
        'string' => 'The :attribute field must be less than or equal to :value characters.',
    ],
    'mac_address' => 'The :attribute field must be a valid MAC address.',
    'max' => [
        'array' => 'The :attribute field must not have more than :max items.',
        'file' => 'The :attribute field must not be greater than :max kilobytes.',
        'numeric' => 'The :attribute field must not be greater than :max.',
        'string' => 'The :attribute field must not be greater than :max characters.',
    ],
    'max_digits' => 'The :attribute field must not have more than :max digits.',
    'mimes' => 'The :attribute field must be a file of type: :values.',
    'mimetypes' => 'The :attribute field must be a file of type: :values.',
    'min' => [
        'array' => 'The :attribute field must have at least :min items.',
        'file' => 'The :attribute field must be at least :min kilobytes.',
        'numeric' => 'The :attribute field must be at least :min.',
        'string' => 'The :attribute field must be at least :min characters.',
    ],
    'min_digits' => 'The :attribute field must have at least :min digits.',
    'missing' => 'The :attribute field must be missing.',
    'missing_if' => 'The :attribute field must be missing when :other is :value.',
    'missing_unless' => 'The :attribute field must be missing unless :other is :value.',
    'missing_with' => 'The :attribute field must be missing when :values is present.',
    'missing_with_all' => 'The :attribute field must be missing when :values are present.',
    'multiple_of' => 'The :attribute field must be a multiple of :value.',
    'not_in' => 'The selected :attribute is invalid.',
    'not_regex' => 'The :attribute field format is invalid.',
    'numeric' => 'The :attribute field must be a number.',
    'password' => [
        'letters' => 'The :attribute field must contain at least one letter.',
        'mixed' => 'The :attribute field must contain at least one uppercase and one lowercase letter.',
        'numbers' => 'The :attribute field must contain at least one number.',
        'symbols' => 'The :attribute field must contain at least one symbol.',
        'uncompromised' => 'The given :attribute has appeared in a data leak. Please choose a different :attribute.',
    ],
    'present' => 'The :attribute field must be present.',
    'present_if' => 'The :attribute field must be present when :other is :value.',
    'present_unless' => 'The :attribute field must be present unless :other is :value.',
    'present_with' => 'The :attribute field must be present when :values is present.',
    'present_with_all' => 'The :attribute field must be present when :values are present.',
    'prohibited' => 'The :attribute field is prohibited.',
    'prohibited_if' => 'The :attribute field is prohibited when :other is :value.',
    'prohibited_if_accepted' => 'The :attribute field is prohibited when :other is accepted.',
    'prohibited_if_declined' => 'The :attribute field is prohibited when :other is declined.',
    'prohibited_unless' => 'The :attribute field is prohibited unless :other is in :values.',
    'prohibits' => 'The :attribute field prohibits :other from being present.',
    'regex' => 'The :attribute field format is invalid.',
    'required' => 'The :attribute field is required.',
    'required_array_keys' => 'The :attribute field must contain entries for: :values.',
    'required_if' => 'The :attribute field is required when :other is :value.',
    'required_if_accepted' => 'The :attribute field is required when :other is accepted.',
    'required_if_declined' => 'The :attribute field is required when :other is declined.',
    'required_unless' => 'The :attribute field is required unless :other is in :values.',
    'required_with' => 'The :attribute field is required when :values is present.',
    'required_with_all' => 'The :attribute field is required when :values are present.',
    'required_without' => 'The :attribute field is required when :values is not present.',
    'required_without_all' => 'The :attribute field is required when none of :values are present.',
    'same' => 'The :attribute field must match :other.',
    'size' => [
        'array' => 'The :attribute field must contain :size items.',
        'file' => 'The :attribute field must be :size kilobytes.',
        'numeric' => 'The :attribute field must be :size.',
        'string' => 'The :attribute field must be :size characters.',
    ],
    'starts_with' => 'The :attribute field must start with one of the following: :values.',
    'string' => 'The :attribute field must be a string.',
    'timezone' => 'The :attribute field must be a valid timezone.',
    'unique' => 'The :attribute has already been taken.',
    'uploaded' => 'The :attribute failed to upload.',
    'uppercase' => 'The :attribute field must be uppercase.',
    'url' => 'The :attribute field must be a valid URL.',
    'ulid' => 'The :attribute field must be a valid ULID.',
    'uuid' => 'The :attribute field must be a valid UUID.',

    /*
    |--------------------------------------------------------------------------
    | Custom Validation Language Lines
    |--------------------------------------------------------------------------
    |
    | Here you may specify custom validation messages for attributes using the
    | convention "attribute.rule" to name the lines. This makes it quick to
    | specify a specific custom language line for a given attribute rule.
    |
    */

    'custom' => [
        'attribute-name' => [
            'rule-name' => 'custom-message',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Custom Validation Attributes
    |--------------------------------------------------------------------------
    |
    | The following language lines are used to swap our attribute placeholder
    | with something more reader friendly such as "E-Mail Address" instead
    | of "email". This simply helps us make our message more expressive.
    |
    */

    'attributes' => [],

];
</file>

<file path="phpunit.xml">
<?xml version="1.0" encoding="UTF-8"?>
<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="vendor/phpunit/phpunit/phpunit.xsd"
         bootstrap="vendor/autoload.php"
         colors="true"
>
    <testsuites>
        <testsuite name="Unit">
            <directory>tests/Unit</directory>
        </testsuite>
        <testsuite name="Feature">
            <directory>tests/Feature</directory>
        </testsuite>
    </testsuites>
    <source>
        <include>
            <directory>app</directory>
        </include>
    </source>
    <php>
        <env name="APP_ENV" value="testing"/>
        <env name="APP_MAINTENANCE_DRIVER" value="file"/>
        <env name="BCRYPT_ROUNDS" value="4"/>
        <env name="BROADCAST_CONNECTION" value="null"/>
        <env name="CACHE_STORE" value="array"/>
        <env name="DB_CONNECTION" value="sqlite"/>
        <env name="DB_DATABASE" value=":memory:"/>
        <env name="MAIL_MAILER" value="array"/>
        <env name="QUEUE_CONNECTION" value="sync"/>
        <env name="SESSION_DRIVER" value="array"/>
        <env name="PULSE_ENABLED" value="false"/>
        <env name="TELESCOPE_ENABLED" value="false"/>
        <env name="NIGHTWATCH_ENABLED" value="false"/>
    </php>
</phpunit>
</file>

<file path="public/index.php">
<?php

use Illuminate\Foundation\Application;
use Illuminate\Http\Request;

define('LARAVEL_START', microtime(true));

// Determine if the application is in maintenance mode...
if (file_exists($maintenance = __DIR__.'/../storage/framework/maintenance.php')) {
    require $maintenance;
}

// Register the Composer autoloader...
require __DIR__.'/../vendor/autoload.php';

// Bootstrap Laravel and handle the request...
/** @var Application $app */
$app = require_once __DIR__.'/../bootstrap/app.php';

$app->handleRequest(Request::capture());
</file>

<file path="public/robots.txt">
User-agent: *
Disallow:
</file>

<file path="README.md">
# hotel_management
đồ án môn học
</file>

<file path="resources/css/admin/admin.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- Custom Styles cho Admin --- */


/* 1. Ẩn element khi Alpine chưa load xong */

[x-cloak] {
    display: none !important;
}


/* 2. Scrollbar đẹp (Theme Gold/Black) */

::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
    background: #c5a47e;
    border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
    background: #b08d55;
}


/* 3. Style cho dòng active trong menu sidebar */

.nav-active {
    background-color: rgba(31, 41, 55, 1);
    /* brand-800 */
    color: #c5a47e;
    /* brand-gold */
    border-left: 4px solid #c5a47e;
}
</file>

<file path="resources/css/client/about.css">
/* =========================================
   ABOUT US PAGE (Luxury Dark Theme)
   ========================================= */


/* --- 1. HERO BANNER --- */

.about-hero {
    position: relative;
    height: 60vh;
    min-height: 500px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    background-color: #111;
    overflow: hidden;
}

.about-hero-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.5;
    animation: zoomSlow 30s infinite alternate;
}

@keyframes zoomSlow {
    from {
        transform: scale(1);
    }
    to {
        transform: scale(1.2);
    }
}

.about-hero-content {
    position: relative;
    z-index: 2;
    padding: 0 1rem;
    max-width: 800px;
}

.about-subtitle {
    display: block;
    color: var(--primary-gold);
    font-size: 0.9rem;
    letter-spacing: 4px;
    text-transform: uppercase;
    margin-bottom: 1rem;
    font-weight: 600;
}

.about-title {
    font-family: var(--font-serif);
    font-size: 3.5rem;
    color: var(--white);
    margin: 0;
    line-height: 1.2;
}


/* --- 2. OUR STORY SECTION --- */

.section-story {
    padding: 6rem 0;
    background: var(--bg-body);
}

.story-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 4rem;
    align-items: center;
}

@media (min-width: 1024px) {
    .story-grid {
        grid-template-columns: 1fr 1fr;
    }
}

.story-content h2 {
    font-family: var(--font-serif);
    font-size: 2.5rem;
    color: var(--white);
    margin-bottom: 1.5rem;
}

.story-content .lead {
    font-size: 1.1rem;
    color: var(--primary-gold);
    margin-bottom: 1.5rem;
    font-style: italic;
    font-family: var(--font-serif);
}

.story-content p {
    color: var(--text-muted);
    margin-bottom: 1rem;
    line-height: 1.8;
}


/* Hiệu ứng ảnh chồng nhau */

.story-images {
    position: relative;
    height: 500px;
}

.img-frame-1,
.img-frame-2 {
    position: absolute;
    border-radius: var(--radius-md);
    overflow: hidden;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    border: 1px solid var(--border-light);
}

.img-frame-1 {
    width: 70%;
    height: 80%;
    top: 0;
    left: 0;
    z-index: 1;
}

.img-frame-2 {
    width: 60%;
    height: 60%;
    bottom: 0;
    right: 0;
    z-index: 2;
    border: 4px solid var(--bg-body);
    /* Tạo viền ngăn cách */
}

.story-images img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: 0.5s;
}

.story-images:hover .img-frame-1 img {
    transform: scale(1.05);
}

.story-images:hover .img-frame-2 img {
    transform: scale(1.1);
}


/* --- 3. STATS SECTION (Parallax) --- */

.section-stats {
    padding: 6rem 0;
    background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?ixlib=rb-4.0.3');
    background-attachment: fixed;
    background-size: cover;
    background-position: center;
    border-top: 1px solid var(--border-light);
    border-bottom: 1px solid var(--border-light);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 3rem;
    text-align: center;
}

@media (min-width: 768px) {
    .stats-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

.stat-item i {
    font-size: 2.5rem;
    color: var(--primary-gold);
    margin-bottom: 1rem;
}

.stat-number {
    display: block;
    font-size: 3rem;
    font-weight: 700;
    color: var(--white);
    font-family: var(--font-serif);
    margin-bottom: 0.5rem;
}

.stat-label {
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.85rem;
}


/* --- 4. CORE VALUES --- */

.section-values {
    padding: 6rem 0;
    background: #151515;
}

.values-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}

.value-card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border-light);
    padding: 2.5rem;
    border-radius: var(--radius-lg);
    transition: 0.3s;
    text-align: center;
}

.value-card:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: var(--primary-gold);
    transform: translateY(-5px);
}

.value-icon {
    width: 60px;
    height: 60px;
    margin: 0 auto 1.5rem;
    background: rgba(205, 164, 94, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-gold);
    font-size: 1.5rem;
}

.value-card h3 {
    color: var(--white);
    font-family: var(--font-serif);
    font-size: 1.25rem;
    margin-bottom: 1rem;
}

.value-card p {
    color: var(--text-muted);
    font-size: 0.95rem;
}


/* --- 5. TEAM SECTION --- */

.section-team {
    padding: 6rem 0;
    background: var(--bg-body);
}

.team-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}

.team-card {
    position: relative;
    overflow: hidden;
    border-radius: var(--radius-md);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.team-img {
    width: 100%;
    height: 350px;
    object-fit: cover;
    transition: 0.5s;
    filter: grayscale(20%);
}

.team-card:hover .team-img {
    transform: scale(1.1);
    filter: grayscale(0%);
}

.team-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
    padding: 2rem 1.5rem 1.5rem;
    transform: translateY(10px);
    transition: 0.3s;
}

.team-card:hover .team-overlay {
    transform: translateY(0);
}

.team-name {
    color: var(--primary-gold);
    font-family: var(--font-serif);
    font-size: 1.25rem;
    margin: 0;
}

.team-role {
    color: var(--white);
    font-size: 0.85rem;
    margin-bottom: 0.5rem;
    display: block;
}


/* Animation Helper */

.fade-up {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}

.fade-up.visible {
    opacity: 1;
    transform: translateY(0);
}
</file>

<file path="resources/css/client/booking-pdf.css">
/* Dedicated PDF CSS for invoice export
   This file contains print-optimized overrides used only for server-generated PDFs.
*/

html,
body {
    background: #fff !important;
    color: #000 !important;
    font-size: 12px !important;
    font-family: 'Helvetica', 'Arial', sans-serif !important;
}


/* Remove site chrome */

.header-wrapper,
.footer-wrapper,
.mobile-menu-wrapper,
.mobile-toggle,
.header-actions,
.flash-container,
.dropdown-menu {
    display: none !important;
}


/* Hide interactive buttons in PDF */

.btn,
.btn-apply,
.btn-confirm-booking,
.btn-copy,
.print-hidden,
.print\:hidden {
    display: none !important;
}


/* Make invoice content full width and remove shadows */

.booking-page-wrapper,
.booking-layout,
.container,
.main-content,
.max-w-3xl,
.max-w-4xl {
    width: 100% !important;
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
}

.booking-card,
.summary-card,
.success-card {
    box-shadow: none !important;
    background: #fff !important;
    border: none !important;
}


/* Table and typography tweaks for compact PDF */

table {
    width: 100% !important;
    border-collapse: collapse;
}

th,
td {
    padding: 6px 8px !important;
}


/* Force page size */

@page {
    size: A4 portrait;
    margin: 10mm;
}


/* Ensure images and backgrounds render cleanly */

img {
    max-width: 100% !important;
    height: auto !important;
}
</file>

<file path="resources/css/client/history.css">
/* =========================================
   HISTORY PAGE (Luxury Dark Theme)
   ========================================= */


/* --- 1. LAYOUT & CONTAINER --- */

.history-page-wrapper {
    padding-top: 3rem;
    padding-bottom: 6rem;
    min-height: 80vh;
    background-color: var(--bg-body);
    /* Nền tối */
}


/* --- 2. HEADER SECTION --- */

.history-header {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-bottom: 3rem;
    border-bottom: 1px solid var(--border-light);
    padding-bottom: 1.5rem;
}

@media (min-width: 768px) {
    .history-header {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
    }
}

.history-title {
    font-family: var(--font-serif);
    font-size: 2.5rem;
    color: var(--white);
    margin: 0 0 0.5rem 0;
}

.history-desc {
    color: var(--text-muted);
    font-size: 1rem;
    margin: 0;
}

.btn-new-booking {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: var(--white);
    color: var(--primary-dark);
    font-weight: 700;
    border-radius: var(--radius-md);
    text-decoration: none;
    transition: all 0.3s;
    font-size: 0.9rem;
    border: 1px solid var(--white);
}

.btn-new-booking:hover {
    background: var(--primary-gold);
    border-color: var(--primary-gold);
    color: #000;
    transform: translateY(-2px);
}

.btn-new-booking i {
    transition: transform 0.3s;
}

.btn-new-booking:hover i {
    transform: rotate(90deg);
}


/* --- 3. EMPTY STATE --- */

.empty-state {
    text-align: center;
    padding: 6rem 2rem;
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    border: 1px dashed var(--border-light);
    animation: fadeInUp 0.5s ease;
}

.empty-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 1.5rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    color: var(--text-muted);
}

.empty-title {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    color: var(--white);
    margin-bottom: 0.5rem;
}

.empty-desc {
    color: var(--text-muted);
    margin-bottom: 2rem;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
}

.btn-cta-primary {
    display: inline-flex;
    align-items: center;
    padding: 0.8rem 2rem;
    background: var(--primary-gold);
    color: #000;
    font-weight: 700;
    border-radius: 50px;
    text-decoration: none;
    transition: 0.3s;
}

.btn-cta-primary:hover {
    background: var(--primary-hover);
    box-shadow: 0 5px 15px rgba(205, 164, 94, 0.4);
    transform: translateY(-2px);
}


/* --- 4. BOOKING LIST & CARDS --- */

.booking-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.booking-card {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: all 0.3s ease;
    position: relative;
    animation: fadeInUp 0.5s ease;
}

.booking-card:hover {
    border-color: var(--border-gold);
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}


/* Header Card */

.card-header {
    background: rgba(255, 255, 255, 0.03);
    padding: 1rem 1.5rem;
    border-bottom: 1px solid var(--border-light);
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
}

.booking-id {
    font-family: monospace;
    font-weight: 700;
    color: var(--text-muted);
    font-size: 0.85rem;
    letter-spacing: 1px;
    background: rgba(255, 255, 255, 0.05);
    padding: 0.2rem 0.6rem;
    border-radius: 4px;
}

.booking-date {
    font-size: 0.85rem;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}


/* Status Badges */

.status-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.3rem 0.8rem;
    border-radius: 50px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    border: 1px solid transparent;
}

.status-pending {
    background: rgba(234, 179, 8, 0.15);
    color: #fbbf24;
    border-color: rgba(234, 179, 8, 0.3);
}

.status-confirmed {
    background: rgba(59, 130, 246, 0.15);
    color: #60a5fa;
    border-color: rgba(59, 130, 246, 0.3);
}

.status-completed {
    background: rgba(16, 185, 129, 0.15);
    color: #34d399;
    border-color: rgba(16, 185, 129, 0.3);
}

.status-cancelled {
    background: rgba(239, 68, 68, 0.15);
    color: #f87171;
    border-color: rgba(239, 68, 68, 0.3);
}


/* Body Card */

.card-body {
    padding: 1.5rem;
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
}

@media (min-width: 768px) {
    .card-body {
        grid-template-columns: 100px 1fr auto;
    }
}

.room-thumb {
    width: 100px;
    height: 100px;
    border-radius: var(--radius-md);
    object-fit: cover;
    border: 1px solid var(--border-light);
}

.room-info h3 {
    font-family: var(--font-serif);
    font-size: 1.25rem;
    color: var(--white);
    margin: 0 0 0.5rem 0;
}

.room-detail-list {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 0.9rem;
    color: var(--text-muted);
}

.room-detail-list li {
    margin-bottom: 0.3rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.room-detail-list i {
    color: var(--primary-gold);
    font-size: 0.8rem;
}


/* Price & Action */

.card-actions {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    justify-content: center;
    gap: 1rem;
    text-align: right;
}

@media (max-width: 767px) {
    .card-actions {
        align-items: flex-start;
        text-align: left;
        margin-top: 1rem;
        border-top: 1px solid var(--border-light);
        padding-top: 1rem;
    }
}

.total-price {
    display: block;
    font-family: var(--font-serif);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary-gold);
}

.price-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    color: var(--text-muted);
    display: block;
    margin-bottom: 0.2rem;
}

.btn-view-detail {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    border: 1px solid var(--border-light);
    border-radius: 6px;
    color: var(--white);
    text-decoration: none;
    font-size: 0.85rem;
    transition: 0.3s;
}

.btn-view-detail:hover {
    border-color: var(--primary-gold);
    color: var(--primary-gold);
    background: rgba(205, 164, 94, 0.1);
}


/* Animation Helper */

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
</file>

<file path="resources/css/client/home.css">
/* =========================================
   1. CORE CONFIG & VARIABLES (Dark Luxury Theme)
   ========================================= */

 :root {
    /* Palette màu Luxury Dark */
    --primary-gold: #cda45e;
    /* Vàng kim chủ đạo */
    --primary-hover: #d9b876;
    /* Vàng sáng khi hover */
    --primary-dark: #8a6d20;
    /* Vàng đậm */
    --bg-body: #1a1a1a;
    /* Nền chính - Đen xám sang trọng */
    --bg-card: rgba(255, 255, 255, 0.03);
    /* Nền card trong suốt nhẹ */
    --bg-card-hover: rgba(255, 255, 255, 0.07);
    --bg-overlay: rgba(0, 0, 0, 0.7);
    --text-main: #ffffff;
    /* Chữ trắng */
    --text-muted: #a3a3a3;
    /* Chữ xám nhạt */
    --text-dark: #111827;
    /* Chữ đen (dùng cho nền vàng) */
    --border-light: rgba(255, 255, 255, 0.1);
    --border-gold: rgba(205, 164, 94, 0.3);
    --font-serif: 'Playfair Display', serif;
    --font-sans: 'Be Vietnam Pro', sans-serif;
    --container-width: 1280px;
    --radius-md: 8px;
    --radius-lg: 16px;
    --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
    --shadow-glow: 0 0 20px rgba(205, 164, 94, 0.15);
    /* Hiệu ứng phát sáng vàng */
}

[x-cloak] {
    display: none !important;
}


/* Global Reset */

html {
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-sans);
    color: var(--text-main);
    background-color: var(--bg-body);
    /* Nền tối toàn trang */
    margin: 0;
    line-height: 1.6;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}


/* Container */

.container {
    width: 100%;
    max-width: var(--container-width);
    margin: 0 auto;
    padding: 0 1.5rem;
}


/* --- Common UI Components --- */

.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem 1.5rem;
    border-radius: 50px;
    /* Bo tròn luxury */
    font-weight: 600;
    transition: all 0.3s ease;
    cursor: pointer;
    border: none;
    text-decoration: none;
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 1px;
}

.btn-primary {
    background-color: var(--primary-gold);
    color: #000;
    /* Chữ đen trên nền vàng */
    box-shadow: 0 4px 15px rgba(205, 164, 94, 0.3);
}

.btn-primary:hover {
    background-color: var(--primary-hover);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(205, 164, 94, 0.5);
}

.btn-outline {
    background: transparent;
    border: 1px solid var(--primary-gold);
    color: var(--primary-gold);
}

.btn-outline:hover {
    background: var(--primary-gold);
    color: #000;
}


/* =========================================
   2. HEADER & NAVIGATION (Dark Style)
   ========================================= */

.header-wrapper {
    position: sticky;
    top: 0;
    z-index: 1000;
    width: 100%;
    transition: all 0.4s ease;
    background: rgba(26, 26, 26, 0.85);
    /* Nền tối mờ */
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border-light);
}

.header-container {
    max-width: var(--container-width);
    margin: 0 auto;
    padding: 0 1.5rem;
}

.header-inner {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 80px;
}


/* Logo */

.logo-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
}

.logo-icon {
    width: 40px;
    height: 40px;
    background: rgba(205, 164, 94, 0.1);
    border: 1px solid var(--primary-gold);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-gold);
    font-size: 1.2rem;
    box-shadow: 0 0 15px rgba(205, 164, 94, 0.2);
}

.logo-text {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-main);
    letter-spacing: 0.5px;
}

.logo-text span {
    color: var(--primary-gold);
}


/* Nav Menu */

.main-nav {
    display: none;
    /* Mobile ẩn */
    gap: 2.5rem;
}

@media (min-width: 1024px) {
    .main-nav {
        display: flex;
    }
}

.nav-link {
    font-family: var(--font-sans);
    color: var(--text-main);
    font-weight: 500;
    font-size: 0.95rem;
    text-decoration: none;
    position: relative;
    padding: 0.5rem 0;
    transition: color 0.3s;
    opacity: 0.8;
}

.nav-link:hover,
.nav-link.active {
    color: var(--primary-gold);
    opacity: 1;
}

.nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--primary-gold);
    transition: width 0.3s;
    box-shadow: 0 0 10px var(--primary-gold);
}

.nav-link:hover::after,
.nav-link.active::after {
    width: 100%;
}


/* Header Actions & User Dropdown */

.header-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.btn-login,
.btn-register {
    text-decoration: none;
    font-weight: 600;
    font-size: 0.9rem;
    transition: all 0.3s;
}

.btn-login {
    color: var(--text-main);
}

.btn-login:hover {
    color: var(--primary-gold);
}

.btn-register {
    padding: 0.5rem 1.25rem;
    background: var(--primary-gold);
    color: #000;
    border-radius: 50px;
}

.btn-register:hover {
    background: var(--primary-hover);
    box-shadow: 0 0 15px rgba(205, 164, 94, 0.4);
}


/* User Dropdown */

.user-btn {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-light);
    padding: 0.4rem 1rem;
    border-radius: 50px;
    color: var(--text-main);
    cursor: pointer;
    transition: all 0.3s;
}

.user-btn:hover {
    border-color: var(--primary-gold);
    background: rgba(205, 164, 94, 0.1);
}

.user-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--border-light);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
}

.dropdown-menu {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 0.5rem;
    width: 220px;
    background: #242424;
    /* Nền dropdown tối */
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    padding: 0.5rem;
    z-index: 100;
}

.dropdown-item {
    display: block;
    padding: 0.75rem 1rem;
    color: var(--text-muted);
    text-decoration: none;
    border-radius: 4px;
    font-size: 0.9rem;
    transition: all 0.2s;
}

.dropdown-item:hover {
    background: rgba(205, 164, 94, 0.1);
    color: var(--primary-gold);
}

.dropdown-item i {
    width: 20px;
    text-align: center;
    margin-right: 0.5rem;
}


/* Mobile Toggle */

.mobile-toggle {
    display: none;
    /* Desktop */
    background: none;
    border: none;
    color: var(--text-main);
    font-size: 1.5rem;
    cursor: pointer;
}

@media (max-width: 1023px) {
    .mobile-toggle {
        display: block;
    }
}


/* =========================================
   3. HERO SECTION
   ========================================= */

.hero {
    position: relative;
    height: 90vh;
    min-height: 650px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    overflow: hidden;
}

.hero-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
    transform: scale(1.1);
    /* Zoom nhẹ */
}

.hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, rgba(0, 0, 0, 0.3) 0%, rgba(26, 26, 26, 0.9) 100%);
    z-index: 1;
}

.hero-content {
    position: relative;
    z-index: 2;
    max-width: 900px;
    padding: 0 1.5rem;
    animation: fadeInUp 1s ease-out;
}

.hero-heading {
    font-family: var(--font-serif);
    font-size: 4rem;
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 1.5rem;
    background: linear-gradient(to right, #fff, #e2e2e2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

.hero-desc {
    font-size: 1.25rem;
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 3rem;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
}

.sub-title {
    display: block;
    font-family: var(--font-sans);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 3px;
    color: var(--primary-gold);
    margin-bottom: 1rem;
    font-weight: 600;
}

.scroll-down {
    display: inline-flex;
    width: 50px;
    height: 50px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    align-items: center;
    justify-content: center;
    color: var(--white);
    margin-top: 2rem;
    transition: all 0.3s;
    animation: bounce 2s infinite;
}

.scroll-down:hover {
    border-color: var(--primary-gold);
    color: var(--primary-gold);
}


/* =========================================
   4. ROOMS SECTION (Dark Cards)
   ========================================= */

.section-rooms {
    padding: 6rem 0;
    background: var(--bg-body);
}

.section-header {
    text-align: center;
    margin-bottom: 4rem;
}

.main-title {
    font-family: var(--font-serif);
    font-size: 3rem;
    color: var(--text-main);
    margin: 0;
}

.main-title.light {
    color: var(--white);
}

.room-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2.5rem;
}

.room-card {
    background: #242424;
    /* Card nền tối */
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: all 0.4s ease;
    display: flex;
    flex-direction: column;
    height: 100%;
}

.room-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    border-color: var(--border-gold);
}

.room-img-wrap {
    position: relative;
    height: 280px;
    overflow: hidden;
}

.room-img-wrap img {
    transition: transform 0.6s ease;
}

.room-card:hover .room-img-wrap img {
    transform: scale(1.1);
}

.room-price-tag {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: rgba(26, 26, 26, 0.9);
    padding: 0.5rem 1rem;
    border-radius: 8px;
    backdrop-filter: blur(4px);
    border: 1px solid var(--border-gold);
    z-index: 10;
}

.room-price-amount {
    color: var(--primary-gold);
    font-weight: 700;
    font-size: 1.1rem;
}

.room-price-unit {
    color: var(--text-muted);
    font-size: 0.8rem;
}

.room-body {
    padding: 2rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.room-name {
    margin: 0 0 0.5rem 0;
    font-family: var(--font-serif);
    font-size: 1.5rem;
}

.room-title-link {
    color: var(--text-main);
    text-decoration: none;
    transition: color 0.3s;
}

.room-card:hover .room-title-link {
    color: var(--primary-gold);
}

.room-specs {
    display: flex;
    gap: 1.5rem;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-light);
}

.spec-item {
    font-size: 0.9rem;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.spec-item i {
    color: var(--primary-gold);
}

.room-short-desc {
    color: var(--text-muted);
    font-size: 0.95rem;
    margin-bottom: 1.5rem;
    flex-grow: 1;
}

.btn-card-action {
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: var(--primary-gold);
    text-decoration: none;
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s;
}

.btn-card-action:hover {
    color: var(--text-main);
    padding-left: 5px;
}

.room-btn-wrapper {
    text-align: center;
    margin-top: 4rem;
}


/* =========================================
   5. SERVICES SECTION
   ========================================= */

.section-services {
    padding: 6rem 0;
    background: #151515;
    /* Nền tối hơn nền body một chút */
    position: relative;
    overflow: hidden;
}

.service-bg-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 30rem;
    color: rgba(255, 255, 255, 0.02);
    /* Logo chìm cực lớn */
    pointer-events: none;
}

.service-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
}

.service-item {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-light);
    padding: 2.5rem;
    border-radius: var(--radius-md);
    text-align: center;
    transition: all 0.3s;
}

.service-item:hover {
    background: rgba(255, 255, 255, 0.06);
    transform: translateY(-5px);
    border-color: var(--border-gold);
}

.service-icon {
    width: 70px;
    height: 70px;
    background: rgba(205, 164, 94, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1.5rem;
    color: var(--primary-gold);
    font-size: 1.75rem;
    transition: all 0.3s;
}

.service-item:hover .service-icon {
    background: var(--primary-gold);
    color: #000;
    box-shadow: 0 0 20px rgba(205, 164, 94, 0.4);
}

.service-title {
    font-family: var(--font-serif);
    font-size: 1.25rem;
    color: var(--text-main);
    margin-bottom: 0.75rem;
}

.service-text {
    color: var(--text-muted);
    font-size: 0.95rem;
}


/* =========================================
   6. PROMO SECTION (Gradient Gold)
   ========================================= */

.section-promo {
    padding: 4rem 0;
    margin-bottom: 4rem;
}

.promo-header-flex {
    display: flex;
    justify-content: space-between;
    align-items: end;
    margin-bottom: 3rem;
}

.btn-text {
    color: var(--primary-gold);
    text-decoration: none;
    font-weight: 600;
    transition: 0.3s;
}

.btn-text:hover {
    color: var(--white);
}

.promo-card {
    background: linear-gradient(135deg, #242424 0%, #1a1a1a 100%);
    border: 1px solid var(--border-gold);
    border-radius: var(--radius-md);
    padding: 1.5rem;
    display: flex;
    gap: 1.5rem;
    align-items: center;
    position: relative;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.promo-badge {
    position: absolute;
    top: 0;
    left: 0;
    background: var(--primary-gold);
    color: #000;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 0.25rem 0.75rem;
    border-bottom-right-radius: 8px;
    border-top-left-radius: 8px;
}

.promo-icon {
    width: 60px;
    height: 60px;
    background: rgba(205, 164, 94, 0.1);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-gold);
    font-size: 1.5rem;
    flex-shrink: 0;
}

.promo-info h3 {
    color: var(--text-main);
    margin: 0 0 0.5rem 0;
    font-size: 1.1rem;
}

.promo-desc {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
}

.code-box {
    background: rgba(255, 255, 255, 0.1);
    padding: 0.2rem 0.6rem;
    border-radius: 4px;
    font-family: monospace;
    color: var(--primary-gold);
    font-size: 0.9rem;
    margin-right: 0.5rem;
}

.discount-val {
    color: #ef4444;
    /* Màu đỏ cho giảm giá nổi bật */
    font-weight: 700;
}

.copy-btn {
    background: transparent;
    border: 1px solid var(--border-light);
    color: var(--text-muted);
    padding: 0.4rem 0.8rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: 0.3s;
}

.copy-btn:hover {
    border-color: var(--primary-gold);
    color: var(--primary-gold);
}


/* =========================================
   7. TESTIMONIALS
   ========================================= */

.section-testimonial {
    padding: 6rem 0;
}

.testimonial-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
}

.testimonial-card {
    background: #242424;
    padding: 2.5rem;
    border-radius: var(--radius-lg);
    position: relative;
    border: 1px solid var(--border-light);
}

.quote-icon {
    font-size: 2rem;
    color: rgba(205, 164, 94, 0.2);
    position: absolute;
    top: 1.5rem;
    left: 1.5rem;
}

.testimonial-text {
    color: var(--text-muted);
    font-style: italic;
    margin-bottom: 2rem;
    position: relative;
    z-index: 1;
    font-size: 1rem;
}

.user-profile {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.user-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--primary-gold);
}

.user-name {
    color: var(--text-main);
    font-family: var(--font-serif);
    font-size: 1.1rem;
    margin: 0;
}

.star-rating i {
    color: var(--primary-gold);
    font-size: 0.8rem;
}


/* =========================================
   8. CTA SECTION
   ========================================= */

.section-cta {
    background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
    background-size: cover;
    background-position: center;
    padding: 6rem 0;
    text-align: center;
    background-attachment: fixed;
    /* Parallax effect */
}

.cta-content {
    max-width: 700px;
    margin: 0 auto;
}

.cta-title {
    font-family: var(--font-serif);
    font-size: 3rem;
    color: var(--white);
    margin-bottom: 1.5rem;
}

.cta-text {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1.2rem;
    margin-bottom: 3rem;
}


/* =========================================
   9. FOOTER (Dark Style)
   ========================================= */

.footer-wrapper {
    background-color: #111111;
    /* Đen sâu */
    border-top: 1px solid var(--border-light);
    color: var(--text-muted);
    padding-top: 5rem;
    padding-bottom: 2rem;
    margin-top: auto;
}

.footer-container {
    max-width: var(--container-width);
    margin: 0 auto;
    padding: 0 1.5rem;
}

.footer-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 3rem;
    margin-bottom: 4rem;
}

.footer-brand .footer-logo-text {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    color: var(--white);
    font-weight: 700;
}

.text-brand-gold {
    color: var(--primary-gold);
}

.footer-desc {
    font-size: 0.9rem;
    line-height: 1.7;
    margin-top: 1rem;
    max-width: 300px;
}

.footer-social-link {
    width: 36px;
    height: 36px;
    background: rgba(255, 255, 255, 0.05);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    color: var(--text-main);
    text-decoration: none;
    transition: all 0.3s;
}

.footer-social-link:hover {
    background: var(--primary-gold);
    color: #000;
}

.footer-heading {
    color: var(--primary-gold);
    font-family: var(--font-serif);
    font-size: 1.2rem;
    margin-bottom: 1.5rem;
}

.footer-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.footer-list li {
    margin-bottom: 0.8rem;
}

.footer-link {
    color: var(--text-muted);
    text-decoration: none;
    transition: 0.3s;
    font-size: 0.95rem;
}

.footer-link:hover {
    color: var(--primary-gold);
    padding-left: 5px;
}

.footer-contact-item {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
    align-items: flex-start;
}

.footer-contact-icon {
    color: var(--primary-gold);
    margin-top: 4px;
}

.footer-input {
    width: 100%;
    padding: 0.8rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-light);
    border-radius: 4px;
    color: var(--white);
    margin-bottom: 0.5rem;
}

.footer-input:focus {
    outline: none;
    border-color: var(--primary-gold);
}

.footer-btn-submit {
    width: 100%;
    padding: 0.8rem;
    background: var(--primary-gold);
    color: #000;
    font-weight: 700;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: 0.3s;
}

.footer-btn-submit:hover {
    background: var(--primary-hover);
}

.footer-bottom {
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    padding-top: 2rem;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    font-size: 0.85rem;
}


/* --- Mobile Menu --- */

.mobile-menu-wrapper {
    position: fixed;
    top: 81px;
    /* Dưới header */
    left: 0;
    width: 100%;
    background: #1a1a1a;
    border-bottom: 1px solid var(--border-light);
    padding: 1.5rem;
    z-index: 99;
}

.mobile-link {
    display: block;
    padding: 1rem 0;
    color: var(--text-main);
    text-decoration: none;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    font-size: 1.1rem;
}

.mobile-user-section {
    margin-top: 1.5rem;
}

.mobile-greeting {
    color: var(--primary-gold);
    margin-bottom: 1rem;
}

.mobile-user-link {
    display: block;
    color: var(--text-muted);
    padding: 0.5rem 0;
    text-decoration: none;
}

.mobile-logout-btn {
    margin-top: 1rem;
    color: #ef4444;
    background: none;
    border: none;
    font-size: 1rem;
    cursor: pointer;
    padding: 0;
}


/* Animations */

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes bounce {
    0%,
    20%,
    50%,
    80%,
    100% {
        transform: translateY(0);
    }
    40% {
        transform: translateY(-10px);
    }
    60% {
        transform: translateY(-5px);
    }
}


/* Flash Messages */

.flash-container {
    position: fixed;
    top: 100px;
    right: 20px;
    z-index: 2000;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.flash-success,
.flash-error {
    background: #242424;
    color: var(--white);
    padding: 1rem 1.5rem;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    min-width: 300px;
    border-left: 4px solid;
    animation: fadeInUp 0.5s ease;
}

.flash-success {
    border-color: #10b981;
}

.flash-icon-success {
    color: #10b981;
    margin-right: 0.75rem;
}

.flash-error {
    border-color: #ef4444;
}

.flash-icon-error {
    color: #ef4444;
    margin-right: 0.75rem;
}

.btn-close-success,
.btn-close-error {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 1.1rem;
}


/* Responsive Fixes */

@media (max-width: 768px) {
    .hero-heading {
        font-size: 2.5rem;
    }
    .main-title {
        font-size: 2rem;
    }
    .room-img-wrap {
        height: 200px;
    }
    .footer-grid {
        grid-template-columns: 1fr;
        gap: 2rem;
    }
    .header-actions .user-name {
        display: none;
    }
    .header-actions .btn-login {
        display: none;
    }
    /* Mobile ẩn nút login text, dùng icon hoặc menu mobile */
    .btn-register {
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
    }
}
</file>

<file path="resources/css/client/invoice.css">
/* =======================================================
   LUXURY STAY HOTEL & RESORT - UNIFIED CLIENT STYLES
   Phiên bản: Đồng bộ hóa toàn bộ biến và utility.
   ======================================================= */


/* --- 1. UNIVERSAL THEME VARIABLES --- */

:root {
    --color-brand-900: #0b3d68;
    /* Màu xanh đậm chủ đạo (Navy/Dark Blue) */
    --color-brand-gold: #c5a47e;
    /* Màu vàng gold nhấn (Accent Gold) */
    --color-bg-primary: #f9fafb;
    /* Background nền chính (Gray 50/100) */
    --color-text-main: #1f2937;
    /* Text chính (Gray 900) */
    --color-text-muted: #6b7280;
    /* Text mờ (Gray 600) */
    --color-border: #e5e7eb;
    /* Border/Separator (Gray 200) */
    --color-shadow-light: rgba(0, 0, 0, 0.05);
    /* Shadow nhẹ */
    /* Buttons & Form */
    --color-btn-primary-bg: var(--color-brand-gold);
    --color-btn-primary-text: #000000;
}


/* --- 2. BASE AND COMMON UTILITIES --- */

body {
    font-family: 'Inter', sans-serif;
    color: var(--color-text-main);
    background-color: var(--color-bg-primary);
}

.container {
    max-width: 1280px;
    /* max-w-7xl */
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
}


/* Primary Button Style (btn-primary) */

.btn-primary {
    background: var(--color-btn-primary-bg);
    color: var(--color-btn-primary-text);
    padding: .6rem 1rem;
    border-radius: .5rem;
    font-weight: 600;
    transition: all 0.2s ease;
    /* Bổ sung để đồng bộ với theme */
    border: 1px solid transparent;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
}

.btn-primary:hover {
    filter: none;
    /* Bỏ filter, dùng hover style rõ ràng hơn */
    background: var(--color-brand-900);
    color: #ffffff;
    border-color: var(--color-brand-900);
    box-shadow: 0 4px 6px -1px var(--color-shadow-light), 0 2px 4px -2px var(--color-shadow-light);
}

.btn-primary:disabled {
    opacity: .6;
    cursor: not-allowed;
    background: var(--color-btn-primary-bg);
    color: var(--color-btn-primary-text);
    box-shadow: none;
}


/* Common Form Input Style (form-input) */

.form-input {
    width: 100%;
    padding: .6rem .75rem;
    border: 1px solid var(--color-border);
    border-radius: .5rem;
    color: var(--color-text-main);
    transition: border-color 0.2s, box-shadow 0.2s;
    background-color: #ffffff;
    /* Đảm bảo nền trắng */
}

.form-input:focus {
    border-color: var(--color-brand-gold);
    /* Chuyển sang màu gold khi focus */
    outline: none;
    box-shadow: 0 0 0 2px rgba(197, 164, 126, 0.5);
    /* Vòng sáng gold */
}


/* =======================================================
   3. INVOICE PAGE STYLES
   ======================================================= */


/* --- Base Layout --- */

.invoice-page-wrapper {
    background-color: var(--color-bg-primary);
    min-height: 100vh;
    padding-top: 3rem;
    padding-bottom: 3rem;
}

.invoice-container {
    max-width: 768px;
    /* max-w-3xl */
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
}


/* --- Back Button --- */

.back-link {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    display: flex;
    align-items: center;
    transition: color 0.2s;
    margin-bottom: 1.5rem;
}

.back-link:hover {
    color: var(--color-brand-900);
}


/* --- Invoice Card --- */

.invoice-card {
    background-color: #ffffff;
    border-radius: 1.5rem;
    /* rounded-3xl */
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    overflow: hidden;
    /* Dùng class riêng cho animation để không xung đột */
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-fade-in-up {
    animation: fadeInUp 0.5s ease-out;
}


/* --- Header Section --- */

.invoice-header {
    background-color: var(--color-brand-900);
    color: white;
    padding: 2rem;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.header-pattern {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.1;
    pointer-events: none;
    background-image: radial-gradient(#fff 1px, transparent 1px);
    background-size: 20px 20px;
}

.header-title {
    font-family: 'Georgia', serif;
    font-size: 1.875rem;
    font-weight: 700;
    letter-spacing: 0.05em;
    position: relative;
    z-index: 10;
}

.header-subtitle {
    opacity: 0.8;
    font-size: 0.875rem;
    margin-top: 0.25rem;
    position: relative;
    z-index: 10;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.invoice-code {
    margin-top: 1rem;
    display: inline-block;
    padding: 0.25rem 1rem;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 9999px;
    font-size: 0.875rem;
    font-family: monospace;
    position: relative;
    z-index: 10;
    background-color: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(2px);
}


/* --- Body Section (Details) --- */

.invoice-body {
    padding: 3rem;
}


/* Customer & Booking Details */

.detail-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid var(--color-border);
}

@media (min-width: 768px) {
    .detail-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

.detail-heading {
    font-size: 0.75rem;
    font-weight: 700;
    color: #9ca3af;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.75rem;
}

.customer-name {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--color-text-main);
}

.info-item {
    color: var(--color-text-muted);
    font-size: 0.875rem;
    margin-top: 0.25rem;
    display: flex;
    align-items: center;
}

.info-item i {
    width: 1rem;
    margin-right: 0.5rem;
}

.booking-info {
    text-align: left;
}

@media (min-width: 768px) {
    .booking-info {
        text-align: right;
    }
}

.booking-info p {
    font-size: 0.875rem;
    margin-bottom: 0.25rem;
    color: var(--color-text-main);
}

.booking-info strong {
    font-weight: 700;
    color: #9ca3af;
    margin-right: 0.5rem;
}

.payment-method-tag {
    margin-top: 0.5rem;
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
    background-color: #f3f4f6;
    color: #374151;
}


/* --- Service Table --- */

.service-table-wrapper {
    margin-bottom: 2rem;
}

.table-responsive {
    overflow-x: auto;
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
}

.invoice-table {
    width: 100%;
    font-size: 0.875rem;
    text-align: left;
    border-collapse: collapse;
}

.invoice-table thead {
    background-color: #f9fafb;
    color: #6b7280;
    font-weight: 700;
    text-transform: uppercase;
    font-size: 0.75rem;
}

.invoice-table th,
.invoice-table td {
    padding: 0.75rem 1rem;
    white-space: nowrap;
}

.invoice-table tbody tr {
    border-top: 1px solid #f3f4f6;
    transition: background-color 0.2s;
}

.invoice-table tbody tr:hover {
    background-color: rgba(249, 250, 251, 0.5);
}

.room-detail-info {
    color: #10b981;
    font-size: 0.75rem;
    margin-top: 0.25rem;
    display: flex;
    align-items: center;
    font-weight: 700;
}

.room-detail-pending {
    color: #f97316;
    font-size: 0.75rem;
    margin-top: 0.25rem;
    display: flex;
    align-items: center;
    font-style: italic;
}

.table-amount {
    font-weight: 700;
    color: var(--color-text-main);
}


/* --- Financial Summary --- */

.summary-container {
    display: flex;
    justify-content: flex-end;
}

.summary-box {
    width: 100%;
    max-width: 50%;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.summary-row {
    display: flex;
    justify-content: space-between;
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.summary-discount {
    color: #ef4444;
    font-weight: 500;
}

.summary-separator {
    border-top: 1px dashed var(--color-border);
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
}

.summary-total {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.total-label {
    font-size: 1rem;
    font-weight: 700;
    color: var(--color-text-main);
}

.total-amount {
    font-size: 1.5rem;
    font-family: 'Georgia', serif;
    font-weight: 700;
    color: var(--color-brand-gold);
}


/* --- Payment Status Stamp --- */

.status-stamp-wrapper {
    text-align: right;
    margin-top: 1.5rem;
}

.status-stamp {
    display: inline-block;
    padding: 0.5rem 1.5rem;
    border-width: 2px;
    font-weight: 700;
    font-size: 0.875rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    transform: rotate(-6deg);
    opacity: 0.8;
    border-radius: 8px;
}


/* Paid Status */

.status-paid {
    border-color: #10b981;
    color: #059669;
}


/* Awaiting Status */

.status-awaiting {
    border-color: #fb923c;
    color: #f97316;
}


/* Unpaid Status */

.status-unpaid {
    border-color: #d1d5db;
    color: #9ca3af;
}


/* --- Footer --- */

.invoice-footer {
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid var(--color-border);
    text-align: center;
    font-size: 0.75rem;
    color: #9ca3af;
}

.invoice-footer p {
    margin-bottom: 0.25rem;
}


/* --- Nút In Hóa đơn (MỚI) --- */

.btn-invoice-print {
    padding: 0.75rem 1.5rem;
    background-color: #ffffff;
    border: 1px solid #d1d5db;
    /* gray-300 */
    border-radius: 0.75rem;
    /* rounded-xl */
    color: #374151;
    /* gray-700 */
    font-weight: 600;
    transition: all 0.2s;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
}

.btn-invoice-print:hover {
    background-color: var(--color-bg-primary);
    color: var(--color-brand-900);
    border-color: var(--color-brand-900);
    box-shadow: 0 4px 6px -1px var(--color-shadow-light);
}


/* =========================================
   4. PRINT MEDIA QUERY (Cho Hóa đơn)
   ========================================= */

@media print {
    /* Ẩn các phần tử không cần thiết khi in */
    .invoice-page-wrapper {
        background-color: white !important;
        padding: 0 !important;
    }
    .invoice-container {
        margin: 0 auto !important;
        padding: 0 !important;
        max-width: 100% !important;
    }
    .back-link,
    .print-button-container,
    .btn-invoice-print {
        /* Ẩn nút In khi in */
        display: none !important;
    }
    .invoice-card {
        box-shadow: none !important;
        border-radius: 0 !important;
    }
    .invoice-header,
    .invoice-body {
        padding: 1rem !important;
    }
}
</file>

<file path="resources/css/client/notifications.css">
/* =========================================
   NOTIFICATIONS PAGE (Luxury Dark Theme)
   ========================================= */


/* --- Layout & Container --- */

.notify-page-wrapper {
    padding-top: 3rem;
    padding-bottom: 6rem;
    min-height: 80vh;
    background-color: var(--bg-body);
    /* Nền tối */
}


/* --- Header Section --- */

.notify-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2.5rem;
    border-bottom: 1px solid var(--border-light);
    padding-bottom: 1.5rem;
}

.notify-title {
    font-family: var(--font-serif);
    font-size: 2.5rem;
    color: var(--white);
    margin: 0;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.notify-title i {
    color: var(--primary-gold);
}

.badge-unread {
    background: rgba(220, 38, 38, 0.2);
    color: #ef4444;
    border: 1px solid rgba(220, 38, 38, 0.5);
    font-size: 0.85rem;
    padding: 0.3rem 0.8rem;
    border-radius: 50px;
    font-weight: 600;
}


/* --- Toolbar (Select All & Delete) --- */

.notify-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    background: var(--bg-card);
    padding: 1rem;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-light);
}

.toolbar-left {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 0.95rem;
    user-select: none;
}

.checkbox-label:hover {
    color: var(--white);
}

.custom-checkbox {
    width: 18px;
    height: 18px;
    accent-color: var(--primary-gold);
    cursor: pointer;
}

.btn-bulk-delete {
    background: rgba(220, 38, 38, 0.1);
    color: #ef4444;
    border: 1px solid rgba(220, 38, 38, 0.3);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    font-size: 0.9rem;
    cursor: pointer;
    transition: 0.3s;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.btn-bulk-delete:hover:not(:disabled) {
    background: #ef4444;
    color: white;
}

.btn-bulk-delete:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    filter: grayscale(1);
}

.notify-count {
    color: var(--text-muted);
    font-size: 0.9rem;
}


/* --- Notification List --- */

.notify-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.notify-item {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    display: flex;
    align-items: flex-start;
    gap: 1.5rem;
    transition: all 0.3s ease;
    position: relative;
}

.notify-item:hover {
    transform: translateX(5px);
    border-color: var(--border-gold);
    background: rgba(255, 255, 255, 0.03);
}


/* Unread State */

.notify-item.unread {
    border-left: 4px solid var(--primary-gold);
    background: linear-gradient(90deg, rgba(205, 164, 94, 0.05) 0%, transparent 100%);
}

.notify-item.unread .notify-text {
    color: var(--white);
    font-weight: 600;
}


/* Read State */

.notify-item.read {
    border-left: 4px solid var(--border-light);
    opacity: 0.8;
}

.notify-icon-box {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    flex-shrink: 0;
    border: 1px solid var(--border-light);
}

.notify-item.unread .notify-icon-box {
    background: rgba(205, 164, 94, 0.1);
    color: var(--primary-gold);
    border-color: var(--primary-gold);
}

.notify-item.read .notify-icon-box {
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-muted);
}

.notify-content {
    flex: 1;
    min-width: 0;
}

.notify-text {
    font-size: 1rem;
    margin-bottom: 0.5rem;
    line-height: 1.5;
    color: var(--text-muted);
    /* Mặc định màu xám nếu đã đọc */
}

.notify-meta {
    display: flex;
    gap: 1rem;
    font-size: 0.8rem;
    color: var(--text-muted);
    opacity: 0.8;
}

.notify-meta span {
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.notify-actions {
    flex-shrink: 0;
}

.btn-view-detail {
    color: var(--primary-gold);
    text-decoration: none;
    font-size: 0.85rem;
    font-weight: 600;
    border: 1px solid var(--border-light);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    transition: 0.3s;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
}

.btn-view-detail:hover {
    background: var(--primary-gold);
    color: #000;
}


/* --- Empty State --- */

.empty-state {
    text-align: center;
    padding: 6rem 2rem;
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    border: 1px dashed var(--border-light);
}

.empty-icon {
    font-size: 4rem;
    color: var(--text-muted);
    margin-bottom: 1.5rem;
    opacity: 0.3;
}

.empty-title {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    color: var(--white);
    margin-bottom: 0.5rem;
}

.empty-desc {
    color: var(--text-muted);
}


/* --- Pagination --- */

.pagination-container {
    margin-top: 3rem;
    display: flex;
    justify-content: center;
}
</file>

<file path="resources/css/client/profile.css">
/* =========================================
   USER PROFILE STYLES (Luxury Dark Theme)
   ========================================= */


/* --- 1. LAYOUT & CONTAINER --- */

.profile-page-wrapper {
    padding-top: 3rem;
    padding-bottom: 6rem;
    min-height: 80vh;
}


/* Breadcrumb (Sao chép style chuẩn từ rooms.css để đồng bộ) */

.breadcrumb {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-muted);
    margin-bottom: 2rem;
    font-size: 0.9rem;
}

.breadcrumb a {
    color: var(--text-muted);
    text-decoration: none;
    transition: 0.3s;
}

.breadcrumb a:hover {
    color: var(--primary-gold);
}

.breadcrumb span.separator {
    color: var(--border-light);
}

.breadcrumb .active {
    color: var(--primary-gold);
    font-weight: 600;
    border-bottom: 1px solid var(--primary-gold);
}


/* Grid Layout */

.profile-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
}

@media (min-width: 1024px) {
    .profile-layout {
        grid-template-columns: 280px 1fr;
        /* Sidebar cố định - Content co giãn */
        gap: 3rem;
    }
}


/* --- 2. SIDEBAR --- */

.profile-sidebar {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    overflow: hidden;
    position: sticky;
    top: 100px;
    height: fit-content;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.sidebar-header {
    background: #111;
    /* Đen đậm hơn cho header sidebar */
    padding: 2rem 1.5rem;
    text-align: center;
    border-bottom: 1px solid var(--border-light);
}

.user-avatar-circle {
    width: 80px;
    height: 80px;
    margin: 0 auto 1rem;
    background: var(--primary-gold);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    font-family: var(--font-serif);
    font-weight: 700;
    color: #000;
    border: 4px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 0 15px rgba(205, 164, 94, 0.3);
}

.sidebar-user-name {
    color: var(--white);
    font-weight: 700;
    font-size: 1.1rem;
    margin: 0;
}

.sidebar-user-role {
    color: var(--primary-gold);
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-top: 0.25rem;
    display: block;
}

.sidebar-menu {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.sidebar-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.8rem 1rem;
    color: var(--text-muted);
    text-decoration: none;
    border-radius: var(--radius-md);
    transition: all 0.3s;
    font-size: 0.95rem;
}

.sidebar-link i {
    width: 20px;
    text-align: center;
    transition: 0.3s;
}

.sidebar-link:hover {
    background: rgba(255, 255, 255, 0.05);
    color: var(--white);
}

.sidebar-link:hover i {
    color: var(--primary-gold);
}

.sidebar-link.active {
    background: rgba(205, 164, 94, 0.1);
    color: var(--primary-gold);
    border: 1px solid var(--border-gold);
}

.btn-logout {
    width: 100%;
    text-align: left;
    background: none;
    border: none;
    cursor: pointer;
    margin-top: 0.5rem;
    color: #ef4444;
    /* Màu đỏ cho nút đăng xuất */
}

.btn-logout:hover {
    background: rgba(239, 68, 68, 0.1);
    color: #f87171;
}


/* --- 3. MAIN CONTENT CARD --- */

.profile-card {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    padding: 2rem;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

.profile-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    border-bottom: 1px solid var(--border-light);
    padding-bottom: 1.5rem;
    margin-bottom: 2rem;
}

.profile-title {
    font-family: var(--font-serif);
    font-size: 2rem;
    color: var(--white);
    margin: 0 0 0.5rem 0;
}

.profile-desc {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin: 0;
}

.header-icon {
    font-size: 2.5rem;
    color: var(--border-light);
}


/* --- 4. FORM STYLES (Dark Theme Inputs) --- */

.profile-form-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
}

@media (min-width: 768px) {
    .profile-form-grid {
        grid-template-columns: 1fr 1fr;
    }
    .col-span-2 {
        grid-column: span 2;
    }
}

.form-group {
    margin-bottom: 0.5rem;
}

.form-label {
    display: block;
    color: var(--text-muted);
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 0.5rem;
    letter-spacing: 0.5px;
}

.form-label span.required {
    color: #ef4444;
    margin-left: 0.25rem;
}

.input-wrapper {
    position: relative;
}

.input-icon {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    pointer-events: none;
    transition: 0.3s;
}

.form-input {
    width: 100%;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-light);
    color: var(--white);
    padding: 0.8rem 1rem 0.8rem 2.8rem;
    /* Padding trái chừa chỗ cho icon */
    border-radius: var(--radius-md);
    font-size: 0.95rem;
    outline: none;
    transition: all 0.3s;
}

.form-input:focus {
    border-color: var(--primary-gold);
    background: rgba(255, 255, 255, 0.08);
    box-shadow: 0 0 0 4px rgba(205, 164, 94, 0.1);
}

.form-input:focus+.input-icon,
.input-wrapper:focus-within .input-icon {
    color: var(--primary-gold);
}

.form-text {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-top: 0.5rem;
    opacity: 0.8;
}

.error-msg {
    color: #ef4444;
    font-size: 0.8rem;
    margin-top: 0.4rem;
}


/* Alert Box (Error/Success) */

.alert-box {
    padding: 1rem;
    border-radius: var(--radius-md);
    margin-bottom: 2rem;
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    animation: fadeInUp 0.5s ease;
}

.alert-error {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-left: 4px solid #ef4444;
}

.alert-icon {
    font-size: 1.2rem;
    margin-top: 0.1rem;
}

.alert-error .alert-icon {
    color: #ef4444;
}

.alert-content p {
    margin: 0;
    color: var(--white);
    font-size: 0.9rem;
}

.alert-content .alert-title {
    font-weight: 700;
    margin-bottom: 0.25rem;
    display: block;
}


/* Submit Button Area */

.form-actions {
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid var(--border-light);
    display: flex;
    justify-content: flex-end;
}

.btn-save {
    background: var(--primary-gold);
    color: #000;
    font-weight: 700;
    padding: 0.8rem 2rem;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: 0.3s;
    text-transform: uppercase;
    font-size: 0.9rem;
}

.btn-save:hover {
    background: var(--primary-hover);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(205, 164, 94, 0.4);
}
</file>

<file path="resources/css/client/promo.css">
/* =========================================
   PROMOTIONS PAGE (Luxury Dark Theme)
   ========================================= */


/* --- 1. HERO BANNER --- */

.promo-hero {
    position: relative;
    height: 50vh;
    min-height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    background-color: #111;
    overflow: hidden;
}

.promo-hero-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.6;
    animation: zoomSlow 30s infinite alternate;
}

@keyframes zoomSlow {
    from {
        transform: scale(1);
    }
    to {
        transform: scale(1.1);
    }
}

.promo-hero-content {
    position: relative;
    z-index: 2;
    padding: 0 1rem;
    max-width: 800px;
    animation: fadeInUp 1s ease;
}

.promo-subtitle {
    display: block;
    color: var(--primary-gold);
    font-size: 0.9rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    margin-bottom: 1rem;
    font-weight: 600;
}

.promo-title {
    font-family: var(--font-serif);
    font-size: 3rem;
    color: var(--white);
    margin: 0;
    line-height: 1.2;
}


/* --- 2. PROMO LIST (Grid) --- */

.section-promo-list {
    padding: 6rem 0;
    background: var(--bg-body);
}

.promo-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 3rem;
}


/* --- 3. VOUCHER CARD STYLE --- */

.voucher-card {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    overflow: hidden;
    position: relative;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
}

.voucher-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    border-color: var(--border-gold);
}


/* Phần ảnh bên trên */

.voucher-img-wrapper {
    position: relative;
    height: 200px;
    overflow: hidden;
}

.voucher-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s;
}

.voucher-card:hover .voucher-img {
    transform: scale(1.1);
}


/* Tag giảm giá nổi bật */

.discount-tag {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: var(--primary-gold);
    color: #000;
    font-weight: 700;
    padding: 0.4rem 1rem;
    border-radius: 4px;
    font-size: 0.9rem;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}


/* Phần nội dung bên dưới */

.voucher-body {
    padding: 2rem;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    position: relative;
}


/* Răng cưa trang trí (Optional - tạo cảm giác vé) */

.voucher-body::before {
    content: '';
    position: absolute;
    top: -10px;
    left: 0;
    width: 100%;
    height: 20px;
    background: radial-gradient(circle, transparent 0.5rem, var(--bg-card) 0.5rem);
    background-size: 1.5rem 1.5rem;
    background-position: center bottom;
    transform: rotate(180deg);
}

.voucher-title {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    color: var(--white);
    margin-bottom: 0.75rem;
    line-height: 1.3;
}

.voucher-desc {
    color: var(--text-muted);
    font-size: 0.95rem;
    margin-bottom: 1.5rem;
    flex-grow: 1;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}


/* Mã code & Nút copy */

.voucher-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 1px dashed var(--border-light);
    padding-top: 1.5rem;
    margin-top: auto;
}

.code-display {
    font-family: monospace;
    font-size: 1.1rem;
    color: var(--primary-gold);
    font-weight: 700;
    letter-spacing: 1px;
    background: rgba(205, 164, 94, 0.1);
    padding: 0.4rem 0.8rem;
    border-radius: 4px;
    border: 1px dashed var(--primary-gold);
}

.btn-copy {
    background: transparent;
    border: 1px solid var(--border-light);
    color: var(--text-muted);
    padding: 0.5rem 1rem;
    border-radius: 50px;
    cursor: pointer;
    transition: 0.3s;
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.btn-copy:hover {
    border-color: var(--primary-gold);
    color: var(--white);
    background: var(--primary-gold);
    color: #000;
}

.btn-copy.copied {
    background: #10b981;
    border-color: #10b981;
    color: white;
}


/* Hết hạn */

.voucher-card.expired {
    opacity: 0.6;
    filter: grayscale(1);
    pointer-events: none;
}

.voucher-card.expired .discount-tag {
    background: #555;
    color: #ccc;
    content: "Đã hết hạn";
}
</file>

<file path="resources/css/client/rooms.css">
/* =========================================
   ROOMS LISTING & DETAIL (Luxury Dark Theme)
   ========================================= */


/* --- 1. PAGE BANNER --- */

.page-banner {
    position: relative;
    height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    background: #111 !important;
    /* Override Tailwind bg */
    overflow: hidden;
    margin-bottom: 4rem;
}

.banner-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
}

.banner-bg img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.6;
    animation: zoomEffect 20s infinite alternate;
}

@keyframes zoomEffect {
    from {
        transform: scale(1);
    }
    to {
        transform: scale(1.1);
    }
}

.banner-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), var(--bg-body));
    z-index: 1;
}

.banner-content {
    position: relative;
    z-index: 2;
    padding: 0 1rem;
    animation: fadeInUp 1s ease;
}

.banner-title {
    font-family: var(--font-serif);
    font-size: 3.5rem;
    color: var(--white) !important;
    margin-bottom: 0.5rem;
    text-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
}

.banner-subtitle {
    display: block;
    text-transform: uppercase;
    color: var(--primary-gold) !important;
    letter-spacing: 3px;
    font-size: 0.9rem;
    margin-bottom: 1rem;
    font-weight: 700;
}

.banner-desc {
    color: rgba(255, 255, 255, 0.8) !important;
    max-width: 600px;
    margin: 0 auto;
    font-size: 1.1rem;
    font-weight: 300;
}


/* --- 2. LISTING LAYOUT --- */

.listing-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 3rem;
}

@media (min-width: 1024px) {
    .listing-layout {
        grid-template-columns: 280px 1fr;
    }
}


/* Sidebar Filter */

.sidebar-filter {
    background: var(--bg-card) !important;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    height: fit-content;
    position: sticky;
    top: 100px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.filter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-light);
}

.filter-title {
    font-family: var(--font-serif);
    font-weight: 700;
    color: var(--white) !important;
    font-size: 1.25rem;
}

.btn-reset {
    color: var(--text-muted) !important;
    text-decoration: none;
    font-size: 0.85rem;
    transition: 0.3s;
}

.btn-reset:hover {
    color: var(--primary-gold) !important;
}

.filter-group {
    margin-bottom: 2rem;
}

.filter-group:last-child {
    margin-bottom: 0;
}

.filter-group-title {
    display: block;
    color: var(--white) !important;
    font-weight: 600;
    margin-bottom: 1rem;
    font-size: 0.95rem;
    letter-spacing: 0.5px;
}


/* Price Inputs */

.price-inputs {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.price-separator {
    color: var(--text-muted);
}

.form-input {
    width: 100%;
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid var(--border-light) !important;
    color: var(--white) !important;
    padding: 0.6rem;
    border-radius: 4px;
    font-size: 0.9rem;
    outline: none;
}

.form-input:focus {
    border-color: var(--primary-gold) !important;
}


/* Checkboxes */

.checkbox-list {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
}

.checkbox-item {
    display: flex;
    align-items: center;
    cursor: pointer;
    color: var(--text-muted) !important;
    font-size: 0.95rem;
    transition: 0.2s;
}

.checkbox-item:hover {
    color: var(--white) !important;
}

.checkbox-item input {
    margin-right: 0.75rem;
    accent-color: var(--primary-gold);
    width: 16px;
    height: 16px;
    cursor: pointer;
}


/* Filter Submit */

.filter-submit-wrap {
    margin-top: 2rem;
}


/* Filter Top Bar */

.filter-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-light);
}

.filter-count {
    color: var(--text-muted) !important;
    margin: 0;
    font-size: 0.95rem;
}

.filter-count strong {
    color: var(--primary-gold) !important;
}

.filter-actions {
    display: flex;
    align-items: center;
}

.filter-select {
    background: var(--bg-card) !important;
    border: 1px solid var(--border-light) !important;
    color: var(--text-main) !important;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    outline: none;
    cursor: pointer;
}

.filter-select:focus {
    border-color: var(--primary-gold) !important;
}


/* --- 3. ROOM DETAIL & GRID --- */

.room-detail-container {
    padding-top: 2rem;
    padding-bottom: 6rem;
}

.detail-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 3rem;
}

@media (min-width: 1024px) {
    .detail-grid {
        grid-template-columns: 2fr 1fr;
    }
}


/* Breadcrumb */

.breadcrumb {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-muted);
    margin-bottom: 2rem;
    font-size: 0.9rem;
}

.breadcrumb a {
    color: var(--text-muted);
    text-decoration: none;
    transition: 0.3s;
}

.breadcrumb a:hover {
    color: var(--primary-gold);
}

.breadcrumb span.text-gray-300 {
    color: var(--border-light);
}

.breadcrumb .active {
    color: var(--primary-gold);
    font-weight: 600;
    border-bottom: 1px solid var(--primary-gold);
}


/* Room Gallery */

.room-gallery-main {
    height: 500px;
    border-radius: var(--radius-lg);
    overflow: hidden;
    position: relative;
    margin-bottom: 2.5rem;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    border: 1px solid var(--border-light);
}

.room-gallery-main img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: 0.7s;
}

.room-gallery-main:hover img {
    transform: scale(1.05);
}

.room-gallery-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent 60%);
}

.room-title-overlay {
    position: absolute;
    bottom: 2rem;
    left: 2rem;
    z-index: 10;
}

.room-detail-title {
    font-family: var(--font-serif);
    font-size: 3rem;
    color: var(--white);
    margin-bottom: 0.5rem;
    line-height: 1;
    text-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
}

.room-meta-flex {
    display: flex;
    gap: 1.5rem;
    font-size: 0.95rem;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 500;
}

.room-meta-flex span i {
    color: var(--primary-gold);
    margin-right: 0.5rem;
}


/* Descriptions & Amenities */

.room-desc-box {
    margin-bottom: 3rem;
    color: var(--text-muted);
    line-height: 1.8;
    font-size: 1.05rem;
}

.room-desc-title {
    font-family: var(--font-serif);
    font-size: 1.8rem;
    color: var(--white);
    margin-bottom: 1.5rem;
    border-left: 4px solid var(--primary-gold);
    padding-left: 1rem;
}

.amenities-box {
    background: var(--bg-card) !important;
    padding: 2.5rem;
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-light);
}

.amenities-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
}

@media (min-width: 640px) {
    .amenities-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

.amenity-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    color: var(--text-muted);
    transition: 0.3s;
}

.amenity-item:hover {
    color: var(--white);
    transform: translateX(5px);
}

.amenity-icon-box {
    width: 45px;
    height: 45px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-gold);
    font-size: 1.1rem;
    border: 1px solid var(--border-light);
}

.amenity-item:hover .amenity-icon-box {
    background: var(--primary-gold);
    color: #000;
}


/* Sticky Booking Form */

.booking-sidebar-card {
    background: var(--bg-card) !important;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    padding: 2rem;
    position: sticky;
    top: 100px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
}

.booking-price-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--border-light);
    padding-bottom: 1.5rem;
    margin-bottom: 1.5rem;
}

.price-label {
    font-size: 0.85rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    display: block;
}

.price-large {
    font-family: var(--font-serif);
    font-size: 2.2rem;
    color: var(--primary-gold);
    font-weight: 700;
    line-height: 1;
}

.price-unit {
    font-size: 1rem;
    color: var(--text-muted);
    font-weight: 400;
}

.badge-breakfast {
    background: rgba(16, 185, 129, 0.15);
    color: #34d399;
    padding: 0.4rem 0.8rem;
    border-radius: 6px;
    font-size: 0.8rem;
    font-weight: 600;
    border: 1px solid rgba(16, 185, 129, 0.3);
    display: flex;
    align-items: center;
    gap: 0.4rem;
}


/* Date Form */

.booking-form-group {
    margin-bottom: 1.25rem;
}

.booking-label {
    display: block;
    color: var(--white);
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.date-input-wrapper {
    position: relative;
}

.date-input-wrapper i {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--primary-gold);
    pointer-events: none;
}

.date-input-wrapper input {
    width: 100%;
    padding: 0.8rem 1rem 0.8rem 2.8rem;
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    color: var(--white) !important;
    font-family: var(--font-sans);
    cursor: pointer;
    color-scheme: dark;
}

.date-input-wrapper input:focus {
    border-color: var(--primary-gold) !important;
    outline: none;
}


/* Status */

.status-box {
    padding: 1rem;
    border-radius: var(--radius-md);
    margin-bottom: 1.5rem;
    display: flex;
    gap: 0.8rem;
    font-size: 0.9rem;
}

.status-available {
    background: rgba(16, 185, 129, 0.1);
    border: 1px solid rgba(16, 185, 129, 0.3);
    color: #34d399;
}

.status-soldout {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: #f87171;
}

.btn-book-now {
    width: 100%;
    background: var(--primary-gold) !important;
    color: #000 !important;
    padding: 1rem;
    border-radius: 50px;
    font-weight: 700;
    border: none;
    cursor: pointer;
    transition: 0.3s;
    margin-top: 0.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.btn-book-now:hover {
    background: var(--primary-hover) !important;
    box-shadow: 0 0 20px rgba(205, 164, 94, 0.4);
    transform: translateY(-2px);
}

.btn-disabled {
    background: #333 !important;
    color: #666 !important;
    cursor: not-allowed;
    box-shadow: none;
}

.booking-note {
    font-size: 0.8rem;
    color: var(--text-muted);
    text-align: center;
    margin-top: 1rem;
    font-style: italic;
}


/* Room Grid (Listing) */

.room-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
}

.room-card {
    background: var(--bg-card) !important;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: 0.4s;
    display: flex;
    flex-direction: column;
}

.room-card:hover {
    transform: translateY(-5px);
    border-color: var(--border-gold);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

.room-img-wrap {
    position: relative;
    height: 240px;
    overflow: hidden;
}

.room-img-wrap img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: 0.5s;
}

.room-card:hover img {
    transform: scale(1.1);
}

.room-overlay-hover {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
    opacity: 0;
    transition: 0.3s;
}

.room-card:hover .room-overlay-hover {
    opacity: 1;
}

.room-price-tag {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: rgba(0, 0, 0, 0.8);
    padding: 0.4rem 0.8rem;
    border-radius: 6px;
    border: 1px solid var(--border-gold);
    z-index: 2;
}

.room-price-amount {
    color: var(--primary-gold);
    font-weight: 700;
}

.room-price-unit {
    color: var(--text-muted);
    font-size: 0.8rem;
}

.room-body {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.room-body h3 {
    margin: 0 0 0.5rem;
    font-family: var(--font-serif);
    font-size: 1.3rem;
}

.room-title-link {
    color: var(--white);
    text-decoration: none;
    transition: 0.3s;
}

.room-title-link:hover {
    color: var(--primary-gold);
}

.room-specs {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-light);
}

.spec-item {
    color: var(--text-muted);
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.spec-item i {
    color: var(--primary-gold);
}

.room-short-desc {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-bottom: 1.5rem;
    flex-grow: 1;
}

.btn-card-action {
    margin-top: auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: var(--primary-gold);
    font-weight: 600;
    text-decoration: none;
    text-transform: uppercase;
    font-size: 0.85rem;
}

.btn-card-action:hover {
    color: var(--white);
}


/* Empty State */

.empty-state-container {
    grid-column: 1/-1;
    text-align: center;
    padding: 4rem 2rem;
    background: var(--bg-card) !important;
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-light);
}

.empty-state-icon {
    font-size: 3rem;
    color: var(--text-muted);
    margin-bottom: 1rem;
}

.empty-state-title {
    color: var(--white);
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
    font-family: var(--font-serif);
}

.empty-state-text {
    color: var(--text-muted);
    margin-bottom: 1.5rem;
}


/* Guarantee */

.section-guarantee {
    padding: 4rem 0;
    border-top: 1px solid var(--border-light);
    background: #151515 !important;
    margin-top: 4rem;
}

.guarantee-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    text-align: center;
}

.guarantee-icon-box {
    width: 60px;
    height: 60px;
    margin: 0 auto 1rem;
    border-radius: 50%;
    background: rgba(205, 164, 94, 0.1);
    color: var(--primary-gold);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    border: 1px solid var(--border-gold);
}

.guarantee-title {
    color: var(--white);
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
    font-family: var(--font-serif);
}

.guarantee-desc {
    color: var(--text-muted);
    font-size: 0.9rem;
}


/* Responsive */

@media (max-width: 1023px) {
    .sidebar-filter {
        display: none;
        margin-bottom: 2rem;
    }
    .sidebar-filter.active {
        display: block;
        animation: fadeInUp 0.5s ease;
    }
    .mobile-filter-btn {
        display: flex;
    }
    .page-banner {
        height: 300px;
    }
    .banner-title {
        font-size: 2.5rem;
    }
    .room-gallery-main {
        height: 350px;
    }
    .room-detail-title {
        font-size: 2rem;
    }
}
</file>

<file path="resources/css/password.css">
/* --- Variables --- */

:root {
    --primary-color: #cda45e;
    --primary-hover: #d9b876;
    --text-color: #ffffff;
    --text-muted: #aaaaaa;
    --bg-overlay: rgba(0, 0, 0, 0.7);
    --card-bg: rgba(0, 0, 0, 0.6);
    --card-border: 1px solid rgba(205, 164, 94, 0.2);
    --input-bg: rgba(255, 255, 255, 0.05);
    --input-border: 1px solid rgba(255, 255, 255, 0.1);
    --input-focus: #cda45e;
    --error-color: #ef4444;
    --success-bg: rgba(16, 185, 129, 0.2);
    --success-text: #34d399;
    --transition: all 0.3s ease;
}

body {
    font-family: 'Playfair Display', serif;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}


/* --- Layout Wrapper --- */

.login-wrapper {
    position: relative;
    width: 100%;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}


/* --- Background --- */

.login-bg-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}

.login-bg-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform: scale(1.05);
    filter: blur(2px);
}

.login-bg-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, rgba(0, 0, 0, 0.5) 0%, #000000 100%);
}


/* --- Container & Animation --- */

.login-container {
    width: 100%;
    max-width: 450px;
    padding: 2rem;
    z-index: 10;
}

.animate-fade-in-up {
    animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}


/* --- Header --- */

.login-header {
    text-align: center;
    margin-bottom: 2rem;
}

.login-icon-wrapper {
    width: 80px;
    height: 80px;
    margin: 0 auto 1.5rem;
    background: rgba(205, 164, 94, 0.1);
    border: 1px solid var(--primary-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: var(--primary-color);
    box-shadow: 0 0 20px rgba(205, 164, 94, 0.2);
}

.login-title {
    color: var(--text-color);
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    font-family: 'Playfair Display', serif;
    letter-spacing: 1px;
}

.login-subtitle {
    color: var(--text-muted);
    font-size: 0.95rem;
    font-family: 'Open Sans', sans-serif;
    line-height: 1.6;
}


/* --- Card --- */

.login-card {
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: var(--card-border);
    border-radius: 16px;
    padding: 2.5rem;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
}


/* --- Form Elements --- */

.form-group {
    margin-bottom: 1.5rem;
}

.form-label {
    display: block;
    color: var(--text-color);
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
    font-weight: 500;
    font-family: 'Open Sans', sans-serif;
}

.input-group {
    position: relative;
    display: flex;
    align-items: center;
}

.input-icon {
    position: absolute;
    left: 15px;
    color: var(--primary-color);
    z-index: 10;
    font-size: 1.2rem;
    /* Tăng kích thước icon một chút cho cân đối */
    pointer-events: none;
    /* QUAN TRỌNG: Để click xuyên qua icon vào input */
}

.form-input {
    width: 100%;
    /* Fix cứng padding-left 60px và dùng !important để đè mọi style khác */
    padding: 12px 15px 12px 60px !important;
    background: var(--input-bg);
    border: var(--input-border);
    border-radius: 8px;
    color: var(--text-color);
    font-size: 1rem;
    transition: var(--transition);
    font-family: 'Open Sans', sans-serif;
    box-sizing: border-box;
    /* Đảm bảo padding không làm vỡ layout */
}

.form-input::placeholder {
    color: rgba(255, 255, 255, 0.3);
}

.form-input:focus {
    outline: none;
    border-color: var(--primary-color);
    background: rgba(205, 164, 94, 0.05);
    box-shadow: 0 0 10px rgba(205, 164, 94, 0.2);
}

.form-input.is-invalid {
    border-color: var(--error-color);
}

.form-input.readonly {
    opacity: 0.7;
    background: rgba(255, 255, 255, 0.02) !important;
}

.error-msg {
    color: var(--error-color);
    font-size: 0.85rem;
    margin-top: 0.5rem;
    font-family: 'Open Sans', sans-serif;
}


/* --- Button --- */

.btn-submit {
    width: 100%;
    padding: 14px;
    background: var(--primary-color);
    border: none;
    border-radius: 50px;
    color: #000;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.btn-submit:hover {
    background: var(--primary-hover);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(205, 164, 94, 0.4);
}

.btn-submit:active {
    transform: translateY(0);
}

.btn-icon-wrapper {
    display: flex;
    align-items: center;
}


/* --- Footer & Links --- */

.divider-wrapper {
    margin: 1.5rem 0;
    position: relative;
    text-align: center;
}

.divider-line {
    height: 1px;
    background: rgba(255, 255, 255, 0.1);
    width: 100%;
}

.login-link {
    color: var(--primary-color);
    text-decoration: none;
    font-size: 0.9rem;
    transition: var(--transition);
    font-weight: 500;
    font-family: 'Open Sans', sans-serif;
}

.login-link:hover {
    color: var(--text-color);
    text-decoration: underline;
}

.footer-text {
    text-align: center;
    color: rgba(255, 255, 255, 0.4);
    font-size: 0.8rem;
    margin-top: 2rem;
    font-family: 'Open Sans', sans-serif;
}


/* --- Alert --- */

.alert-success {
    background: var(--success-bg) !important;
    color: var(--success-text) !important;
    border: 1px solid var(--success-text);
    font-family: 'Open Sans', sans-serif;
}
</file>

<file path="resources/css/register.css">
/* --- Variables (Dark/Gold Theme - Shared) --- */

:root {
    --primary-color: #cda45e;
    --primary-hover: #d9b876;
    --primary-dark: #8a6d20;
    /* Thêm cho gradient trang trí */
    --text-color: #ffffff;
    --text-muted: #aaaaaa;
    --bg-overlay: rgba(0, 0, 0, 0.7);
    --card-bg: rgba(0, 0, 0, 0.6);
    --card-border: 1px solid rgba(205, 164, 94, 0.2);
    --input-bg: rgba(255, 255, 255, 0.05);
    --input-border: 1px solid rgba(255, 255, 255, 0.1);
    --input-focus: #cda45e;
    --error-color: #ef4444;
    --success-bg: rgba(16, 185, 129, 0.2);
    --success-text: #34d399;
    --transition: all 0.3s ease;
}

body {
    font-family: 'Playfair Display', serif;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    background-color: #1a1a1a;
}


/* --- Shared Layout Wrapper --- */

.login-wrapper,
.register-wrapper {
    position: relative;
    width: 100%;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem 1rem;
    /* Padding cho mobile */
}


/* --- Shared Background --- */

.login-bg-container,
.register-bg-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}

.login-bg-image,
.register-bg-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform: scale(1.05);
    filter: blur(2px);
}

.login-bg-overlay,
.register-bg-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, rgba(0, 0, 0, 0.5) 0%, #000000 100%);
}


/* --- Container & Animation --- */

.login-container,
.register-container {
    width: 100%;
    max-width: 480px;
    /* Tăng nhẹ độ rộng để form đăng ký thoáng hơn */
    z-index: 10;
}

.animate-fade-in-up {
    animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}


/* --- Header --- */

.login-header,
.register-header {
    text-align: center;
    margin-bottom: 2rem;
}

.login-icon-wrapper,
.register-icon-wrapper {
    width: 80px;
    height: 80px;
    margin: 0 auto 1.5rem;
    background: rgba(205, 164, 94, 0.1);
    border: 1px solid var(--primary-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: var(--primary-color);
    box-shadow: 0 0 20px rgba(205, 164, 94, 0.2);
}

.login-title,
.register-title {
    color: var(--text-color);
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    font-family: 'Playfair Display', serif;
    letter-spacing: 1px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

.login-subtitle,
.register-subtitle {
    color: var(--text-muted);
    font-size: 0.95rem;
    font-family: 'Open Sans', sans-serif;
    line-height: 1.6;
}

.login-subtitle a,
.register-link {
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 600;
    transition: var(--transition);
}

.login-subtitle a:hover,
.register-link:hover {
    color: var(--primary-hover);
    text-decoration: underline;
}


/* --- Card --- */

.login-card,
.register-card {
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: var(--card-border);
    border-radius: 16px;
    padding: 2.5rem;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
    position: relative;
    overflow: hidden;
}


/* Dải màu Gradient trang trí cho Register (nếu có) */

.card-deco-line {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(to right, transparent, var(--primary-color), transparent);
}


/* --- Form Elements --- */

.form-group {
    margin-bottom: 1.5rem;
}

.form-label {
    display: block;
    color: var(--text-color);
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
    font-weight: 500;
    font-family: 'Open Sans', sans-serif;
}

.input-group {
    position: relative;
    display: flex;
    align-items: center;
}

.input-icon {
    position: absolute;
    left: 15px;
    color: var(--primary-color);
    z-index: 10;
    font-size: 1.2rem;
    pointer-events: none;
    display: flex;
    align-items: center;
    height: 100%;
}

.form-input {
    width: 100%;
    /* Padding trái lớn để tránh đè icon */
    padding: 12px 15px 12px 60px !important;
    background: var(--input-bg);
    border: var(--input-border);
    border-radius: 8px;
    color: var(--text-color);
    font-size: 1rem;
    transition: var(--transition);
    font-family: 'Open Sans', sans-serif;
    box-sizing: border-box;
}

.form-input::placeholder {
    color: rgba(255, 255, 255, 0.3);
}

.form-input:focus {
    outline: none;
    border-color: var(--primary-color);
    background: rgba(205, 164, 94, 0.05);
    box-shadow: 0 0 10px rgba(205, 164, 94, 0.2);
}

.form-input.is-invalid {
    border-color: var(--error-color);
}


/* Fix lỗi nền trắng khi trình duyệt tự điền mật khẩu */

.form-input:-webkit-autofill,
.form-input:-webkit-autofill:hover,
.form-input:-webkit-autofill:focus,
.form-input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px #2b2b2b inset !important;
    -webkit-text-fill-color: var(--text-color) !important;
    transition: background-color 5000s ease-in-out 0s;
}

.error-msg {
    color: var(--error-color);
    font-size: 0.85rem;
    margin-top: 0.5rem;
    font-family: 'Open Sans', sans-serif;
    display: flex;
    align-items: center;
}


/* --- Options (Checkbox & Forgot Password) --- */

.form-options,
.form-check-group {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
    font-size: 0.9rem;
    font-family: 'Open Sans', sans-serif;
}

.checkbox-wrapper {
    display: flex;
    align-items: flex-start;
    /* Căn trên cho trường hợp text dài */
}

.checkbox-custom {
    width: 1rem;
    height: 1rem;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: transparent;
    accent-color: var(--primary-color);
    cursor: pointer;
    margin-top: 0.2rem;
    /* Căn chỉnh với dòng đầu của text */
}

.checkbox-label {
    margin-left: 0.5rem;
    color: var(--text-muted);
    cursor: pointer;
    user-select: none;
    line-height: 1.4;
}

.link-term,
.forgot-link {
    color: var(--primary-color);
    text-decoration: none;
    transition: var(--transition);
}

.link-term:hover,
.forgot-link:hover {
    color: var(--primary-hover);
    text-decoration: underline;
}


/* --- Button --- */

.btn-submit {
    width: 100%;
    padding: 14px;
    background: var(--primary-color);
    border: none;
    border-radius: 50px;
    color: #000;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.btn-submit:hover {
    background: var(--primary-hover);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(205, 164, 94, 0.4);
}

.btn-submit:active {
    transform: translateY(0);
}

.btn-icon-wrapper i {
    transition: var(--transition);
}


/* --- Social Buttons --- */

.social-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-top: 1.5rem;
}

.btn-social {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.7rem;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    background-color: rgba(255, 255, 255, 0.05);
    color: var(--text-color);
    text-decoration: none;
    font-weight: 500;
    font-size: 0.9rem;
    transition: var(--transition);
    font-family: 'Open Sans', sans-serif;
}

.btn-social:hover {
    background-color: rgba(255, 255, 255, 0.15);
    border-color: var(--primary-color);
}

.btn-social i {
    margin-right: 0.5rem;
    font-size: 1.1rem;
}

.btn-social.google:hover {
    color: #db4437;
}

.btn-social.facebook:hover {
    color: #1877f2;
}


/* --- Divider --- */

.divider-wrapper {
    margin: 1.5rem 0;
    position: relative;
    text-align: center;
}

.divider-line {
    height: 1px;
    background: rgba(255, 255, 255, 0.1);
    width: 100%;
}

.divider-text-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #2a2a2a;
    border-radius: 4px;
    padding: 0 0.5rem;
}

.divider-text {
    font-size: 0.85rem;
    color: var(--text-muted);
    font-family: 'Open Sans', sans-serif;
}


/* --- Footer --- */

.footer-text {
    text-align: center;
    color: rgba(255, 255, 255, 0.4);
    font-size: 0.8rem;
    margin-top: 2rem;
    font-family: 'Open Sans', sans-serif;
}


/* --- Helper Classes --- */

.hidden {
    display: none;
}


/* --- Mobile Responsive --- */

@media (max-width: 640px) {
    .login-container,
    .register-container {
        padding: 0.5rem;
    }
    .login-card,
    .register-card {
        padding: 1.5rem;
    }
    .social-grid {
        grid-template-columns: 1fr;
    }
    .form-input {
        padding-left: 50px !important;
    }
}
</file>

<file path="resources/js/admin/admin.js">
// Import thư viện (Đảm bảo bạn đã chạy 'npm install alpinejs @alpinejs/collapse axios')
import Alpine from 'alpinejs';
import collapse from '@alpinejs/collapse';
import axios from 'axios';

// 1. Cấu hình Alpine
window.Alpine = Alpine;
Alpine.plugin(collapse);
Alpine.start();

// 2. Cấu hình Axios & AJAX Helper
window.axios = axios;
window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

// Lấy CSRF Token từ thẻ meta
const token = document.head.querySelector('meta[name="csrf-token"]');
if (token) {
    window.axios.defaults.headers.common['X-CSRF-TOKEN'] = token.content;
} else {
    console.error('CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token');
}

// 3. Logic xử lý AJAX chung (Xóa, Confirm...)
document.addEventListener('DOMContentLoaded', () => {
    // Xử lý confirm cho nút xóa/tác vụ
    document.querySelectorAll('[data-confirm]').forEach(el => {
        el.addEventListener('click', e => {
            if (!confirm(el.getAttribute('data-confirm'))) {
                e.preventDefault();
                e.stopImmediatePropagation();
            }
        });
    });
});
</file>

<file path="resources/js/client/about.js">
import '../bootstrap'; // Giữ lại nếu cần axios/lodash từ bootstrap.js

document.addEventListener('DOMContentLoaded', () => {
    console.log('About Logic Loaded');

    // ==========================================
    // 1. SCROLL ANIMATION (Hiệu ứng trượt lên khi cuộn)
    // ==========================================
    const fadeElements = document.querySelectorAll('.fade-up');

    // Chỉ thực hiện nếu có phần tử cần animate
    if (fadeElements.length > 0) {
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.1 // Kích hoạt khi thấy 10% phần tử
        };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target); // Chỉ chạy 1 lần
                }
            });
        }, observerOptions);

        fadeElements.forEach(el => observer.observe(el));
    }

    // ==========================================
    // 2. COUNTER UP (Hiệu ứng đếm số)
    // ==========================================
    const statNumbers = document.querySelectorAll('.stat-number');
    let hasCounted = false;

    const statsSection = document.querySelector('.section-stats');

    if (statsSection && statNumbers.length > 0) {
        const statsObserver = new IntersectionObserver((entries) => {
            if (entries[0].isIntersecting && !hasCounted) {
                startCounting();
                hasCounted = true;
                // Có thể unobserve để tiết kiệm tài nguyên
                // statsObserver.unobserve(statsSection);
            }
        }, { threshold: 0.5 });

        statsObserver.observe(statsSection);
    }

    function startCounting() {
        statNumbers.forEach(stat => {
            const target = +stat.getAttribute('data-target');
            const duration = 2000; // 2 giây
            const increment = target / (duration / 20); // Update mỗi 20ms

            let current = 0;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    stat.textContent = target;
                    clearInterval(timer);
                } else {
                    stat.textContent = Math.ceil(current);
                }
            }, 20);
        });
    }
});
</file>

<file path="resources/js/client/home.js">
import '../bootstrap'; // Giữ lại nếu bạn dùng axios/lodash từ bootstrap.js

document.addEventListener('DOMContentLoaded', () => {
    console.log('Client Core Loaded');

    // ==========================================
    // 1. XỬ LÝ HEADER STICKY (Cuộn trang đổi màu nền)
    // ==========================================
    const header = document.querySelector('.header-wrapper');
    if (header) {
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                header.classList.add('is-scrolled'); // Thêm class CSS nền mờ
            } else {
                header.classList.remove('is-scrolled');
            }
        });
    }

    // ==========================================
    // 2. XỬ LÝ MENU MOBILE (Toggle)
    // ==========================================
    const mobileToggleBtn = document.querySelector('.mobile-toggle');
    const mobileMenu = document.querySelector('.mobile-menu-wrapper');

    if (mobileToggleBtn && mobileMenu) {
        mobileToggleBtn.addEventListener('click', (e) => {
            e.preventDefault();
            // Toggle class 'is-open' để hiện/ẩn menu (CSS cần hỗ trợ class này)
            // Lưu ý: Trong CSS mới ta dùng x-show của Alpine, nhưng nếu dùng thuần JS thì dùng class này
            // Nếu bạn dùng AlpineJS hoàn toàn cho menu, đoạn này có thể bỏ hoặc giữ để fallback
            mobileMenu.classList.toggle('active');

            // Đổi icon hamburger <-> xmark
            const icon = mobileToggleBtn.querySelector('i');
            if (icon) {
                if (mobileMenu.classList.contains('active')) {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-xmark');
                } else {
                    icon.classList.remove('fa-xmark');
                    icon.classList.add('fa-bars');
                }
            }
        });
    }

    // ==========================================
    // 3. TỰ ĐỘNG ẨN FLASH MESSAGE
    // ==========================================
    const flashMessages = document.querySelectorAll('.flash-success, .flash-error');
    if (flashMessages.length > 0) {
        flashMessages.forEach(msg => {
            // Tự động tắt sau 5s
            setTimeout(() => {
                msg.style.transition = "opacity 0.5s ease";
                msg.style.opacity = "0";
                setTimeout(() => msg.remove(), 500);
            }, 5000);

            // Nút tắt thủ công
            const closeBtn = msg.querySelector('.btn-close-success, .btn-close-error');
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    msg.remove();
                });
            }
        });
    }
});
</file>

<file path="resources/js/client/invoice.js">
document.addEventListener('DOMContentLoaded', () => {
    console.log('Invoice Details Script Loaded.');

    const backLink = document.getElementById('back-to-previous');
    const printButton = document.getElementById('print-invoice-btn');

    // 1. Logic cho nút Quay lại (Chỉ cần lắng nghe sự kiện click)
    if (backLink) {
        backLink.addEventListener('click', function(e) {
            e.preventDefault();
            // Sử dụng history.back() để đảm bảo người dùng quay lại trang trước đó
            history.back();
        });
    }

    // 2. Logic cho nút In
    if (printButton) {
        printButton.addEventListener('click', function() {
            // Gọi hàm in của trình duyệt
            window.print();
        });
    }
});
</file>

<file path="resources/js/client/notifications.js">
import '../bootstrap';

document.addEventListener('DOMContentLoaded', () => {
    console.log('Notifications Logic Loaded');

    // --- DOM Elements ---
    const selectAllCheckbox = document.getElementById('select-all-notifications');
    const bulkDeleteBtn = document.getElementById('bulk-delete-btn');
    const checkboxes = document.querySelectorAll('.notification-checkbox');

    // Helper: Cập nhật trạng thái nút xóa
    const updateBulkState = () => {
        const selectedCount = document.querySelectorAll('.notification-checkbox:checked').length;
        if (bulkDeleteBtn) {
            bulkDeleteBtn.disabled = selectedCount === 0;
            // Cập nhật text nút (Optional)
            // bulkDeleteBtn.innerHTML = `<i class="fa-solid fa-trash-can mr-1"></i> Xóa (${selectedCount})`;
        }
    };

    // 1. Logic Chọn tất cả
    if (selectAllCheckbox) {
        selectAllCheckbox.addEventListener('change', function() {
            const isChecked = this.checked;
            checkboxes.forEach(cb => {
                cb.checked = isChecked;
            });
            updateBulkState();
        });
    }

    // 2. Logic checkbox lẻ
    checkboxes.forEach(cb => {
        cb.addEventListener('change', () => {
            // Nếu bỏ tick 1 cái thì bỏ tick "Chọn tất cả"
            if (!cb.checked && selectAllCheckbox) {
                selectAllCheckbox.checked = false;
            }
            // Nếu tick hết thì tick "Chọn tất cả"
            const allChecked = Array.from(checkboxes).every(c => c.checked);
            if (allChecked && selectAllCheckbox) {
                selectAllCheckbox.checked = true;
            }
            updateBulkState();
        });
    });

    // 3. Logic Xóa hàng loạt (AJAX)
    if (bulkDeleteBtn) {
        bulkDeleteBtn.addEventListener('click', async function() {
            // Lấy danh sách ID
            const selectedIds = Array.from(document.querySelectorAll('.notification-checkbox:checked'))
                .map(cb => cb.dataset.id);

            if (selectedIds.length === 0) return;

            if (!confirm(`Bạn có chắc chắn muốn xóa ${selectedIds.length} thông báo đã chọn?`)) return;

            // Hiệu ứng loading
            const originalText = this.innerHTML;
            this.disabled = true;
            this.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Đang xóa...';

            try {
                // Lấy URL từ data attribute (đã thêm trong blade)
                const deleteUrl = this.dataset.route;

                const response = await axios.post(deleteUrl, {
                    ids: selectedIds
                });

                if (response.data.success) {
                    // Xóa DOM
                    selectedIds.forEach(id => {
                        const item = document.querySelector(`.notify-item[data-id="${id}"]`);
                        if (item) {
                            item.style.opacity = '0';
                            setTimeout(() => item.remove(), 300);
                        }
                    });

                    // Reset trạng thái
                    if (selectAllCheckbox) selectAllCheckbox.checked = false;

                    // Thông báo thành công (Có thể dùng Toast nếu có, ở đây dùng alert đơn giản hoặc reload)
                    // location.reload(); // Reload để cập nhật lại phân trang và số lượng trên header

                    // Cập nhật lại UI nếu không reload
                    setTimeout(updateBulkState, 300);

                } else {
                    alert(response.data.message || 'Có lỗi xảy ra.');
                }
            } catch (error) {
                console.error(error);
                alert('Lỗi kết nối server.');
            } finally {
                this.disabled = false;
                this.innerHTML = originalText;
                // Nếu xóa hết trang hiện tại, nên reload
                if (document.querySelectorAll('.notify-item').length === selectedIds.length) {
                    window.location.reload();
                }
            }
        });
    }
});
</file>

<file path="resources/js/client/profile.js">
document.addEventListener('DOMContentLoaded', () => {
    console.log('Profile Logic Loaded');

    // ==========================================
    // 1. PREVIEW ẢNH ĐẠI DIỆN (Nếu có chức năng upload)
    // ==========================================
    const avatarInput = document.getElementById('avatar-upload');
    const avatarPreview = document.getElementById('avatar-preview');

    if (avatarInput && avatarPreview) {
        avatarInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    avatarPreview.src = e.target.result;
                }
                reader.readAsDataURL(file);
            }
        });
    }

    // ==========================================
    // 2. CONFIRM LOGOUT
    // ==========================================
    const logoutForms = document.querySelectorAll('form[action*="logout"]');
    logoutForms.forEach(form => {
        form.addEventListener('submit', (e) => {
            if (!confirm('Bạn có chắc chắn muốn đăng xuất?')) {
                e.preventDefault();
            }
        });
    });
});
</file>

<file path="resources/js/client/promo.js">
import '../bootstrap';

document.addEventListener('DOMContentLoaded', () => {
    console.log('Promo Logic Loaded');

    // ==========================================
    // 1. COPY TO CLIPBOARD
    // ==========================================
    const copyButtons = document.querySelectorAll('.btn-copy');

    copyButtons.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();

            const code = this.getAttribute('data-code');

            if (code) {
                // Copy text
                navigator.clipboard.writeText(code).then(() => {
                    // Feedback UI
                    const originalHTML = this.innerHTML;

                    this.innerHTML = '<i class="fa-solid fa-check"></i> Đã chép';
                    this.classList.add('copied');

                    // Reset sau 2s
                    setTimeout(() => {
                        this.innerHTML = originalHTML;
                        this.classList.remove('copied');
                    }, 2000);

                    // (Optional) Toast message nếu muốn
                    // alert('Đã sao chép mã: ' + code);
                }).catch(err => {
                    console.error('Không thể sao chép: ', err);
                });
            }
        });
    });

    // ==========================================
    // 2. SCROLL ANIMATION (Tái sử dụng nếu cần)
    // ==========================================
    const fadeElements = document.querySelectorAll('.voucher-card');

    if (fadeElements.length > 0) {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        fadeElements.forEach((el, index) => {
            // Set init style
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = `all 0.6s ease ${index * 0.1}s`; // Stagger effect

            observer.observe(el);
        });
    }
});
</file>

<file path="resources/js/client/rooms.js">
document.addEventListener('DOMContentLoaded', () => {
    console.log('Rooms Logic Loaded');

    // ==========================================
    // 1. XỬ LÝ BỘ LỌC MOBILE (Sidebar Filter Toggle)
    // ==========================================
    // Logic này hỗ trợ nút "Bộ lọc tìm kiếm" trên mobile để hiện sidebar
    const mobileFilterBtn = document.querySelector('.mobile-filter-btn');
    const sidebarFilter = document.querySelector('.sidebar-filter');

    if (mobileFilterBtn && sidebarFilter) {
        mobileFilterBtn.addEventListener('click', () => {
            sidebarFilter.classList.toggle('active');

            // Cuộn lên đầu lọc để user thấy
            if (sidebarFilter.classList.contains('active')) {
                sidebarFilter.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    }

    // ==========================================
    // 2. LOGIC DATEPICKER (Trang Chi tiết phòng)
    // ==========================================
    // Tự động cập nhật min-date của ngày trả phòng dựa trên ngày nhận phòng
    const checkinInput = document.getElementById('checkin_date');
    const checkoutInput = document.getElementById('checkout_date');
    const bookingForm = document.getElementById('booking-date-form');

    if (checkinInput && checkoutInput) {
        checkinInput.addEventListener('change', function() {
            if (this.value) {
                const checkinDate = new Date(this.value);
                // Ngày trả phòng ít nhất phải sau ngày nhận phòng 1 ngày
                checkinDate.setDate(checkinDate.getDate() + 1);

                const minCheckout = checkinDate.toISOString().split('T')[0];
                checkoutInput.min = minCheckout;

                // Nếu ngày checkout hiện tại ko hợp lệ thì reset
                if (checkoutInput.value && checkoutInput.value <= this.value) {
                    checkoutInput.value = minCheckout;
                }
            }
        });

        // Validate form trước khi submit
        if (bookingForm) {
            bookingForm.addEventListener('submit', function(e) {
                const checkin = checkinInput.value;
                const checkout = checkoutInput.value;

                if (!checkin || !checkout) {
                    e.preventDefault();
                    alert('Vui lòng chọn đầy đủ ngày nhận và trả phòng!');
                    return;
                }

                if (new Date(checkin) >= new Date(checkout)) {
                    e.preventDefault();
                    alert('Ngày trả phòng phải lớn hơn ngày nhận phòng ít nhất 1 ngày!');
                }
            });
        }
    }
});
</file>

<file path="resources/js/login.js">
document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('login-form');
    const submitBtn = document.getElementById('btn-login');
    const btnText = submitBtn.querySelector('.btn-text');
    const btnIcon = submitBtn.querySelector('.btn-icon-wrapper');
    const btnLoader = submitBtn.querySelector('.btn-loader');

    // Xử lý hiệu ứng khi Submit Form
    if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
            // Lưu ý: Không dùng e.preventDefault() vì đây là submit form thường lên server Laravel
            // Chúng ta chỉ thêm hiệu ứng visual trước khi trình duyệt chuyển trang

            // 1. Vô hiệu hóa nút để tránh double click
            submitBtn.disabled = true;
            submitBtn.style.cursor = 'not-allowed';
            submitBtn.style.opacity = '0.8';

            // 2. Ẩn text và icon cũ, hiện loader
            btnText.textContent = 'ĐANG XỬ LÝ...';
            if (btnIcon) btnIcon.style.display = 'none';
            if (btnLoader) btnLoader.classList.remove('hidden');
        });
    }

    // Hiệu ứng Visual thêm cho các input (Optional - vì CSS đã xử lý phần lớn)
    const inputs = document.querySelectorAll('.form-input');
    inputs.forEach(input => {
        // Tự động bôi đen nội dung khi click vào input
        input.addEventListener('focus', function() {
            this.select();
        });
    });
});
</file>

<file path="resources/js/password.js">
document.addEventListener('DOMContentLoaded', function() {
    const forms = document.querySelectorAll('.login-form-content');

    forms.forEach(form => {
        form.addEventListener('submit', function(e) {
            // Ngăn chặn submit nhiều lần
            if (form.getAttribute('data-submitting') === 'true') {
                e.preventDefault();
                return;
            }

            const btn = form.querySelector('.btn-submit');
            if (btn) {
                // Đánh dấu form đang submit
                form.setAttribute('data-submitting', 'true');

                const btnText = btn.querySelector('.btn-text');
                const btnIcon = btn.querySelector('.btn-icon-wrapper');

                // Lưu text gốc để phòng trường hợp lỗi
                const originalText = btnText ? btnText.textContent : '';

                // Hiển thị trạng thái loading
                if (btnText) btnText.textContent = 'ĐANG XỬ LÝ...';
                if (btnIcon) {
                    btnIcon.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i>';
                }

                // Thêm class opacity hoặc disable để người dùng biết
                btn.style.opacity = '0.8';
                btn.style.cursor = 'wait';
            }
        });
    });

    // Fade in effect cho các input (Optional polish)
    const inputs = document.querySelectorAll('.form-input');
    inputs.forEach((input, index) => {
        input.style.opacity = '0';
        input.style.animation = `fadeInUp 0.5s ease forwards ${0.3 + (index * 0.1)}s`;
    });
});
</file>

<file path="resources/js/register.js">
document.addEventListener('DOMContentLoaded', function() {
    const registerForm = document.getElementById('register-form');
    const submitBtn = document.getElementById('btn-register');
    const btnText = submitBtn.querySelector('.btn-text');
    const btnIcon = submitBtn.querySelector('.btn-icon-wrapper');
    const btnLoader = submitBtn.querySelector('.btn-loader');

    if (registerForm) {
        registerForm.addEventListener('submit', function(e) {
            // Hiệu ứng Visual trước khi gửi form
            submitBtn.disabled = true;
            submitBtn.style.cursor = 'not-allowed';
            submitBtn.style.opacity = '0.8';

            // Đổi text và icon
            btnText.textContent = 'ĐANG ĐĂNG KÝ...';
            if (btnIcon) btnIcon.style.display = 'none';
            if (btnLoader) btnLoader.classList.remove('hidden');
        });
    }

    // Auto-select text on focus
    const inputs = document.querySelectorAll('.form-input');
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.select();
        });
    });
});
</file>

<file path="resources/sass/_variables.scss">
// Body
$body-bg: #f8fafc;

// Typography
$font-family-sans-serif: 'Nunito', sans-serif;
$font-size-base: 0.9rem;
$line-height-base: 1.6;
</file>

<file path="resources/sass/app.scss">
// Fonts
@import url('https://fonts.bunny.net/css?family=Nunito');

// Variables
@import 'variables';

// Bootstrap
@import 'bootstrap/scss/bootstrap';
</file>

<file path="resources/views/admin/dat_phong/them.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Tạo đơn đặt phòng')
@section('header', 'Tạo đơn mới')

@section('content')
<div class="max-w-3xl mx-auto">
    <div class="bg-white rounded-xl shadow p-6">
        <form method="POST" action="{{ route('admin.dat-phong.store') }}">
            @csrf
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="text-xs font-bold text-gray-500">Khách hàng</label>
                    <select name="user_id" class="w-full mt-1 p-2 border rounded">
                        @foreach($users as $user)
                            <option value="{{ $user->id }}">{{ $user->name }} ({{ $user->email }})</option>
                        @endforeach
                    </select>
                </div>

                <div>
                    <label class="text-xs font-bold text-gray-500">Phòng</label>
                    <select name="phong_id" class="w-full mt-1 p-2 border rounded">
                        @foreach($phongs as $phong)
                            <option value="{{ $phong->id }}">{{ $phong->so_phong }} — {{ $phong->loaiPhong->ten_loai_phong ?? 'Loại' }} ({{ number_format($phong->loaiPhong->gia ?? 0,0,',','.') }} đ/đêm)</option>
                        @endforeach
                    </select>
                </div>

                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="text-xs font-bold text-gray-500">Ngày đến</label>
                        <input type="date" name="ngay_den" class="w-full mt-1 p-2 border rounded" required />
                    </div>
                    <div>
                        <label class="text-xs font-bold text-gray-500">Ngày đi</label>
                        <input type="date" name="ngay_di" class="w-full mt-1 p-2 border rounded" required />
                    </div>
                </div>

                <div>
                    <label class="text-xs font-bold text-gray-500">Phương thức thanh toán</label>
                    <select name="payment_method" class="w-full mt-1 p-2 border rounded">
                        <option value="cash">Tiền mặt (Thanh toán tại khách sạn)</option>
                        <option value="online">Thanh toán online</option>
                    </select>
                </div>

                <div>
                    <label class="text-xs font-bold text-gray-500">Ghi chú</label>
                    <textarea name="note" class="w-full mt-1 p-2 border rounded" rows="3"></textarea>
                </div>

                <div class="flex items-center justify-between gap-3">
                    <a href="{{ route('admin.dat-phong') }}" class="px-4 py-2 bg-white border rounded text-sm">Hủy</a>
                    <button type="submit" class="px-4 py-2 bg-brand-900 text-brand-gold rounded text-sm font-bold">Tạo đơn</button>
                </div>
            </div>
        </form>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/reports/revenue.blade.php">
@extends('admin.layouts.dashboard')
@section('content')

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-semibold">Báo cáo doanh thu</h1>
        <a href="{{ route('admin.dat-phong') }}" class="text-sm text-blue-600">← Quay lại</a>
    </div>

    <div class="card-common p-4 mb-6">
        <form method="GET" class="flex gap-2 items-center">
            <label class="text-sm">Từ:</label>
            <input type="date" name="from_date" value="{{ request('from_date') }}" class="form-input">
            <label class="text-sm">Đến:</label>
            <input type="date" name="to_date" value="{{ request('to_date') }}" class="form-input">
            <label class="text-sm">Phòng:</label>
            <select name="room_id" class="form-select">
                <option value="">Tất cả</option>
                @foreach($rooms as $r)
                    <option value="{{ $r->id }}" {{ request('room_id') == $r->id ? 'selected' : '' }}>{{ $r->so_phong }}</option>
                @endforeach
            </select>
            <button class="btn btn-primary">Lọc</button>
        </form>
    </div>

    <div class="card-common p-4 mb-6">
        <div class="mb-4">
            <h2 class="text-lg font-medium">Tổng doanh thu: <span class="text-xl font-bold text-green-600">{{ number_format($totalRevenue ?? 0) }} VND</span></h2>
        </div>

        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">#</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Mã đơn</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Khách</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Phòng</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Ngày cập nhật</th>
                        <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase">Tổng tiền</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Hóa đơn</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach($bookings as $b)
                    <tr>
                        <td class="px-6 py-4">{{ $loop->iteration + (($bookings->currentPage()-1) * $bookings->perPage()) }}</td>
                        <td class="px-6 py-4">#{{ $b->id }}</td>
                        <td class="px-6 py-4">{{ $b->user->name ?? '—' }}</td>
                        <td class="px-6 py-4">@if($b->chiTietDatPhongs->first()) {{ $b->chiTietDatPhongs->first()->phong->so_phong ?? '—' }} @endif</td>
                        <td class="px-6 py-4">{{ $b->updated_at->format('d/m/Y H:i') }}</td>
                        <td class="px-6 py-4 text-right">{{ number_format($b->tong_tien) }} VND</td>
                        <td class="px-6 py-4"><a href="{{ route('admin.dat-phong.hoa-don', $b->id) }}" class="text-indigo-600">Xem hóa đơn</a></td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
        </div>

        <div class="p-4">{{ $bookings->links() }}</div>
    </div>

</div>

@endsection
</file>

<file path="resources/views/admin/tien_nghi/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Danh sách Tiện nghi')
@section('header', 'Quản lý Tiện nghi')

@section('content')
<div class="max-w-7xl mx-auto">
    
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6">
        <div>
            <h1 class="text-2xl font-serif font-bold text-gray-900">Danh sách Tiện nghi</h1>
            <p class="text-sm text-gray-500 mt-1">Quản lý các tiện ích (Wifi, AC, TV...) của phòng</p>
        </div>
        
        <div class="flex flex-col sm:flex-row gap-3 items-center">
            <form method="GET" action="{{ route('admin.tien-nghi') }}" class="relative flex items-center gap-2">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fa-solid fa-search text-gray-400"></i>
                </div>
                <input type="search" name="q" value="{{ request('q') }}" placeholder="Tìm tên hoặc mã" class="w-56 h-10 pl-10 rounded-lg border-gray-300 text-sm focus:border-brand-gold focus:ring-brand-gold" />
                <button type="submit" class="px-3 py-2 bg-brand-900 text-brand-gold rounded text-sm">Tìm</button>
                @if(request('q'))
                    <a href="{{ route('admin.tien-nghi') }}" class="px-3 py-2 bg-gray-100 text-gray-700 rounded text-sm">Đặt lại</a>
                @endif
            </form>

            <form id="bulkTnForm" method="POST" action="{{ route('admin.tien-nghi.bulk-delete') }}">
                @csrf
                <button type="submit" class="px-4 py-2 bg-white border border-gray-300 text-red-600 rounded-lg font-bold hover:bg-red-50 hover:border-red-300 transition-all shadow-sm" onclick="return confirm('Xóa các tiện nghi được chọn?')">
                    <i class="fa-solid fa-trash-can mr-2"></i> Xóa chọn
                </button>
            </form>
            
            <a href="{{ route('admin.tien-nghi.them') }}" class="flex items-center px-5 py-2 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all">
                <i class="fa-solid fa-plus mr-2"></i> Thêm mới
            </a>
        </div>
    </div>

    <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden">
        <div class="overflow-x-auto">
            @if($tienNghis->isEmpty())
                <div class="p-12 text-center text-gray-500">
                    <i class="fa-solid fa-box-open text-4xl text-gray-300 mb-3"></i>
                    <p>Chưa có tiện nghi nào.</p>
                </div>
            @else
            <form id="tnTableForm" method="POST" action="{{ route('admin.tien-nghi.bulk-delete') }}">
            @csrf
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-brand-900">
                    <tr>
                        <th class="px-6 py-4 text-left w-10">
                            <input id="selectAllTn" type="checkbox" class="rounded border-gray-500 text-brand-gold focus:ring-brand-gold bg-gray-700">
                        </th>
                        <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">#</th>
                        <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Tên tiện nghi</th>
                        <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Mã</th>
                        <th class="px-6 py-4 text-center text-xs font-bold text-brand-gold uppercase tracking-wider">Icon</th>
                        <th class="px-6 py-4 text-right text-xs font-bold text-brand-gold uppercase tracking-wider">Hành động</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-50">
                    @foreach ($tienNghis as $tn)
                    <tr class="hover:bg-gray-50 transition-colors">
                        <td class="px-6 py-4">
                            <input type="checkbox" name="ids[]" value="{{ $tn->id }}" class="tn-checkbox rounded border-gray-300 text-brand-gold focus:ring-brand-gold">
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-500">{{ $loop->iteration }}</td>
                        <td class="px-6 py-4 text-sm font-bold text-gray-900">{{ $tn->ten_tien_nghi }}</td>
                        <td class="px-6 py-4 text-sm font-mono text-gray-600 bg-gray-50 px-2 py-1 rounded w-fit">{{ $tn->ma_tien_nghi }}</td>
                        <td class="px-6 py-4 text-center text-xl text-brand-900">
                            @if($tn->icon)<i class="{{ $tn->icon }}"></i>@endif
                        </td>
                        <td class="px-6 py-4 text-right text-sm">
                            <div class="flex items-center justify-end gap-3">
                                <a href="{{ route('admin.tien-nghi.sua', ['id' => $tn->id]) }}" class="text-gray-400 hover:text-brand-gold transition-colors" title="Sửa">
                                    <i class="fa-solid fa-pen-to-square text-lg"></i>
                                </a>
                                <a href="{{ route('admin.tien-nghi.xoa', ['id' => $tn->id]) }}" onclick="return confirm('Bạn có muốn xóa tiện nghi {{ $tn->ten_tien_nghi }} không?')" class="text-gray-400 hover:text-red-600 transition-colors" title="Xóa">
                                    <i class="fa-solid fa-trash-can text-lg"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
            </form>
            @endif
        </div>
        <div class="bg-gray-50 px-6 py-4 border-t border-gray-200">{{ $tienNghis->withQueryString()->links() }}</div>
    </div>
</div>

@push('scripts')
<script>
document.getElementById('selectAllTn')?.addEventListener('change', function(e){
    document.querySelectorAll('.tn-checkbox').forEach(cb => cb.checked = e.target.checked);
});
</script>
@endpush
@endsection
</file>

<file path="resources/views/admin/tien_nghi/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Sửa Tiện nghi')
@section('header', 'Cập nhật tiện nghi')

@section('content')
<div class="max-w-3xl mx-auto">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-serif font-bold text-gray-900">Cập nhật: {{ $tienNghi->ten_tien_nghi }}</h1>
        <a href="{{ route('admin.tien-nghi') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="p-8">
            
            @if($errors->any())
                <div class="mb-6 p-4 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm">
                    <ul class="list-disc pl-5">
                        @foreach($errors->all() as $err) <li>{{ $err }}</li> @endforeach
                    </ul>
                </div>
            @endif

            <form method="POST" action="{{ route('admin.tien-nghi.update', $tienNghi->id) }}">
                @csrf
                <div class="space-y-6">
                    
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Tên tiện nghi <span class="text-red-500">*</span></label>
                        <input type="text" name="ten_tien_nghi" value="{{ old('ten_tien_nghi', $tienNghi->ten_tien_nghi) }}" 
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11" 
                               required />
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Mã tiện nghi <span class="text-red-500">*</span></label>
                        <input type="text" name="ma_tien_nghi" value="{{ old('ma_tien_nghi', $tienNghi->ma_tien_nghi) }}" 
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11" 
                               required />
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Biểu tượng (FontAwesome Class)</label>
                        <div class="flex gap-4 items-start">
                            <div class="flex-1">
                                <input type="text" name="icon" id="iconInput" value="{{ old('icon', $tienNghi->icon) }}" 
                                       class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11" 
                                       placeholder="fa-solid fa-wifi" 
                                       oninput="updateIconPreview(this.value)" />
                                <p class="text-xs text-gray-500 mt-1">
                                    Tìm icon tại <a href="https://fontawesome.com/search?m=free" target="_blank" class="text-brand-gold hover:underline font-bold">FontAwesome Free</a>.
                                </p>
                            </div>
                            
                            <div class="w-11 h-11 flex items-center justify-center bg-brand-900 rounded-lg shadow-sm border border-gray-200 text-brand-gold text-xl transition-all">
                                <i class="{{ $tienNghi->icon ?? 'fa-solid fa-icons' }}" id="iconPreview"></i>
                            </div>
                        </div>
                    </div>

                    <div class="pt-6 border-t border-gray-100 flex items-center justify-end gap-3">
                        <a href="{{ route('admin.tien-nghi') }}" class="px-5 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition-all">
                            Hủy bỏ
                        </a>
                        <button type="submit" class="px-6 py-2.5 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all flex items-center">
                            <i class="fa-solid fa-check mr-2"></i> Cập nhật
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

@push('scripts')
<script>
    function updateIconPreview(val) {
        const iconEl = document.getElementById('iconPreview');
        if (!val) {
            iconEl.className = 'fa-solid fa-icons';
            return;
        }
        iconEl.className = val;
    }
</script>
@endpush
@endsection
</file>

<file path="resources/views/admin/tien_nghi/them.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Thêm Tiện nghi')
@section('header', 'Thêm mới tiện nghi')

@section('content')
<div class="max-w-3xl mx-auto">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-serif font-bold text-gray-900">Thông tin tiện nghi</h1>
        <a href="{{ route('admin.tien-nghi') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="p-8">
            
            @if($errors->any())
                <div class="mb-6 p-4 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm">
                    <ul class="list-disc pl-5">
                        @foreach($errors->all() as $err) <li>{{ $err }}</li> @endforeach
                    </ul>
                </div>
            @endif

            <form method="POST" action="{{ route('admin.tien-nghi.store') }}">
                @csrf
                <div class="space-y-6">
                    
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Tên tiện nghi <span class="text-red-500">*</span></label>
                        <input type="text" name="ten_tien_nghi" value="{{ old('ten_tien_nghi') }}" 
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11" 
                               required placeholder="Ví dụ: Máy lạnh, Wifi tốc độ cao..." />
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Mã tiện nghi (Code) <span class="text-red-500">*</span></label>
                        <input type="text" name="ma_tien_nghi" value="{{ old('ma_tien_nghi') }}" 
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11" 
                               required placeholder="wifi, ac, tv, pool..." />
                        <p class="text-xs text-gray-500 mt-1">Dùng để định danh trong hệ thống (nên viết liền không dấu).</p>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Biểu tượng (FontAwesome Class)</label>
                        <div class="flex gap-4 items-start">
                            <div class="flex-1">
                                <input type="text" name="icon" id="iconInput" value="{{ old('icon') }}" 
                                       class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11" 
                                       placeholder="fa-solid fa-wifi" 
                                       oninput="updateIconPreview(this.value)" />
                                <p class="text-xs text-gray-500 mt-1">
                                    Tìm icon tại <a href="https://fontawesome.com/search?m=free" target="_blank" class="text-brand-gold hover:underline font-bold">FontAwesome Free</a>.
                                </p>
                            </div>
                            
                            <div class="w-11 h-11 flex items-center justify-center bg-brand-900 rounded-lg shadow-sm border border-gray-200 text-brand-gold text-xl transition-all" id="iconPreviewBox">
                                <i class="fa-solid fa-icons" id="iconPreview"></i>
                            </div>
                        </div>
                    </div>

                    <div class="pt-6 border-t border-gray-100 flex items-center justify-end gap-3">
                        <a href="{{ route('admin.tien-nghi') }}" class="px-5 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition-all">
                            Hủy bỏ
                        </a>
                        <button type="submit" class="px-6 py-2.5 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all flex items-center">
                            <i class="fa-solid fa-save mr-2"></i> Lưu Tiện Nghi
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

@push('scripts')
<script>
    function updateIconPreview(val) {
        const iconEl = document.getElementById('iconPreview');
        // Nếu ô trống, hiện icon mặc định
        if (!val) {
            iconEl.className = 'fa-solid fa-icons';
            return;
        }
        // Gán class mới
        iconEl.className = val;
    }
</script>
@endpush
@endsection
</file>

<file path="resources/views/auth/verify.blade.php">
@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">{{ __('Verify Your Email Address') }}</div>

                <div class="card-body">
                    @if (session('resent'))
                        <div class="alert alert-success" role="alert">
                            {{ __('A fresh verification link has been sent to your email address.') }}
                        </div>
                    @endif

                    {{ __('Before proceeding, please check your email for a verification link.') }}
                    {{ __('If you did not receive the email') }},
                    <form class="d-inline" method="POST" action="{{ route('verification.resend') }}">
                        @csrf
                        <button type="submit" class="btn btn-link p-0 m-0 align-baseline">{{ __('click here to request another') }}</button>.
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/layouts/print.blade.php">
<!doctype html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>@yield('title', 'Hóa đơn')</title>
    <style>
        /* Print layout tuned to match provided mockup */
        html, body {
            margin: 0;
            padding: 0;
            background: #f3f4f6;
            color: #111827;
            -webkit-print-color-adjust: exact;
            font-family: 'Segoe UI', Tahoma, Arial, Helvetica, sans-serif;
        }

        .print-wrap {
            display: flex;
            justify-content: center;
            padding: 18px 12px;
        }

        .print-card {
            width: 760px;
            background: transparent;
        }

        /* The invoice card itself (invoice view renders this inner structure) */
        .invoice-inner {
            background: #ffffff;
            border-radius: 14px;
            overflow: hidden;
            border: 1px solid #e6e7eb;
        }

        /* Header band matching mockup */
        .invoice-header {
            background: #0f1724; /* dark navy */
            color: #ffffff;
            padding: 28px 32px;
            text-align: center;
            position: relative;
        }
        .invoice-header h1 {
            margin: 0;
            font-family: Georgia, 'Times New Roman', serif;
            font-size: 28px;
            letter-spacing: 1px;
        }
        .invoice-header .subtitle {
            margin-top: 6px;
            font-size: 11px;
            opacity: 0.85;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .invoice-badge {
            display: inline-block;
            margin-top: 12px;
            background: rgba(255,255,255,0.08);
            color: #fff;
            padding: 6px 10px;
            border-radius: 999px;
            font-family: monospace;
            font-size: 12px;
            border: 1px solid rgba(255,255,255,0.06);
        }

        /* Content area inside white card */
        .invoice-body {
            padding: 28px 32px;
            color: #111827;
            font-size: 13px;
        }

        /* Footer small text */
        .invoice-footer {
            padding: 22px 32px;
            text-align: center;
            font-size: 11px;
            color: #6b7280;
        }

        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 8px 10px; }
        thead th { color: #6b7280; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; }

        /* Page config */
        @page { size: A4 portrait; margin: 10mm; }

        @media print {
            body { background: #fff; }
            .print-wrap { padding: 0; }
            .print-card { width: 100%; max-width: 760px; }
        }
        /* Neutralize view-level background/padding when rendering inside print layout */
        .invoice-inner .bg-gray-100 {
            background: transparent !important;
            min-height: auto !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .invoice-inner .max-w-3xl { max-width: 100% !important; padding: 0 !important; }
    </style>
</head>
<body>
    <div class="print-wrap">
        <div class="print-card">
            <div class="invoice-inner">
                @yield('content')
            </div>
            <div class="invoice-footer">
                @if(View::hasSection('print_footer'))
                    @yield('print_footer')
                @else
                    <div>Cảm ơn quý khách đã lựa chọn Luxury Stay Hotel &amp; Resort.</div>
                    <div>Mọi thắc mắc xin liên hệ hotline: 1900 1234 — support@luxurystay.com</div>
                @endif
            </div>
        </div>
    </div>
</body>
</html>
</file>

<file path="resources/views/partials/pagination.blade.php">
{{--
  Partial pagination control.
  Usage: @include('partials.pagination', ['paginator' => $items])
  This wrapper centralizes pagination markup so styles and logic stay in one place.
--}}
@if(isset($paginator) && method_exists($paginator, 'hasPages') && $paginator->hasPages())
    <div class="pagination-wrapper">
        <div class="pagination-inner">
            {{-- Preserve query string on links --}}
            {!! $paginator->appends(request()->query())->links() !!}
        </div>
    </div>
@endif
</file>

<file path="resources/views/vendor/notifications/email.blade.php">
<x-mail::message>
{{-- Greeting --}}
@if (! empty($greeting))
# {{ $greeting }}
@else
@if ($level === 'error')
# @lang('Whoops!')
@else
# @lang('Hello!')
@endif
@endif

{{-- Intro Lines --}}
@foreach ($introLines as $line)
{{ $line }}

@endforeach

{{-- Action Button --}}
@isset($actionText)
<?php
    $color = match ($level) {
        'success', 'error' => $level,
        default => 'primary',
    };
?>
<x-mail::button :url="$actionUrl" :color="$color">
{{ $actionText }}
</x-mail::button>
@endisset

{{-- Outro Lines --}}
@foreach ($outroLines as $line)
{{ $line }}

@endforeach

{{-- Salutation --}}
@if (! empty($salutation))
{{ $salutation }}
@else
@lang('Regards,')<br>
{{ config('app.name') }}
@endif

{{-- Subcopy --}}
@isset($actionText)
<x-slot:subcopy>
@lang(
    "If you're having trouble clicking the \":actionText\" button, copy and paste the URL below\n".
    'into your web browser:',
    [
        'actionText' => $actionText,
    ]
) <span class="break-all">[{{ $displayableActionUrl }}]({{ $actionUrl }})</span>
</x-slot:subcopy>
@endisset
</x-mail::message>
</file>

<file path="routes/console.php">
<?php

use Illuminate\Foundation\Inspiring;
use Illuminate\Support\Facades\Artisan;

Artisan::command('inspire', function () {
    $this->comment(Inspiring::quote());
})->purpose('Display an inspiring quote');
</file>

<file path="storage/app/.gitignore">
*
!private/
!public/
!.gitignore
</file>

<file path="storage/app/private/.gitignore">
*
!.gitignore
</file>

<file path="storage/app/public/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/.gitignore">
compiled.php
config.php
down
events.scanned.php
maintenance.php
routes.php
routes.scanned.php
schedule-*
services.json
</file>

<file path="storage/framework/cache/.gitignore">
*
!data/
!.gitignore
</file>

<file path="storage/framework/cache/data/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/sessions/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/testing/.gitignore">
*
!.gitignore
</file>

<file path="storage/framework/views/.gitignore">
*
!.gitignore
</file>

<file path="storage/logs/.gitignore">
*
!.gitignore
</file>

<file path="tests/Feature/ExampleTest.php">
<?php

namespace Tests\Feature;

// use Illuminate\Foundation\Testing\RefreshDatabase;
use Tests\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_the_application_returns_a_successful_response(): void
    {
        $response = $this->get('/');

        $response->assertStatus(200);
    }
}
</file>

<file path="tests/TestCase.php">
<?php

namespace Tests;

use Illuminate\Foundation\Testing\TestCase as BaseTestCase;

abstract class TestCase extends BaseTestCase
{
    //
}
</file>

<file path="tests/Unit/ExampleTest.php">
<?php

namespace Tests\Unit;

use PHPUnit\Framework\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_that_true_is_true(): void
    {
        $this->assertTrue(true);
    }
}
</file>

<file path="app/Http/Controllers/Admin/HoaDonController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\HoaDon;
use Illuminate\Http\Request;
use App\Models\DatPhong; // Import Model DatPhong để lấy dữ liệu nếu cần

class HoaDonController extends Controller
{
    
    public function getDanhSach()
    {
        // Sử dụng eager loading để lấy thông tin đơn đặt phòng liên quan
        $hoaDons = HoaDon::with('datPhong.user')->get();
        return view('admin.hoa_don.danh_sach', compact('hoaDons'));
    }

    public function getThem()
    {
        // Có thể cần truyền danh sách DatPhong IDs để chọn
        $datPhongs = DatPhong::all(); 
        return view('admin.hoa_don.them', compact('datPhongs'));
    }

    public function postThem(Request $request)
    {
        // [CẬP NHẬT] Thêm validation cho cột thanh toán và ghi chú
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            'ma_hoa_don' => 'required|string|max:100|unique:hoa_dons,ma_hoa_don', // Thêm unique check
            'ngay_lap' => 'required|date',
            'tong_tien' => 'required|numeric|min:0',
            'phuong_thuc_thanh_toan' => 'required|string|max:50', // Cột bắt buộc
            'trang_thai' => 'nullable|string|max:50',
            'ghi_chu' => 'nullable|string', // Thêm ghi chú
        ]);

        $orm = new HoaDon();
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->ma_hoa_don = $data['ma_hoa_don'];
        $orm->ngay_lap = $data['ngay_lap'];
        $orm->tong_tien = $data['tong_tien'];
        
        // [CẬP NHẬT] Lưu phương thức thanh toán
        $orm->phuong_thuc_thanh_toan = $data['phuong_thuc_thanh_toan']; 
        $orm->ghi_chu = $data['ghi_chu'] ?? null;
        
        $orm->trang_thai = $data['trang_thai'] ?? 'unpaid';
        $orm->save();
        
        return redirect()->route('admin.hoa-don')->with('success', 'Thêm hóa đơn thành công!');
    }

    public function getSua($id)
    {
        $hoaDon = HoaDon::findOrFail($id); // Sửa tên biến từ $hoaDons -> $hoaDon
        $datPhongs = DatPhong::all();
        return view('admin.hoa_don.sua', compact('hoaDon', 'datPhongs'));
    }

    public function postSua(Request $request, $id)
    {
        // [CẬP NHẬT] Thêm validation cho cột thanh toán và ghi chú
        $data = $request->validate([
            'dat_phong_id' => 'required|exists:dat_phongs,id',
            // Unique, bỏ qua chính nó
            'ma_hoa_don' => 'required|string|max:100|unique:hoa_dons,ma_hoa_don,'.$id, 
            'ngay_lap' => 'required|date',
            'tong_tien' => 'required|numeric|min:0',
            'phuong_thuc_thanh_toan' => 'required|string|max:50', // Cột bắt buộc
            'trang_thai' => 'nullable|string|max:50',
            'ghi_chu' => 'nullable|string', 
        ]);

        $orm = HoaDon::findOrFail($id);
        $orm->dat_phong_id = $data['dat_phong_id'];
        $orm->ma_hoa_don = $data['ma_hoa_don'];
        $orm->ngay_lap = $data['ngay_lap'];
        $orm->tong_tien = $data['tong_tien'];
        
        // [CẬP NHẬT] Lưu phương thức thanh toán và ghi chú
        $orm->phuong_thuc_thanh_toan = $data['phuong_thuc_thanh_toan']; 
        $orm->ghi_chu = $data['ghi_chu'] ?? $orm->ghi_chu;

        $orm->trang_thai = $data['trang_thai'] ?? $orm->trang_thai;
        $orm->save();
        
        return redirect()->route('admin.hoa-don')->with('success', 'Cập nhật hóa đơn thành công!');
    }

    public function getXoa($id)
    {
        $orm = HoaDon::findOrFail($id);
        $orm->delete();
        return redirect()->route('admin.hoa-don')->with('success', 'Xóa hóa đơn thành công!');
    }
}
</file>

<file path="app/Http/Controllers/Admin/KhuyenMaiController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\KhuyenMai;
use Illuminate\Http\Request;

class KhuyenMaiController extends Controller
{
    public function getDanhSach()
    {
        $q = request()->query('q');
        $query = KhuyenMai::query();
        if ($q) {
            $query->where('ten_khuyen_mai', 'like', "%{$q}%")
                  ->orWhere('ma_khuyen_mai', 'like', "%{$q}%");
        }
        $khuyenMais = $query->orderBy('created_at', 'desc')->paginate(10)->withQueryString();
        return view('admin.khuyen_mai.danh_sach', compact('khuyenMais'));
    }

    public function getThem()
    {
        return view('admin.khuyen_mai.them');
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'ten_khuyen_mai' => 'required|string|max:150',
            'ma_khuyen_mai' => 'required|string|max:50|unique:khuyen_mais,ma_khuyen_mai',
            'chiet_khau_phan_tram' => 'nullable|numeric',
            'so_tien_giam_gia' => 'nullable|numeric',
            'ngay_bat_dau' => 'required|date',
            'ngay_ket_thuc' => 'required|date',
        ]);

        $orm = new KhuyenMai();
        $orm->ten_khuyen_mai = $data['ten_khuyen_mai'];
        $orm->ma_khuyen_mai = $data['ma_khuyen_mai'];
        // Normalize values: DB columns are NOT NULL (per migration), so ensure defaults
        $percent = isset($data['chiet_khau_phan_tram']) ? (float)$data['chiet_khau_phan_tram'] : 0.0;
        $fixed = isset($data['so_tien_giam_gia']) ? (float)$data['so_tien_giam_gia'] : 0.0;

        // If percent provided (non-zero), prioritize it and set fixed to 0
        if ($percent > 0) {
            $orm->chiet_khau_phan_tram = $percent;
            $orm->so_tien_giam_gia = 0.0;
        } else {
            // use fixed amount (could be 0)
            $orm->chiet_khau_phan_tram = 0.0;
            $orm->so_tien_giam_gia = $fixed;
        }

        $orm->ngay_bat_dau = $data['ngay_bat_dau'];
        $orm->ngay_ket_thuc = $data['ngay_ket_thuc'];
        $orm->save();
        return redirect()->route('admin.khuyen-mai');
    }

    public function getSua($id)
    {
        $khuyenMai = KhuyenMai::findOrFail($id);
        return view('admin.khuyen_mai.sua', compact('khuyenMai'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'ten_khuyen_mai' => 'required|string|max:150',
            'ma_khuyen_mai' => 'required|string|max:50|unique:khuyen_mais,ma_khuyen_mai,' . $id,
            'chiet_khau_phan_tram' => 'nullable|numeric',
            'so_tien_giam_gia' => 'nullable|numeric',
            'ngay_bat_dau' => 'required|date',
            'ngay_ket_thuc' => 'required|date',
        ]);

        $orm = KhuyenMai::findOrFail($id);
        $orm->ten_khuyen_mai = $data['ten_khuyen_mai'];
        $orm->ma_khuyen_mai = $data['ma_khuyen_mai'];
        $percent = isset($data['chiet_khau_phan_tram']) ? (float)$data['chiet_khau_phan_tram'] : 0.0;
        $fixed = isset($data['so_tien_giam_gia']) ? (float)$data['so_tien_giam_gia'] : 0.0;

        if ($percent > 0) {
            $orm->chiet_khau_phan_tram = $percent;
            $orm->so_tien_giam_gia = 0.0;
        } else {
            $orm->chiet_khau_phan_tram = 0.0;
            $orm->so_tien_giam_gia = $fixed;
        }

        $orm->ngay_bat_dau = $data['ngay_bat_dau'];
        $orm->ngay_ket_thuc = $data['ngay_ket_thuc'];
        $orm->save();
        return redirect()->route('admin.khuyen-mai');
    }

    public function getXoa($id)
    {
        $orm = KhuyenMai::findOrFail($id);
        $orm->delete();
        return redirect()->route('admin.khuyen-mai');
    }

    // Bulk delete
    public function bulkDelete(Request $request)
    {
        $request->validate([
            'ids' => 'required|array',
            'ids.*' => 'exists:khuyen_mais,id',
        ]);
        KhuyenMai::whereIn('id', $request->ids)->delete();
        return redirect()->route('admin.khuyen-mai')->with('success', 'Đã xóa các khuyến mãi được chọn.');
    }

    /**
     * Display the specified resource.
     */
    public function show(KhuyenMai $khuyenMai)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(KhuyenMai $khuyenMai)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, KhuyenMai $khuyenMai)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(KhuyenMai $khuyenMai)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/PhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Phong;
use App\Models\LoaiPhong;
use Illuminate\Http\Request;

class PhongController extends Controller
{
    
    public function getDanhSach()
    {
        $q = request()->query('q');
        $loaiPhongId = request()->query('loai_phong_id');
        $tinhTrang = request()->query('tinh_trang');

        $query = Phong::with('loaiPhong');
        if ($q) {
            $query->where('so_phong', 'like', "%{$q}%");
        }
        if ($loaiPhongId) {
            $query->where('loai_phong_id', $loaiPhongId);
        }
        if ($tinhTrang) {
            $query->where('tinh_trang', $tinhTrang);
        }

        // Attempt numeric sort by room number when possible, fallback to lexicographic
        $query->orderByRaw("CAST(so_phong AS UNSIGNED) ASC")->orderBy('so_phong', 'asc');

        $phongs = $query->paginate(15)->withQueryString();

        // provide room types for filter select
        $loaiPhongs = LoaiPhong::select('id', 'ten_loai_phong')->orderBy('ten_loai_phong')->get();

        return view('admin.phong.danh_sach', compact('phongs', 'loaiPhongs'));
    }

    public function getThem()
    {
        $loaiPhongs = LoaiPhong::all();
        return view('admin.phong.them', compact('loaiPhongs'));
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'so_phong' => 'required|string|max:150',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'tinh_trang' => 'nullable|string|max:50',
        ]);

        $orm = new Phong();
        $orm->so_phong = $data['so_phong'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        // Use the migration default when no value is provided to avoid inserting explicit NULL
        $orm->tinh_trang = $data['tinh_trang'] ?? 'available';
        $orm->save();
        return redirect()->route('admin.phong');
    }

    public function getSua($id)
    {
        $phong = Phong::findOrFail($id);
        $loaiPhongs = LoaiPhong::all();
        return view('admin.phong.sua', compact('phong', 'loaiPhongs'));
    }
    
    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'so_phong' => 'required|string|max:150',
            'loai_phong_id' => 'required|exists:loai_phongs,id',
            'tinh_trang' => 'nullable|string|max:50',
        ]);

        $orm = Phong::findOrFail($id);
        $orm->so_phong = $data['so_phong'];
        $orm->loai_phong_id = $data['loai_phong_id'];
        $orm->tinh_trang = $data['tinh_trang'] ?? $orm->tinh_trang;
        $orm->save();
        return redirect()->route('admin.phong');
    }

    public function getXoa($id)
    {
        $orm = Phong::findOrFail($id);
        $orm->delete();
        return redirect()->route('admin.phong');
    }
    /**
     * Display the specified resource.
     */
    public function show(Phong $phong)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(Phong $phong)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, Phong $phong)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(Phong $phong)
    {
        //
    }
}
</file>

<file path="app/Http/Controllers/Admin/TienNghiController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\TienNghi;
use Illuminate\Http\Request;

class TienNghiController extends Controller
{
    // Danh sách
    public function getDanhSach()
    {
        $q = request()->query('q');
        $query = TienNghi::query();
        if ($q) {
            $query->where('ten_tien_nghi', 'like', "%{$q}%")->orWhere('ma_tien_nghi', 'like', "%{$q}%");
        }
        $tienNghis = $query->orderBy('created_at', 'desc')->paginate(10)->withQueryString();
        return view('admin.tien_nghi.danh_sach', compact('tienNghis'));
    }

    // Form thêm
    public function getThem()
    {
        return view('admin.tien_nghi.them');
    }

    // Xử lý thêm
    public function postThem(Request $request)
    {
        $request->validate([
            'ten_tien_nghi' => 'required|string|max:255',
            'ma_tien_nghi' => 'required|string|unique:tien_nghis,ma_tien_nghi',
            'icon' => 'nullable|string', // Ví dụ: fa-solid fa-wifi
        ]);

        TienNghi::create($request->all());

        return redirect()->route('admin.tien-nghi')->with('success', 'Thêm tiện nghi thành công!');
    }

    // Form sửa
    public function getSua($id)
    {
        $tienNghi = TienNghi::findOrFail($id);
        return view('admin.tien_nghi.sua', compact('tienNghi'));
    }

    // Xử lý sửa
    public function postSua(Request $request, $id)
    {
        $request->validate([
            'ten_tien_nghi' => 'required|string|max:255',
            'ma_tien_nghi' => 'required|string|unique:tien_nghis,ma_tien_nghi,' . $id,
            'icon' => 'nullable|string',
        ]);

        $tienNghi = TienNghi::findOrFail($id);
        $tienNghi->update($request->all());

        return redirect()->route('admin.tien-nghi')->with('success', 'Cập nhật thành công!');
    }

    // Xóa
    public function getXoa($id)
    {
        TienNghi::destroy($id);
        return redirect()->route('admin.tien-nghi')->with('success', 'Xóa thành công!');
    }

    // Bulk delete
    public function bulkDelete(Request $request)
    {
        $request->validate([
            'ids' => 'required|array',
            'ids.*' => 'exists:tien_nghis,id',
        ]);
        TienNghi::whereIn('id', $request->ids)->delete();
        return redirect()->route('admin.tien-nghi')->with('success', 'Đã xóa các tiện nghi được chọn.');
    }
}
</file>

<file path="app/Http/Controllers/Auth/LoginController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\AuthenticatesUsers;
use Illuminate\Http\Request;
use Illuminate\Http\RedirectResponse;
class LoginController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Login Controller
    |--------------------------------------------------------------------------
    |
    | This controller handles authenticating users for the application and
    | redirecting them to your home screen. The controller uses a trait
    | to conveniently provide its functionality to your applications.
    |
    */

    use AuthenticatesUsers;

    /**
     * Where to redirect users after login.
     *
     * @var string
     */
    // protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */

    public function authenticated(Request $request, $user)
    {
        if ($user->role === 'admin') {
            return redirect()->route('admin.dashboard');
        }
        return redirect()->route('home');
    }
    public function __construct()
    {
        $this->middleware('guest')->except('logout');
        $this->middleware('auth')->only('logout');
    }
}
</file>

<file path="app/Http/Controllers/Auth/RegisterController.php">
<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Models\User;
use Illuminate\Foundation\Auth\RegistersUsers;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Facades\Validator;

class RegisterController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Register Controller
    |--------------------------------------------------------------------------
    |
    | This controller handles the registration of new users as well as their
    | validation and creation. By default this controller uses a trait to
    | provide this functionality without requiring any additional code.
    |
    */

    use RegistersUsers;

    /**
     * Where to redirect users after registration.
     *
     * @var string
     */
    // protected $redirectTo = '/home';

    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('guest');
    }
     public function redirectTo()
    {
        if (auth()->user()->role === 'admin') {
            return route('admin.dashboard');
        }
        return route('home'); 
    }
    /**
     * Get a validator for an incoming registration request.
     *
     * @param  array  $data
     * @return \Illuminate\Contracts\Validation\Validator
     */
    protected function validator(array $data)
    {
        return Validator::make($data, [
            'name' => ['required', 'string', 'max:255'],
            'email' => ['required', 'string', 'email', 'max:255', 'unique:users'],
            'password' => ['required', 'string', 'min:8', 'confirmed'],
        ]);
    }

    /**
     * Create a new user instance after a valid registration.
     *
     * @param  array  $data
     * @return \App\Models\User
     */
    protected function create(array $data)
    {
        return User::create([
            'name' => $data['name'],
            'email' => $data['email'],
            'password' => Hash::make($data['password']),
            'role' => 'user',
        ]);
    }
}
</file>

<file path="app/Http/Controllers/HomeController.php">
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Models\LoaiPhong;
use App\Models\KhuyenMai;
use Carbon\Carbon;
class HomeController extends Controller
{
    /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        // Allow guests to view the public homepage (index)
        $this->middleware('auth')->except(['index']);
    }

    /**
     * Show the application dashboard.
     *
     * @return \Illuminate\Contracts\Support\Renderable
     */
    public function index()
    {
        // Return the public default layout as the homepage.
        // The public layout file is at resources/views/layouts/app.blade.php

        // 1. Lấy danh sách Loại phòng nổi bật (Ví dụ lấy 3 loại phòng đầu tiên hoặc ngẫu nhiên)
        $loaiPhongs = LoaiPhong::take(3)->get();

        // 2. Lấy Khuyến mãi đang hiệu lực (Ngày bắt đầu <= hôm nay <= Ngày kết thúc)
        $now = Carbon::now();
        $khuyenMais = KhuyenMai::whereDate('ngay_bat_dau', '<=', $now)
                               ->whereDate('ngay_ket_thuc', '>=', $now)
                               ->take(2) // Lấy 2 khuyến mãi mới nhất
                               ->get();

        return view('home', compact('loaiPhongs', 'khuyenMais'));

    }
}
</file>

<file path="app/Models/ChiTietDatPhong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class ChiTietDatPhong extends Model
{
    use HasFactory;

    // Định nghĩa tên bảng cho chắc chắn
    protected $table = 'chi_tiet_dat_phongs';

    // QUAN TRỌNG: Khai báo các cột được phép lưu (Mass Assignment)
    // Phải khớp với các trường trong BookingController@store
    // Trong App\Models\ChiTietDatPhong.php
    protected $fillable = [
        'dat_phong_id',
        'loai_phong_id',
        'phong_id',
        'so_luong',
        'don_gia',    // <--- Phải có
        'thanh_tien', // <--- Phải có
    ];

    /**
     * Quan hệ ngược lại với bảng Đặt phòng
     */
    public function datPhong()
    {
        return $this->belongsTo(DatPhong::class, 'dat_phong_id');
    }

    /**
     * Quan hệ với bảng Loại phòng
     */
    public function loaiPhong()
    {
        return $this->belongsTo(LoaiPhong::class, 'loai_phong_id');
    }

    /**
     * Quan hệ với bảng Phòng cụ thể
     */
    public function phong()
    {
        return $this->belongsTo(Phong::class, 'phong_id');
    }
}
</file>

<file path="app/Models/HoaDon.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class HoaDon extends Model
{
    use HasFactory;
    
    protected $fillable = [
        'dat_phong_id',
        'ma_hoa_don',
        'ngay_lap',
        'tong_tien',
        'trang_thai',
        'phuong_thuc_thanh_toan', 
    ];

    // [FIX LỖI] Khai báo cột ngày lập để tự động cast sang Carbon
    protected $casts = [
        'ngay_lap' => 'datetime', 
    ];

    /**
     * The booking (DatPhong) this invoice belongs to.
     */
    public function datPhong(): BelongsTo
    {
        return $this->belongsTo(DatPhong::class);
    }
}
</file>

<file path="app/Models/Phong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;

class Phong extends Model
{
    protected $table = 'phongs';
    protected $fillable = [
        'loai_phong_id',
        'so_phong',
        'tinh_trang',
    ];

    public const tinh_trang_options = [
        'available' => [
            'label' => 'Phòng trống',
            'class' => 'bg-emerald-100 text-emerald-800 border-emerald-200 ring-emerald-500', // Màu xanh ngọc (Sẵn sàng đón khách)
            'icon' => 'fa-door-open'
        ],
        'occupied' => [
            'label' => 'Đang có khách',
            'class' => 'bg-blue-100 text-blue-800 border-blue-200 ring-blue-500', // Màu xanh dương (Đang sử dụng)
            'icon' => 'fa-user-check'
        ],
        'cleaning' => [
            'label' => 'Đang dọn dẹp',
            'class' => 'bg-amber-100 text-amber-800 border-amber-200 ring-amber-500', // Màu vàng (Cảnh báo nhẹ)
            'icon' => 'fa-broom'
        ],
        'maintenance' => [
            'label' => 'Bảo trì / Sửa chữa',
            'class' => 'bg-red-100 text-red-800 border-red-200 ring-red-500', // Màu đỏ (Không thể dùng)
            'icon' => 'fa-screwdriver-wrench'
        ],
    ];

    /**
     * The LoaiPhong this Phong belongs to.
     */
    public function loaiPhong(): BelongsTo
    {
        return $this->belongsTo(LoaiPhong::class);
    }

    /**
     * Booking details referencing this Phong.
     */
    public function chiTietDatPhongs(): HasMany
    {
        return $this->hasMany(ChiTietDatPhong::class);
    }
}
</file>

<file path="bootstrap/app.php">
<?php

use Illuminate\Foundation\Application;
use Illuminate\Foundation\Configuration\Exceptions;
use Illuminate\Foundation\Configuration\Middleware;

return Application::configure(basePath: dirname(__DIR__))
    ->withRouting(
        web: __DIR__.'/../routes/web.php',
        commands: __DIR__.'/../routes/console.php',
        health: '/up',
    )
    ->withMiddleware(function (Middleware $middleware): void {
        $middleware->alias([
            'check.profile' => \App\Http\Middleware\CheckUserProfile::class,
            
            'admin' => \App\Http\Middleware\AdminMiddleware::class,
        ]);
    })
    ->withExceptions(function (Exceptions $exceptions): void {
        //
    })->create();
</file>

<file path="config/mail.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Mailer
    |--------------------------------------------------------------------------
    |
    | This option controls the default mailer that is used to send all email
    | messages unless another mailer is explicitly specified when sending
    | the message. All additional mailers can be configured within the
    | "mailers" array. Examples of each type of mailer are provided.
    |
    */

    'default' => env('MAIL_MAILER', 'log'),

    /*
    |--------------------------------------------------------------------------
    | Mailer Configurations
    |--------------------------------------------------------------------------
    |
    | Here you may configure all of the mailers used by your application plus
    | their respective settings. Several examples have been configured for
    | you and you are free to add your own as your application requires.
    |
    | Laravel supports a variety of mail "transport" drivers that can be used
    | when delivering an email. You may specify which one you're using for
    | your mailers below. You may also add additional mailers if needed.
    |
    | Supported: "smtp", "sendmail", "mailgun", "ses", "ses-v2",
    |            "postmark", "resend", "log", "array",
    |            "failover", "roundrobin"
    |
    */

    'mailers' => [

        'smtp' => [
            'transport' => 'smtp',
            'scheme' => env('MAIL_SCHEME'),
            'url' => env('MAIL_URL'),
            'host' => env('MAIL_HOST', '127.0.0.1'),
            'port' => env('MAIL_PORT', 2525),
            'username' => env('MAIL_USERNAME'),
            'password' => env('MAIL_PASSWORD'),
            'encryption' => env('MAIL_ENCRYPTION'),
            'auth_mode' => env('MAIL_AUTH_MODE'),
            'timeout' => null,
            'local_domain' => env('MAIL_EHLO_DOMAIN', parse_url((string) env('APP_URL', 'http://localhost'), PHP_URL_HOST)),
        ],

        'ses' => [
            'transport' => 'ses',
        ],

        'postmark' => [
            'transport' => 'postmark',
            // 'message_stream_id' => env('POSTMARK_MESSAGE_STREAM_ID'),
            // 'client' => [
            //     'timeout' => 5,
            // ],
        ],

        'resend' => [
            'transport' => 'resend',
        ],

        'sendmail' => [
            'transport' => 'sendmail',
            'path' => env('MAIL_SENDMAIL_PATH', '/usr/sbin/sendmail -bs -i'),
        ],

        'log' => [
            'transport' => 'log',
            'channel' => env('MAIL_LOG_CHANNEL'),
        ],

        'array' => [
            'transport' => 'array',
        ],

        'failover' => [
            'transport' => 'failover',
            'mailers' => [
                'smtp',
                'log',
            ],
            'retry_after' => 60,
        ],

        'roundrobin' => [
            'transport' => 'roundrobin',
            'mailers' => [
                'ses',
                'postmark',
            ],
            'retry_after' => 60,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Global "From" Address
    |--------------------------------------------------------------------------
    |
    | You may wish for all emails sent by your application to be sent from
    | the same address. Here you may specify a name and address that is
    | used globally for all emails that are sent by your application.
    |
    */

    'from' => [
        'address' => env('MAIL_FROM_ADDRESS', 'hello@example.com'),
        'name' => env('MAIL_FROM_NAME', 'Example'),
    ],

];
</file>

<file path="config/services.php">
<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Third Party Services
    |--------------------------------------------------------------------------
    |
    | This file is for storing the credentials for third party services such
    | as Mailgun, Postmark, AWS and more. This file provides the de facto
    | location for this type of information, allowing packages to have
    | a conventional file to locate the various service credentials.
    |
    */

    'postmark' => [
        'key' => env('POSTMARK_API_KEY'),
    ],

    'resend' => [
        'key' => env('RESEND_API_KEY'),
    ],

    'ses' => [
        'key' => env('AWS_ACCESS_KEY_ID'),
        'secret' => env('AWS_SECRET_ACCESS_KEY'),
        'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
    ],

    'slack' => [
        'notifications' => [
            'bot_user_oauth_token' => env('SLACK_BOT_USER_OAUTH_TOKEN'),
            'channel' => env('SLACK_BOT_USER_DEFAULT_CHANNEL'),
        ],
    ],

    'google' => [
        'client_id' => env('GOOGLE_CLIENT_ID'),
        'client_secret' => env('GOOGLE_CLIENT_SECRET'),
        // If GOOGLE_REDIRECT is not set, fall back to APP_URL + '/login/google/callback'
        'redirect' => env('GOOGLE_REDIRECT') ?: rtrim(env('APP_URL', ''), '/') . '/login/google/callback',
    ],


];
</file>

<file path="database/migrations/0001_01_01_000000_create_users_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('users', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->string('email')->unique();
            $table->string('cccd')->nullable();
            $table->string('phone')->nullable();
			$table->string('role')->default('user');
            $table->timestamp('email_verified_at')->nullable();
            $table->string('password');
            $table->rememberToken();
            $table->timestamps();
        });

        Schema::create('password_reset_tokens', function (Blueprint $table) {
            $table->string('email')->primary();
            $table->string('token');
            $table->timestamp('created_at')->nullable();
        });

        Schema::create('sessions', function (Blueprint $table) {
            $table->string('id')->primary();
            $table->foreignId('user_id')->nullable()->index();
            $table->string('ip_address', 45)->nullable();
            $table->text('user_agent')->nullable();
            $table->longText('payload');
            $table->integer('last_activity')->index();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('users');
        Schema::dropIfExists('password_reset_tokens');
        Schema::dropIfExists('sessions');
    }
};
</file>

<file path="database/migrations/2025_12_05_181622_create_chi_tiet_dat_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('chi_tiet_dat_phongs', function (Blueprint $table) {
            $table->id();
            $table->foreignId(column: 'dat_phong_id')->constrained(table: 'dat_phongs');
            $table->foreignId('loai_phong_id')->constrained('loai_phongs');
            $table->foreignId('phong_id')->constrained('phongs');
            $table->integer('so_luong');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('chi_tiet_dat_phongs');
    }
};
</file>

<file path="database/migrations/2025_12_05_181623_create_khuyen_mais_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;
use Ramsey\Uuid\Type\Decimal;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('khuyen_mais', function (Blueprint $table) {
            $table->id();
            $table->string('ten_khuyen_mai', 100);
            $table->string('ma_khuyen_mai', 50)->unique();
            $table->decimal('chiet_khau_phan_tram', 5, 2);
            $table->decimal('so_tien_giam_gia',10,2);
            $table->date('ngay_bat_dau');
            $table->date('ngay_ket_thuc');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('khuyen_mais');
    }
};
</file>

<file path="package.json">
{
    "$schema": "https://www.schemastore.org/package.json",
    "private": true,
    "type": "module",
    "scripts": {
        "build": "vite build",
        "dev": "vite"
    },
    "devDependencies": {
        "@popperjs/core": "^2.11.6",
        "@tailwindcss/vite": "^4.0.0",
        "axios": "^1.13.2",
        "bootstrap": "^5.2.3",
        "concurrently": "^9.0.1",
        "laravel-vite-plugin": "^2.0.0",
        "sass": "^1.56.1",
        "tailwindcss": "^4.0.0",
        "vite": "^7.0.7"
    },
    "dependencies": {
        "@alpinejs/collapse": "^3.15.2",
        "alpinejs": "^3.15.2"
    }
}
</file>

<file path="public/.htaccess">
<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews -Indexes
    </IfModule>

    RewriteEngine On

    # Handle Authorization Header
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # Handle X-XSRF-Token Header
    RewriteCond %{HTTP:x-xsrf-token} .
    RewriteRule .* - [E=HTTP_X_XSRF_TOKEN:%{HTTP:X-XSRF-Token}]

    # Redirect Trailing Slashes If Not A Folder...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} (.+)/$
    RewriteRule ^ %1 [L,R=301]

    # Send Requests To Front Controller...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule>

<Files .env>
    Require all denied
</Files>
</file>

<file path="resources/css/client/contact.css">
/* =========================================
   CONTACT PAGE (Luxury Dark Theme)
   ========================================= */


/* --- 1. HERO BANNER --- */

.contact-hero {
    position: relative;
    height: 50vh;
    min-height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    background-color: #111;
    overflow: hidden;
}

.contact-hero-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.6;
    animation: zoomSlow 30s infinite alternate;
}

@keyframes zoomSlow {
    from {
        transform: scale(1);
    }
    to {
        transform: scale(1.1);
    }
}

.contact-hero-content {
    position: relative;
    z-index: 2;
    padding: 0 1rem;
    max-width: 800px;
    animation: fadeInUp 1s ease;
}

.contact-subtitle {
    display: block;
    color: var(--primary-gold);
    font-size: 0.9rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    margin-bottom: 1rem;
    font-weight: 600;
}

.contact-title {
    font-family: var(--font-serif);
    font-size: 3rem;
    color: var(--white);
    margin: 0;
    line-height: 1.2;
}


/* --- 2. CONTACT CONTENT --- */

.section-contact {
    padding: 6rem 0;
    background: var(--bg-body);
}

.contact-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 4rem;
}

@media (min-width: 1024px) {
    .contact-grid {
        grid-template-columns: 1fr 1.5fr;
        gap: 5rem;
    }
}


/* Info Column */

.contact-info-wrapper {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.contact-card {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    padding: 2.5rem;
    transition: 0.3s;
}

.contact-card:hover {
    border-color: var(--primary-gold);
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.contact-card h3 {
    color: var(--white);
    font-family: var(--font-serif);
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.contact-card h3 i {
    color: var(--primary-gold);
    font-size: 1.2rem;
}

.contact-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.contact-list li {
    margin-bottom: 1rem;
    color: var(--text-muted);
    font-size: 0.95rem;
    display: flex;
    align-items: flex-start;
    gap: 1rem;
}

.contact-list li strong {
    color: var(--white);
    min-width: 80px;
}

.contact-list li i {
    color: var(--primary-gold);
    margin-top: 4px;
}

.contact-list a {
    color: var(--text-muted);
    text-decoration: none;
    transition: 0.3s;
}

.contact-list a:hover {
    color: var(--primary-gold);
}


/* Form Column */

.contact-form-card {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    padding: 3rem;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.form-header h2 {
    font-family: var(--font-serif);
    color: var(--white);
    font-size: 2rem;
    margin-bottom: 0.5rem;
}

.form-header p {
    color: var(--text-muted);
    margin-bottom: 2rem;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-label {
    display: block;
    color: var(--white);
    font-weight: 600;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
}

.form-input,
.form-textarea {
    width: 100%;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    color: var(--white);
    font-family: var(--font-sans);
    transition: 0.3s;
    outline: none;
}

.form-input:focus,
.form-textarea:focus {
    border-color: var(--primary-gold);
    background: rgba(255, 255, 255, 0.08);
}

.btn-submit {
    width: 100%;
    padding: 1rem;
    background: var(--primary-gold);
    color: #000;
    font-weight: 700;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: 0.3s;
    text-transform: uppercase;
    letter-spacing: 1px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
}

.btn-submit:hover {
    background: var(--primary-hover);
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(205, 164, 94, 0.4);
}

.btn-submit:disabled {
    background: #555;
    color: #888;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}


/* Map Section */

.section-map {
    height: 450px;
    filter: grayscale(100%) invert(90%);
    /* Làm bản đồ tối màu cho hợp theme */
    transition: 0.5s;
}

.section-map:hover {
    filter: grayscale(0%) invert(0%);
}
</file>

<file path="resources/css/login.css">
/* --- Variables (Dark/Gold Theme) --- */

:root {
    --primary-color: #cda45e;
    --primary-hover: #d9b876;
    --text-color: #ffffff;
    --text-muted: #aaaaaa;
    --bg-overlay: rgba(0, 0, 0, 0.7);
    --card-bg: rgba(0, 0, 0, 0.6);
    --card-border: 1px solid rgba(205, 164, 94, 0.2);
    --input-bg: rgba(255, 255, 255, 0.05);
    --input-border: 1px solid rgba(255, 255, 255, 0.1);
    --input-focus: #cda45e;
    --error-color: #ef4444;
    --success-bg: rgba(16, 185, 129, 0.2);
    --success-text: #34d399;
    --transition: all 0.3s ease;
}

body {
    font-family: 'Playfair Display', serif;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    background-color: #1a1a1a;
    /* Màu nền dự phòng */
}


/* --- Layout Wrapper --- */

.login-wrapper {
    position: relative;
    width: 100%;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}


/* --- Background --- */

.login-bg-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}

.login-bg-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform: scale(1.05);
    filter: blur(2px);
}

.login-bg-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, rgba(0, 0, 0, 0.5) 0%, #000000 100%);
}


/* --- Container & Animation --- */

.login-container {
    width: 100%;
    max-width: 450px;
    padding: 2rem;
    z-index: 10;
}

.animate-fade-in-up {
    animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}


/* --- Header --- */

.login-header {
    text-align: center;
    margin-bottom: 2rem;
}

.login-icon-wrapper {
    width: 80px;
    height: 80px;
    margin: 0 auto 1.5rem;
    background: rgba(205, 164, 94, 0.1);
    border: 1px solid var(--primary-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: var(--primary-color);
    box-shadow: 0 0 20px rgba(205, 164, 94, 0.2);
}

.login-title {
    color: var(--text-color);
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    font-family: 'Playfair Display', serif;
    letter-spacing: 1px;
}

.login-subtitle {
    color: var(--text-muted);
    font-size: 0.95rem;
    font-family: 'Open Sans', sans-serif;
    line-height: 1.6;
}

.login-subtitle a {
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 600;
    transition: var(--transition);
}

.login-subtitle a:hover {
    color: var(--primary-hover);
    text-decoration: underline;
}


/* --- Card --- */

.login-card {
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: var(--card-border);
    border-radius: 16px;
    padding: 2.5rem;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
}


/* --- Form Elements --- */

.form-group {
    margin-bottom: 1.5rem;
}

.form-label {
    display: block;
    color: var(--text-color);
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
    font-weight: 500;
    font-family: 'Open Sans', sans-serif;
}

.input-group {
    position: relative;
    display: flex;
    align-items: center;
}

.input-icon {
    position: absolute;
    left: 15px;
    color: var(--primary-color);
    z-index: 10;
    font-size: 1.2rem;
    pointer-events: none;
    /* Cho phép click xuyên qua icon */
    display: flex;
    align-items: center;
    height: 100%;
}

.form-input {
    width: 100%;
    /* Padding trái lớn để tránh đè icon */
    padding: 12px 15px 12px 60px !important;
    background: var(--input-bg);
    border: var(--input-border);
    border-radius: 8px;
    color: var(--text-color);
    font-size: 1rem;
    transition: var(--transition);
    font-family: 'Open Sans', sans-serif;
    box-sizing: border-box;
}

.form-input::placeholder {
    color: rgba(255, 255, 255, 0.3);
}

.form-input:focus {
    outline: none;
    border-color: var(--primary-color);
    background: rgba(205, 164, 94, 0.05);
    box-shadow: 0 0 10px rgba(205, 164, 94, 0.2);
}

.form-input.is-invalid {
    border-color: var(--error-color);
}


/* Fix lỗi nền trắng khi trình duyệt tự điền mật khẩu */

.form-input:-webkit-autofill,
.form-input:-webkit-autofill:hover,
.form-input:-webkit-autofill:focus,
.form-input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px #2b2b2b inset !important;
    /* Giả lập nền tối */
    -webkit-text-fill-color: var(--text-color) !important;
    transition: background-color 5000s ease-in-out 0s;
}

.error-msg {
    color: var(--error-color);
    font-size: 0.85rem;
    margin-top: 0.5rem;
    font-family: 'Open Sans', sans-serif;
    display: flex;
    align-items: center;
}


/* --- Options (Checkbox & Forgot Password) --- */

.form-options {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
    font-size: 0.9rem;
    font-family: 'Open Sans', sans-serif;
}

.checkbox-wrapper {
    display: flex;
    align-items: center;
}

.checkbox-custom {
    width: 1rem;
    height: 1rem;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: transparent;
    accent-color: var(--primary-color);
    cursor: pointer;
}

.checkbox-label {
    margin-left: 0.5rem;
    color: var(--text-muted);
    cursor: pointer;
    user-select: none;
}

.forgot-link {
    color: var(--text-muted);
    text-decoration: none;
    transition: var(--transition);
}

.forgot-link:hover {
    color: var(--primary-color);
    text-decoration: underline;
}


/* --- Button --- */

.btn-submit {
    width: 100%;
    padding: 14px;
    background: var(--primary-color);
    border: none;
    border-radius: 50px;
    color: #000;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.btn-submit:hover {
    background: var(--primary-hover);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(205, 164, 94, 0.4);
}

.btn-submit:active {
    transform: translateY(0);
}


/* --- Social Buttons --- */

.social-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    /* Mặc định 2 cột */
    gap: 1rem;
    margin-top: 1.5rem;
}


/* Khi chỉ có 1 nút (Google), cho nó full chiều rộng */

.social-grid.single-item {
    grid-template-columns: 1fr;
}

.btn-social {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.8rem;
    /* Tăng padding để nút dày dặn hơn */
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50px;
    /* Bo tròn hoàn toàn */
    background-color: rgba(255, 255, 255, 0.05);
    /* Nền mờ nhẹ */
    color: var(--text-color);
    text-decoration: none;
    font-weight: 600;
    /* Chữ đậm hơn */
    font-size: 0.95rem;
    transition: all 0.3s ease;
    font-family: 'Open Sans', sans-serif;
    position: relative;
    overflow: hidden;
}

.btn-social:hover {
    background-color: rgba(255, 255, 255, 0.15);
    border-color: var(--primary-color);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.btn-social img.social-icon {
    width: 24px;
    height: 24px;
    margin-right: 0.75rem;
}


/* Style riêng cho Google để nổi bật */

.btn-social.google {
    background-color: #fff;
    /* Nền trắng nổi bật */
    color: #333;
    /* Chữ đen tương phản */
    border-color: #fff;
}

.btn-social.google:hover {
    background-color: #f1f1f1;
    /* Hover xám nhẹ */
    border-color: #e0e0e0;
    box-shadow: 0 5px 20px rgba(255, 255, 255, 0.2);
    /* Glow trắng */
    color: #000;
}


/* --- Footer --- */

.footer-text {
    text-align: center;
    color: rgba(255, 255, 255, 0.4);
    font-size: 0.8rem;
    margin-top: 2rem;
    font-family: 'Open Sans', sans-serif;
}


/* --- Mobile Responsive --- */

@media (max-width: 640px) {
    .login-container {
        padding: 1rem;
    }
    .login-card {
        padding: 1.5rem;
    }
    .social-grid {
        grid-template-columns: 1fr;
    }
    .form-input {
        padding-left: 50px !important;
        /* Giảm nhẹ trên mobile nếu cần */
    }
}
</file>

<file path="resources/js/bootstrap.js">
import 'bootstrap';

/**
 * We'll load the axios HTTP library which allows us to easily issue requests
 * to our Laravel back-end. This library automatically handles sending the
 * CSRF token as a header based on the value of the "XSRF" token cookie.
 */

import axios from 'axios';
window.axios = axios;

window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

// Global response interceptor: reload page after successful non-GET actions
axios.interceptors.response.use(function(response) {
    try {
        // Only reload when response came from a mutating request (POST/PUT/PATCH/DELETE)
        const method = (response.config && response.config.method) ? response.config.method.toLowerCase() : 'get';
        // Allow opt-out by setting header 'X-No-Reload' on specific requests
        const noReload = response.config && response.config.headers && response.config.headers['X-No-Reload'];
        if (!noReload && ['post', 'put', 'patch', 'delete'].includes(method)) {
            // If server explicitly returns { reload: false } then skip
            if (response.data && typeof response.data.reload !== 'undefined') {
                if (response.data.reload) {
                    window.location.reload();
                }
            } else {
                // Default behaviour: reload after successful mutating request
                window.location.reload();
            }
        }
    } catch (e) {
        // fail silently
    }
    return response;
}, function(error) {
    return Promise.reject(error);
});

/**
 * Echo exposes an expressive API for subscribing to channels and listening
 * for events that are broadcast by Laravel. Echo and event broadcasting
 * allows your team to easily build robust real-time web applications.
 */

// import Echo from 'laravel-echo';

// import Pusher from 'pusher-js';
// window.Pusher = Pusher;

// window.Echo = new Echo({
//     broadcaster: 'pusher',
//     key: import.meta.env.VITE_PUSHER_APP_KEY,
//     cluster: import.meta.env.VITE_PUSHER_APP_CLUSTER ?? 'mt1',
//     wsHost: import.meta.env.VITE_PUSHER_HOST ?? `ws-${import.meta.env.VITE_PUSHER_APP_CLUSTER}.pusher.com`,
//     wsPort: import.meta.env.VITE_PUSHER_PORT ?? 80,
//     wssPort: import.meta.env.VITE_PUSHER_PORT ?? 443,
//     forceTLS: (import.meta.env.VITE_PUSHER_SCHEME ?? 'https') === 'https',
//     enabledTransports: ['ws', 'wss'],
// });
</file>

<file path="resources/js/client/contact.js">
import '../bootstrap';

document.addEventListener('DOMContentLoaded', function() {
    console.log('Contact Logic Loaded');

    const contactForm = document.getElementById('contact-form');
    const submitBtn = document.getElementById('contact-submit');

    if (contactForm && submitBtn) {
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();

            // 1. Lấy dữ liệu
            const name = document.getElementById('contact-name').value.trim();
            const email = document.getElementById('contact-email').value.trim();
            const message = document.getElementById('contact-message').value.trim();

            // 2. Validate đơn giản
            if (!name || !email || !message) {
                alert('Vui lòng điền đầy đủ thông tin: Họ tên, Email và Nội dung.');
                return;
            }

            // 3. Hiệu ứng Loading
            const originalText = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Đang gửi...';

            // 4. Giả lập gửi (hoặc gọi API thật nếu có backend)
            // Ở đây dùng mailto như yêu cầu cũ
            setTimeout(() => {
                const subject = encodeURIComponent(`Liên hệ mới từ ${name}`);
                const body = encodeURIComponent(`Họ tên: ${name}\nEmail: ${email}\n\nNội dung:\n${message}`);

                // Mở trình gửi mail mặc định
                window.location.href = `mailto:booking@luxurystay.com?subject=${subject}&body=${body}`;

                // Reset form
                contactForm.reset();
                alert('Cảm ơn bạn đã liên hệ! Chúng tôi sẽ phản hồi sớm nhất.');

                // Khôi phục nút
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalText;
            }, 1500);
        });
    }
});
</file>

<file path="resources/js/tailwind-config.js">
import defaultTheme from 'tailwindcss/defaultTheme';

/** @type {import('tailwindcss').Config} */
export default {
    // QUAN TRỌNG: content giúp Tailwind biết cần quét file nào để sinh ra CSS
    content: [
        './vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php',
        './storage/framework/views/*.php',
        './resources/views/**/*.blade.php', // Quét toàn bộ file Blade
        './resources/js/**/*.js', // Quét toàn bộ file JS (nếu bạn gán class trong JS)
    ],
    theme: {
        extend: {
            fontFamily: {
                sans: ['"Be Vietnam Pro"', 'sans-serif'],
                serif: ['"Playfair Display"', 'serif'],
            },
            colors: {
                brand: {
                    50: '#f4f7f6',
                    100: '#e0f2fe',
                    500: '#0ea5e9',
                    600: '#0284c7',
                    800: '#1f2937',
                    900: '#111827', // Xanh đen (Dark Blue)
                    gold: '#c5a47e', // Vàng Gold (Luxury)
                    dark: '#1a1a1a',
                }
            }
        },
    },
    plugins: [],
};
</file>

<file path="resources/views/admin/dat_phong/history.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Lịch sử đặt phòng')
@section('header', 'Lịch sử đặt phòng')

@section('content')
<div class="max-w-7xl mx-auto">
    <div class="flex items-center justify-between mb-6">
        <div>
            <h1 class="text-2xl font-serif font-bold text-gray-900">Danh sách đã duyệt</h1>
            <p class="text-sm text-gray-500 mt-1">Các đơn đặt phòng đã hoàn thành hoặc đang hoạt động</p>
        </div>
        <a href="{{ route('admin.dat-phong') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại Sơ đồ
        </a>
    </div>

    <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden">
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-brand-900 text-white">
                    <tr>
                        <th class="px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-brand-gold">Mã Đơn</th>
                        <th class="px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-brand-gold">Khách hàng</th>
                        <th class="px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-brand-gold">Phòng</th>
                        <th class="px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-brand-gold">Thời gian</th>
                        <th class="px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-brand-gold">Trạng thái</th>
                        <th class="px-6 py-4 text-right text-xs font-bold uppercase tracking-wider text-brand-gold">Hành động</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach($datPhongs as $dp)
                    <tr class="hover:bg-gray-50 transition-colors">
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-mono font-medium text-gray-900">#{{ $dp->id }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-bold text-gray-900">{{ $dp->user->name ?? '—' }}</div>
                            <div class="text-xs text-gray-500">{{ $dp->user->email ?? '' }}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            @if($dp->chiTietDatPhongs->first()) 
                                <span class="px-2 py-1 rounded bg-gray-100 font-serif font-bold text-gray-800">{{ $dp->chiTietDatPhongs->first()->phong->so_phong ?? '—' }}</span>
                            @else
                                —
                            @endif
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                            {{ \Carbon\Carbon::parse($dp->ngay_den)->format('d/m') }} <i class="fa-solid fa-arrow-right mx-1 text-xs text-gray-400"></i> {{ \Carbon\Carbon::parse($dp->ngay_di)->format('d/m/Y') }}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 border border-green-200">
                                {{ ucfirst($dp->trang_thai) }}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                            @if($dp->hoaDon)
                            <a href="{{ route('admin.dat-phong.hoa-don', $dp->id) }}" class="text-brand-gold hover:text-brand-900 font-bold transition-colors">
                                Chi tiết <i class="fa-solid fa-chevron-right text-xs ml-1"></i>
                            </a>
                            @else
                            <span class="text-gray-400 italic text-xs">Chưa có HĐ</span>
                            @endif
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
        </div>
        <div class="bg-gray-50 px-6 py-4 border-t border-gray-200">
            {{ $datPhongs->links() }}
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/dat_phong/room_detail.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Chi tiết Phòng ' . ($phong->so_phong ?? $phong->id))
@section('header', 'Thông tin phòng')

@section('content')
<div class="max-w-5xl mx-auto">
    
    <div class="flex items-center justify-between mb-8 bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
        <div class="flex items-center gap-6">
            <div class="w-16 h-16 rounded-xl bg-brand-900 flex items-center justify-center text-brand-gold shadow-lg">
                <span class="font-serif text-3xl font-bold">{{ $phong->so_phong ?? $phong->id }}</span>
            </div>
            <div>
                <h1 class="text-2xl font-bold text-gray-900">Lịch sử & Trạng thái phòng</h1>
                <p class="text-sm text-gray-500 mt-1">
                    Loại: <span class="font-medium text-brand-900">{{ $phong->loaiPhong->ten_loai ?? 'N/A' }}</span> • 
                    Giá: <span class="font-medium text-brand-gold">{{ number_format($phong->loaiPhong->gia ?? 0) }} đ/đêm</span>
                </p>
            </div>
        </div>
        <div class="flex gap-3">
            <a href="{{ route('admin.dat-phong') }}" class="px-5 py-2.5 bg-gray-100 text-gray-600 rounded-xl font-bold hover:bg-gray-200 transition-all">
                <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
            </a>
            <a href="{{ route('admin.dat-phong.them', ['room_id' => $phong->id]) }}" class="px-5 py-2.5 bg-brand-900 text-brand-gold rounded-xl font-bold hover:bg-gray-800 shadow-md transition-all">
                <i class="fa-solid fa-plus mr-2"></i> Tạo đơn mới
            </a>
        </div>
    </div>

    <div class="bg-white px-6 py-4 rounded-xl shadow-sm border border-gray-100 mb-6 flex flex-col md:flex-row gap-4 items-center">
        <span class="text-sm font-bold text-gray-500 uppercase tracking-wider whitespace-nowrap"><i class="fa-solid fa-filter mr-2"></i> Bộ lọc:</span>
        <form method="GET" class="flex-1 w-full flex gap-3">
            <input type="text" name="q" value="{{ request('q') }}" placeholder="Tìm theo tên khách, mã đơn..." class="flex-1 rounded-lg border-gray-300 focus:border-brand-gold focus:ring-brand-gold">
            <select name="status" class="rounded-lg border-gray-300 focus:border-brand-gold focus:ring-brand-gold">
                <option value="">-- Tất cả --</option>
                <option value="pending" {{ request('status')=='pending' ? 'selected' : '' }}>Chờ duyệt</option>
                <option value="confirmed" {{ request('status')=='confirmed' ? 'selected' : '' }}>Đang hoạt động</option>
                <option value="completed" {{ request('status')=='completed' ? 'selected' : '' }}>Hoàn thành</option>
                <option value="cancelled" {{ request('status')=='cancelled' ? 'selected' : '' }}>Đã hủy</option>
            </select>
            <button type="submit" class="px-6 py-2 bg-brand-900 text-white rounded-lg font-bold hover:bg-gray-800 transition-all">Lọc</button>
        </form>
    </div>

    <div class="space-y-6">
        @forelse($datPhongs as $bk)
            <div class="relative bg-white rounded-2xl shadow-md border border-gray-100 overflow-hidden group hover:shadow-lg transition-all duration-300 
                {{ $bk->trang_thai == 'pending' ? 'ring-2 ring-red-500 ring-offset-2' : '' }}">
                
                <div class="absolute top-0 right-0 px-4 py-1.5 rounded-bl-2xl text-xs font-bold uppercase tracking-wider text-white
                    {{ $bk->trang_thai == 'pending' ? 'bg-red-500' : 
                      ($bk->trang_thai == 'confirmed' ? 'bg-green-600' : 
                      ($bk->trang_thai == 'completed' ? 'bg-gray-500' : 'bg-gray-300 text-gray-500')) }}">
                    {{ $bk->trang_thai }}
                </div>

                <div class="p-6 md:p-8 flex flex-col md:flex-row gap-8">
                    
                    <div class="flex-1">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 font-serif font-bold text-lg">
                                {{ substr($bk->user->name ?? 'G', 0, 1) }}
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-gray-900">{{ $bk->user->name ?? 'Khách vãng lai' }}</h3>
                                <p class="text-sm text-gray-500">{{ $bk->user->phone ?? '---' }}</p>
                            </div>
                        </div>

                        <div class="space-y-2 text-sm text-gray-600 bg-gray-50 p-4 rounded-xl border border-gray-100">
                            <div class="flex justify-between">
                                <span>Mã đơn:</span> <span class="font-mono font-bold text-brand-900">#{{ $bk->id }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Thanh toán:</span> <span class="font-medium">{{ ucfirst($bk->phuong_thuc_thanh_toan) }}</span>
                            </div>
                            @if($bk->ghi_chu)
                            <div class="pt-2 border-t border-gray-200 mt-2 text-xs italic">
                                <i class="fa-solid fa-note-sticky mr-1 text-yellow-500"></i> "{{ $bk->ghi_chu }}"
                            </div>
                            @endif
                        </div>
                    </div>

                    <div class="flex-1 flex flex-col justify-center border-l border-gray-100 md:pl-8">
                        <div class="flex items-center justify-between mb-4">
                            <div class="text-center">
                                <span class="block text-xs text-gray-400 uppercase">Check-in</span>
                                <span class="block text-lg font-bold text-brand-900">{{ \Carbon\Carbon::parse($bk->ngay_den)->format('d/m/Y') }}</span>
                            </div>
                            <div class="text-gray-300"><i class="fa-solid fa-arrow-right-long text-xl"></i></div>
                            <div class="text-center">
                                <span class="block text-xs text-gray-400 uppercase">Check-out</span>
                                <span class="block text-lg font-bold text-brand-900">{{ \Carbon\Carbon::parse($bk->ngay_di)->format('d/m/Y') }}</span>
                            </div>
                        </div>
                        
                        <div class="text-center mt-2">
                            <span class="block text-xs text-gray-400 uppercase mb-1">Tổng thanh toán</span>
                            <span class="block text-3xl font-serif font-bold text-brand-gold">{{ number_format($bk->tong_tien) }} đ</span>
                        </div>
                    </div>

                    <div class="w-full md:w-48 flex flex-col gap-2 justify-center border-l border-gray-100 md:pl-8">
                        
                        @if($bk->trang_thai == 'pending')
                            <button data-id="{{ $bk->id }}" class="ajax-approve w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold shadow-md transition-all flex items-center justify-center gap-2">
                                <i class="fa-solid fa-check"></i> DUYỆT ĐƠN
                            </button>
                            <button data-id="{{ $bk->id }}" class="ajax-cancel w-full py-2 bg-white border-2 border-red-100 text-red-600 hover:bg-red-50 hover:border-red-200 rounded-lg font-bold transition-all flex items-center justify-center gap-2">
                                <i class="fa-solid fa-xmark"></i> Từ chối
                            </button>
                        
                        @elseif($bk->trang_thai != 'cancelled')
                            <a href="{{ route('admin.dat-phong.sua', $bk->id) }}" class="w-full py-2 bg-white border border-gray-300 text-gray-700 hover:border-brand-gold hover:text-brand-gold rounded-lg font-medium text-center transition-all">
                                <i class="fa-solid fa-pen-to-square mr-2"></i> Sửa
                            </a>
                            <button data-id="{{ $bk->id }}" class="ajax-cancel w-full py-2 bg-white border border-gray-200 text-red-500 hover:bg-red-50 hover:text-red-700 rounded-lg font-medium transition-all text-sm">
                                Hủy đơn
                            </button>
                            @if($bk->hoaDon)
                                <a href="{{ route('admin.dat-phong.hoa-don', $bk->id) }}" class="w-full py-2 text-brand-gold hover:underline text-center text-sm font-bold">
                                    Xem Hóa đơn
                                </a>
                            @endif
                        @endif

                    </div>
                </div>
            </div>
        @empty
            <div class="text-center py-16 bg-white rounded-2xl border border-dashed border-gray-300">
                <div class="inline-flex w-16 h-16 rounded-full bg-gray-100 items-center justify-center text-gray-400 mb-4">
                    <i class="fa-solid fa-clipboard-list text-2xl"></i>
                </div>
                <h3 class="text-lg font-medium text-gray-900">Chưa có lịch sử đặt phòng</h3>
                <p class="text-gray-500 mt-1">Phòng này chưa có đơn đặt nào theo bộ lọc hiện tại.</p>
            </div>
        @endforelse
    </div>

    <div class="mt-8">
        {{ $datPhongs->links() }}
    </div>
</div>
@endsection

@push('scripts')
<script>
    // Logic JS giữ nguyên để gọi AJAX
    function postAction(url) {
        return fetch(url, {
            method: 'POST',
            credentials: 'same-origin', // include session cookie for auth
            headers: {
                'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]').content,
                'Content-Type': 'application/json',
                'X-Requested-With': 'XMLHttpRequest'
            },
            body: JSON.stringify({})
        }).then(r => r.json());
    }

    document.querySelectorAll('.ajax-approve').forEach(btn => {
        btn.addEventListener('click', function() {
            if(!confirm('Xác nhận DUYỆT đơn đặt phòng này?')) return;
            
            // Hiệu ứng loading
            const originalText = this.innerHTML;
            this.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Đang xử lý...';
            this.disabled = true;

            postAction('{{ url('/admin/dat-phong') }}/duyet/' + this.dataset.id)
                .then(res => {
                    if(res.status === 'success' || res.success) {
                        window.location.reload();
                    } else {
                        alert('Có lỗi xảy ra: ' + (res.message || 'Lỗi không xác định'));
                        this.innerHTML = originalText;
                        this.disabled = false;
                    }
                })
                .catch(err => {
                    alert('Lỗi kết nối server!');
                    this.innerHTML = originalText;
                    this.disabled = false;
                });
        });
    });

    document.querySelectorAll('.ajax-cancel').forEach(btn => {
        btn.addEventListener('click', function() {
            if(!confirm('Xác nhận HỦY đơn đặt phòng này? Hành động không thể hoàn tác.')) return;

            const originalText = this.innerHTML;
            this.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i>';
            this.disabled = true;

            postAction('{{ url('/admin/dat-phong') }}/huy/' + this.dataset.id)
                .then(res => {
                    window.location.reload();
                });
        });
    });
</script>
@endpush
</file>

<file path="resources/views/admin/dat_phong/trash.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Thùng rác')
@section('header', 'Thùng rác đặt phòng')

@section('content')
<div class="max-w-7xl mx-auto">
    <div class="flex items-center justify-between mb-6">
        <div>
            <h1 class="text-2xl font-serif font-bold text-gray-900">Đơn đã hủy / Xóa</h1>
            <p class="text-sm text-gray-500 mt-1">Quản lý các đơn đặt phòng bị hủy hoặc xóa tạm thời</p>
        </div>
        <a href="{{ route('admin.dat-phong') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden">
        
        <div class="p-4 bg-gray-50 border-b border-gray-200 flex items-center justify-between">
            <form id="bulkDeleteForm" method="POST" action="{{ route('admin.dat-phong.bulk-delete') }}">
                @csrf
                <button type="submit" class="px-4 py-2 bg-red-600 text-white text-sm font-bold rounded-lg hover:bg-red-700 shadow-sm transition-all disabled:opacity-50" onclick="return confirm('Xóa vĩnh viễn các đơn đã chọn?')">
                    <i class="fa-solid fa-trash-can mr-2"></i> Xóa vĩnh viễn đã chọn
                </button>
            </form>
            <span class="text-xs text-gray-500 italic">* Hành động này không thể hoàn tác</span>
        </div>

        <div class="overflow-x-auto">
            <form id="trashTableForm" method="POST" action="{{ route('admin.dat-phong.bulk-delete') }}">
                @csrf
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="px-6 py-3 text-left w-10">
                                <input type="checkbox" id="selectAll" class="rounded border-gray-300 text-brand-gold focus:ring-brand-gold">
                            </th>
                            <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Mã Đơn</th>
                            <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Khách hàng</th>
                            <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Phòng</th>
                            <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Ngày xóa</th>
                            <th class="px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider">Hành động</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-100">
                        @foreach($datPhongs as $dp)
                        <tr class="hover:bg-red-50/30 transition-colors">
                            <td class="px-6 py-4"><input type="checkbox" name="ids[]" value="{{ $dp->id }}" class="trash-checkbox rounded border-gray-300 text-brand-gold focus:ring-brand-gold"></td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-500">#{{ $dp->id }}</td>
                            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900">{{ $dp->user->name ?? '—' }}</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                @if($dp->chiTietDatPhongs->first()) 
                                    <span class="font-serif font-bold text-gray-700">{{ $dp->chiTietDatPhongs->first()->phong->so_phong ?? '—' }}</span>
                                @endif
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ $dp->updated_at->format('d/m/Y H:i') }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <a href="{{ route('admin.dat-phong.xoa', $dp->id) }}" class="text-red-600 hover:text-red-900 font-bold" onclick="return confirm('Xóa vĩnh viễn đơn này?')">
                                    Xóa vĩnh viễn
                                </a>
                            </td>
                        </tr>
                        @endforeach
                    </tbody>
                </table>
            </form>
        </div>
        <div class="bg-gray-50 px-6 py-4 border-t border-gray-200">
            {{ $datPhongs->links() }}
        </div>
    </div>
</div>
@endsection

@push('scripts')
<script>
// Logic Select All giữ nguyên
document.getElementById('selectAll').addEventListener('change', function() {
    let checkboxes = document.querySelectorAll('.trash-checkbox');
    checkboxes.forEach(cb => cb.checked = this.checked);
});
</script>
@endpush
</file>

<file path="resources/views/admin/khuyen_mai/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Danh sách Khuyến mãi')
@section('header', 'Quản lý Khuyến mãi')

@section('content')
<div class="max-w-7xl mx-auto">
    
    <div class="flex flex-col xl:flex-row xl:items-center justify-between gap-6 mb-8">
        <div>
            <h1 class="text-2xl font-serif font-bold text-gray-900">Chương trình Khuyến mãi</h1>
            <p class="text-sm text-gray-500 mt-1">Quản lý mã giảm giá và các chiến dịch ưu đãi</p>
        </div>
        
        <div class="flex flex-col md:flex-row gap-3 w-full xl:w-auto">
            <form method="GET" action="{{ route('admin.khuyen-mai') }}" class="flex flex-col md:flex-row gap-3 flex-1">
                
                <div class="relative min-w-[200px] flex-1">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fa-solid fa-search text-gray-400"></i>
                    </div>
                    <input type="search" name="q" value="{{ request('q') }}" placeholder="Tìm tên hoặc mã..." 
                           class="w-full h-10 pl-10 rounded-lg border-gray-300 text-sm focus:border-brand-gold focus:ring-brand-gold shadow-sm">
                </div>

                <div class="flex gap-2">
                    <input type="date" name="from_date" value="{{ request('from_date') }}" class="h-10 rounded-lg border-gray-300 text-sm focus:border-brand-gold focus:ring-brand-gold shadow-sm" title="Từ ngày">
                    <span class="self-center text-gray-400">-</span>
                    <input type="date" name="to_date" value="{{ request('to_date') }}" class="h-10 rounded-lg border-gray-300 text-sm focus:border-brand-gold focus:ring-brand-gold shadow-sm" title="Đến ngày">
                </div>

                <button type="submit" class="h-10 px-4 bg-gray-100 text-gray-700 font-bold rounded-lg hover:bg-gray-200 transition-all shadow-sm">
                    <i class="fa-solid fa-filter mr-1"></i> Lọc
                </button>
                
                @if(request('q') || request('from_date') || request('to_date'))
                    <a href="{{ route('admin.khuyen-mai') }}" class="h-10 px-4 bg-white border border-gray-300 text-gray-500 font-bold rounded-lg hover:bg-gray-50 transition-all flex items-center justify-center">
                        <i class="fa-solid fa-xmark"></i>
                    </a>
                @endif
            </form>

            <div class="flex gap-2">
                <form id="bulkKmForm" method="POST" action="{{ route('admin.khuyen-mai.bulk-delete') }}">
                    @csrf
                    <button type="submit" class="h-10 px-4 bg-white border border-red-200 text-red-600 rounded-lg text-sm font-bold hover:bg-red-50 shadow-sm transition-all whitespace-nowrap" onclick="return confirm('Xóa các khuyến mãi được chọn?')">
                        <i class="fa-solid fa-trash-can mr-2"></i> Xóa chọn
                    </button>
                </form>

                <a href="{{ route('admin.khuyen-mai.them') }}" class="h-10 px-5 bg-brand-900 text-brand-gold rounded-lg text-sm font-bold hover:bg-gray-800 shadow-md transition-all flex items-center whitespace-nowrap">
                    <i class="fa-solid fa-plus mr-2"></i> Thêm mới
                </a>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden">
        <div class="overflow-x-auto">
            @if($khuyenMais->isEmpty())
                <div class="p-12 text-center text-gray-500">
                    <i class="fa-solid fa-tags text-4xl text-gray-300 mb-3"></i>
                    <p>Chưa có chương trình khuyến mãi nào.</p>
                </div>
            @else
            <form id="kmTableForm" method="POST" action="{{ route('admin.khuyen-mai.bulk-delete') }}">
            @csrf
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-brand-900">
                    <tr>
                        <th class="px-6 py-4 text-left w-10">
                            <input id="selectAllKm" type="checkbox" class="rounded border-gray-500 bg-gray-700 text-brand-gold focus:ring-brand-gold">
                        </th>
                        <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Tên chương trình</th>
                        <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Mã Code</th>
                        <th class="px-6 py-4 text-center text-xs font-bold text-brand-gold uppercase tracking-wider">Giảm giá</th>
                        <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Thời gian</th>
                        <th class="px-6 py-4 text-center text-xs font-bold text-brand-gold uppercase tracking-wider">Trạng thái</th>
                        <th class="px-6 py-4 text-right text-xs font-bold text-brand-gold uppercase tracking-wider">Hành động</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-50">
                    @foreach ($khuyenMais as $km)
                    <tr class="hover:bg-gray-50 transition-colors group">
                        <td class="px-6 py-4">
                            <input type="checkbox" name="ids[]" value="{{ $km->id }}" class="km-checkbox rounded border-gray-300 text-brand-gold focus:ring-brand-gold">
                        </td>
                        <td class="px-6 py-4">
                            <div class="text-sm font-bold text-gray-900">{{ $km->ten_khuyen_mai }}</div>
                        </td>
                        <td class="px-6 py-4">
                            <span class="inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded border border-gray-200 font-mono font-bold">
                                {{ $km->ma_khuyen_mai }}
                            </span>
                        </td>
                        <td class="px-6 py-4 text-center">
                            @if($km->chiet_khau_phan_tram > 0)
                                <span class="text-sm font-bold text-green-600">-{{ $km->chiet_khau_phan_tram }}%</span>
                            @elseif($km->so_tien_giam_gia > 0)
                                <span class="text-sm font-bold text-blue-600">-{{ number_format($km->so_tien_giam_gia) }} đ</span>
                            @else
                                <span class="text-xs text-gray-400">Không rõ</span>
                            @endif
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600">
                            <div class="flex flex-col text-xs">
                                <span><span class="font-bold w-8 inline-block">Từ:</span> {{ \Carbon\Carbon::parse($km->ngay_bat_dau)->format('d/m/Y') }}</span>
                                <span><span class="font-bold w-8 inline-block">Đến:</span> {{ \Carbon\Carbon::parse($km->ngay_ket_thuc)->format('d/m/Y') }}</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-center">
                            @php
                                $now = \Carbon\Carbon::now();
                                $start = \Carbon\Carbon::parse($km->ngay_bat_dau);
                                $end = \Carbon\Carbon::parse($km->ngay_ket_thuc);
                            @endphp
                            @if($now->between($start, $end))
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700">
                                    Đang chạy
                                </span>
                            @elseif($now->lt($start))
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-bold bg-yellow-100 text-yellow-700">
                                    Sắp diễn ra
                                </span>
                            @else
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-bold bg-gray-100 text-gray-500">
                                    Hết hạn
                                </span>
                            @endif
                        </td>
                        <td class="px-6 py-4 text-right text-sm">
                            <div class="flex items-center justify-end gap-3">
                                <a href="{{ route('admin.khuyen-mai.sua', ['id' => $km->id]) }}" class="text-gray-400 hover:text-brand-gold transition-colors" title="Sửa">
                                    <i class="fa-solid fa-pen-to-square text-lg"></i>
                                </a>
                                <a href="{{ route('admin.khuyen-mai.xoa', ['id' => $km->id]) }}" onclick="return confirm('Bạn có muốn xóa {{ $km->ten_khuyen_mai }} không?')" class="text-gray-400 hover:text-red-600 transition-colors" title="Xóa">
                                    <i class="fa-solid fa-trash-can text-lg"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
            </form>
            @endif
        </div>
        @if(method_exists($khuyenMais, 'links'))
        <div class="bg-gray-50 px-6 py-4 border-t border-gray-200">
            {{ $khuyenMais->withQueryString()->links() }}
        </div>
        @endif
    </div>
</div>

@push('scripts')
<script>
document.getElementById('selectAllKm')?.addEventListener('change', function(e){
    document.querySelectorAll('.km-checkbox').forEach(cb => cb.checked = e.target.checked);
});
</script>
@endpush
@endsection
</file>

<file path="resources/views/admin/khuyen_mai/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Sửa Khuyến mãi')
@section('header', 'Cập nhật khuyến mãi')

@section('content')
<div class="max-w-4xl mx-auto">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-serif font-bold text-gray-900">Sửa: {{ $khuyenMai->ten_khuyen_mai }}</h1>
        <a href="{{ route('admin.khuyen-mai') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="p-8">
            <form action="{{ route('admin.khuyen-mai.sua', ['id' => $khuyenMai->id]) }}" method="POST">
                @csrf
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    
                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-gray-700 mb-2">Tên chương trình</label>
                        <input type="text" name="ten_khuyen_mai" value="{{ old('ten_khuyen_mai', $khuyenMai->ten_khuyen_mai) }}" required
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11">
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Mã khuyến mãi</label>
                        <div class="relative">
                            <input type="text" name="ma_khuyen_mai" value="{{ old('ma_khuyen_mai', $khuyenMai->ma_khuyen_mai) }}" required style="text-transform: uppercase;"
                                   class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 pl-10 font-mono font-bold text-brand-900">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fa-solid fa-ticket text-gray-400"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 md:col-span-2">
                        <h3 class="text-sm font-bold text-gray-700 mb-3 flex items-center"><i class="fa-solid fa-coins mr-2 text-brand-gold"></i> Mức giảm giá</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Theo phần trăm (%)</label>
                                <div class="relative">
                                    <input type="number" step="0.01" name="chiet_khau_phan_tram" value="{{ old('chiet_khau_phan_tram', $khuyenMai->chiet_khau_phan_tram) }}" placeholder="0"
                                           class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-10 pr-8">
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"><span class="text-gray-500 font-bold">%</span></div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Hoặc số tiền (VNĐ)</label>
                                <div class="relative">
                                    <input type="number" step="1000" name="so_tien_giam_gia" value="{{ old('so_tien_giam_gia', $khuyenMai->so_tien_giam_gia) }}" placeholder="0"
                                           class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-10 pr-10">
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"><span class="text-gray-500 text-xs">VND</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Ngày bắt đầu</label>
                           <input type="date" name="ngay_bat_dau" value="{{ old('ngay_bat_dau', isset($khuyenMai->ngay_bat_dau) ? \Carbon\Carbon::parse($khuyenMai->ngay_bat_dau)->format('Y-m-d') : '') }}" required
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11">
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Ngày kết thúc</label>
                           <input type="date" name="ngay_ket_thuc" value="{{ old('ngay_ket_thuc', isset($khuyenMai->ngay_ket_thuc) ? \Carbon\Carbon::parse($khuyenMai->ngay_ket_thuc)->format('Y-m-d') : '') }}" required
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11">
                    </div>

                </div>

                <div class="mt-8 pt-6 border-t border-gray-100 flex items-center justify-end gap-3">
                    <a href="{{ route('admin.khuyen-mai') }}" class="px-5 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition-all">
                        Hủy bỏ
                    </a>
                    <button type="submit" class="px-6 py-2.5 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all flex items-center">
                        <i class="fa-solid fa-save mr-2"></i> Lưu Thay Đổi
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/khuyen_mai/them.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Thêm Khuyến mãi')
@section('header', 'Tạo khuyến mãi mới')

@section('content')
<div class="max-w-4xl mx-auto">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-serif font-bold text-gray-900">Thông tin khuyến mãi</h1>
        <a href="{{ route('admin.khuyen-mai') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="p-8">
            <form action="{{ route('admin.khuyen-mai.store') }}" method="POST">
                @csrf
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    
                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-gray-700 mb-2">Tên chương trình <span class="text-red-500">*</span></label>
                        <input type="text" name="ten_khuyen_mai" value="{{ old('ten_khuyen_mai') }}" required placeholder="Ví dụ: Giảm giá mùa hè..."
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11">
                        @error('ten_khuyen_mai') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Mã khuyến mãi (Code) <span class="text-red-500">*</span></label>
                        <div class="relative">
                            <input type="text" name="ma_khuyen_mai" value="{{ old('ma_khuyen_mai') }}" required placeholder="SUMMER2025" style="text-transform: uppercase;"
                                   class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 pl-10 font-mono font-bold text-brand-900">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fa-solid fa-ticket text-gray-400"></i>
                            </div>
                        </div>
                        @error('ma_khuyen_mai') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 md:col-span-2">
                        <h3 class="text-sm font-bold text-gray-700 mb-3 flex items-center"><i class="fa-solid fa-coins mr-2 text-brand-gold"></i> Mức giảm giá</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Theo phần trăm (%)</label>
                                <div class="relative">
                                    <input type="number" step="0.01" name="chiet_khau_phan_tram" value="{{ old('chiet_khau_phan_tram') }}" placeholder="0"
                                           class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-10 pr-8">
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"><span class="text-gray-500 font-bold">%</span></div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Hoặc số tiền (VNĐ)</label>
                                <div class="relative">
                                    <input type="number" step="1000" name="so_tien_giam_gia" value="{{ old('so_tien_giam_gia') }}" placeholder="0"
                                           class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-10 pr-10">
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"><span class="text-gray-500 text-xs">VND</span></div>
                                </div>
                            </div>
                        </div>
                        <p class="text-xs text-blue-600 mt-2 italic">* Chỉ nhập 1 trong 2 ô. Nếu nhập cả 2, hệ thống sẽ ưu tiên %.</p>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Ngày bắt đầu <span class="text-red-500">*</span></label>
                        <input type="date" name="ngay_bat_dau" value="{{ old('ngay_bat_dau') }}" required
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11">
                        @error('ngay_bat_dau') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Ngày kết thúc <span class="text-red-500">*</span></label>
                        <input type="date" name="ngay_ket_thuc" value="{{ old('ngay_ket_thuc') }}" required
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11">
                        @error('ngay_ket_thuc') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                </div>

                <div class="mt-8 pt-6 border-t border-gray-100 flex items-center justify-end gap-3">
                    <a href="{{ route('admin.khuyen-mai') }}" class="px-5 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition-all">
                        Hủy bỏ
                    </a>
                    <button type="submit" class="px-6 py-2.5 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all flex items-center">
                        <i class="fa-solid fa-plus mr-2"></i> Tạo Khuyến Mãi
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/phong/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Danh sách Phòng')
@section('header', 'Quản lý Phòng')

@section('content')
<div class="max-w-7xl mx-auto">
    
    <div class="flex flex-col xl:flex-row xl:items-center justify-between gap-6 mb-8">
        <div>
            <h1 class="text-2xl font-serif font-bold text-gray-900">Danh sách Phòng</h1>
            <p class="text-sm text-gray-500 mt-1">Quản lý số phòng và trạng thái vật lý</p>
        </div>
        
        <div class="flex flex-col md:flex-row gap-3 w-full xl:w-auto">
            <form method="GET" action="{{ route('admin.phong') }}" class="flex flex-col md:flex-row gap-3 flex-1">
                
                <div class="relative min-w-[200px]">
                    <select name="loai_phong_id" class="w-full h-10 pl-3 pr-8 rounded-lg border-gray-300 text-sm focus:border-brand-gold focus:ring-brand-gold cursor-pointer">
                        <option value="">-- Tất cả hạng phòng --</option>
                        @foreach($loaiPhongs as $lp)
                            <option value="{{ $lp->id }}" {{ request('loai_phong_id') == $lp->id ? 'selected' : '' }}>
                                {{ $lp->ten_loai_phong }}
                            </option>
                        @endforeach
                    </select>
                </div>

                <div class="relative min-w-[160px]">
                    <select name="tinh_trang" class="w-full h-10 pl-3 pr-8 rounded-lg border-gray-300 text-sm focus:border-brand-gold focus:ring-brand-gold cursor-pointer">
                        <option value="">-- Trạng thái --</option>
                        <option value="available" {{ request('tinh_trang') == 'available' ? 'selected' : '' }}>Trống (Available)</option>
                        <option value="occupied" {{ request('tinh_trang') == 'occupied' ? 'selected' : '' }}>Đang ở (Occupied)</option>
                        <option value="maintenance" {{ request('tinh_trang') == 'maintenance' ? 'selected' : '' }}>Bảo trì (Maintenance)</option>
                        <option value="cleaning" {{ request('tinh_trang') == 'cleaning' ? 'selected' : '' }}>Dọn dẹp (Cleaning)</option>
                    </select>
                </div>

                <div class="relative flex-1 min-w-[200px]">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fa-solid fa-search text-gray-400"></i>
                    </div>
                    <input type="search" name="q" value="{{ request('q') }}" placeholder="Tìm số phòng..." 
                           class="w-full h-10 pl-10 rounded-lg border-gray-300 text-sm focus:border-brand-gold focus:ring-brand-gold">
                </div>

                <button type="submit" class="h-10 px-4 bg-gray-100 text-gray-700 font-bold rounded-lg hover:bg-gray-200 transition-all flex items-center justify-center">
                    Lọc
                </button>

                <a href="{{ route('admin.phong') }}" class="h-10 px-4 bg-white border border-gray-300 text-gray-700 font-bold rounded-lg hover:bg-gray-50 hover:border-gray-300 transition-all flex items-center justify-center" title="Đặt lại bộ lọc">
                    <i class="fa-solid fa-rotate-left mr-2"></i> Đặt lại
                </a>
            </form>

            <a href="{{ route('admin.phong.them') }}" class="h-10 px-5 bg-brand-900 text-brand-gold rounded-lg text-sm font-bold hover:bg-gray-800 shadow-md transition-all flex items-center justify-center whitespace-nowrap">
                <i class="fa-solid fa-plus mr-2"></i> Thêm phòng
            </a>
        </div>
    </div>

    <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden mt-6">
        <div class="overflow-x-auto">
            @if($phongs->isEmpty())
                {{-- existing empty state handled above --}}
            @else
                {{-- table already rendered above; keep pagination here --}}
            @endif
        </div>
        <div class="bg-gray-50 px-6 py-4 border-t border-gray-200">{{ $phongs->withQueryString()->links() }}</div>
    </div>

    @if(session('success'))
        <div class="mb-6 p-4 rounded-lg bg-green-50 border border-green-200 text-green-800 flex items-center shadow-sm">
            <i class="fa-solid fa-check-circle mr-3 text-xl"></i>
            <span class="font-medium">{{ session('success') }}</span>
        </div>
    @endif

    <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden">
        <div class="overflow-x-auto">
            @if($phongs->isEmpty())
                <div class="p-12 text-center flex flex-col items-center justify-center text-gray-500">
                    <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4">
                        <i class="fa-solid fa-door-open text-3xl text-gray-400"></i>
                    </div>
                    <h3 class="text-lg font-medium text-gray-900">Không tìm thấy phòng nào</h3>
                    <p class="text-sm mt-1">Thử thay đổi bộ lọc hoặc thêm phòng mới.</p>
                </div>
            @else
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-brand-900">
                        <tr>
                            <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Số phòng</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Hạng phòng</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Giá niêm yết</th>
                            <th class="px-6 py-4 text-center text-xs font-bold text-brand-gold uppercase tracking-wider">Tình trạng</th>
                            <th class="px-6 py-4 text-right text-xs font-bold text-brand-gold uppercase tracking-wider">Hành động</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-50">
                        @foreach($phongs as $phong)
                        <tr class="hover:bg-gray-50 transition-colors group">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center text-gray-500 font-serif font-bold group-hover:bg-brand-gold group-hover:text-white transition-colors">
                                        {{ $phong->so_phong }}
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">{{ $phong->loaiPhong->ten_loai_phong ?? 'N/A' }}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="text-sm text-gray-600">{{ number_format($phong->loaiPhong->gia ?? 0, 0, ',', '.') }} đ</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                @php
                                    $statusClass = 'bg-gray-100 text-gray-600 border-gray-200';
                                    $statusLabel = 'Không xác định';
                                    
                                    switch($phong->tinh_trang) {
                                        case 'available':
                                            $statusClass = 'bg-green-100 text-green-700 border-green-200';
                                            $statusLabel = 'Trống';
                                            break;
                                        case 'occupied':
                                            $statusClass = 'bg-red-100 text-red-700 border-red-200';
                                            $statusLabel = 'Đang ở';
                                            break;
                                        case 'maintenance':
                                            $statusClass = 'bg-yellow-100 text-yellow-700 border-yellow-200';
                                            $statusLabel = 'Bảo trì';
                                            break;
                                        case 'cleaning':
                                            $statusClass = 'bg-blue-100 text-blue-700 border-blue-200';
                                            $statusLabel = 'Dọn dẹp';
                                            break;
                                    }
                                @endphp
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold border {{ $statusClass }}">
                                    {{ $statusLabel }}
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <div class="flex items-center justify-end gap-3">
                                    <a href="{{ route('admin.phong.sua', ['id' => $phong->id]) }}" class="text-gray-400 hover:text-brand-gold transition-colors p-2 rounded-full hover:bg-yellow-50" title="Sửa">
                                        <i class="fa-solid fa-pen-to-square text-lg"></i>
                                    </a>
                                    <a href="{{ route('admin.phong.xoa', ['id' => $phong->id]) }}" 
                                       onclick="return confirm('Bạn có chắc muốn xóa phòng này?')" 
                                       class="text-gray-400 hover:text-red-600 transition-colors p-2 rounded-full hover:bg-red-50" title="Xóa">
                                        <i class="fa-solid fa-trash-can text-lg"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        @endforeach
                    </tbody>
                </table>
            @endif
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/phong/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Sửa Phòng')
@section('header', 'Cập nhật phòng')

@section('content')
<div class="max-w-3xl mx-auto">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-serif font-bold text-gray-900">Cập nhật phòng: {{ $phong->so_phong }}</h1>
        <a href="{{ route('admin.phong') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="p-8">
            <form action="{{ route('admin.phong.update', ['id' => $phong->id]) }}" method="POST">
                @csrf
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Số phòng <span class="text-red-500">*</span></label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fa-solid fa-door-closed text-gray-400"></i>
                            </div>
                            <input type="text" name="so_phong" required value="{{ old('so_phong', $phong->so_phong) }}"
                                   class="w-full pl-10 rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11 font-medium text-brand-900">
                        </div>
                        @error('so_phong') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Thuộc Hạng phòng <span class="text-red-500">*</span></label>
                        <select name="loai_phong_id" required class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11">
                            <option value="">-- Chọn hạng phòng --</option>
                            @foreach($loaiPhongs as $lp)
                                <option value="{{ $lp->id }}" {{ $phong->loai_phong_id == $lp->id ? 'selected' : '' }}>
                                    {{ $lp->ten_loai_phong }} - {{ number_format($lp->gia ?? 0, 0, ',', '.') }} đ
                                </option>
                            @endforeach
                        </select>
                        @error('loai_phong_id') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Tình trạng hiện tại</label>
                        <select name="tinh_trang" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11">
                            <option value="available" {{ $phong->tinh_trang == 'available' ? 'selected' : '' }}>Sẵn sàng đón khách (Available)</option>
                            <option value="occupied" {{ $phong->tinh_trang == 'occupied' ? 'selected' : '' }}>Đang có khách (Occupied)</option>
                            <option value="maintenance" {{ $phong->tinh_trang == 'maintenance' ? 'selected' : '' }}>Đang bảo trì (Maintenance)</option>
                            <option value="cleaning" {{ $phong->tinh_trang == 'cleaning' ? 'selected' : '' }}>Đang dọn dẹp (Cleaning)</option>
                        </select>
                    </div>
                </div>

                <div class="mt-8 pt-6 border-t border-gray-100 flex items-center justify-end gap-3">
                    <a href="{{ route('admin.phong') }}" class="px-5 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition-all">
                        Hủy bỏ
                    </a>
                    <button type="submit" class="px-6 py-2.5 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all flex items-center">
                        <i class="fa-solid fa-check mr-2"></i> Cập nhật
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/phong/them.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Thêm Phòng')
@section('header', 'Thêm phòng mới')

@section('content')
<div class="max-w-3xl mx-auto">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-serif font-bold text-gray-900">Thông tin phòng</h1>
        <a href="{{ route('admin.phong') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="p-8">
            <form action="{{ route('admin.phong.store') }}" method="POST">
                @csrf
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Số phòng <span class="text-red-500">*</span></label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fa-solid fa-door-closed text-gray-400"></i>
                            </div>
                            <input type="text" name="so_phong" required placeholder="Ví dụ: 101, 205, VIP-01"
                                   class="w-full pl-10 rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11 font-medium text-brand-900">
                        </div>
                        @error('so_phong') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Thuộc Hạng phòng <span class="text-red-500">*</span></label>
                        <select name="loai_phong_id" required class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11">
                            <option value="">-- Chọn hạng phòng --</option>
                            @foreach($loaiPhongs as $lp)
                                <option value="{{ $lp->id }}">
                                    {{ $lp->ten_loai_phong }} - {{ number_format($lp->gia ?? 0, 0, ',', '.') }} đ
                                </option>
                            @endforeach
                        </select>
                        @error('loai_phong_id') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Tình trạng ban đầu</label>
                        <select name="tinh_trang" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11">
                            <option value="available">Sẵn sàng đón khách (Available)</option>
                            <option value="maintenance">Đang bảo trì (Maintenance)</option>
                            <option value="cleaning">Đang dọn dẹp (Cleaning)</option>
                        </select>
                    </div>
                </div>

                <div class="mt-8 pt-6 border-t border-gray-100 flex items-center justify-end gap-3">
                    <a href="{{ route('admin.phong') }}" class="px-5 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition-all">
                        Hủy bỏ
                    </a>
                    <button type="submit" class="px-6 py-2.5 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all flex items-center">
                        <i class="fa-solid fa-save mr-2"></i> Lưu Phòng
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/about/index.blade.php">
@extends('layouts.app')
    @section('title', 'Về chúng tôi - Luxury Stay')

    @section('content')

    <!-- 1. HERO SECTION -->
    <div class="about-hero">
        <img src="{{ asset('uploads/home/home.png') }}" alt="About Luxury Stay" class="about-hero-bg">
        <div class="banner-overlay"></div> <!-- Dùng lại overlay của home.css -->
        
        <div class="about-hero-content fade-up">
            <span class="about-subtitle">Câu chuyện của chúng tôi</span>
            <h1 class="about-title">Hành trình kiến tạo <br> Đẳng cấp nghỉ dưỡng</h1>
        </div>
    </div>

    <!-- 2. OUR STORY -->
    <section class="section-story">
        <div class="container">
            <div class="story-grid">
                <!-- Cột trái: Hình ảnh -->
                <div class="story-images fade-up">
                    <div class="img-frame-1">
                        <img src="https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Luxury Interior">
                    </div>
                    <div class="img-frame-2">
                        <img src="https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Resort Pool">
                    </div>
                </div>

                <!-- Cột phải: Nội dung -->
                <div class="story-content fade-up">
                    <span class="sub-title">Về Luxury Stay</span>
                    <h2>Nơi cảm xúc thăng hoa</h2>
                    <p class="lead">"Chúng tôi không chỉ kinh doanh phòng nghỉ, chúng tôi kiến tạo những kỷ niệm khó quên."</p>
                    <p>
                        Được thành lập vào năm 2015, Luxury Stay bắt đầu với một ước mơ đơn giản: mang đến trải nghiệm nghỉ dưỡng 5 sao đích thực ngay tại trung tâm thành phố. Từ một khách sạn boutique nhỏ, chúng tôi đã vươn mình trở thành biểu tượng của sự sang trọng và lòng hiếu khách.
                    </p>
                    <p>
                        Mỗi góc nhỏ tại Luxury Stay đều được chăm chút tỉ mỉ, từ kiến trúc Art Deco cổ điển đến những tiện nghi công nghệ hiện đại nhất. Chúng tôi tin rằng, sự sang trọng không chỉ nằm ở vẻ bề ngoài lộng lẫy, mà còn ở sự tận tâm phục vụ từ trái tim.
                    </p>
                    <div class="mt-8">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/e/e4/Signature_sample.svg" alt="Signature" style="height: 50px; filter: invert(1);">
                        <p class="text-sm text-gray-400 mt-2 font-bold">Trương Phước Giàu - Sinh viên, Đại học An Giang (Khóa 23DH)</p>
                        <p class="text-xs text-gray-400">Ngành: Công nghệ thông tin</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats removed as requested -->

    <!-- 4. CORE VALUES -->
    <section class="section-values">
        <div class="container">
            <div class="section-header fade-up">
                <span class="sub-title">Triết lý kinh doanh</span>
                <h2 class="main-title light">Giá trị cốt lõi</h2>
            </div>

            <div class="values-grid">
                <div class="value-card fade-up">
                    <div class="value-icon"><i class="fa-solid fa-heart"></i></div>
                    <h3>Tận tâm</h3>
                    <p>Phục vụ khách hàng bằng cả trái tim, coi khách hàng như người thân trong gia đình.</p>
                </div>
                <div class="value-card fade-up">
                    <div class="value-icon"><i class="fa-solid fa-gem"></i></div>
                    <h3>Đẳng cấp</h3>
                    <p>Không ngừng nâng cao chất lượng dịch vụ để đạt chuẩn mực quốc tế cao nhất.</p>
                </div>
                <div class="value-card fade-up">
                    <div class="value-icon"><i class="fa-solid fa-leaf"></i></div>
                    <h3>Bền vững</h3>
                    <p>Cam kết phát triển du lịch xanh, bảo vệ môi trường và tôn trọng văn hóa địa phương.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Removed team section per request -->

    <!-- 6. CTA (Tái sử dụng từ home.css) -->
    <section class="section-cta">
        <div class="cta-content fade-up">
            <h2 class="cta-title">Trải nghiệm sự khác biệt</h2>
            <p class="cta-text">Hãy để chúng tôi phục vụ kỳ nghỉ trong mơ của bạn.</p>
            <a href="{{ route('phong.danh-sach') }}" class="btn btn-primary" style="background-color: var(--primary-gold); color: #000;">
                ĐẶT PHÒNG NGAY
            </a>
        </div>
    </section>

    @endsection
</file>

<file path="resources/views/client/profile/edit.blade.php">
@extends('layouts.app')
@section('title', 'Hồ sơ cá nhân')

<!-- Thêm dòng này để gọi đúng file CSS cho trang Profile -->


@section('content')
<div class="profile-page-wrapper">
    <div class="container">
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb">
            <a href="{{ route('trang_chu') }}">Trang chủ</a>
            <span class="separator">/</span>
            <span class="active">Hồ sơ cá nhân</span>
        </nav>

        <!-- Thông báo đặc biệt (nếu có lỗi từ session) -->
        @if(session('error'))
            <div class="alert-box alert-error">
                <div class="alert-icon">
                    <i class="fa-solid fa-circle-exclamation"></i>
                </div>
                <div class="alert-content">
                    <span class="alert-title">{{ session('error') }}</span>
                    <p>Vui lòng hoàn thiện thông tin dưới đây để tiếp tục.</p>
                </div>
            </div>
        @endif

        <div class="profile-layout">
            
            <!-- CỘT TRÁI: Sidebar Cá nhân -->
            <aside class="profile-sidebar">
                <div class="sidebar-header">
                    <div class="user-avatar-circle">
                        {{ substr($user->name, 0, 1) }}
                    </div>
                    <h2 class="sidebar-user-name">{{ $user->name }}</h2>
                    <span class="sidebar-user-role">Thành viên thân thiết</span>
                </div>
                
                <div class="sidebar-menu">
                    <a href="{{ route('profile.edit') }}" class="sidebar-link active">
                        <i class="fa-solid fa-user-pen"></i>
                        Thông tin cá nhân
                    </a>
                    <a href="{{ route('bookings.history') }}" class="sidebar-link">
                        <i class="fa-solid fa-clock-rotate-left"></i>
                        Lịch sử đặt phòng
                    </a>
                    
                    <form method="POST" action="{{ route('logout') }}" style="margin-top: 0.5rem; border-top: 1px solid var(--border-light); padding-top: 0.5rem;">
                        @csrf
                        <button type="submit" class="sidebar-link btn-logout">
                            <i class="fa-solid fa-right-from-bracket"></i>
                            Đăng xuất
                        </button>
                    </form>
                </div>
            </aside>

            <!-- CỘT PHẢI: Form Cập nhật -->
            <main class="profile-content">
                <div class="profile-card">
                    <div class="profile-card-header">
                        <div>
                            <h1 class="profile-title">Cập nhật thông tin</h1>
                            <p class="profile-desc">Quản lý thông tin hồ sơ của bạn để bảo mật và đặt phòng nhanh hơn.</p>
                        </div>
                        <div class="header-icon">
                            <i class="fa-solid fa-address-card"></i>
                        </div>
                    </div>

                    <form method="POST" action="{{ route('profile.update') }}">
                        @csrf
                        @method('PATCH')

                        <div class="profile-form-grid">
                            
                            <!-- 1. Họ và tên -->
                            <div class="col-span-2">
                                <div class="form-group">
                                    <label for="name" class="form-label">Họ và tên <span class="required">*</span></label>
                                    <div class="input-wrapper">
                                        <i class="fa-regular fa-user input-icon"></i>
                                        <input type="text" name="name" id="name" value="{{ old('name', $user->name) }}" class="form-input" required>
                                    </div>
                                    @error('name') <p class="error-msg">{{ $message }}</p> @enderror
                                </div>
                            </div>

                            <!-- 2. Email -->
                            <div class="col-span-2">
                                <div class="form-group">
                                    <label for="email" class="form-label">Địa chỉ Email <span class="required">*</span></label>
                                    <div class="input-wrapper">
                                        <i class="fa-regular fa-envelope input-icon"></i>
                                        <input type="email" name="email" id="email" value="{{ old('email', $user->email) }}" class="form-input" required>
                                    </div>
                                    @error('email') <p class="error-msg">{{ $message }}</p> @enderror
                                </div>
                            </div>

                            <!-- 3. Số điện thoại -->
                            <div>
                                <div class="form-group">
                                    <label for="phone" class="form-label">Số điện thoại <span class="required">*</span></label>
                                    <div class="input-wrapper">
                                        <i class="fa-solid fa-phone input-icon"></i>
                                        <input type="text" name="phone" id="phone" value="{{ old('phone', $user->phone) }}" class="form-input" placeholder="0901234567" required>
                                    </div>
                                    <p class="form-text">Dùng để liên hệ xác nhận đặt phòng.</p>
                                    @error('phone') <p class="error-msg">{{ $message }}</p> @enderror
                                </div>
                            </div>

                            <!-- 4. CCCD -->
                            <div>
                                <div class="form-group">
                                    <label for="cccd" class="form-label">CCCD / CMND <span class="required">*</span></label>
                                    <div class="input-wrapper">
                                        <i class="fa-solid fa-id-card input-icon"></i>
                                        <input type="text" name="cccd" id="cccd" value="{{ old('cccd', $user->cccd) }}" class="form-input" placeholder="12 số căn cước" required>
                                    </div>
                                    <p class="form-text">Bắt buộc để làm thủ tục lưu trú.</p>
                                    @error('cccd') <p class="error-msg">{{ $message }}</p> @enderror
                                </div>
                            </div>

                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn-save">
                                <i class="fa-solid fa-save"></i>
                                <span>Lưu thay đổi</span>
                            </button>
                        </div>
                    </form>
                </div>
            </main>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/promotions/index.blade.php">
@extends('layouts.app')
@section('title', 'Ưu đãi & Khuyến mãi - Luxury Stay')


@section('content')

<!-- 1. HERO BANNER -->
<div class="promo-hero">
    <!-- Ảnh nền promo (Bạn nên thay bằng ảnh thật) -->
    <img src="{{ asset('uploads/home/home.png') }}" alt="Luxury Promo" class="promo-hero-bg">
    <div class="banner-overlay"></div> <!-- Dùng chung từ home.css -->
    
    <div class="promo-hero-content">
        <span class="promo-subtitle">Ưu đãi độc quyền</span>
        <h1 class="promo-title">Tận hưởng kỳ nghỉ <br> Với giá tốt nhất</h1>
    </div>
</div>

<!-- 2. PROMO LIST -->
<section class="section-promo-list">
    <div class="container">
        
        @if(isset($khuyenMais) && $khuyenMais->count() > 0)
            <div class="promo-grid">
                @foreach($khuyenMais as $km)
                    <!-- Kiểm tra hạn sử dụng -->
                    @php
                        $isExpired = \Carbon\Carbon::now()->gt($km->ngay_ket_thuc);
                    @endphp

                    <div class="voucher-card {{ $isExpired ? 'expired' : '' }}">
                        <div class="voucher-img-wrapper">
                            <!-- Ảnh giả lập hoặc thật -->
                            <img src="https://images.unsplash.com/photo-1618773928121-c32242e63f39?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" 
                                 alt="Voucher" class="voucher-img">
                            
                            <div class="discount-tag">
                                @if($km->chiet_khau_phan_tram > 0)
                                    -{{ $km->chiet_khau_phan_tram }}%
                                @else
                                    -{{ number_format($km->so_tien_giam_gia/1000) }}K
                                @endif
                            </div>
                        </div>

                        <div class="voucher-body">
                            <h3 class="voucher-title">{{ $km->ten_khuyen_mai }}</h3>
                            <p class="voucher-desc">{{ $km->mo_ta }}</p>
                            
                            <div class="text-sm text-gray-500 mb-4">
                                <i class="fa-regular fa-clock mr-1"></i> Hạn dùng: {{ \Carbon\Carbon::parse($km->ngay_ket_thuc)->format('d/m/Y') }}
                            </div>

                            <div class="voucher-footer">
                                <span class="code-display">{{ $km->ma_khuyen_mai }}</span>
                                
                                @if(!$isExpired)
                                    <button class="btn-copy" data-code="{{ $km->ma_khuyen_mai }}">
                                        <i class="fa-regular fa-copy"></i> Sao chép
                                    </button>
                                @else
                                    <span class="text-red-500 font-bold text-sm">Hết hạn</span>
                                @endif
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>

            <!-- Phân trang nếu có -->
            @if(method_exists($khuyenMais, 'links'))
                <div class="mt-12 flex justify-center">
                    {{ $khuyenMais->links() }}
                </div>
            @endif

        @else
            <!-- Empty State -->
            <div class="text-center py-12">
                <div class="inline-block p-6 rounded-full bg-gray-800 mb-4">
                    <i class="fa-solid fa-ticket text-4xl text-gray-600"></i>
                </div>
                <h3 class="text-xl text-white font-bold mb-2">Chưa có khuyến mãi nào</h3>
                <p class="text-gray-400">Hiện tại chúng tôi chưa có chương trình ưu đãi mới. Vui lòng quay lại sau.</p>
                <a href="{{ route('trang_chu') }}" class="btn btn-outline mt-6">Về trang chủ</a>
            </div>
        @endif

    </div>
</section>

<!-- 3. CTA (Tái sử dụng từ home) -->
<section class="section-cta" style="margin-top: 0;">
    <div class="cta-content">
        <h2 class="cta-title">Đừng bỏ lỡ cơ hội</h2>
        <p class="cta-text">Đăng ký nhận bản tin để không bỏ lỡ các ưu đãi hấp dẫn nhất.</p>
        
        <!-- Form đăng ký nhận tin (Giả lập) -->
        <form class="max-w-md mx-auto flex gap-2 mt-6">
            <input type="email" placeholder="Email của bạn..." class="form-control" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
            <button type="button" class="btn btn-primary" onclick="alert('Cảm ơn bạn đã đăng ký!')">Đăng ký</button>
        </form>
    </div>
</section>

@endsection
</file>

<file path="resources/views/layouts/footer.blade.php">
<footer class="footer-wrapper">
    <div class="footer-container">
        <div class="footer-grid">
            
            <!-- 1. Brand Info -->
            <div class="space-y-4">
                <div class="footer-brand">
                     <span class="footer-logo-icon">
                        <i class="fa-solid fa-crown text-sm"></i>
                    </span>
                    <span class="footer-logo-text">Luxury<span class="text-brand-gold">Stay</span></span>
                </div>
                <p class="footer-desc">
                    Nơi giao thoa giữa vẻ đẹp kiến trúc cổ điển và tiện nghi hiện đại. Trải nghiệm kỳ nghỉ khó quên với dịch vụ 5 sao chuẩn quốc tế.
                </p>
                <div class="flex space-x-4 pt-2">
                    <a href="#" class="footer-social-link"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="footer-social-link"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#" class="footer-social-link"><i class="fa-brands fa-tiktok"></i></a>
                </div>
            </div>

            <!-- 2. Links (Khám phá) -->
            <div>
                <h3 class="footer-heading">Khám phá</h3>
                <ul class="footer-list">
                    <li><a href="{{ route('ve-chung-toi') }}" class="footer-link"><i class="fa-solid fa-angle-right"></i> Về chúng tôi</a></li>
                    <li><a href="{{ route('khuyen-mai') }}" class="footer-link"><i class="fa-solid fa-angle-right"></i> Ưu đãi đặc biệt</a></li>
                </ul>
            </div>

            <!-- 3. Contact (Liên hệ) -->
            <div>
                <h3 class="footer-heading">Liên hệ</h3>
                <!-- Sử dụng class footer-list để căn chỉnh khoảng cách -->
                <ul class="footer-list">
                    <li class="footer-contact-item">
                        <i class="fa-solid fa-location-dot footer-contact-icon"></i>
                        <span>Long Xuyên, An Giang</span>
                    </li>
                    <li class="footer-contact-item">
                        <i class="fa-solid fa-phone footer-contact-icon"></i>
                        <span class="font-semibold text-white">+84 792008096</span>
                    </li>
                    <li class="footer-contact-item">
                        <i class="fa-solid fa-envelope footer-contact-icon"></i>
                        <span>booking@luxurystay.com</span>
                    </li>
                </ul>
            </div>

            <!-- 4. Newsletter (Bản tin) -->
            <div>
                <h3 class="footer-heading">Bản tin</h3>
                <p class="footer-desc mb-4">Đăng ký để nhận mã khuyến mãi giảm giá 10% cho lần đặt đầu tiên.</p>
                <form class="flex flex-col gap-2">
                    <input type="email" placeholder="Email của bạn..." class="footer-input">
                    <button type="submit" class="footer-btn-submit">Đăng ký</button>
                </form>
            </div>
        </div>

        <!-- Bottom Copyright -->
        <div class="footer-bottom">
            <p>&copy; 2025 Luxury Stay Hotel. All rights reserved.</p>
            <div class="flex gap-6 mt-4 md:mt-0">
                <a href="#" class="hover:text-white transition">Chính sách bảo mật</a>
                <a href="#" class="hover:text-white transition">Điều khoản sử dụng</a>
            </div>
        </div>
    </div>
</footer>
</file>

<file path="app/Http/Controllers/Admin/LoaiPhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\LoaiPhong;
use App\Models\TienNghi; // [QUAN TRỌNG] Import model tiện nghi
use Illuminate\Http\Request;
use Illuminate\Support\Str;
use Illuminate\Support\Facades\File;

class LoaiPhongController extends Controller
{
    public function getDanhSach()
    {
        // Eager load tienNghis and paginate results
        $q = request()->query('q');
        $query = LoaiPhong::with('tienNghis');
        if ($q) {
            $query->where('ten_loai_phong', 'like', "%{$q}%");
        }
        $loaiPhongs = $query->orderBy('created_at', 'desc')->paginate(15)->withQueryString();
        return view('admin.loai_phong.danh_sach', compact('loaiPhongs'));
    }

    // --- CHỨC NĂNG THÊM MỚI ---
    public function getThem()
    {
        // Lấy danh sách tất cả tiện nghi để hiển thị Checkbox
        $tienNghis = TienNghi::all();
        return view('admin.loai_phong.them', compact('tienNghis'));
    }

    public function postThem(Request $request)
    {
        // 1. Validate
        $request->validate([
            'ten_loai_phong' => 'required|string|max:100',
            // Decimal(10,2) -> max integer part is 99999999, so cap accordingly to avoid DB overflow
            'gia' => 'nullable|numeric|max:99999999',
            'so_nguoi' => 'nullable|integer',
            'dien_tich' => 'nullable|integer',
            'hinh_anh' => 'nullable|image|mimes:jpeg,png,jpg,gif|max:2048',
            // Validate mảng tiện nghi (gửi từ checkbox name="tien_nghi[]")
            'tien_nghi' => 'nullable|array', 
            'tien_nghi.*' => 'exists:tien_nghis,id', // Đảm bảo ID tiện nghi tồn tại
        ]);

        // 2. Lưu thông tin cơ bản Loại Phòng
        $orm = new LoaiPhong();
        $orm->ten_loai_phong = $request->ten_loai_phong;
        $orm->gia = $request->gia ?? 0;
        $orm->so_nguoi = $request->so_nguoi ?? 1;
        $orm->dien_tich = $request->dien_tich ?? 0;
        // Lưu ý: Cột 'tien_nghi' (string) trong bảng loai_phongs giờ không dùng nữa 
        // vì đã có bảng trung gian, nên ta có thể bỏ qua hoặc để null.

        // 3. Xử lý Upload Ảnh
        if ($request->hasFile('hinh_anh')) {
            $file = $request->file('hinh_anh');
            $filename = time() . '_' . $file->getClientOriginalName();
            $file->move(public_path('uploads/phongs'), $filename);
            $orm->hinh_anh = 'uploads/phongs/' . $filename;
        }

        $orm->save(); // Lưu xong mới có ID để gán quan hệ

        // 4. [QUAN TRỌNG] Lưu Tiện nghi vào bảng trung gian
        if ($request->has('tien_nghi')) {
            // attach: Thêm các dòng vào bảng loai_phong_tien_nghi
            $orm->tienNghis()->attach($request->tien_nghi);
        }

        return redirect()->route('admin.loai-phong')->with('success', 'Thêm mới thành công!');
    }
    
    // --- CHỨC NĂNG CẬP NHẬT (SỬA) ---
    public function getSua($id)
    {
        // Lấy loại phòng kèm theo các tiện nghi đã được gán
        $loaiPhong = LoaiPhong::with('tienNghis')->findOrFail($id);
        
        // Lấy tất cả tiện nghi để hiển thị checkbox
        $tienNghis = TienNghi::all();
        
        // Tạo mảng các ID tiện nghi đã chọn (để check sẵn trong View)
        // Ví dụ: [1, 3, 5]
        $selectedTienNghis = $loaiPhong->tienNghis->pluck('id')->toArray();

        return view('admin.loai_phong.sua', compact('loaiPhong', 'tienNghis', 'selectedTienNghis'));
    }

    public function postSua(Request $request, $id)
    {
        // 1. Validate
        $request->validate([
            'ten_loai_phong' => 'required|string|max:100',
            'gia' => 'nullable|numeric|max:99999999',
            'so_nguoi' => 'nullable|integer',
            'dien_tich' => 'nullable|integer',
            'hinh_anh' => 'nullable|image|mimes:jpeg,png,jpg,gif|max:2048',
            'tien_nghi' => 'nullable|array', // Mảng ID tiện nghi
        ]);

        $orm = LoaiPhong::findOrFail($id);
        
        // 2. Cập nhật thông tin cơ bản
        $orm->ten_loai_phong = $request->ten_loai_phong;
        if ($request->has('gia')) $orm->gia = $request->gia;
        if ($request->has('so_nguoi')) $orm->so_nguoi = $request->so_nguoi;
        if ($request->has('dien_tich')) $orm->dien_tich = $request->dien_tich;
        // 3. Xử lý Ảnh mới (nếu có)
        if ($request->hasFile('hinh_anh')) {
            // Xóa ảnh cũ
            if ($orm->hinh_anh && File::exists(public_path($orm->hinh_anh))) {
                File::delete(public_path($orm->hinh_anh));
            }
            // Up ảnh mới
            $file = $request->file('hinh_anh');
            $filename = time() . '_' . $file->getClientOriginalName();
            $file->move(public_path('uploads/phongs'), $filename);
            $orm->hinh_anh = 'uploads/phongs/' . $filename;
        }

        $orm->save();

        // 4. [QUAN TRỌNG] Đồng bộ tiện nghi (Sync)
        // Hàm sync sẽ: Xóa hết các ID cũ không có trong mảng gửi lên và Thêm các ID mới vào.
        // Nếu $request->tien_nghi là null (bỏ chọn hết), nó sẽ xóa sạch liên kết.
        $orm->tienNghis()->sync($request->input('tien_nghi', []));

        return redirect()->route('admin.loai-phong')->with('success', 'Cập nhật thành công!');
    }

    // --- CHỨC NĂNG XÓA ---
    public function getXoa($id)
    {
        $orm = LoaiPhong::findOrFail($id);
        
        // Xóa liên kết tiện nghi trong bảng trung gian
        $orm->tienNghis()->detach(); 

        // Xóa file ảnh
        if ($orm->hinh_anh && File::exists(public_path($orm->hinh_anh))) {
            File::delete(public_path($orm->hinh_anh));
        }

        $orm->delete();
        
        return redirect()->route('admin.loai-phong')->with('success', 'Xóa thành công!');
    }
}
</file>

<file path="app/Http/Controllers/Admin/UserController.php">
<?php

namespace App\Http\Controllers\Admin; // Namespace chuẩn

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Validation\Rule;
use App\Models\User;
use Illuminate\Support\Facades\Hash;

class UserController extends Controller
{
    /**
     * 1. HÀM INDEX (Sửa lỗi Method not exist)
     * Hiển thị danh sách khách hàng (Chỉ lấy Role = user)
     */
    public function getDanhSach()
    {
        $q = request()->query('q');
        $role = request()->query('role');
        // Remove hard-coded role filter so admin can view all users (including admins)
        $query = User::query();
        if ($q) {
            $query->where(function($qq) use ($q) {
                $qq->where('name', 'like', "%{$q}%")
                   ->orWhere('email', 'like', "%{$q}%")
                   ->orWhere('phone', 'like', "%{$q}%");
            });
        }
        if ($role && in_array($role, ['admin', 'user'])) {
            $query->where('role', $role);
        }
        $users = $query->orderBy('created_at', 'desc')->paginate(10)->withQueryString();

        return view('admin.users.danh_sach', compact('users'));
    }

    /**
     * Hiển thị form thêm mới
     */
    public function getThem()
    {
        return view('admin.users.them');
    }

    /**
     * Xử lý lưu khách hàng mới
     */
    public function postThem(Request $request)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => 'required|email|unique:users,email',
            'phone' => 'required|string|max:15|unique:users,phone',
            'cccd' => 'required|string|max:20|unique:users,cccd',
            'password' => 'required|string|min:6',
        ]);

        $orm = new User();
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'];
        $orm->cccd = $data['cccd'];
        $orm->role = 'user'; // Gán cứng là user
        $orm->password = Hash::make($data['password']);
        $orm->save();

        return redirect()->route('admin.users')->with('success', 'Thêm khách hàng thành công!');
    }

    /**
     * Hiển thị form sửa
     */
    public function getSua($id)
    {
        $user = User::findOrFail($id);
        return view('admin.users.sua', compact('user'));
    }

    /**
     * Xử lý cập nhật
     */
    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'name' => 'required|string|max:150',
            'email' => ['required', 'email', Rule::unique('users', 'email')->ignore($id)],
            'phone' => ['required', 'string', 'max:15', Rule::unique('users', 'phone')->ignore($id)],
            'cccd' => ['required', 'string', 'max:20', Rule::unique('users', 'cccd')->ignore($id)],
            'password' => 'nullable|string|min:6',
        ]);

        $orm = User::findOrFail($id);
        $orm->name = $data['name'];
        $orm->email = $data['email'];
        $orm->phone = $data['phone'];
        $orm->cccd = $data['cccd'];
        
        if (!empty($data['password'])) {
            $orm->password = Hash::make($data['password']);
        }
        
        $orm->save();
        
        return redirect()->route('admin.users')->with('success', 'Cập nhật thành công!');
    }

    /**
     * Xóa tài khoản
     */
    public function getXoa($id)
    {
        $orm = User::findOrFail($id);
        
        if ($orm->role === 'admin') {
            return redirect()->route('admin.users')->with('error', 'Không thể xóa Admin!');
        }

        $orm->delete();
        return redirect()->route('admin.users')->with('success', 'Đã xóa khách hàng.');
    }

    // Bulk delete users
    public function bulkDelete(Request $request)
    {
        $request->validate([
            'ids' => 'required|array',
            'ids.*' => 'exists:users,id',
        ]);

        $ids = $request->ids;
        // Prevent deleting admins
        $deleted = 0;
        foreach ($ids as $id) {
            $u = User::find($id);
            if ($u && $u->role !== 'admin') {
                $u->delete();
                $deleted++;
            }
        }
        return redirect()->route('admin.users')->with('success', "Đã xóa $deleted người dùng.");
    }
}
</file>

<file path="app/Models/DatPhong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Database\Eloquent\Relations\HasOne;

class DatPhong extends Model
{
    use HasFactory;

    protected $table = 'dat_phongs';

    protected $fillable = [
        'user_id',
        'ngay_den',      
        'ngay_di',        
        'tong_tien',      
        'trang_thai',
        'payment_status',
        'payment_method', // Thêm cột này
        'promotion_code',
        'discount_amount',
        'ghi_chu',
    ];

    // [FIX LỖI] Khai báo các trường ngày tháng để tự động convert sang đối tượng Carbon
    protected $casts = [
        'ngay_den' => 'date',
        'ngay_di' => 'date',
    ];

    /**
     * The user who made the booking.
     */
    public function user(): BelongsTo
    {
        return $this->belongsTo(User::class);
    }

    /**
     * Booking details for this DatPhong.
     */
    public function chiTietDatPhongs(): HasMany
    {
        return $this->hasMany(ChiTietDatPhong::class, 'dat_phong_id');
    }

    /**
     * Invoice for this booking (one-to-one).
     */
    public function hoaDon(): HasOne
    {
        return $this->hasOne(HoaDon::class, 'dat_phong_id');
    }
}
</file>

<file path="app/Models/KhuyenMai.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class KhuyenMai extends Model
{
    use HasFactory;
    
    // Đảm bảo tên cột khớp với bảng khuyến_mais của bạn
    protected $fillable = [
        'ten_khuyen_mai', 
        'ma_khuyen_mai', 
        'chiet_khau_phan_tram', // Thêm cột này
        'so_tien_giam_gia',    // Thêm cột này
        'ngay_bat_dau', 
        'ngay_ket_thuc',
    ];
    
    // Đảm bảo kiểu dữ liệu là số thập phân
    protected $casts = [
        'chiet_khau_phan_tram' => 'float',
        'so_tien_giam_gia' => 'float',
        'ngay_bat_dau' => 'date',
        'ngay_ket_thuc' => 'date',
    ];
}
</file>

<file path="app/Models/LoaiPhong.php">
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\HasMany;

class LoaiPhong extends Model
{

	protected $fillable = [
        'ten_loai_phong', 
        'gia', 
        'suc_chua', 
        'dien_tich',
		'hinh_anh',
    ];

	public function tienNghis() {
    	return $this->belongsToMany(
            TienNghi::class, 
            'loai_phong_tien_nghi', // 1. Tên bảng trung gian ĐÚNG (theo database)
            'loai_phong_id',        // 2. Khóa ngoại của bảng hiện tại (loai_phongs)
            'tien_nghi_id'          // 3. Khóa ngoại của bảng kia (tien_nghis)
		);
	}

	public function phongs(): HasMany
	{
		return $this->hasMany(Phong::class);
	}

	/**
	 * Get the booking details for this LoaiPhong.
	 */
	public function chiTietDatPhongs(): HasMany
	{
		return $this->hasMany(ChiTietDatPhong::class, 'loai_phong_id');
	}
}
</file>

<file path="composer.json">
{
    "$schema": "https://getcomposer.org/schema.json",
    "name": "laravel/laravel",
    "type": "project",
    "description": "The skeleton application for the Laravel framework.",
    "keywords": ["laravel", "framework"],
    "license": "MIT",
    "require": {
        "php": "^8.2",
        "barryvdh/laravel-dompdf": "^3.1",
        "laravel/framework": "^12.0",
        "laravel/socialite": "^5.24",
        "laravel/tinker": "^2.10.1",
        "laravel/ui": "^4.6"
    },
    "require-dev": {
        "fakerphp/faker": "^1.23",
        "laravel/pail": "^1.2.2",
        "laravel/pint": "^1.24",
        "laravel/sail": "^1.41",
        "mockery/mockery": "^1.6",
        "nunomaduro/collision": "^8.6",
        "phpunit/phpunit": "^11.5.3"
    },
    "autoload": {
        "psr-4": {
            "App\\": "app/",
            "Database\\Factories\\": "database/factories/",
            "Database\\Seeders\\": "database/seeders/"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "Tests\\": "tests/"
        }
    },
    "scripts": {
        "setup": [
            "composer install",
            "@php -r \"file_exists('.env') || copy('.env.example', '.env');\"",
            "@php artisan key:generate",
            "@php artisan migrate --force",
            "npm install",
            "npm run build"
        ],
        "dev": [
            "Composer\\Config::disableProcessTimeout",
            "npx concurrently -c \"#93c5fd,#c4b5fd,#fb7185,#fdba74\" \"php artisan serve\" \"php artisan queue:listen --tries=1\" \"php artisan pail --timeout=0\" \"npm run dev\" --names=server,queue,logs,vite --kill-others"
        ],
        "test": [
            "@php artisan config:clear --ansi",
            "@php artisan test"
        ],
        "post-autoload-dump": [
            "Illuminate\\Foundation\\ComposerScripts::postAutoloadDump",
            "@php artisan package:discover --ansi"
        ],
        "post-update-cmd": [
            "@php artisan vendor:publish --tag=laravel-assets --ansi --force"
        ],
        "post-root-package-install": [
            "@php -r \"file_exists('.env') || copy('.env.example', '.env');\""
        ],
        "post-create-project-cmd": [
            "@php artisan key:generate --ansi",
            "@php -r \"file_exists('database/database.sqlite') || touch('database/database.sqlite');\"",
            "@php artisan migrate --graceful --ansi"
        ],
        "pre-package-uninstall": [
            "Illuminate\\Foundation\\ComposerScripts::prePackageUninstall"
        ]
    },
    "extra": {
        "laravel": {
            "dont-discover": []
        }
    },
    "config": {
        "optimize-autoloader": true,
        "preferred-install": "dist",
        "sort-packages": true,
        "allow-plugins": {
            "pestphp/pest-plugin": true,
            "php-http/discovery": true
        }
    },
    "minimum-stability": "stable",
    "prefer-stable": true
}
</file>

<file path="database/migrations/2025_12_05_181619_create_loai_phongs_table.php">
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('loai_phongs', function (Blueprint $table) {
            $table->id();
            $table->string('ten_loai_phong', 100);
            $table->decimal('gia', 10, 2);
            $table->integer('so_nguoi');
            $table->integer('dien_tich');
            $table->string('hinh_anh')->nullable();
            $table->string(('tien_nghi'))->nullable();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('loai_phongs');
    }
};
</file>

<file path="resources/js/app.js">
import './bootstrap';
</file>

<file path="resources/views/admin/dat_phong/hoa_don_chi_tiet.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Chi tiết Hóa đơn')

@section('header', 'Quản lý Hóa đơn')

@section('content')
<div class="max-w-4xl mx-auto">
    <div class="flex items-center justify-between mb-6">
        <a href="{{ route('admin.dat-phong') }}" class="text-sm font-medium text-gray-500 hover:text-brand-gold transition-colors flex items-center gap-2">
            <i class="fa-solid fa-arrow-left"></i> Quay lại sơ đồ
        </a>
        <div class="flex gap-2">
            <button onclick="window.print()" class="px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg text-sm font-medium hover:border-brand-gold hover:text-brand-gold shadow-sm">
                <i class="fa-solid fa-print mr-2"></i> In hóa đơn
            </button>
        </div>
    </div>

    @if(session('success'))
        <div class="mb-6 p-4 rounded-lg bg-green-50 border border-green-200 text-green-800 flex items-center"><i class="fa-solid fa-check-circle mr-3"></i> {{ session('success') }}</div>
    @endif

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        
        <div class="bg-brand-900 p-8 text-white flex justify-between items-start">
            <div>
                <h1 class="text-3xl font-serif font-bold text-brand-gold">HÓA ĐƠN</h1>
                <p class="text-gray-400 mt-1 uppercase tracking-widest text-xs">Mã HĐ: #{{ $hoaDon->ma_hoa_don }}</p>
            </div>
            <div class="text-right">
                <p class="font-bold text-lg">Luxury Stay Hotel</p>
                <p class="text-sm text-gray-400">contact@luxurystay.com</p>
            </div>
        </div>

        <div class="p-8">
            <div class="grid grid-cols-2 gap-8 mb-8 border-b border-gray-100 pb-8">
                <div>
                    <p class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Khách hàng</p>
                    <p class="text-lg font-bold text-brand-900">{{ $hoaDon->datPhong->user->name ?? $datPhong->user->name ?? 'Guest' }}</p>
                    <p class="text-gray-500 text-sm">{{ $hoaDon->datPhong->user->email ?? $datPhong->user->email ?? '' }}</p>
                    <p class="text-gray-500 text-sm">{{ $hoaDon->datPhong->user->phone ?? $datPhong->user->phone ?? '' }}</p>
                </div>
                <div class="text-right">
                    <p class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Chi tiết đặt phòng</p>
                    <p class="text-sm text-gray-600"><span class="font-medium">Ngày đặt:</span> {{ optional($hoaDon->ngay_lap ?? $hoaDon->created_at)->format('d/m/Y') }}</p>
                    <p class="text-sm text-gray-600"><span class="font-medium">Check-in:</span> {{ $hoaDon->datPhong->ngay_den }}</p>
                    <p class="text-sm text-gray-600"><span class="font-medium">Check-out:</span> {{ $hoaDon->datPhong->ngay_di }}</p>
                </div>
            </div>

            <form action="{{ route('admin.dat-phong.thanh-toan', $datPhong->id) }}" method="POST" class="bg-gray-50 p-6 rounded-xl border border-gray-200 mb-8">
                @csrf
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-end">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Trạng thái thanh toán</label>
                        <select name="trang_thai" class="w-full rounded-lg border-gray-300 focus:border-brand-gold focus:ring-brand-gold">
                            <option value="unpaid" {{ $hoaDon->trang_thai == 'unpaid' ? 'selected' : '' }}>Chưa thanh toán</option>
                            <option value="paid" {{ $hoaDon->trang_thai == 'paid' ? 'selected' : '' }}>Đã thanh toán</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Phương thức</label>
                        <select name="phuong_thuc_thanh_toan" class="w-full rounded-lg border-gray-300 focus:border-brand-gold focus:ring-brand-gold">
                            <option value="cash" {{ $hoaDon->phuong_thuc_thanh_toan == 'cash' ? 'selected' : '' }}>Tiền mặt</option>
                            <option value="banking" {{ $hoaDon->phuong_thuc_thanh_toan == 'banking' ? 'selected' : '' }}>Chuyển khoản</option>
                            <option value="online" {{ $hoaDon->phuong_thuc_thanh_toan == 'online' ? 'selected' : '' }}>Online (VNPay)</option>
                        </select>
                    </div>
                </div>
                <div class="mt-4 text-right">
                    <button type="submit" class="px-6 py-2 bg-brand-900 text-brand-gold font-bold rounded-lg hover:bg-gray-800 transition-all shadow-md">
                        <i class="fa-solid fa-save mr-2"></i> Cập nhật
                    </button>
                </div>
            </form>

            <div class="flex justify-end">
                <div class="w-full md:w-1/2">
                    <div class="flex justify-between py-3 border-b border-gray-100">
                        <span class="text-gray-600">Tổng tiền phòng</span>
                        <span class="font-medium">{{ number_format($hoaDon->tong_tien, 0, ',', '.') }} đ</span>
                    </div>
                    <div class="flex justify-between py-4 items-center">
                        <span class="text-lg font-bold text-brand-900">THÀNH TIỀN</span>
                        <span class="text-2xl font-serif font-bold text-brand-gold">{{ number_format($hoaDon->tong_tien, 0, ',', '.') }} đ</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/dat_phong/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Sửa Đặt phòng')
@section('header', 'Cập nhật thông tin')

@section('content')
<div class="max-w-3xl mx-auto">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-serif font-bold text-gray-900">Sửa đơn #{{ $datPhong->id }}</h1>
        <a href="{{ route('admin.dat-phong') }}" class="text-sm text-gray-500 hover:text-brand-gold flex items-center">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="bg-gray-50 px-8 py-4 border-b border-gray-200">
            <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wider">Thông tin chi tiết</h3>
        </div>
        
        <div class="p-8">
            <form action="{{ route('admin.dat-phong.update', ['id' => $datPhong->id]) }}" method="POST">
                @csrf
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    
                    <div class="col-span-2">
                        <label class="block text-sm font-bold text-gray-700 mb-2">Khách hàng</label>
                        <select id="user_id" name="user_id" required class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold">
                            <option value="">-- Chọn khách hàng --</option>
                            @foreach($users as $user)
                                <option value="{{ $user->id }}" {{ old('user_id', $datPhong->user_id) == $user->id ? 'selected' : '' }}>
                                    {{ $user->name }} ({{ $user->email }})
                                </option>
                            @endforeach
                        </select>
                        @error('user_id') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Ngày đến</label>
                        <input type="date" name="ngay_den" value="{{ old('ngay_den', $datPhong->ngay_den) }}" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold" required>
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Ngày đi</label>
                        <input type="date" name="ngay_di" value="{{ old('ngay_di', $datPhong->ngay_di) }}" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold" required>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Tổng tiền (VND)</label>
                        <div class="relative rounded-md shadow-sm">
                            <input type="number" name="tong_tien" value="{{ old('tong_tien', $datPhong->tong_tien) }}" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold pr-12" required>
                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                <span class="text-gray-500 sm:text-sm">đ</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Trạng thái</label>
                        <select name="trang_thai" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold">
                            <option value="pending" {{ $datPhong->trang_thai == 'pending' ? 'selected' : '' }}>Pending (Chờ duyệt)</option>
                            <option value="confirmed" {{ $datPhong->trang_thai == 'confirmed' ? 'selected' : '' }}>Confirmed (Đã duyệt)</option>
                            <option value="cancelled" {{ $datPhong->trang_thai == 'cancelled' ? 'selected' : '' }}>Cancelled (Hủy)</option>
                            <option value="completed" {{ $datPhong->trang_thai == 'completed' ? 'selected' : '' }}>Completed (Hoàn thành)</option>
                        </select>
                    </div>

                    <div class="col-span-2">
                        <label class="block text-sm font-bold text-gray-700 mb-2">Ghi chú</label>
                        <textarea name="ghi_chu" rows="3" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold">{{ old('ghi_chu', $datPhong->ghi_chu) }}</textarea>
                    </div>
                </div>

                <div class="mt-8 flex items-center justify-end gap-3 pt-6 border-t border-gray-100">
                    <a href="{{ route('admin.dat-phong') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50">Hủy</a>
                    <button type="submit" class="px-6 py-2 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all">
                        <i class="fa-solid fa-save mr-2"></i> Lưu thay đổi
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/layouts/dashboard.blade.php">
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="{{ csrf_token() }}">

    <title>@yield('title', 'Quản trị hệ thống') - Luxury Stay Admin</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['"Be Vietnam Pro"', 'sans-serif'],
                        serif: ['"Playfair Display"', 'serif'],
                    },
                    colors: {
                        brand: {
                            900: '#111827', // Xanh đen
                            800: '#1f2937', 
                            gold: '#c5a47e', // Vàng Luxury
                            hover: '#b08d55', 
                        }
                    }
                }
            }
        }
    </script>

    <style>
        [x-cloak] { display: none !important; }
        
        /* Scrollbar đẹp */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #c5a47e; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #b08d55; }

        /* Active Menu Style */
        .nav-active {
            background-color: rgba(31, 41, 55, 1);
            color: #c5a47e;
            border-left: 4px solid #c5a47e;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans antialiased text-gray-800" x-data="{ sidebarOpen: false }">

    <div class="flex h-screen overflow-hidden">
        
        @include('admin.layouts.sidebar')

        <div class="flex-1 flex flex-col overflow-hidden relative">
            
            <header class="bg-white h-16 flex items-center justify-between px-6 shadow-sm border-b border-gray-100 z-20">
                <div class="flex items-center">
                    <button @click="sidebarOpen = !sidebarOpen" class="lg:hidden text-gray-500 hover:text-brand-gold mr-4">
                        <i class="fa-solid fa-bars text-2xl"></i>
                    </button>
                    <h2 class="text-xl font-bold text-brand-900 font-serif tracking-wide">
                        @yield('header', 'Dashboard')
                    </h2>
                </div>

                <div class="flex items-center gap-6">
                    <a href="{{ route('home') }}" target="_blank" class="hidden md:flex items-center gap-2 text-sm font-medium text-gray-500 hover:text-brand-gold transition-colors group">
                        <span>Trở về trang chủ</span>
                        <i class="fa-solid fa-arrow-right-from-bracket text-xs group-hover:translate-x-1 transition-transform"></i>
                    </a>
                    <div class="h-8 w-px bg-gray-200 hidden md:block"></div>
                    <div class="flex items-center gap-3 cursor-pointer">
                        <div class="text-right hidden sm:block">
                            <p class="text-sm font-bold text-brand-900 leading-tight">{{ Auth::user()->name ?? 'Administrator' }}</p>
                            <p class="text-[10px] uppercase tracking-wider text-brand-gold font-semibold mt-0.5">Admin</p>
                        </div>
                        <div class="w-9 h-9 rounded-full bg-brand-900 border-2 border-brand-gold text-brand-gold flex items-center justify-center font-bold font-serif shadow-sm">
                            {{ substr(Auth::user()->name ?? 'A', 0, 1) }}
                        </div>
                    </div>
                </div>
            </header>

            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6">
                @if(session('success'))
                    <div x-data="{ show: true }" x-show="show" x-init="setTimeout(() => show = false, 4000)" 
                         class="mb-6 bg-white border-l-4 border-green-500 p-4 rounded shadow-sm flex justify-between items-center">
                        <div class="flex items-center gap-3">
                            <div class="bg-green-100 text-green-600 rounded-full p-1"><i class="fa-solid fa-check"></i></div>
                            <span class="text-green-800 font-medium">{{ session('success') }}</span>
                        </div>
                        <button @click="show = false" class="text-gray-400 hover:text-gray-600"><i class="fa-solid fa-xmark"></i></button>
                    </div>
                @endif
                
                @if(session('error'))
                    <div x-data="{ show: true }" x-show="show" class="mb-6 bg-white border-l-4 border-red-500 p-4 rounded shadow-sm flex justify-between items-center">
                        <div class="flex items-center gap-3">
                            <div class="bg-red-100 text-red-600 rounded-full p-1"><i class="fa-solid fa-exclamation"></i></div>
                            <span class="text-red-800 font-medium">{{ session('error') }}</span>
                        </div>
                        <button @click="show = false" class="text-gray-400 hover:text-gray-600"><i class="fa-solid fa-xmark"></i></button>
                    </div>
                @endif

                @yield('content')
                
                <div class="h-10"></div>
            </main>
        </div>
        
        <div x-show="sidebarOpen" @click="sidebarOpen = false" x-transition.opacity class="fixed inset-0 bg-brand-900/50 z-40 lg:hidden backdrop-blur-sm"></div>
    </div>
    
    <script>
        // Cấu hình Axios
        if (typeof axios !== 'undefined') {
            const token = document.querySelector('meta[name="csrf-token"]');
            if (token) axios.defaults.headers.common['X-CSRF-TOKEN'] = token.content;
            axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
        }

        // Logic Confirm Delete
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('[data-confirm]').forEach(el => {
                el.addEventListener('click', e => {
                    if (!confirm(el.getAttribute('data-confirm'))) {
                        e.preventDefault();
                    }
                });
            });
        });
    </script>
    
    @stack('scripts')
</body>
</html>
</file>

<file path="resources/views/admin/layouts/sidebar.blade.php">
<aside :class="sidebarOpen ? 'translate-x-0 ease-out' : '-translate-x-full ease-in'" 
       class="fixed inset-y-0 left-0 z-50 w-64 bg-brand-900 text-white transition-transform duration-300 lg:static lg:inset-0 lg:translate-x-0 shadow-xl flex flex-col border-r border-gray-800">
    
    <div class="flex items-center justify-center h-16 border-b border-gray-800 bg-[#0f1523]">
        <a href="{{ route('admin.dashboard') }}" class="flex items-center gap-3 group">
            <div class="w-8 h-8 rounded-full border border-brand-gold flex items-center justify-center text-brand-gold group-hover:bg-brand-gold group-hover:text-brand-900 transition-colors">
                <i class="fa-solid fa-crown text-sm"></i>
            </div>
            <span class="text-xl font-bold font-serif tracking-wide text-white">
                Luxury<span class="text-brand-gold">Stay</span>
            </span>
        </a>
    </div>

    <nav class="flex-1 overflow-y-auto py-6 px-3 space-y-1">
        
        <a href="{{ route('admin.dashboard') }}" 
           class="flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 group {{ request()->routeIs('admin.dashboard') ? 'bg-gray-800 text-brand-gold border-l-4 border-brand-gold' : 'text-gray-400 hover:bg-gray-800 hover:text-white' }}">
            <i class="fa-solid fa-gauge-high w-5 text-center {{ request()->routeIs('admin.dashboard') ? 'text-brand-gold' : 'text-gray-500 group-hover:text-brand-gold' }}"></i>
            <span class="ml-3">Tổng quan</span>
        </a>

        <div class="pt-6 pb-2 px-4">
            <p class="text-[11px] font-bold text-gray-500 uppercase tracking-widest">Vận hành</p>
        </div>

        <a href="{{ route('admin.dat-phong') }}" 
           class="flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 group {{ request()->routeIs('admin.dat-phong.*') ? 'bg-gray-800 text-brand-gold border-l-4 border-brand-gold' : 'text-gray-400 hover:bg-gray-800 hover:text-white' }}">
            <i class="fa-solid fa-calendar-check w-5 text-center {{ request()->routeIs('admin.dat-phong.*') ? 'text-brand-gold' : 'text-gray-500 group-hover:text-brand-gold' }}"></i>
            <span class="ml-3">Đặt phòng</span>
            <span class="ml-auto bg-brand-gold text-brand-900 py-0.5 px-2 rounded text-[10px] font-bold">New</span>
        </a>

        <div x-data="{ open: {{ request()->routeIs('admin.phong.*') || request()->routeIs('admin.loai-phong.*') || request()->routeIs('admin.tien-nghi.*') ? 'true' : 'false' }} }">
            <button @click="open = !open" 
                    class="w-full flex items-center justify-between px-4 py-3 text-sm font-medium rounded-lg text-gray-400 hover:bg-gray-800 hover:text-white transition-all group">
                <div class="flex items-center">
                    <i class="fa-solid fa-door-open w-5 text-center text-gray-500 group-hover:text-brand-gold"></i>
                    <span class="ml-3">Phòng nghỉ</span>
                </div>
                <i class="fa-solid fa-chevron-down text-xs transition-transform duration-200" :class="open ? 'rotate-180 text-brand-gold' : ''"></i>
            </button>
            
            <div x-show="open" x-collapse class="space-y-1 mt-1 bg-[#0f1523] rounded-lg overflow-hidden">
                <a href="{{ route('admin.phong') }}" 
                   class="flex items-center pl-11 pr-4 py-2 text-sm transition-colors {{ request()->routeIs('admin.phong.*') ? 'text-brand-gold bg-white/5' : 'text-gray-500 hover:text-white hover:bg-white/5' }}">
                   <span class="w-1.5 h-1.5 rounded-full mr-2 {{ request()->routeIs('admin.phong.*') ? 'bg-brand-gold' : 'bg-gray-600' }}"></span>
                   Danh sách phòng
                </a>
                <a href="{{ route('admin.loai-phong') }}" 
                   class="flex items-center pl-11 pr-4 py-2 text-sm transition-colors {{ request()->routeIs('admin.loai-phong.*') ? 'text-brand-gold bg-white/5' : 'text-gray-500 hover:text-white hover:bg-white/5' }}">
                   <span class="w-1.5 h-1.5 rounded-full mr-2 {{ request()->routeIs('admin.loai-phong.*') ? 'bg-brand-gold' : 'bg-gray-600' }}"></span>
                   Loại phòng & Giá
                </a>
                <a href="{{ route('admin.tien-nghi') }}" 
                   class="flex items-center pl-11 pr-4 py-2 text-sm transition-colors {{ request()->routeIs('admin.tien-nghi.*') ? 'text-brand-gold bg-white/5' : 'text-gray-500 hover:text-white hover:bg-white/5' }}">
                   <span class="w-1.5 h-1.5 rounded-full mr-2 {{ request()->routeIs('admin.tien-nghi.*') ? 'bg-brand-gold' : 'bg-gray-600' }}"></span>
                   Tiện nghi
                </a>
            </div>
        </div>

        <a href="{{ route('admin.khuyen-mai') }}" 
           class="flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 group {{ request()->routeIs('admin.khuyen-mai.*') ? 'bg-gray-800 text-brand-gold border-l-4 border-brand-gold' : 'text-gray-400 hover:bg-gray-800 hover:text-white' }}">
            <i class="fa-solid fa-tags w-5 text-center {{ request()->routeIs('admin.khuyen-mai.*') ? 'text-brand-gold' : 'text-gray-500 group-hover:text-brand-gold' }}"></i>
            <span class="ml-3">Khuyến mãi</span>
        </a>

        <div class="pt-6 pb-2 px-4">
            <p class="text-[11px] font-bold text-gray-500 uppercase tracking-widest">Hệ thống</p>
        </div>

        <a href="{{ route('admin.users') }}" 
           class="flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 group {{ request()->routeIs('admin.users.*') ? 'bg-gray-800 text-brand-gold border-l-4 border-brand-gold' : 'text-gray-400 hover:bg-gray-800 hover:text-white' }}">
            <i class="fa-solid fa-users w-5 text-center {{ request()->routeIs('admin.users.*') ? 'text-brand-gold' : 'text-gray-500 group-hover:text-brand-gold' }}"></i>
            <span class="ml-3">Người dùng</span>
        </a>

        <a href="{{ route('admin.hoa-don') }}" 
           class="flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 group {{ request()->routeIs('admin.hoa-don.*') ? 'bg-gray-800 text-brand-gold border-l-4 border-brand-gold' : 'text-gray-400 hover:bg-gray-800 hover:text-white' }}">
            <i class="fa-solid fa-chart-pie w-5 text-center {{ request()->routeIs('admin.hoa-don.*') ? 'text-brand-gold' : 'text-gray-500 group-hover:text-brand-gold' }}"></i>
            <span class="ml-3">Doanh thu</span>
        </a>

    </nav>

    <div class="p-4 border-t border-gray-800 bg-[#0f1523]">
        <div class="flex items-center gap-3">
            <div class="flex-shrink-0">
                <div class="w-9 h-9 rounded-full bg-brand-gold text-brand-900 flex items-center justify-center font-bold text-sm shadow-md">
                    {{ substr(Auth::user()->name ?? 'A', 0, 1) }}
                </div>
            </div>
            
            <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-white truncate">
                    {{ Auth::user()->name ?? 'Administrator' }}
                </p>
                <p class="text-xs text-gray-500 truncate">Quản lý hệ thống</p>
            </div>
            
            <form method="POST" action="{{ route('logout') }}">
                @csrf
                <button type="submit" class="text-gray-400 hover:text-red-400 transition-colors p-1" title="Đăng xuất">
                    <i class="fa-solid fa-arrow-right-from-bracket"></i>
                </button>
            </form>
        </div>
    </div>
</aside>
</file>

<file path="resources/views/admin/loai_phong/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Danh sách Hạng phòng')
@section('header', 'Quản lý Hạng phòng')

@section('content')
<div class="max-w-7xl mx-auto">
    
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6">
        <div>
            <h1 class="text-2xl font-serif font-bold text-gray-900">Danh sách Hạng phòng</h1>
            <p class="text-sm text-gray-500 mt-1">Quản lý các loại phòng và giá niêm yết</p>
        </div>
        <a href="{{ route('admin.loai-phong.them') }}" class="flex items-center px-5 py-2.5 bg-brand-900 text-brand-gold rounded-xl font-bold hover:bg-gray-800 shadow-md transition-all transform hover:-translate-y-0.5">
            <i class="fa-solid fa-plus mr-2"></i> Thêm hạng phòng
        </a>
    </div>

    <div class="bg-white p-4 rounded-xl mb-6">
        <form method="GET" action="{{ route('admin.loai-phong') }}" class="flex items-center gap-2">
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fa-solid fa-search text-gray-400"></i>
                </div>
                <input type="search" name="q" value="{{ request('q') }}" placeholder="Tìm tên hạng phòng..." class="w-64 h-10 pl-10 rounded-lg border-gray-300 text-sm focus:border-brand-gold focus:ring-brand-gold" />
            </div>
            <button type="submit" class="h-10 px-4 bg-gray-100 text-gray-700 font-bold rounded-lg">Tìm</button>
            @if(request('q'))
                <a href="{{ route('admin.loai-phong') }}" class="h-10 px-4 bg-white border border-gray-300 text-gray-500 rounded-lg">Đặt lại</a>
            @endif
        </form>
    </div>
    @if(session('success'))
        <div class="mb-6 p-4 rounded-lg bg-green-50 border border-green-200 text-green-800 flex items-center shadow-sm">
            <i class="fa-solid fa-check-circle mr-3 text-xl"></i>
            <span class="font-medium">{{ session('success') }}</span>
        </div>
    @endif

    <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden">
        <div class="overflow-x-auto">
            @if($loaiPhongs->isEmpty())
                <div class="p-12 text-center flex flex-col items-center justify-center text-gray-500">
                    <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4">
                        <i class="fa-solid fa-bed text-3xl text-gray-400"></i>
                    </div>
                    <h3 class="text-lg font-medium text-gray-900">Chưa có hạng phòng nào</h3>
                    <p class="text-sm mt-1">Hãy thêm hạng phòng đầu tiên để bắt đầu kinh doanh.</p>
                </div>
            @else
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-brand-900">
                        <tr>
                            <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Hình ảnh</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Tên hạng phòng</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Giá niêm yết</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Tiện nghi</th>
                            <th class="px-6 py-4 text-right text-xs font-bold text-brand-gold uppercase tracking-wider">Hành động</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-50">
                        @foreach($loaiPhongs as $lp)
                        <tr class="hover:bg-gray-50 transition-colors group">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-gray-200 shadow-sm">
                                    <img class="h-full w-full object-cover"
                                         src="{{ $lp->hinh_anh ? asset($lp->hinh_anh) : 'https://placehold.co/600x400?text=No+Image' }}"
                                         alt="{{ $lp->ten_loai_phong }}">
                                </div>
                            </td>

                            <td class="px-6 py-4">
                                <div class="text-sm font-bold text-gray-900">{{ $lp->ten_loai_phong }}</div>
                                <div class="text-xs text-gray-500 mt-1 line-clamp-1">{{ Str::limit($lp->mo_ta ?? '', 50) }}</div>
                            </td>

                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="text-base font-serif font-bold text-brand-900">{{ number_format($lp->gia, 0, ',', '.') }} đ</span>
                                <span class="text-xs text-gray-500 block">/ đêm</span>
                            </td>

                            <td class="px-6 py-4">
                                <div class="flex flex-wrap gap-1">
                                    @forelse($lp->tienNghis as $tn)
                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200">
                                            {{ $tn->ten_tien_nghi }}
                                        </span>
                                    @empty
                                        <span class="text-xs text-gray-400 italic">Chưa cập nhật</span>
                                    @endforelse
                                </div>
                            </td>

                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <div class="flex items-center justify-end gap-3">
                                    <a href="{{ route('admin.loai-phong.sua', ['id' => $lp->id]) }}" class="text-gray-400 hover:text-brand-gold transition-colors p-2 rounded-full hover:bg-yellow-50" title="Sửa">
                                        <i class="fa-solid fa-pen-to-square text-lg"></i>
                                    </a>
                                    <a href="{{ route('admin.loai-phong.xoa', ['id' => $lp->id]) }}"
                                       onclick="return confirm('Cảnh báo: Xóa loại phòng này sẽ xóa luôn các phòng thuộc loại này. Tiếp tục?')"
                                       class="text-gray-400 hover:text-red-600 transition-colors p-2 rounded-full hover:bg-red-50" title="Xóa">
                                        <i class="fa-solid fa-trash-can text-lg"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        @endforeach
                    </tbody>
                </table>
            @endif
        </div>
        <div class="p-4">{{ $loaiPhongs->withQueryString()->links() }}</div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/loai_phong/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Sửa Hạng phòng')
@section('header', 'Cập nhật hạng phòng')

@section('content')
<div class="max-w-5xl mx-auto">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-serif font-bold text-gray-900">Cập nhật: {{ $loaiPhong->ten_loai_phong }}</h1>
        <a href="{{ route('admin.loai-phong') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="p-8">
            <form action="{{ route('admin.loai-phong.update', ['id' => $loaiPhong->id]) }}" method="POST" enctype="multipart/form-data">
                @csrf
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    
                    <div class="lg:col-span-2 space-y-6">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Tên hạng phòng <span class="text-red-500">*</span></label>
                            <input type="text" name="ten_loai_phong" required value="{{ old('ten_loai_phong', $loaiPhong->ten_loai_phong) }}"
                                   class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11">
                            @error('ten_loai_phong') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Giá niêm yết (1 đêm) <span class="text-red-500">*</span></label>
                            <div class="relative rounded-md shadow-sm">
                                    <input type="number" name="gia" required value="{{ old('gia', $loaiPhong->gia) }}"
                                       class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold pr-12 transition-all h-11 font-medium text-brand-900">
                                <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                    <span class="text-gray-500 sm:text-sm font-serif font-bold">VNĐ</span>
                                </div>
                            </div>
                            @error('gia') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Mô tả chi tiết</label>
                            <textarea name="mo_ta" rows="6"
                                      class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all">{{ old('mo_ta', $loaiPhong->mo_ta ?? '') }}</textarea>
                            @error('mo_ta') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Tiện nghi (Chọn nhiều)</label>
                            <div class="grid grid-cols-2 gap-2">
                                @foreach($tienNghis as $tn)
                                    @php $checked = in_array($tn->id, old('tien_nghi', $selectedTienNghis ?? [])); @endphp
                                    <label class="inline-flex items-center gap-2 text-sm">
                                        <input type="checkbox" name="tien_nghi[]" value="{{ $tn->id }}" class="form-checkbox" {{ $checked ? 'checked' : '' }}>
                                        <span>{{ $tn->ten_tien_nghi }} <small class="text-xs text-gray-400">({{ $tn->ma_tien_nghi }})</small></span>
                                    </label>
                                @endforeach
                            </div>
                            @error('tien_nghi') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                        </div>
                    </div>

                    <div class="lg:col-span-1 space-y-6">
                        <label class="block text-sm font-bold text-gray-700 mb-2">Hình ảnh đại diện</label>
                        
                        <div class="w-full aspect-[4/3] bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl hover:bg-gray-100 hover:border-brand-gold transition-all relative overflow-hidden group">
                            
                            <input id="hinh_anh" name="hinh_anh" type="file" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20" accept="image/*" onchange="previewImage(event)">
                            
                            <div id="upload-placeholder" class="absolute inset-0 flex flex-col items-center justify-center text-center p-4 z-10 pointer-events-none {{ $loaiPhong->hinh_anh ? 'hidden' : '' }}">
                                <div class="w-12 h-12 rounded-full bg-white shadow-sm flex items-center justify-center mb-3">
                                    <i class="fa-regular fa-image text-xl text-brand-gold"></i>
                                </div>
                                <p class="text-sm font-bold text-gray-600">Thay đổi ảnh</p>
                                <p class="text-xs text-gray-400 mt-1">PNG, JPG tối đa 2MB</p>
                            </div>

                               <img id="preview-img" 
                                   src="{{ $loaiPhong->hinh_anh ? asset($loaiPhong->hinh_anh) : '#' }}" 
                                   class="{{ $loaiPhong->hinh_anh ? '' : 'hidden' }} absolute inset-0 w-full h-full object-cover z-0">
                            
                            <div class="absolute inset-0 bg-black/50 items-center justify-center hidden group-hover:flex z-10 pointer-events-none transition-all">
                                <span class="text-white font-bold text-sm"><i class="fa-solid fa-pen mr-1"></i> Đổi ảnh</span>
                            </div>
                        </div>
                        @error('hinh_anh') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror

                        <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                            <h4 class="text-xs font-bold text-blue-800 uppercase mb-1"><i class="fa-solid fa-circle-info mr-1"></i> Lưu ý</h4>
                            <p class="text-xs text-blue-600 leading-relaxed">Nếu không chọn ảnh mới, hệ thống sẽ giữ lại ảnh cũ.</p>
                        </div>
                    </div>
                </div>

                <div class="mt-8 pt-6 border-t border-gray-100 flex items-center justify-end gap-3">
                    <a href="{{ route('admin.loai-phong') }}" class="px-5 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition-all">
                        Hủy bỏ
                    </a>
                    <button type="submit" class="px-6 py-2.5 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all flex items-center">
                        <i class="fa-solid fa-save mr-2"></i> Lưu Thay Đổi
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@push('scripts')
<script>
    function previewImage(event) {
        const reader = new FileReader();
        reader.onload = function(){
            const output = document.getElementById('preview-img');
            const placeholder = document.getElementById('upload-placeholder');
            output.src = reader.result;
            output.classList.remove('hidden');
            if(placeholder) placeholder.classList.add('hidden');
        };
        if(event.target.files[0]) {
            reader.readAsDataURL(event.target.files[0]);
        }
    }
</script>
@endpush
@endsection
</file>

<file path="resources/views/admin/loai_phong/them.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Thêm Hạng phòng')
@section('header', 'Tạo hạng phòng mới')

@section('content')
<div class="max-w-5xl mx-auto">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-serif font-bold text-gray-900">Thông tin hạng phòng</h1>
        <a href="{{ route('admin.loai-phong') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="p-8">
            <form action="{{ route('admin.loai-phong.store') }}" method="POST" enctype="multipart/form-data">
                @csrf
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    
                    <div class="lg:col-span-2 space-y-6">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Tên hạng phòng <span class="text-red-500">*</span></label>
                            <input type="text" name="ten_loai_phong" required placeholder="Ví dụ: Deluxe King Ocean View"
                                   class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all h-11">
                            @error('ten_loai_phong') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Giá niêm yết (1 đêm) <span class="text-red-500">*</span></label>
                            <div class="relative rounded-md shadow-sm">
                                <input type="number" name="gia" required placeholder="0"
                                       class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold pr-12 transition-all h-11 font-medium text-brand-900">
                                <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                    <span class="text-gray-500 sm:text-sm font-serif font-bold">VNĐ</span>
                                </div>
                            </div>
                            @error('gia') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Mô tả chi tiết</label>
                            <textarea name="mo_ta" rows="6" placeholder="Mô tả về tiện nghi, hướng nhìn, diện tích..."
                                      class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold transition-all"></textarea>
                            @error('mo_ta') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Tiện nghi (Chọn nhiều)</label>
                            <div class="grid grid-cols-2 gap-2">
                                @foreach($tienNghis as $tn)
                                    <label class="inline-flex items-center gap-2 text-sm">
                                        <input type="checkbox" name="tien_nghi[]" value="{{ $tn->id }}" class="form-checkbox" {{ in_array($tn->id, old('tien_nghi', [])) ? 'checked' : '' }}>
                                        <span>{{ $tn->ten_tien_nghi }} <small class="text-xs text-gray-400">({{ $tn->ma_tien_nghi }})</small></span>
                                    </label>
                                @endforeach
                            </div>
                            @error('tien_nghi') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                        </div>
                    </div>

                    <div class="lg:col-span-1 space-y-6">
                        <label class="block text-sm font-bold text-gray-700 mb-2">Hình ảnh đại diện</label>
                        
                        <div class="w-full aspect-[4/3] bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl hover:bg-gray-100 hover:border-brand-gold transition-all relative overflow-hidden group">
                            
                            <input id="hinh_anh" name="hinh_anh" type="file" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20" accept="image/*" onchange="previewImage(event)">
                            
                            <div id="upload-placeholder" class="absolute inset-0 flex flex-col items-center justify-center text-center p-4 z-10 pointer-events-none">
                                <div class="w-12 h-12 rounded-full bg-white shadow-sm flex items-center justify-center mb-3">
                                    <i class="fa-regular fa-image text-xl text-brand-gold"></i>
                                </div>
                                <p class="text-sm font-bold text-gray-600">Tải ảnh lên</p>
                                <p class="text-xs text-gray-400 mt-1">PNG, JPG tối đa 2MB</p>
                            </div>

                            <img id="preview-img" src="#" class="hidden absolute inset-0 w-full h-full object-cover z-0">
                        </div>
                        @error('hinh_anh') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror

                        <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                            <h4 class="text-xs font-bold text-blue-800 uppercase mb-1"><i class="fa-solid fa-circle-info mr-1"></i> Lưu ý</h4>
                            <p class="text-xs text-blue-600 leading-relaxed">Nên sử dụng hình ảnh tỉ lệ 4:3 hoặc 16:9 để hiển thị đẹp nhất trên website.</p>
                        </div>
                    </div>
                </div>

                <div class="mt-8 pt-6 border-t border-gray-100 flex items-center justify-end gap-3">
                    <a href="{{ route('admin.loai-phong') }}" class="px-5 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition-all">
                        Hủy bỏ
                    </a>
                    <button type="submit" class="px-6 py-2.5 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all flex items-center">
                        <i class="fa-solid fa-check mr-2"></i> Lưu Hạng Phòng
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@push('scripts')
<script>
    function previewImage(event) {
        const reader = new FileReader();
        reader.onload = function(){
            const output = document.getElementById('preview-img');
            const placeholder = document.getElementById('upload-placeholder');
            output.src = reader.result;
            output.classList.remove('hidden');
            placeholder.classList.add('hidden'); // Ẩn placeholder khi đã chọn ảnh
        };
        if(event.target.files[0]) {
            reader.readAsDataURL(event.target.files[0]);
        }
    }
</script>
@endpush
@endsection
</file>

<file path="resources/views/admin/users/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Quản lý Người dùng')
@section('header', 'Danh sách Người dùng')

@section('content')
<div class="max-w-7xl mx-auto">
    
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6">
        <div>
            <h1 class="text-2xl font-serif font-bold text-gray-900">Người dùng hệ thống</h1>
            <p class="text-sm text-gray-500 mt-1">Quản lý tài khoản khách hàng và quản trị viên</p>
        </div>
        <div class="flex gap-3">
            <a href="{{ route('admin.user.them') }}" class="flex items-center px-5 py-2.5 bg-brand-900 text-brand-gold rounded-xl font-bold hover:bg-gray-800 shadow-md transition-all transform hover:-translate-y-0.5">
                <i class="fa-solid fa-plus mr-2"></i> Thêm người dùng
            </a>
        </div>
    </div>

        <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 mb-6">
        <form method="GET" class="flex flex-col md:flex-row gap-4 items-center">
            <div class="relative flex-1">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fa-solid fa-search text-gray-400"></i>
                </div>
                <input type="text" name="q" value="{{ request('q') }}" placeholder="Tìm theo tên, email, SĐT hoặc CCCD..." 
                       class="w-full pl-10 rounded-lg border-gray-300 focus:border-brand-gold focus:ring-brand-gold transition-all h-10 text-sm">
            </div>

            <div class="min-w-[160px]">
                <select name="role" class="w-full h-10 pl-3 pr-8 rounded-lg border-gray-300 text-sm focus:border-brand-gold focus:ring-brand-gold cursor-pointer">
                    <option value="">-- Tất cả vai trò --</option>
                    <option value="user" {{ request('role') == 'user' ? 'selected' : '' }}>Khách hàng</option>
                    <option value="admin" {{ request('role') == 'admin' ? 'selected' : '' }}>Admin</option>
                </select>
            </div>

            <button type="submit" class="h-10 px-4 bg-gray-100 text-gray-700 font-bold rounded-lg hover:bg-gray-200 transition-all flex items-center justify-center">
                <i class="fa-solid fa-filter mr-2 text-gray-500"></i> Lọc
            </button>

            @if(request('q') || request('role'))
                <a href="{{ route('admin.users') }}" class="h-10 px-4 bg-white border border-gray-300 text-gray-500 font-bold rounded-lg hover:bg-gray-50 transition-all flex items-center justify-center" title="Xóa bộ lọc">
                    <i class="fa-solid fa-xmark"></i>
                </a>
            @endif
        </form>
    </div>

    @if(session('success'))
        <div class="mb-6 p-4 rounded-lg bg-green-50 border border-green-200 text-green-800 flex items-center shadow-sm">
            <i class="fa-solid fa-check-circle mr-3 text-xl"></i>
            <span class="font-medium">{{ session('success') }}</span>
        </div>
    @endif

    <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden">
        <div class="overflow-x-auto">
            @if($users->isEmpty())
                <div class="p-12 text-center flex flex-col items-center justify-center text-gray-500">
                    <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4">
                        <i class="fa-solid fa-users-slash text-3xl text-gray-400"></i>
                    </div>
                    <h3 class="text-lg font-medium text-gray-900">Không tìm thấy người dùng</h3>
                    <p class="text-sm mt-1">Thử thay đổi bộ lọc hoặc thêm mới.</p>
                </div>
            @else
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-brand-900">
                        <tr>
                            <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider w-10">#</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Thông tin cá nhân</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Liên hệ</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-brand-gold uppercase tracking-wider">Vai trò</th>
                            <th class="px-6 py-4 text-center text-xs font-bold text-brand-gold uppercase tracking-wider">Trạng thái</th>
                            <th class="px-6 py-4 text-right text-xs font-bold text-brand-gold uppercase tracking-wider">Hành động</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-50">
                        @foreach ($users as $user)
                        <tr class="hover:bg-gray-50 transition-colors group">
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ $loop->iteration + ($users->currentPage() - 1) * $users->perPage() }}</td>
                            
                            <td class="px-6 py-4">
                                <div class="flex items-center">
                                    <div class="h-10 w-10 rounded-full bg-brand-100 flex items-center justify-center text-brand-900 font-serif font-bold text-lg mr-3 shadow-sm border border-brand-200">
                                        {{ substr($user->name, 0, 1) }}
                                    </div>
                                    <div>
                                        <div class="text-sm font-bold text-gray-900">{{ $user->name }}</div>
                                        <div class="text-xs text-gray-500 font-mono">CCCD: {{ $user->cccd ?? '---' }}</div>
                                    </div>
                                </div>
                            </td>

                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900"><i class="fa-solid fa-envelope text-gray-400 mr-1 text-xs"></i> {{ $user->email }}</div>
                                <div class="text-sm text-gray-500 mt-1"><i class="fa-solid fa-phone text-gray-400 mr-1 text-xs"></i> {{ $user->phone ?? '---' }}</div>
                            </td>

                            <td class="px-6 py-4 whitespace-nowrap">
                                @if($user->role === 'admin')
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200">
                                        <i class="fa-solid fa-crown mr-1 text-[10px]"></i> Admin
                                    </span>
                                @else
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200">
                                        <i class="fa-solid fa-user mr-1"></i> Khách hàng
                                    </span>
                                @endif
                            </td>

                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium text-green-700 bg-green-50 border border-green-100">
                                    <span class="w-1.5 h-1.5 rounded-full bg-green-500 mr-1.5"></span> Online
                                </span>
                            </td>

                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <div class="flex items-center justify-end gap-2">
                                    <a href="{{ route('admin.user.sua', ['id' => $user->id]) }}" class="p-2 text-gray-400 hover:text-brand-gold hover:bg-yellow-50 rounded-lg transition-all" title="Sửa thông tin">
                                        <i class="fa-solid fa-pen-to-square"></i>
                                    </a>
                                    
                                    @if(Auth::id() !== $user->id) <a href="{{ route('admin.user.xoa', ['id' => $user->id]) }}" 
                                           onclick="return confirm('CẢNH BÁO: Xóa người dùng này sẽ xóa toàn bộ lịch sử đặt phòng của họ. Bạn có chắc chắn?')" 
                                           class="p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all" title="Xóa tài khoản">
                                            <i class="fa-solid fa-trash-can"></i>
                                        </a>
                                    @else
                                        <span class="p-2 text-gray-200 cursor-not-allowed" title="Không thể xóa chính mình"><i class="fa-solid fa-trash-can"></i></span>
                                    @endif
                                </div>
                            </td>
                        </tr>
                        @endforeach
                    </tbody>
                </table>
            @endif
        </div>
        
        <div class="bg-gray-50 px-6 py-4 border-t border-gray-200">
            {{ $users->withQueryString()->links() }}
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/users/sua.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Sửa Người dùng')
@section('header', 'Cập nhật tài khoản')

@section('content')
<div class="max-w-4xl mx-auto">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-serif font-bold text-gray-900">Sửa: {{ $user->name }}</h1>
        <a href="{{ route('admin.users') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="p-8">
            <form action="{{ route('admin.user.sua', ['id' => $user->id]) }}" method="POST">
                @csrf
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    
                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-gray-700 mb-2">Họ và Tên <span class="text-red-500">*</span></label>
                        <input type="text" name="name" value="{{ old('name', $user->name) }}" required
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all">
                        @error('name') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Email đăng nhập <span class="text-red-500">*</span></label>
                        <input type="email" name="email" value="{{ old('email', $user->email) }}" required
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all">
                        @error('email') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Số điện thoại</label>
                        <input type="text" name="phone" value="{{ old('phone', $user->phone) }}"
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all">
                        @error('phone') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Số CCCD/CMND</label>
                        <input type="text" name="cccd" value="{{ old('cccd', $user->cccd) }}"
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all">
                        @error('cccd') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Vai trò hệ thống</label>
                        <select name="role" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all cursor-pointer">
                            <option value="user" {{ old('role', $user->role) == 'user' ? 'selected' : '' }}>Khách hàng (User)</option>
                            <option value="admin" {{ old('role', $user->role) == 'admin' ? 'selected' : '' }}>Quản trị viên (Admin)</option>
                        </select>
                        @error('role') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Đổi mật khẩu</label>
                        <input type="password" name="password" placeholder="Để trống nếu không đổi"
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all bg-gray-50">
                        @error('password') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                </div>

                <div class="mt-8 pt-6 border-t border-gray-100 flex items-center justify-end gap-3">
                    <a href="{{ route('admin.users') }}" class="px-5 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition-all">
                        Hủy bỏ
                    </a>
                    <button type="submit" class="px-6 py-2.5 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all flex items-center">
                        <i class="fa-solid fa-check mr-2"></i> Cập nhật
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/admin/users/them.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Thêm Người dùng')
@section('header', 'Tạo tài khoản mới')

@section('content')
<div class="max-w-4xl mx-auto">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-serif font-bold text-gray-900">Thông tin tài khoản</h1>
        <a href="{{ route('admin.users') }}" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:border-brand-gold hover:text-brand-gold transition-all shadow-sm">
            <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
        </a>
    </div>

    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="p-8">
            <form action="{{ route('admin.user.store') }}" method="POST">
                @csrf
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    
                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-gray-700 mb-2">Họ và Tên <span class="text-red-500">*</span></label>
                        <input type="text" name="name" value="{{ old('name') }}" required placeholder="Ví dụ: Nguyễn Văn A"
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all">
                        @error('name') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Email đăng nhập <span class="text-red-500">*</span></label>
                        <input type="email" name="email" value="{{ old('email') }}" required placeholder="email@example.com"
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all">
                        @error('email') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Số điện thoại</label>
                        <input type="text" name="phone" value="{{ old('phone') }}" placeholder="0909xxxxxx"
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all">
                        @error('phone') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Số CCCD/CMND</label>
                        <input type="text" name="cccd" value="{{ old('cccd') }}" placeholder="12 số căn cước"
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all">
                        @error('cccd') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Vai trò hệ thống</label>
                        <select name="role" class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all cursor-pointer">
                            <option value="user" {{ old('role') == 'user' ? 'selected' : '' }}>Khách hàng (User)</option>
                            <option value="admin" {{ old('role') == 'admin' ? 'selected' : '' }}>Quản trị viên (Admin)</option>
                        </select>
                        @error('role') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">Mật khẩu <span class="text-red-500">*</span></label>
                        <input type="password" name="password" required placeholder="••••••••"
                               class="w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-gold focus:ring-brand-gold h-11 transition-all">
                        @error('password') <p class="text-red-500 text-xs mt-1">{{ $message }}</p> @enderror
                    </div>

                </div>

                <div class="mt-8 pt-6 border-t border-gray-100 flex items-center justify-end gap-3">
                    <a href="{{ route('admin.users') }}" class="px-5 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg font-bold hover:bg-gray-50 transition-all">
                        Hủy bỏ
                    </a>
                    <button type="submit" class="px-6 py-2.5 bg-brand-900 text-brand-gold rounded-lg font-bold hover:bg-gray-800 shadow-md transition-all flex items-center">
                        <i class="fa-solid fa-save mr-2"></i> Lưu Người Dùng
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/passwords/confirm.blade.php">
@extends('layouts.app')
@section('title', 'Xác nhận bảo mật')

<!-- Cập nhật: Sử dụng CSS và JS riêng cho các trang Password -->
{{-- @vite(['resources/css/password.css', 'resources/js/password.js']) --}}
{{-- Ghi chú: Bao gồm chung trong `layouts.app`. Comment để tránh tải thừa. --}}

@section('content')
<div class="login-wrapper">
    <!-- Background -->
    <div class="login-bg-container">
        <img src="{{ asset('uploads/home/home.png') }}" 
             onerror="this.src='https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?q=80&w=2070&auto=format&fit=crop'" 
             alt="Background" 
             class="login-bg-image">
        <div class="login-bg-overlay"></div>
    </div>

    <!-- Form Container -->
    <div class="login-container animate-fade-in-up">
        
        <!-- Header -->
        <div class="login-header">
            <div class="login-icon-wrapper">
                <i class="fa-solid fa-shield-halved"></i>
            </div>
            <h2 class="login-title">Xác nhận bảo mật</h2>
            <p class="login-subtitle">
                Vui lòng xác nhận mật khẩu của bạn trước khi tiếp tục thao tác này.
            </p>
        </div>

        <!-- Form Box -->
        <div class="login-card">
            <form class="login-form-content" method="POST" action="{{ route('password.confirm') }}">
                @csrf

                <!-- Password -->
                <div class="form-group">
                    <label for="password" class="form-label">Mật khẩu hiện tại</label>
                    <div class="input-group">
                        <div class="input-icon"><i class="fa-solid fa-lock"></i></div>
                        <input id="password" type="password" name="password" required autocomplete="current-password"
                               class="form-input @error('password') is-invalid @enderror"
                               placeholder="••••••••">
                    </div>
                    @error('password')
                        <p class="error-msg"><i class="fa-solid fa-circle-exclamation mr-1"></i> {{ $message }}</p>
                    @enderror
                </div>

                <!-- Submit Button -->
                <div class="form-action mt-4">
                    <button type="submit" class="btn-submit group">
                        <span class="btn-text">XÁC NHẬN NGAY</span>
                        <span class="btn-icon-wrapper">
                            <i class="fa-solid fa-check"></i>
                        </span>
                    </button>
                </div>

                <!-- Forgot Password Link -->
                @if (Route::has('password.request'))
                    <div class="form-footer-link text-center mt-3">
                        <a href="{{ route('password.request') }}" class="login-link text-sm">
                            Quên mật khẩu?
                        </a>
                    </div>
                @endif
            </form>
        </div>
        
        <p class="footer-text">
            &copy; {{ date('Y') }} Luxury Stay. Bảo mật tuyệt đối.
        </p>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/passwords/email.blade.php">
@extends('layouts.app')
@section('title', 'Khôi phục mật khẩu')

{{-- @vite(['resources/css/password.css', 'resources/js/password.js']) --}}
{{-- Ghi chú: `password.css`/`password.js` đã được include ở `layouts.app` để giữ nhất quán.
    Comment ở đây để tránh tải trùng; nếu cần thay đổi, hãy sửa `layouts.app`. --}}

@section('content')
<div class="login-wrapper">
    <!-- Background -->
    <div class="login-bg-container">
        <img src="{{ asset('uploads/home/home.png') }}" 
             onerror="this.src='https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?q=80&w=2070&auto=format&fit=crop'" 
             alt="Background" 
             class="login-bg-image">
        <div class="login-bg-overlay"></div>
    </div>

    <!-- Form Container -->
    <div class="login-container animate-fade-in-up">
        
        <!-- Header -->
        <div class="login-header">
            <div class="login-icon-wrapper">
                <i class="fa-solid fa-key"></i>
            </div>
            <h2 class="login-title">Quên mật khẩu?</h2>
            <p class="login-subtitle">
                Nhập email của bạn và chúng tôi sẽ gửi liên kết để đặt lại mật khẩu mới.
            </p>
        </div>

        <!-- Form Box -->
        <div class="login-card">
            @if (session('status'))
                <div class="alert alert-success mb-4 text-center p-3 rounded" style="background: rgba(16, 185, 129, 0.1); color: #047857; font-size: 0.9rem;">
                    <i class="fa-solid fa-circle-check mr-1"></i> {{ session('status') }}
                </div>
            @endif

            <form class="login-form-content" method="POST" action="{{ route('password.email') }}">
                @csrf

                <!-- Email -->
                <div class="form-group">
                    <label for="email" class="form-label">Địa chỉ Email đã đăng ký</label>
                    <div class="input-group">
                        <div class="input-icon"><i class="fa-regular fa-envelope"></i></div>
                        <input id="email" type="email" name="email" value="{{ old('email') }}" required autocomplete="email" autofocus
                               class="form-input @error('email') is-invalid @enderror"
                               placeholder="vidu@gmail.com">
                    </div>
                    @error('email')
                        <p class="error-msg"><i class="fa-solid fa-circle-exclamation mr-1"></i> {{ $message }}</p>
                    @enderror
                </div>

                <!-- Submit Button -->
                <div class="form-action mt-4">
                    <button type="submit" class="btn-submit group">
                        <span class="btn-text">GỬI LIÊN KẾT</span>
                        <span class="btn-icon-wrapper">
                            <i class="fa-regular fa-paper-plane"></i>
                        </span>
                    </button>
                </div>

                <!-- Back to Login -->
                <div class="divider-wrapper">
                    <div class="divider-line"></div>
                </div>
                
                <div class="text-center">
                    <a href="{{ route('login') }}" class="login-link">
                        <i class="fa-solid fa-arrow-left mr-1"></i> Quay lại Đăng nhập
                    </a>
                </div>
            </form>
        </div>
        
        <p class="footer-text">
            &copy; {{ date('Y') }} Luxury Stay. Hỗ trợ khách hàng 24/7.
        </p>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/passwords/reset.blade.php">
@extends('layouts.app')
@section('title', 'Cập nhật mật khẩu')

<!-- Cập nhật: Sử dụng CSS và JS riêng cho các trang Password -->
{{-- @vite(['resources/css/password.css', 'resources/js/password.js']) --}}
{{-- Ghi chú: `password.css` và `password.js` đã được include chung trong `layouts.app`.
    Đã comment để tránh tải trùng trên trang. Nếu cần riêng, bỏ comment này. --}}

@section('content')
<style>
    /* Fix lỗi icon đè chữ */
    .form-input {
        padding-left: 50px !important; /* Đẩy nội dung sang phải để không bị icon che */
    }
    .input-icon {
        pointer-events: none; /* Giúp click vào icon vẫn focus được input */
    }
</style>

<div class="login-wrapper">
    <!-- Background -->
    <div class="login-bg-container">
        <img src="{{ asset('uploads/home/home.png') }}" 
             onerror="this.src='https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?q=80&w=2070&auto=format&fit=crop'" 
             alt="Background" 
             class="login-bg-image">
        <div class="login-bg-overlay"></div>
    </div>

    <!-- Form Container -->
    <div class="login-container animate-fade-in-up">
        
        <!-- Header -->
        <div class="login-header">
            <div class="login-icon-wrapper">
                <i class="fa-solid fa-lock-open"></i>
            </div>
            <h2 class="login-title">Đặt lại mật khẩu</h2>
            <p class="login-subtitle">
                Vui lòng nhập mật khẩu mới cho tài khoản của bạn.
            </p>
        </div>

        <!-- Form Box -->
        <div class="login-card">
            <form class="login-form-content" method="POST" action="{{ route('password.update') }}">
                @csrf

                <input type="hidden" name="token" value="{{ $token }}">

                <!-- Email (Readonly) -->
                <div class="form-group">
                    <label for="email" class="form-label">Địa chỉ Email</label>
                    <div class="input-group">
                        <div class="input-icon"><i class="fa-regular fa-envelope"></i></div>
                        <input id="email" type="email" name="email" value="{{ $email ?? old('email') }}" required autocomplete="email" readonly
                               class="form-input readonly @error('email') is-invalid @enderror"
                               style="background-color: rgba(255, 255, 255, 0.05); cursor: not-allowed;">
                    </div>
                    @error('email')
                        <p class="error-msg"><i class="fa-solid fa-circle-exclamation mr-1"></i> {{ $message }}</p>
                    @enderror
                </div>

                <!-- Password -->
                <div class="form-group">
                    <label for="password" class="form-label">Mật khẩu mới</label>
                    <div class="input-group">
                        <div class="input-icon"><i class="fa-solid fa-lock"></i></div>
                        <input id="password" type="password" name="password" required autocomplete="new-password"
                               class="form-input @error('password') is-invalid @enderror"
                               placeholder="Nhập mật khẩu mới">
                    </div>
                    @error('password')
                        <p class="error-msg"><i class="fa-solid fa-circle-exclamation mr-1"></i> {{ $message }}</p>
                    @enderror
                </div>

                <!-- Confirm Password -->
                <div class="form-group">
                    <label for="password-confirm" class="form-label">Xác nhận mật khẩu</label>
                    <div class="input-group">
                        <div class="input-icon"><i class="fa-solid fa-check-double"></i></div>
                        <input id="password-confirm" type="password" name="password_confirmation" required autocomplete="new-password"
                               class="form-input"
                               placeholder="Nhập lại mật khẩu mới">
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="form-action mt-4">
                    <button type="submit" class="btn-submit group">
                        <span class="btn-text">ĐỔI MẬT KHẨU</span>
                        <span class="btn-icon-wrapper">
                            <i class="fa-solid fa-rotate"></i>
                        </span>
                    </button>
                </div>
            </form>
        </div>
        
        <p class="footer-text">
            &copy; {{ date('Y') }} Luxury Stay. Bảo mật tuyệt đối.
        </p>
    </div>
</div>
@endsection
</file>

<file path="resources/views/auth/register.blade.php">
@extends('layouts.app')
@section('title', 'Đăng ký thành viên')


{{-- @vite(['resources/css/register.css']) --}}
{{-- Ghi chú: `register.css` đã được include chung trong `layouts.app` (Vite manifest).
    Đã comment lại để tránh tải nhiều lần trên cùng một trang. Nếu muốn tách riêng,
    bỏ comment để kích hoạt lại. --}}

@section('content')
<div class="register-wrapper">
    
    <!-- Background -->
    <div class="register-bg-container">
        {{-- Sử dụng ảnh local của bạn, có fallback ảnh mạng --}}
        <img src="{{ asset('uploads/home/home.png') }}" 
             onerror="this.src='https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?q=80&w=2070&auto=format&fit=crop'" 
             alt="Background" 
             class="register-bg-image">
        <div class="register-bg-overlay"></div>
    </div>

    <!-- Container -->
    <div class="register-container animate-fade-in-up">
        
        <!-- Header -->
        <div class="register-header">
            <div class="register-icon-wrapper">
                <i class="fa-solid fa-user-plus"></i>
            </div>
            <h2 class="register-title">Tạo tài khoản mới</h2>
            <p class="register-subtitle">
                Đã là thành viên?
                <a href="{{ route('login') }}" class="register-link">Đăng nhập ngay</a>
            </p>
        </div>

        <!-- Form Box -->
        <div class="register-card">
            <!-- Dải màu trang trí trên cùng -->
            <div class="card-deco-line"></div>

            <form class="register-form-content" action="{{ route('register') }}" method="POST" id="register-form">
                @csrf

                <!-- Name -->
                <div class="form-group">
                    <label for="name" class="form-label">Họ và tên</label>
                    <div class="input-group">
                        <div class="input-icon"><i class="fa-regular fa-user"></i></div>
                        <input id="name" name="name" type="text" autocomplete="name" required 
                               class="form-input @error('name') is-invalid @enderror"
                               value="{{ old('name') }}" placeholder="Ví dụ: Nguyễn Văn A">
                    </div>
                    @error('name')
                        <p class="error-msg"><i class="fa-solid fa-circle-exclamation mr-1"></i> {{ $message }}</p>
                    @enderror
                </div>

                <!-- Email -->
                <div class="form-group">
                    <label for="email" class="form-label">Email đăng nhập</label>
                    <div class="input-group">
                        <div class="input-icon"><i class="fa-regular fa-envelope"></i></div>
                        <input id="email" name="email" type="email" autocomplete="email" required 
                               class="form-input @error('email') is-invalid @enderror"
                               value="{{ old('email') }}" placeholder="vidu@gmail.com">
                    </div>
                    @error('email')
                        <p class="error-msg"><i class="fa-solid fa-circle-exclamation mr-1"></i> {{ $message }}</p>
                    @enderror
                </div>

                <!-- Password -->
                <div class="form-group">
                    <label for="password" class="form-label">Mật khẩu</label>
                    <div class="input-group">
                        <div class="input-icon"><i class="fa-solid fa-lock"></i></div>
                        <input id="password" name="password" type="password" autocomplete="new-password" required 
                               class="form-input @error('password') is-invalid @enderror"
                               placeholder="Tối thiểu 8 ký tự">
                    </div>
                    @error('password')
                        <p class="error-msg"><i class="fa-solid fa-circle-exclamation mr-1"></i> {{ $message }}</p>
                    @enderror
                </div>

                <!-- Confirm Password -->
                <div class="form-group">
                    <label for="password-confirm" class="form-label">Xác nhận mật khẩu</label>
                    <div class="input-group">
                        <div class="input-icon"><i class="fa-solid fa-check-double"></i></div>
                        <input id="password-confirm" name="password_confirmation" type="password" autocomplete="new-password" required 
                               class="form-input"
                               placeholder="Nhập lại mật khẩu">
                    </div>
                </div>

                <!-- Terms -->
                <div class="form-check-group">
                    <div class="checkbox-wrapper">
                        <input id="terms" name="terms" type="checkbox" required class="checkbox-custom">
                        <label for="terms" class="checkbox-label">
                            Tôi đồng ý với <a href="#" class="link-term">Điều khoản dịch vụ</a> và <a href="#" class="link-term">Chính sách bảo mật</a>.
                        </label>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="form-action">
                    <button type="submit" class="btn-submit group" id="btn-register">
                        <span class="btn-icon-wrapper">
                            <i class="fa-solid fa-user-plus"></i>
                        </span>
                        <span class="btn-text">ĐĂNG KÝ TÀI KHOẢN</span>
                        <!-- Loading Spinner -->
                        <span class="btn-loader hidden">
                            <i class="fa-solid fa-circle-notch fa-spin"></i>
                        </span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

{{-- @vite(['resources/js/register.js']) --}}
{{-- Ghi chú: `register.js` đã được include trong `layouts.app` khi build assets.
    Comment để tránh tải trùng; giữ dòng comment để dễ khôi phục. --}}
@endsection
</file>

<file path="resources/views/client/booking/history.blade.php">
@extends('layouts.app')
@section('title', 'Lịch sử đặt phòng')

<!-- Gọi CSS -->
{{-- Ghi chú: `home.css` đã được include trong `layouts.app` để tránh lặp lại;
    trước đây chúng ta gọi cả `home.css` và `history.css` tại đây dẫn tới tải thừa.
    Dòng dưới đây là bản cũ (đã comment) để bạn dễ khôi phục nếu cần: --}}
{{-- @vite(['resources/css/client/home.css', 'resources/css/client/history.css']) --}}
@vite(['resources/css/client/history.css'])

@section('content')
<div class="history-page-wrapper">
    <div class="container">
        
        <!-- Header -->
        <div class="history-header">
            <div>
                <h1 class="history-title">Đơn đặt phòng của tôi</h1>
                <p class="history-desc">Quản lý và xem lại lịch sử các chuyến đi nghỉ dưỡng của bạn.</p>
            </div>
            <a href="{{ route('phong.danh-sach') }}" class="btn-new-booking group">
                <i class="fa-solid fa-plus"></i> Đặt phòng mới
            </a>
        </div>

        @if($bookings->isEmpty())
            <!-- Trạng thái trống -->
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fa-regular fa-calendar-xmark"></i>
                </div>
                <h3 class="empty-title">Chưa có đơn đặt phòng nào</h3>
                <p class="empty-desc">
                    Bạn chưa thực hiện đặt phòng nào tại hệ thống của chúng tôi. Hãy khám phá ngay những căn phòng tuyệt vời đang chờ đón bạn.
                </p>
                <a href="{{ route('phong.danh-sach') }}" class="btn-cta-primary">
                    Đặt phòng ngay
                </a>
            </div>
        @else
            <!-- Danh sách đơn hàng -->
            <div class="booking-list">
                @foreach($bookings as $booking)
                    @php
                        // Cấu hình trạng thái & Badge màu sắc (CSS Class đã định nghĩa)
                        $statusMap = [
                            'pending'   => ['class' => 'status-pending', 'label' => 'Chờ duyệt', 'icon' => 'fa-clock'],
                            'confirmed' => ['class' => 'status-confirmed', 'label' => 'Đã xác nhận', 'icon' => 'fa-check-circle'],
                            'completed' => ['class' => 'status-completed', 'label' => 'Hoàn thành', 'icon' => 'fa-star'],
                            'cancelled' => ['class' => 'status-cancelled', 'label' => 'Đã hủy', 'icon' => 'fa-circle-xmark'],
                        ];
                        
                        $statusKey = $booking->trang_thai ?? 'pending';
                        $st = $statusMap[$statusKey] ?? $statusMap['pending'];

                        // Lấy thông tin chi tiết (1 đơn 1 phòng)
                        $detail = $booking->chiTietDatPhongs->first();
                        $roomInfo = $detail ? $detail->loaiPhong : null;
                    @endphp

                    <div class="booking-card">
                        
                        <!-- Header Card -->
                        <div class="card-header">
                            <div style="display: flex; gap: 1rem; align-items: center;">
                                <span class="booking-id">#BK-{{ $booking->id }}</span>
                                <span class="booking-date">
                                    <i class="fa-regular fa-calendar-check"></i>
                                    Đặt ngày {{ $booking->created_at->format('d/m/Y') }}
                                </span>
                            </div>
                            
                            <div style="display: flex; gap: 0.5rem; align-items: center;">
                                <!-- Badge Trạng thái Đơn -->
                                <span class="status-badge {{ $st['class'] }}">
                                    <i class="fa-solid {{ $st['icon'] }}"></i> {{ $st['label'] }}
                                </span>

                                <!-- Badge Thanh toán -->
                                @if($booking->payment_status == 'paid')
                                    <span class="status-badge status-completed" title="Đã thanh toán">
                                        <i class="fa-solid fa-money-bill-wave"></i> Đã TT
                                    </span>
                                @elseif($booking->payment_status == 'awaiting_payment')
                                    <span class="status-badge status-pending" title="Chờ thanh toán Online">
                                        <i class="fa-solid fa-hourglass-half"></i> Chờ TT
                                    </span>
                                @else
                                    <span class="status-badge" style="background: rgba(255,255,255,0.1); color: var(--text-muted);" title="Thanh toán sau">
                                        <i class="fa-regular fa-circle"></i> Chưa TT
                                    </span>
                                @endif
                            </div>
                        </div>

                        <!-- Body Card -->
                        <div class="card-body">
                            <!-- Ảnh -->
                            @if($roomInfo)
                                <img src="{{ $roomInfo->hinh_anh ? asset($roomInfo->hinh_anh) : asset('uploads/home/phongdefault.png') }}" 
                                     class="room-thumb" alt="{{ $roomInfo->ten_loai_phong }}">
                            @else
                                <div class="room-thumb" style="display: flex; align-items: center; justify-content: center; background: #333; color: #666;">
                                    <i class="fa-solid fa-image fa-2x"></i>
                                </div>
                            @endif

                            <!-- Thông tin -->
                            <div class="room-info">
                                <h3>{{ $roomInfo ? $roomInfo->ten_loai_phong : 'Thông tin phòng không khả dụng' }}</h3>
                                <ul class="room-detail-list">
                                    <li>
                                        <i class="fa-regular fa-calendar-plus"></i> 
                                        Nhận: {{ \Carbon\Carbon::parse($booking->ngay_den)->format('d/m/Y') }}
                                    </li>
                                    <li>
                                        <i class="fa-regular fa-calendar-minus"></i> 
                                        Trả: {{ \Carbon\Carbon::parse($booking->ngay_di)->format('d/m/Y') }}
                                    </li>
                                    <li>
                                        <i class="fa-solid fa-credit-card"></i> 
                                        {{ $booking->payment_method == 'online' ? 'Thanh toán Online (VNPay)' : 'Thanh toán tại khách sạn' }}
                                    </li>
                                </ul>
                            </div>

                            <!-- Giá & Action -->
                            <div class="card-actions">
                                <div>
                                    <span class="price-label">Tổng thanh toán</span>
                                    <span class="total-price">{{ number_format($booking->tong_tien, 0, ',', '.') }}đ</span>
                                </div>
                                <a href="{{ route('bookings.invoice', $booking->id) }}" class="btn-view-detail">
                                    Xem chi tiết <i class="fa-solid fa-arrow-right"></i>
                                </a>
                            </div>
                        </div>

                    </div>
                @endforeach
            </div>

                {{-- Pagination --}}
                @include('partials.pagination', ['paginator' => $bookings])
        @endif
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/booking/invoice.blade.php">
@extends($layout ?? 'layouts.app')
@section('title', 'Chi tiết hóa đơn')

@Vite(['resources/css/client/invoice.css', 'resources/js/client/invoice.js'])

@section('content')
<div class="invoice-page-wrapper">
    <!-- Print-only view; no server-side PDF injection -->
    <div class="invoice-container">
        
        <!-- Nút quay lại -->
        <div class="mb-6">
            {{-- Thẻ a đã được xóa logic JS inline và dùng ID để lắng nghe trong invoice.js --}}
            <a href="{{ url()->previous() }}" id="back-to-previous" class="back-link">
                <i class="fa-solid fa-arrow-left mr-2"></i> Quay lại
            </a>
        </div>

        <!-- Card Hóa đơn -->
        <div class="invoice-card">
            
            <!-- Header Hóa đơn -->
            <div class="invoice-header">
                <!-- Họa tiết nền mờ -->
                <div class="header-pattern"></div>
                
                <h1 class="header-title">HÓA ĐƠN DỊCH VỤ</h1>
                <p class="header-subtitle">Luxury Stay Hotel & Resort</p>
                
                <!-- Mã hóa đơn -->
                <div class="invoice-code">
                    #{{ $booking->hoaDon ? $booking->hoaDon->ma_hoa_don : 'TMP-'.$booking->id }}
                </div>
            </div>

            <div class="invoice-body">
                @if(isset($error))
                    <div class="mb-4 p-3 rounded-md bg-red-50 text-red-700 text-sm">
                        {{ $error }}
                    </div>
                @endif
                <!-- Thông tin khách hàng & Đơn hàng -->
                <div class="detail-grid">
                    <div>
                        <h4 class="detail-heading">Khách hàng</h4>
                        <p class="customer-name">{{ $booking->user->name }}</p>
                        <p class="info-item"><i class="fa-regular fa-envelope"></i> {{ $booking->user->email }}</p>
                        <p class="info-item"><i class="fa-solid fa-phone"></i> {{ $booking->user->phone ?? 'Chưa cập nhật SĐT' }}</p>
                    </div>
                    <div class="booking-info">
                        <h4 class="detail-heading">Chi tiết đặt phòng</h4>
                        <p>
                            <strong>Ngày đặt:</strong> {{ $booking->created_at->format('d/m/Y H:i') }}
                        </p>
                        <p>
                            <strong>Nhận phòng:</strong> {{ \Carbon\Carbon::parse($booking->ngay_den)->format('d/m/Y') }}
                        </p>
                        <p class="mb-2">
                            <strong>Trả phòng:</strong> {{ \Carbon\Carbon::parse($booking->ngay_di)->format('d/m/Y') }}
                        </p>
                        <div class="payment-method-tag">
                            <i class="fa-solid fa-credit-card mr-1.5"></i>
                            {{ $booking->payment_method == 'online' ? 'Thanh toán Online (VNPay)' : 'Thanh toán tại khách sạn' }}
                        </div>
                    </div>
                </div>

                <!-- Bảng chi tiết dịch vụ -->
                <div class="service-table-wrapper">
                    <h4 class="detail-heading">Dịch vụ sử dụng</h4>
                    <div class="table-responsive">
                        <table class="invoice-table">
                            <thead>
                                <tr>
                                    <th>Hạng phòng</th>
                                    <th class="text-center">Số đêm</th>
                                    <th class="text-right">Đơn giá</th>
                                    <th class="text-right">Thành tiền</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach($booking->chiTietDatPhongs as $detail)
                                <tr>
                                    <td class="font-medium">
                                        {{ $detail->loaiPhong->ten_loai_phong }}
                                        @if($detail->phong)
                                            <div class="room-detail-info">
                                                <i class="fa-solid fa-door-open mr-1"></i> Phòng {{ $detail->phong->so_phong }}
                                            </div>
                                        @else
                                            <div class="room-detail-pending">
                                                <i class="fa-solid fa-hourglass-half mr-1"></i> Đang xếp phòng
                                            </div>
                                        @endif
                                    </td>
                                    <td class="text-center">{{ \Carbon\Carbon::parse($booking->ngay_den)->diffInDays($booking->ngay_di) }}</td>
                                    <td class="text-right">{{ number_format($detail->don_gia, 0, ',', '.') }}đ</td>
                                    <td class="text-right table-amount">{{ number_format($detail->thanh_tien, 0, ',', '.') }}đ</td>
                                </tr>
                                @endforeach
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tổng kết tài chính -->
                <div class="summary-container">
                    <div class="summary-box">
                        
                        <div class="summary-row">
                            <span>Tạm tính</span>
                            <span class="font-medium">{{ number_format($booking->chiTietDatPhongs->sum('thanh_tien'), 0, ',', '.') }}đ</span>
                        </div>
                        
                        @if($booking->discount_amount > 0)
                        <div class="summary-row summary-discount">
                            <span>Giảm giá ({{ $booking->promotion_code }})</span>
                            <span>-{{ number_format($booking->discount_amount, 0, ',', '.') }}đ</span>
                        </div>
                        @endif
                        
                        <div class="summary-separator"></div>
                        
                        <div class="summary-total">
                            <span class="total-label">Tổng thanh toán</span>
                            <span class="total-amount">{{ number_format($booking->tong_tien, 0, ',', '.') }}đ</span>
                        </div>
                        
                        <!-- Trạng thái thanh toán (Con dấu) -->
                        <div class="status-stamp-wrapper">
                            @if($booking->payment_status == 'paid')
                                <div class="status-stamp status-paid">
                                    ĐÃ THANH TOÁN
                                </div>
                            @elseif($booking->payment_status == 'awaiting_payment')
                                <div class="status-stamp status-awaiting">
                                    CHỜ THANH TOÁN
                                </div>
                            @else
                                <div class="status-stamp status-unpaid">
                                    CHƯA THANH TOÁN
                                </div>
                            @endif
                        </div>
                    </div>
                </div>

                <!-- Footer Hóa đơn -->
                <div class="invoice-footer">
                    <p class="footer-highlight">Cảm ơn quý khách đã lựa chọn Luxury Stay Hotel & Resort.</p>
                    <p>Mọi thắc mắc xin vui lòng liên hệ hotline: <strong class="footer-highlight">1900 1234</strong> hoặc email: <span class="footer-brand">support@luxurystay.com</span></p>
                    <p class="footer-italic">Hóa đơn điện tử này có giá trị như hóa đơn giấy.</p>
                </div>
            </div>
        </div>

        <!-- Nút In (Ẩn khi in) -->
        <div class="print-button-container print:hidden">
            <div class="inline-flex gap-3">
                {{-- Nút In đã được xóa logic JS inline và dùng ID để lắng nghe trong invoice.js --}}
                <button id="print-invoice-btn" class="print-button">
                    <i class="fa-solid fa-print"></i> In hóa đơn
                </button>
            </div>
        </div>
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/contact/index.blade.php">
@extends('layouts.app')
@section('title', 'Liên hệ - Luxury Stay')


@section('content')

<!-- 1. HERO BANNER -->
<div class="contact-hero">
    <img src="{{ asset('uploads/home/home.png') }}" alt="Contact Luxury Stay" class="contact-hero-bg">
    <div class="banner-overlay"></div>
    
    <div class="contact-hero-content">
        <span class="contact-subtitle">Hỗ trợ khách hàng</span>
        <h1 class="contact-title">Liên hệ với chúng tôi</h1>
    </div>
</div>

<!-- 2. CONTACT CONTENT -->
<section class="section-contact">
    <div class="container">
        <div class="contact-grid">
            
            <!-- Cột trái: Thông tin liên hệ -->
            <div class="contact-info-wrapper fade-up">
                
                <!-- Card 1: Thông tin khách sạn -->
                <div class="contact-card">
                    <h3><i class="fa-solid fa-hotel"></i> Luxury Stay Hotel</h3>
                    <ul class="contact-list">
                        <li>
                            <i class="fa-solid fa-location-dot"></i>
                            <span>Long Xuyên, An Giang, Việt Nam</span>
                        </li>
                        <li>
                            <i class="fa-solid fa-phone"></i>
                            <a href="tel:+84792008096">+84 792 008 096</a>
                        </li>
                        <li>
                            <i class="fa-solid fa-envelope"></i>
                            <a href="mailto:booking@luxurystay.com">booking@luxurystay.com</a>
                        </li>
                        <li>
                            <i class="fa-solid fa-clock"></i>
                            <span>Phục vụ 24/7</span>
                        </li>
                    </ul>
                </div>

                <!-- Card 2: Thông tin Developer (Cập nhật theo yêu cầu) -->
                <div class="contact-card">
                    <h3><i class="fa-solid fa-code"></i> Đội ngũ phát triển</h3>
                    <ul class="contact-list">
                        <li>
                            <i class="fa-solid fa-user"></i>
                            <strong>Trương Phước Giàu</strong>
                        </li>
                        <li>
                            <i class="fa-solid fa-graduation-cap"></i>
                            <span>Sinh viên khóa 23DH - ĐH An Giang</span>
                        </li>
                        <li>
                            <i class="fa-solid fa-laptop-code"></i>
                            <span>Ngành Công nghệ thông tin</span>
                        </li>
                        <li>
                            <i class="fa-solid fa-envelope"></i>
                            <a href="mailto:giaudeptrainhat@gmail.com">giaudeptrainhat@gmail.com</a>
                        </li>
                    </ul>
                </div>

            </div>

            <!-- Cột phải: Form liên hệ -->
            <div class="contact-form-card fade-up">
                <div class="form-header">
                    <h2>Gửi tin nhắn</h2>
                    <p>Chúng tôi luôn sẵn sàng lắng nghe ý kiến của bạn. Vui lòng điền vào biểu mẫu dưới đây.</p>
                </div>

                <form id="contact-form">
                    <div class="form-group">
                        <label for="contact-name" class="form-label">Họ và tên</label>
                        <input type="text" id="contact-name" class="form-input" placeholder="Nhập họ tên của bạn..." required>
                    </div>

                    <div class="form-group">
                        <label for="contact-email" class="form-label">Email</label>
                        <input type="email" id="contact-email" class="form-input" placeholder="example@email.com" required>
                    </div>

                    <div class="form-group">
                        <label for="contact-message" class="form-label">Nội dung tin nhắn</label>
                        <textarea id="contact-message" rows="5" class="form-textarea" placeholder="Bạn cần hỗ trợ gì?..." required></textarea>
                    </div>

                    <button type="submit" id="contact-submit" class="btn-submit">
                        Gửi liên hệ <i class="fa-solid fa-paper-plane"></i>
                    </button>
                </form>
            </div>

        </div>
    </div>
</section>

<!-- 3. MAP SECTION -->
<div class="section-map">
    <!-- Nhúng Google Map iframe -->
    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3924.627295881372!2d105.43233897489569!3d10.371655866528752!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x310a731e7546e26b%3A0x826c65c40639a041!2zVHLGsOG7nW5nIMSQ4bqhaSBo4buNYyBBbiBHaWFuZw!5e0!3m2!1svi!2s!4v1709224856789!5m2!1svi!2s" 
            width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
</div>

@endsection
</file>

<file path="resources/views/client/notifications/index.blade.php">
@extends('layouts.app')
@section('title', 'Thông báo của tôi')


@section('content')
<div class="notify-page-wrapper">
    <div class="container">
        
        <!-- Header -->
        <div class="notify-header">
            <h1 class="notify-title">
                <i class="fa-solid fa-bell"></i> Thông báo của bạn
            </h1>
            {{-- Hiển thị số lượng chưa đọc --}}
            @if(Auth::check() && Auth::user()->unreadNotifications->count() > 0)
                <span class="badge-unread">
                    {{ Auth::user()->unreadNotifications->count() }} tin mới
                </span>
            @endif
        </div>

        @if($notifications->isEmpty())
            <!-- Trạng thái trống -->
            <div class="empty-state animate-fade-in-up">
                <div class="empty-icon">
                    <i class="fa-regular fa-bell-slash"></i>
                </div>
                <h3 class="empty-title">Hộp thư trống</h3>
                <p class="empty-desc">Bạn hiện không có thông báo mới nào.</p>
                <a href="{{ route('trang_chu') }}" class="btn btn-outline" style="margin-top: 1.5rem;">Về trang chủ</a>
            </div>
        @else
            <!-- Toolbar -->
            <div class="notify-toolbar">
                <div class="toolbar-left">
                    <label class="checkbox-label">
                        <input type="checkbox" id="select-all-notifications" class="custom-checkbox" />
                        <span>Chọn tất cả</span>
                    </label>
                    <button id="bulk-delete-btn" 
                            data-route="{{ route('notifications.deleteMultiple') }}" 
                            class="btn-bulk-delete" 
                            disabled> 
                        <i class="fa-solid fa-trash-can"></i> Xóa đã chọn 
                    </button>
                </div>
                <div class="notify-count">
                    Tổng: <strong>{{ $notifications->total() }}</strong> thông báo
                </div>
            </div>

            <!-- Danh sách thông báo -->
            <div class="notify-list" id="notification-list">
                @foreach($notifications as $notification)
                    @php
                        $data = $notification->data;
                        $isUnread = is_null($notification->read_at);
                        $statusClass = $isUnread ? 'unread' : 'read';
                        $time = $notification->created_at->diffForHumans();
                    @endphp

                    <div class="notify-item {{ $statusClass }}" data-id="{{ $notification->id }}">
                        <!-- Checkbox -->
                        <div class="pt-1">
                            <input type="checkbox" class="notification-checkbox custom-checkbox" data-id="{{ $notification->id }}" />
                        </div>

                        <!-- Icon -->
                        <div class="notify-icon-box">
                            <i class="fa-solid {{ $data['icon'] ?? 'fa-bell' }}"></i>
                        </div>
                        
                        <!-- Content -->
                        <div class="notify-content">
                            <p class="notify-text">
                                {{ $data['message'] }}
                            </p>
                            
                            <div class="notify-meta">
                                @if(isset($data['booking_id']))
                                    <span title="Mã đơn hàng"><i class="fa-solid fa-hashtag"></i> BK-{{ $data['booking_id'] }}</span>
                                @endif
                                <span title="Thời gian"><i class="fa-regular fa-clock"></i> {{ $time }}</span>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="notify-actions">
                            @if(isset($data['booking_id']))
                            <a href="{{ route('bookings.invoice', $data['booking_id']) }}" class="btn-view-detail">
                                <span>Xem chi tiết</span> <i class="fa-solid fa-arrow-right"></i>
                            </a>
                            @endif
                        </div>
                    </div>
                @endforeach
            </div>

            {{-- Phân trang: dùng partial để tái sử dụng style/logic --}}
            @include('partials.pagination', ['paginator' => $notifications])
        @endif
    </div>
</div>
@endsection
</file>

<file path="resources/css/app.css">
@import 'tailwindcss';

@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../storage/framework/views/*.php';
@source '../**/*.blade.php';
@source '../**/*.js';

@theme {
    --font-sans: 'Instrument Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
        'Segoe UI Symbol', 'Noto Color Emoji';
}
</file>

<file path="resources/css/client/booking.css">
/* =========================================
   BOOKING & SUCCESS PAGES (Luxury Dark)
   ========================================= */


/* --- 1. LAYOUT --- */

.booking-page-wrapper {
    padding-top: 3rem;
    padding-bottom: 6rem;
    min-height: 80vh;
}

.booking-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
}

@media (min-width: 1024px) {
    .booking-layout {
        grid-template-columns: 1fr 380px;
        /* Form trái - Summary phải */
        gap: 3rem;
    }
}

.page-header-center {
    text-align: center;
    margin-bottom: 3rem;
}

.page-title {
    font-family: var(--font-serif);
    font-size: 2.5rem;
    color: var(--white);
    margin-bottom: 0.5rem;
}

.page-desc {
    color: var(--text-muted);
    font-size: 1rem;
}


/* --- 2. BOOKING CARD (General) --- */

.booking-card {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.step-header {
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--border-light);
    padding-bottom: 1.5rem;
    margin-bottom: 1.5rem;
}

.step-number {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: var(--primary-gold);
    color: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    margin-right: 1rem;
    font-family: monospace;
    font-size: 1rem;
}

.step-title {
    font-family: var(--font-serif);
    font-size: 1.25rem;
    color: var(--white);
    font-weight: 600;
    margin: 0;
}


/* --- 3. CUSTOMER INFO --- */

.info-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
}

@media (min-width: 768px) {
    .info-grid {
        grid-template-columns: 1fr 1fr;
    }
}

.info-label {
    display: block;
    font-size: 0.75rem;
    text-transform: uppercase;
    color: var(--text-muted);
    font-weight: 700;
    margin-bottom: 0.5rem;
    letter-spacing: 0.5px;
}

.info-value-box {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    padding: 0.8rem 1rem;
    color: var(--white);
    font-weight: 500;
}

.info-note {
    font-size: 0.85rem;
    color: var(--text-muted);
    font-style: italic;
    margin-top: 0.5rem;
}

.info-note a {
    color: var(--primary-gold);
    text-decoration: none;
}

.info-note a:hover {
    text-decoration: underline;
}


/* --- 4. PROMO CODE --- */

.promo-input-group {
    display: flex;
    gap: 0.5rem;
}

.promo-input {
    flex: 1;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-light);
    color: var(--white);
    padding: 0.7rem 1rem;
    border-radius: var(--radius-md);
    text-transform: uppercase;
    outline: none;
}

.promo-input:focus {
    border-color: var(--primary-gold);
}

.btn-apply {
    background: var(--primary-gold);
    color: #000;
    font-weight: 700;
    padding: 0 1.5rem;
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: 0.3s;
}

.btn-apply:hover {
    background: var(--primary-hover);
}

.btn-apply:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.promo-msg {
    font-size: 0.9rem;
    margin-top: 0.5rem;
    font-weight: 500;
}

.promo-msg.success {
    color: #10b981;
}

.promo-msg.error {
    color: #ef4444;
}


/* --- 5. PAYMENT METHODS --- */

.payment-option {
    display: flex;
    align-items: center;
    padding: 1.5rem;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.3s;
    background: rgba(255, 255, 255, 0.02);
    margin-bottom: 1rem;
    position: relative;
}

.payment-option:hover {
    background: rgba(205, 164, 94, 0.05);
    border-color: rgba(205, 164, 94, 0.5);
}


/* Alpine JS sẽ toggle class này hoặc border-color */

.payment-option.selected {
    border-color: var(--primary-gold);
    background: rgba(205, 164, 94, 0.1);
    box-shadow: 0 0 15px rgba(205, 164, 94, 0.1);
}

.radio-custom {
    appearance: none;
    width: 20px;
    height: 20px;
    border: 2px solid var(--text-muted);
    border-radius: 50%;
    margin-right: 1rem;
    position: relative;
}

.radio-custom:checked {
    border-color: var(--primary-gold);
}

.radio-custom:checked::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 10px;
    height: 10px;
    background: var(--primary-gold);
    border-radius: 50%;
}

.payment-info {
    flex: 1;
}

.payment-title {
    display: block;
    font-weight: 700;
    color: var(--white);
    font-size: 1.1rem;
}

.payment-desc {
    display: block;
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-top: 0.25rem;
}

.payment-icon {
    font-size: 1.5rem;
    color: var(--text-muted);
    opacity: 0.5;
}


/* --- 6. SUMMARY CARD (Sticky) --- */

.summary-card {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    padding: 2rem;
    position: sticky;
    top: 100px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
}

.summary-title {
    text-align: center;
    font-family: var(--font-serif);
    color: var(--white);
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-light);
    margin-bottom: 1.5rem;
}

.summary-room-info {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.summary-thumb {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-light);
}

.summary-room-name {
    font-weight: 700;
    color: var(--white);
    margin: 0 0 0.25rem 0;
    line-height: 1.3;
}

.summary-room-guest {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.summary-dates {
    background: rgba(255, 255, 255, 0.05);
    padding: 1rem;
    border-radius: var(--radius-md);
    margin-bottom: 1.5rem;
    font-size: 0.9rem;
}

.date-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.date-col {
    text-align: left;
}

.date-col.right {
    text-align: right;
}

.date-label {
    display: block;
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.date-value {
    font-weight: 600;
    color: var(--white);
    display: block;
}

.date-arrow {
    color: var(--primary-gold);
}

.stay-duration {
    display: block;
    text-align: center;
    margin-top: 0.8rem;
    padding-top: 0.8rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--primary-gold);
    font-weight: 600;
    font-size: 0.85rem;
}

.summary-totals {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
    margin-bottom: 2rem;
    font-size: 0.95rem;
}

.total-row {
    display: flex;
    justify-content: space-between;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
}

.total-row span:last-child {
    color: var(--white);
}

.total-row.discount {
    color: #ef4444;
}

.total-row.discount span:last-child {
    color: #ef4444;
    font-weight: 600;
}

.divider-dashed {
    border-top: 1px dashed var(--border-light);
    margin: 1rem 0;
}

.final-total {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--white);
}

.final-price {
    font-size: 1.5rem;
    color: var(--primary-gold);
    font-family: var(--font-serif);
}

.btn-confirm-booking {
    width: 100%;
    background: var(--primary-gold);
    color: #000;
    font-weight: 700;
    padding: 1rem;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: 0.3s;
    text-transform: uppercase;
    font-size: 0.9rem;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
}

.btn-confirm-booking:hover {
    background: var(--primary-hover);
    transform: translateY(-2px);
    box-shadow: 0 0 20px rgba(205, 164, 94, 0.4);
}

.terms-text {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-align: center;
    margin-top: 1rem;
}

.terms-text a {
    color: var(--primary-gold);
}


/* --- 7. SUCCESS PAGE --- */

.success-wrapper {
    min-height: 80vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4rem 1rem;
}

.success-card {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-top: 4px solid var(--primary-gold);
    border-radius: var(--radius-lg);
    padding: 3rem 2rem;
    text-align: center;
    max-width: 500px;
    width: 100%;
    position: relative;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}


/* Success Animation Icon */

.success-icon-wrapper {
    width: 80px;
    height: 80px;
    margin: 0 auto 2rem;
    background: rgba(16, 185, 129, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.success-icon-wrapper i {
    font-size: 3rem;
    color: #10b981;
}

.success-icon-wrapper::after {
    content: '';
    position: absolute;
    inset: -5px;
    border-radius: 50%;
    border: 1px solid rgba(16, 185, 129, 0.3);
    animation: ping 2s infinite;
}

@keyframes ping {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    100% {
        transform: scale(1.5);
        opacity: 0;
    }
}

.success-title {
    font-family: var(--font-serif);
    font-size: 2rem;
    color: var(--white);
    margin-bottom: 0.5rem;
}

.success-msg {
    color: var(--text-muted);
    margin-bottom: 2rem;
}

.order-code-box {
    background: rgba(205, 164, 94, 0.1);
    border: 1px dashed var(--border-gold);
    padding: 1.5rem;
    border-radius: var(--radius-md);
    margin-bottom: 2rem;
    position: relative;
}

.code-label {
    display: block;
    font-size: 0.8rem;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
}

.code-value {
    font-family: monospace;
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--primary-gold);
    letter-spacing: 2px;
}

.btn-group-vertical {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.btn-view-order {
    display: block;
    width: 100%;
    padding: 1rem;
    background: var(--bg-body);
    border: 1px solid var(--border-light);
    color: var(--white);
    text-decoration: none;
    border-radius: 50px;
    font-weight: 600;
    transition: 0.3s;
}

.btn-view-order:hover {
    border-color: var(--primary-gold);
    color: var(--primary-gold);
}


/* --- 8. MODAL (VNPAY) --- */

.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
}

.modal-content {
    background: #242424;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    width: 100%;
    max-width: 400px;
    padding: 2rem;
    text-align: center;
    position: relative;
}

.modal-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    color: var(--text-muted);
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
}

.modal-close:hover {
    color: var(--white);
}

.qr-container {
    background: white;
    padding: 1rem;
    border-radius: 8px;
    margin: 1.5rem auto;
    width: fit-content;
}


/* ------------------------
   Utilities & Small fixes
   ------------------------ */


/* Notification small badge used in header (kept lightweight) */

.notification-icon-wrapper {
    position: relative;
    display: inline-block;
}

.notification-badge {
    position: absolute;
    top: -6px;
    right: -6px;
    min-width: 18px;
    height: 18px;
    padding: 0 5px;
    background: #ef4444;
    color: #fff;
    font-size: 11px;
    font-weight: 700;
    line-height: 18px;
    border-radius: 999px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.25);
}

.notification-dot {
    position: absolute;
    top: 3px;
    right: 3px;
    width: 10px;
    height: 10px;
    background: #ef4444;
    border-radius: 50%;
    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.25);
}


/* Small dropdown used in header/user menu */

.dropdown-menu {
    min-width: 210px;
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    padding: 0.5rem 0;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    z-index: 1500;
}

.dropdown-item {
    display: block;
    padding: 0.6rem 1rem;
    color: var(--white);
    text-decoration: none;
    font-size: 0.95rem;
}

.dropdown-item:hover {
    background: rgba(255, 255, 255, 0.03);
}

.dropdown-item-danger {
    color: #b91c1c;
}


/* Promo voucher small styles (used also in promotions view) */

.voucher-card {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 12px;
    overflow: hidden;
}

.voucher-img {
    width: 100%;
    height: 140px;
    object-fit: cover;
    display: block;
}

.discount-tag {
    position: absolute;
    top: 12px;
    left: 12px;
    background: rgba(0, 0, 0, 0.6);
    color: #fff;
    padding: 6px 8px;
    border-radius: 6px;
    font-weight: 700;
}

.voucher-body {
    padding: 1rem;
}

.code-display {
    font-family: monospace;
    background: rgba(255, 255, 255, 0.03);
    padding: 4px 8px;
    border-radius: 6px;
}

.btn-copy {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.06);
    color: var(--white);
    padding: 6px 10px;
    border-radius: 6px;
    cursor: pointer;
}

.btn-copy:hover {
    border-color: var(--primary-gold);
    color: var(--primary-gold);
}


/* Ensure promo input and apply button align on small screens */

@media (max-width: 420px) {
    .promo-input-group {
        flex-direction: column;
    }
    .btn-apply {
        width: 100%;
    }
}


/* Print adjustments: hide site chrome and non-essential UI when printing invoices/PDFs */

@media print {
    /* Remove site chrome */
    .header-wrapper,
    .footer-wrapper,
    .mobile-menu-wrapper,
    .mobile-toggle,
    .header-actions,
    .flash-container,
    .dropdown-menu,
    nav,
    .site-nav {
        display: none !important;
    }
    /* Hide interactive controls */
    .btn,
    .btn-apply,
    .btn-confirm-booking,
    .btn-copy,
    .print-hidden,
    .print\:hidden,
    .print-only-hide {
        display: none !important;
    }
    /* Make invoice content centered and full-width inside print layout */
    .booking-page-wrapper,
    .booking-layout,
    .max-w-3xl,
    .max-w-4xl,
    .container,
    .main-content {
        width: 100% !important;
        max-width: 100% !important;
        padding: 0 !important;
        margin: 0 auto !important;
    }
    /* Keep card white and remove heavy shadows for print */
    .booking-card,
    .summary-card,
    .success-card,
    .bg-white {
        box-shadow: none !important;
        background: #fff !important;
        border: 1px solid #e6e7eb !important;
    }
    /* Ensure readable, Unicode-safe fonts for Vietnamese text */
    html,
    body,
    .booking-card,
    .invoice-body,
    .text-gray-600,
    .text-gray-900 {
        color: #111827 !important;
        font-family: 'Segoe UI', Tahoma, Arial, 'Helvetica Neue', sans-serif !important;
        font-size: 12px !important;
    }
    /* Header band styling (map Tailwind classes used in view to print-friendly header) */
    .bg-brand-900 {
        background: #0f1724 !important;
        color: #fff !important;
        padding: 28px 32px !important;
        text-align: center !important;
    }
    .bg-brand-900 .text-3xl {
        font-family: Georgia, 'Times New Roman', serif !important;
        font-size: 28px !important;
    }
    .bg-brand-900 .inline-block {
        border-radius: 999px !important;
    }
    /* Avoid page breaks inside key sections */
    .booking-card,
    .summary-card,
    .success-card,
    table,
    thead,
    tbody,
    tr,
    .order-code-box {
        page-break-inside: avoid !important;
    }
    /* Remove link URL suffixes */
    a::after {
        content: none !important;
    }
    /* Page size */
    @page {
        size: A4 portrait;
        margin: 10mm;
    }
    /* Reduce paddings for print */
    .p-8 {
        padding: 0.6rem !important;
    }
    .md\:p-12 {
        padding: 0.6rem !important;
    }
    .booking-card,
    .success-card {
        padding: 1rem !important;
    }
    /* Table tweaks for compact layout */
    table {
        border-collapse: collapse !important;
    }
    thead th {
        color: #6b7280 !important;
        font-size: 11px !important;
        text-transform: uppercase !important;
    }
    th,
    td {
        padding: 8px 10px !important;
    }
}
</file>

<file path="resources/js/client/booking.js">
import '../bootstrap';

// booking.js — clean, single implementation for booking-related client pages
document.addEventListener('DOMContentLoaded', () => {
    if (typeof axios !== 'undefined') {
        const token = document.querySelector('meta[name="csrf-token"]');
        if (token) axios.defaults.headers.common['X-CSRF-TOKEN'] = token.getAttribute('content');
        axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
    }

    const form = document.getElementById('booking-form');
    const applyBtn = document.getElementById('apply-promo-btn');
    const promoInput = document.getElementById('promotion-code-input');
    const promoMessage = document.getElementById('promo-message');
    const originalTotalSpan = document.getElementById('original-total');

    const discountDisplay = document.getElementById('discount-display');
    const finalTotalDisplay = document.getElementById('final-total-display');
    const promoCodeDisplay = document.getElementById('promo-code-display');
    const discountAmountInput = document.getElementById('discount-amount-input');
    const promoCodeHidden = document.getElementById('promotion-code-hidden');

    let originalTotal = 0;
    if (originalTotalSpan) {
        const ds = originalTotalSpan.dataset || {};
        originalTotal = parseFloat(ds.originalPrice || ds.originalprice || originalTotalSpan.getAttribute('data-original-price') || 0) || 0;
    }

    const formatCurrency = (amount) => new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND', minimumFractionDigits: 0 }).format(amount);

    const updateSummary = (discount, finalTotal, message, code = '—') => {
        if (discountDisplay) discountDisplay.textContent = '- ' + formatCurrency(discount);
        if (discountAmountInput) discountAmountInput.value = discount;
        if (finalTotalDisplay) finalTotalDisplay.textContent = formatCurrency(finalTotal);
        if (promoCodeDisplay) promoCodeDisplay.textContent = code;
        if (promoCodeHidden) promoCodeHidden.value = code !== '—' ? code : '';

        const alpineEl = document.querySelector('[x-data]');
        if (alpineEl && alpineEl.__x) {
            try { alpineEl.__x.$data.finalTotalText = formatCurrency(finalTotal); } catch (e) {}
        }

        if (promoMessage) {
            promoMessage.textContent = message || '';
            promoMessage.className = `promo-msg ${discount > 0 ? 'success' : 'error'}`;
        }
    };

    if (applyBtn && form) {
        try { applyBtn.type = 'button'; } catch (e) {}

        applyBtn.addEventListener('click', async(e) => {
            if (e && typeof e.preventDefault === 'function') e.preventDefault();
            const code = (promoInput && promoInput.value ? promoInput.value : '').trim().toUpperCase();
            if (!code) return updateSummary(0, originalTotal, 'Vui lòng nhập mã.', '—');

            applyBtn.disabled = true;
            const originalBtnText = applyBtn.textContent;
            applyBtn.textContent = '...';
            if (promoMessage) { promoMessage.textContent = 'Đang kiểm tra...';
                promoMessage.style.color = '#6b7280'; }

            try {
                const checkUrl = applyBtn.dataset.routeCheckPromo;
                const response = await axios.post(checkUrl, { code: code, original_total: originalTotal }, { headers: { 'X-No-Reload': '1' } });
                const data = response.data || {};
                if (data.success) updateSummary(data.discount_amount || 0, data.final_total || originalTotal, data.message || 'Áp dụng mã thành công', code);
                else updateSummary(0, originalTotal, data.message || 'Mã không hợp lệ', '—');
            } catch (err) {
                console.error('Promo Check Error:', err);
                let msg = 'Lỗi hệ thống khi kiểm tra mã.';
                if (err.response) {
                    if (err.response.status === 404) msg = 'Không tìm thấy API (404). Kiểm tra route.';
                    else if (err.response.status === 419) msg = 'Phiên làm việc hết hạn. Vui lòng tải lại trang.';
                    else if (err.response.data && err.response.data.message) msg = err.response.data.message;
                }
                updateSummary(0, originalTotal, msg, '—');
            } finally {
                applyBtn.disabled = false;
                applyBtn.textContent = originalBtnText;
            }
        });

        if (promoInput) {
            promoInput.addEventListener('input', () => { if (promoMessage) promoMessage.textContent = ''; });
            promoInput.addEventListener('keydown', (ev) => { if (ev.key === 'Enter') { ev.preventDefault();
                    applyBtn.click(); } });
        }
    }

    document.querySelectorAll('.btn-copy').forEach(btn => {
        btn.addEventListener('click', () => {
            const code = btn.getAttribute('data-code') || btn.textContent || '';
            if (navigator.clipboard) {
                const prev = btn.innerHTML;
                navigator.clipboard.writeText(code).then(() => {
                    btn.textContent = 'Đã sao chép';
                    setTimeout(() => { btn.innerHTML = prev; }, 1200);
                }).catch(() => alert('Không thể sao chép. Hãy thử thủ công.'));
            } else {
                alert('Trình duyệt không hỗ trợ clipboard API.');
            }
        });
    });

    window.submitVnPay = function() {
        if (!form) return console.error('Form booking not found');
        if (!confirm('Xác nhận bạn đã chuyển khoản thành công? Hệ thống sẽ tạo đơn và duyệt ngay.')) return;

        const vnpOrderInfoEl = document.querySelector('#vnpay-form [name="vnp_OrderInfo"]');
        const roomEl = document.querySelector('[name="room_id"]');
        const roomId = (roomEl && roomEl.value) || 'unknown';
        const vnpOrderInfo = (vnpOrderInfoEl && vnpOrderInfoEl.value) || `Thanh toan don dat phong #${roomId}`;

        const addHiddenInput = (name, value) => {
            let input = form.querySelector(`input[name="${name}"]`);
            if (!input) { input = document.createElement('input');
                input.type = 'hidden';
                input.name = name;
                form.appendChild(input); }
            input.value = value;
        };

        addHiddenInput('payment_method', 'online');
        addHiddenInput('vnp_BankCode', 'VNPAYQR');
        addHiddenInput('vnp_Locale', 'vn');
        addHiddenInput('vnp_OrderInfo', vnpOrderInfo);

        if (form.dataset && form.dataset.routeVnpay) form.action = form.dataset.routeVnpay;
        form.submit();
    };

});
</file>

<file path="resources/views/auth/login.blade.php">
@extends('layouts.app')
@section('title', 'Đăng nhập hệ thống')

@section('content')
<div class="login-wrapper">
    <!-- Background (Hình nền & Lớp phủ) -->
    <div class="login-bg-container">
        <img src="{{ asset('uploads/home/home.png') }}" 
             onerror="this.src='https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?q=80&w=2070&auto=format&fit=crop'" 
             alt="Background" 
             class="login-bg-image">
        <div class="login-bg-overlay"></div>
    </div>

    <!-- Form Container (Khung đăng nhập) -->
    <div class="login-container animate-fade-in-up">
        
        <!-- Header -->
        <div class="login-header">
            <div class="login-icon-wrapper">
                <i class="fa-solid fa-right-to-bracket"></i>
            </div>
            <h2 class="login-title">Chào mừng trở lại</h2>
            <p class="login-subtitle">
                Chưa có tài khoản?
                <a href="{{ route('register') }}" class="login-link">Đăng ký thành viên mới</a>
            </p>
        </div>

        <!-- Form Box -->
        <div class="login-card">
            <form class="login-form-content" action="{{ route('login') }}" method="POST" id="login-form">
                @csrf

                <!-- Email -->
                <div class="form-group">
                    <label for="email" class="form-label">Địa chỉ Email</label>
                    <div class="input-group">
                        <div class="input-icon"><i class="fa-regular fa-envelope"></i></div>
                        <input id="email" name="email" type="email" autocomplete="email" required 
                               class="form-input @error('email') is-invalid @enderror"
                               value="{{ old('email') }}" placeholder="vidu@gmail.com">
                    </div>
                    @error('email')
                        <p class="error-msg"><i class="fa-solid fa-circle-exclamation mr-1"></i> {{ $message }}</p>
                    @enderror
                </div>

                <!-- Password -->
                <div class="form-group">
                    <label for="password" class="form-label">Mật khẩu</label>
                    <div class="input-group">
                        <div class="input-icon"><i class="fa-solid fa-lock"></i></div>
                        <input id="password" name="password" type="password" autocomplete="current-password" required 
                               class="form-input @error('password') is-invalid @enderror"
                               placeholder="••••••••">
                    </div>
                    @error('password')
                        <p class="error-msg"><i class="fa-solid fa-circle-exclamation mr-1"></i> {{ $message }}</p>
                    @enderror
                </div>

                <!-- Options (Remember me & Forgot pass) -->
                <div class="form-options">
                    <div class="checkbox-wrapper">
                        <input id="remember" name="remember" type="checkbox" {{ old('remember') ? 'checked' : '' }} class="checkbox-custom">
                        <label for="remember" class="checkbox-label">Ghi nhớ đăng nhập</label>
                    </div>

                    @if (Route::has('password.request'))
                        <div class="forgot-wrapper">
                            <a href="{{ route('password.request') }}" class="forgot-link">Quên mật khẩu?</a>
                        </div>
                    @endif
                </div>

                <!-- Submit Button -->
                <div class="form-action">
                    <button type="submit" class="btn-submit group" id="btn-login">
                        <span class="btn-text">ĐĂNG NHẬP NGAY</span>
                        <span class="btn-icon-wrapper">
                            <i class="fa-solid fa-arrow-right-to-bracket"></i>
                        </span>
                        <!-- Loading Spinner (Ẩn mặc định) -->
                        <span class="btn-loader hidden">
                            <i class="fa-solid fa-circle-notch fa-spin"></i>
                        </span>
                    </button>
                </div>
            </form>

            <!-- Divider -->
            <div class="divider-wrapper">
                <div class="divider-line"></div>
                <div class="divider-text-wrapper">
                    <span class="divider-text">Hoặc tiếp tục với</span>
                </div>
            </div>
            <!-- đăng nhập bằng google -->
            <div class="social-grid single-item">
                    <a href="{{ route('google.login') }}" class="btn-social google">
                        <i class="fa-brands fa-google"></i> Đăng nhập bằng Google
                    </a>
            </div>
        </div>
        
        <p class="footer-text">
            &copy; {{ date('Y') }} Luxury Stay. Bảo mật tuyệt đối thông tin khách hàng.
        </p>
    </div>
</div>
@endsection
</file>

<file path="resources/views/layouts/header.blade.php">
<header x-data="{ mobileMenuOpen: false, userDropdownOpen: false, unreadCount: 0 }" class="header-wrapper">
    <div class="header-container">
        <div class="header-inner">
            
            <!-- 1. Logo -->
            <a href="{{ route('trang_chu') }}" class="logo-link group">
                <span class="logo-icon">
                    <i class="fa-solid fa-crown"></i>
                </span>
                <div class="logo-text-wrapper">
                    <span class="logo-text">Luxury<span>Stay</span></span>
                </div>
            </a>

            <!-- 2. Desktop Menu -->
            @include('layouts.nav')

            <!-- 3. Actions (Login/User/Notifications) -->
            <div class="header-actions">
                @auth
                    <!-- [MỚI] Notification Bell -->
                    <div x-data="{
                            fetchCount() {
                                // Gọi API để lấy số lượng thông báo chưa đọc
                                axios.get('{{ route('notifications.count') }}')
                                    .then(response => {
                                        this.unreadCount = response.data.count;
                                    })
                                    .catch(error => {
                                        console.error('Error fetching unread count:', error);
                                        this.unreadCount = 0;
                                    });
                            }
                        }"
                        x-init="fetchCount(); setInterval(() => fetchCount(), 60000); window.fetchUnreadCount = function() { const el = document.querySelector('[x-data]'); if (el && el.__x) { try { el.__x.$data.fetchCount(); } catch(e) { /* ignore */ } } }" {{-- Tải lại mỗi 60 giây --}}
                        class="relative mr-4 lg:mr-6"
                    >
                        <a href="{{ route('notifications.index') }}" class="notification-icon-wrapper">
                            <i class="fa-solid fa-bell text-xl text-gray-700 hover:text-brand-900 transition-colors"></i>
                            <template x-if="unreadCount > 0">
                                <!-- Show number when small, otherwise show a subtle dot to avoid large numbers -->
                                <span x-show="unreadCount <= 9" class="notification-badge" x-text="unreadCount"></span>
                                <span x-show="unreadCount > 9" class="notification-dot" title="Bạn có thông báo mới"></span>
                            </template>
                        </a>
                    </div>
                    <!-- Kết thúc Notification Bell -->


                    <!-- Đã đăng nhập -->
                    <div class="relative">
                        <button @click="userDropdownOpen = !userDropdownOpen" @click.away="userDropdownOpen = false" class="user-btn">
                            <span class="user-name">{{ Auth::user()->name }}</span>
                            <i class="fa-solid fa-angle-down text-xs"></i>
                            <div class="user-avatar">
                                <i class="fa-solid fa-user"></i>
                            </div>
                        </button>

                        <!-- Dropdown Menu -->
                        <div x-show="userDropdownOpen" x-transition x-cloak class="dropdown-menu">
                            @if(Auth::user()->role === 'admin')
                                <a href="{{ route('admin.dashboard') }}" class="dropdown-item dropdown-item-danger">
                                    <i class="fa-solid fa-gauge"></i> Trang quản trị
                                </a>
                            @endif

                            <a href="{{ route('profile.edit') }}" class="dropdown-item">
                                <i class="fa-solid fa-id-card"></i> Hồ sơ cá nhân
                            </a>
                            <a href="{{ route('bookings.history') }}" class="dropdown-item">
                                <i class="fa-solid fa-clock-rotate-left"></i> Lịch sử đặt phòng
                            </a>
                            
                            {{-- [MỚI] Link tới trang thông báo trong dropdown --}}
                            <a href="{{ route('notifications.index') }}" class="dropdown-item flex justify-between items-center">
                                <span><i class="fa-solid fa-bell"></i> Thông báo</span>
                                <span x-show="unreadCount > 0" class="inline-block bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full" x-text="unreadCount"></span>
                            </a>
                            
                            <form method="POST" action="{{ route('logout') }}" class="border-t border-gray-100 mt-1">
                                @csrf
                                <button type="submit" class="w-full text-left dropdown-item text-red-600">
                                    <i class="fa-solid fa-right-from-bracket"></i> Đăng xuất
                                </button>
                            </form>
                        </div>
                    </div>
                @else
                    <!-- Chưa đăng nhập -->
                    <a href="{{ route('login') }}" class="btn-login">Đăng nhập</a>
                    <a href="{{ route('register') }}" class="btn-register">Đăng ký ngay</a>
                @endauth
            </div>

            <!-- 4. Mobile Toggle -->
            <button @click="mobileMenuOpen = !mobileMenuOpen" class="mobile-toggle">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div x-show="mobileMenuOpen" x-transition x-cloak class="mobile-menu-wrapper">
        <div class="mobile-menu-container">
            <a href="{{ route('trang_chu') }}" class="mobile-link">Trang chủ</a>
            <a href="{{ route('phong.danh-sach') }}" class="mobile-link">Phòng & Suites</a>
            <a href="{{ route('khuyen-mai') }}" class="mobile-link">Ưu đãi</a>
            
            @auth
                <div class="mobile-user-section">
                    <p class="mobile-greeting">Xin chào, <strong>{{ Auth::user()->name }}</strong></p>
                    <a href="{{ route('profile.edit') }}" class="mobile-user-link">Hồ sơ</a>
                    <a href="{{ route('bookings.history') }}" class="mobile-user-link">Lịch sử</a>
                    <a href="{{ route('notifications.index') }}" class="mobile-user-link flex items-center justify-between">
                        Thông báo
                        <span x-show="unreadCount > 0" class="inline-block bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full" x-text="unreadCount"></span>
                    </a>
                    <form method="POST" action="{{ route('logout') }}">
                        @csrf
                        <button class="mobile-logout-btn">Đăng xuất</button>
                    </form>
                </div>
            @else
                <div class="mobile-auth-grid">
                    <a href="{{ route('login') }}" class="mobile-btn-login">Đăng nhập</a>
                    <a href="{{ route('register') }}" class="mobile-btn-register">Đăng ký</a>
                </div>
            @endauth
        </div>
    </div>
</header> {{-- [CẬP NHẬT] Link Thông báo (Sử dụng x-show trực tiếp trên span) --}}
</file>

<file path="app/Models/User.php">
<?php

namespace App\Models;

// use Illuminate\Contracts\Auth\MustVerifyEmail;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Notifications\Notifiable;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Str;
use App\Notifications\CustomResetPasswordNotification;
use Illuminate\Auth\Notifications\ResetPassword;
use Illuminate\Notifications\Messages\MailMessage;

class User extends Authenticatable
{
    /** @use HasFactory<\Database\Factories\UserFactory> */
    use HasFactory, Notifiable;

    /**
     * The attributes that are mass assignable.
     *
     * @var list<string>
     */
    protected $fillable = [
        'name',
        'email',
        'cccd',
        'phone',
        'role',
        'password',
    ];
    
    public const roles = [
        'admin',
        'user'
    ];

    /**
     * The attributes that should be hidden for serialization.
     *
     * @var list<string>
     */
    protected $hidden = [
        'password',
        'remember_token',
    ];

    /**
     * The attributes that should be cast.
     *
     * @var array<string,string>
     */
    protected $casts = [
        'email_verified_at' => 'datetime',
        'password' => 'hashed',
    ];

    /**
     * Ensure passwords are hashed when set. If a value already looks like
     * a hash (bcrypt/argon prefix), leave it as-is to avoid double-hashing.
     */
    public function setPasswordAttribute(?string $value): void
    {
        if (empty($value)) {
            return;
        }

        // Common hash prefixes (bcrypt, argon)
        if (Str::startsWith($value, ['$2y$', '$2a$', '$argon$', '$argon2i$', '$argon2id$'])) {
            $this->attributes['password'] = $value;
            return;
        }

        $this->attributes['password'] = Hash::make($value);
    }

    /**
     * Get the bookings (dat_phongs) for the user.
     */
    public function datPhongs(): HasMany
    {
        return $this->hasMany(DatPhong::class);
    }

    /**
     * Override default password reset notification to send Vietnamese email.
     *
     * @param  string  $token
     * @return void
     */
    public function sendPasswordResetNotification($token)
    {
        $this->notify(new CustomResetPasswordNotification($token));
    }
}
</file>

<file path="resources/views/admin/dat_phong/danh_sach.blade.php">
@extends('admin.layouts.dashboard')
@section('title', 'Sơ đồ Phòng')
@section('header', 'Quản lý đặt phòng')

@section('content')
<div class="max-w-7xl mx-auto">

    <div class="flex flex-col xl:flex-row xl:items-center justify-between gap-6 mb-8">
        
        <div class="flex flex-wrap items-center gap-3 text-xs font-medium bg-white px-5 py-3 rounded-xl shadow-sm border border-gray-100">
            <div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gray-50 text-gray-600 border border-gray-200">
                <span class="w-2.5 h-2.5 rounded-full bg-gray-400"></span> Trống
            </div>
            <div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-red-50 text-red-700 border border-red-200">
                <span class="w-2.5 h-2.5 rounded-full bg-red-500 animate-pulse"></span> Chờ duyệt
            </div>
            <div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-green-50 text-green-700 border border-green-200">
                <span class="w-2.5 h-2.5 rounded-full bg-green-500"></span> Có khách
            </div>
            <div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-yellow-50 text-yellow-700 border border-yellow-200">
                <span class="w-2.5 h-2.5 rounded-full bg-yellow-500"></span> Bảo trì
            </div>
        </div>

        <div class="flex flex-wrap gap-3 items-center">
            <form method="GET" action="{{ url()->current() }}" class="relative flex items-center gap-2">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fa-solid fa-search text-gray-400"></i>
                </div>
                <input type="search" name="q" value="{{ request('q') }}" placeholder="Tìm số phòng hoặc tên khách..." class="w-56 h-10 pl-10 rounded-lg border-gray-300 text-sm focus:border-brand-gold focus:ring-brand-gold" />
                <button type="submit" class="ml-2 h-10 px-4 bg-gray-100 text-gray-700 font-bold rounded-lg">Tìm</button>
                @if(request('q'))
                    <a href="{{ url()->current() }}" class="ml-2 h-10 px-4 bg-white border border-gray-300 text-gray-500 rounded-lg">Đặt lại</a>
                @endif
            </form>
            <a href="{{ route('admin.dat-phong.history') }}" class="flex items-center px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-brand-gold hover:border-brand-gold transition-all shadow-sm">
                <i class="fa-solid fa-clock-rotate-left mr-2"></i> Lịch sử
            </a>
            <a href="{{ route('admin.dat-phong.trash') }}" class="flex items-center px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-red-600 hover:border-red-300 transition-all shadow-sm">
                <i class="fa-solid fa-trash mr-2"></i> Thùng rác
            </a>
            <a href="{{ route('admin.dat-phong.them') }}" class="flex items-center px-5 py-2 bg-brand-900 text-brand-gold rounded-lg text-sm font-bold hover:bg-gray-800 hover:-translate-y-0.5 transition-all shadow-md">
                <i class="fa-solid fa-plus mr-2"></i> Tạo đơn mới
            </a>
        </div>
    </div>

    @if(session('success'))
        <div class="mb-6 p-4 rounded-lg bg-green-50 border border-green-200 text-green-800 flex items-center shadow-sm">
            <i class="fa-solid fa-check-circle mr-3 text-xl"></i> {{ session('success') }}
        </div>
    @endif

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5">
        @foreach($paginatedPhongs as $phong)
            @php
                // --- LOGIC TRẠNG THÁI ---
                $activeBooking = null;
                $cardClasses = 'bg-white border-gray-200 text-gray-500 hover:border-brand-gold hover:shadow-lg';
                $icon = 'fa-door-open';
                $statusText = 'Phòng trống';
                
                // Tìm đơn active
                $chiTiet = $phong->chiTietDatPhongs->first(function($detail) {
                    return $detail->datPhong !== null;
                });

                if ($chiTiet) {
                    $activeBooking = $chiTiet->datPhong;
                    
                    if ($activeBooking->trang_thai == 'pending') {
                        $cardClasses = 'bg-red-50/60 border-red-300 text-red-800 shadow-sm ring-1 ring-red-100';
                        $icon = 'fa-clock';
                        $statusText = 'Chờ duyệt';
                    } elseif (in_array($activeBooking->trang_thai, ['confirmed', 'paid', 'awaiting_payment'])) {
                        $cardClasses = 'bg-green-50/60 border-green-300 text-green-800 shadow-sm ring-1 ring-green-100';
                        $icon = 'fa-user-check';
                        $statusText = 'Đang sử dụng';
                    }
                } elseif ($phong->tinh_trang === 'maintenance') {
                    $cardClasses = 'bg-yellow-50/60 border-yellow-300 text-yellow-800 opacity-80';
                    $icon = 'fa-screwdriver-wrench';
                    $statusText = 'Bảo trì';
                }
            @endphp

            <a href="{{ route('admin.dat-phong.room-detail', $phong->id) }}" 
               class="relative group h-48 rounded-2xl border transition-all duration-300 flex flex-col items-center justify-center p-4 cursor-pointer {{ $cardClasses }}">
                
                <span class="text-4xl font-serif font-bold mb-3 tracking-tight {{ $activeBooking ? '' : 'group-hover:text-brand-gold transition-colors' }}">
                    {{ $phong->so_phong }}
                </span>
                
                <div class="flex items-center gap-2 text-sm font-medium uppercase tracking-wide text-xs">
                    <i class="fa-solid {{ $icon }}"></i> <span>{{ $statusText }}</span>
                </div>

                @if($activeBooking)
                    <span class="absolute top-3 right-3 flex h-3 w-3">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 {{ $activeBooking->trang_thai == 'pending' ? 'bg-red-400' : 'bg-green-400' }}"></span>
                      <span class="relative inline-flex rounded-full h-3 w-3 {{ $activeBooking->trang_thai == 'pending' ? 'bg-red-500' : 'bg-green-500' }}"></span>
                    </span>
                    
                    <div class="absolute bottom-0 inset-x-0 bg-white/80 backdrop-blur-sm p-2 text-center border-t border-gray-100 rounded-b-2xl">
                        <p class="text-xs font-bold text-gray-900 truncate">{{ $activeBooking->user->name ?? 'Guest' }}</p>
                    </div>
                @else
                    <div class="absolute inset-0 bg-brand-900/90 rounded-2xl flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-center px-2">
                        <div>
                            <span class="text-brand-gold font-bold uppercase text-xs tracking-widest block mb-1">Xem chi tiết</span>
                            <span class="text-white text-[10px] block">hoặc tạo đơn mới</span>
                        </div>
                    </div>
                @endif
            </a>
        @endforeach
    </div>

    <div class="mt-8">
        {{ $paginatedPhongs->withQueryString()->links() }}
    </div>
</div>
@endsection
</file>

<file path="resources/views/client/rooms/index.blade.php">
@extends('layouts.app')
@section('title', 'Danh sách phòng nghỉ')

@section('content')

<!-- HEADER BANNER -->
<div class="page-banner">
    <div class="banner-bg">
        <img src="{{ asset('uploads/home/home.png') }}" 
             alt="Luxury Hotel Background">
        <div class="banner-overlay"></div>
    </div>
    
    <div class="banner-content">
        <span class="banner-subtitle animate-fade-in-up">Luxury Collection</span>
        <h1 class="banner-title animate-fade-in-up">Danh sách phòng nghỉ</h1>
        <p class="banner-desc animate-fade-in-up">
            Khám phá không gian nghỉ dưỡng đẳng cấp, nơi từng chi tiết được chăm chút tỉ mỉ.
        </p>
    </div>
</div>

<div class="container pb-section">

    <!-- Mobile Filter Button -->
    <button type="button" class="btn btn-primary mobile-filter-btn" onclick="document.querySelector('.sidebar-filter').classList.toggle('active')">
        <i class="fa-solid fa-filter mr-2"></i> Bộ lọc tìm kiếm
    </button>
    
    <div class="listing-layout">
        
        <!-- SIDEBAR FILTER -->
        <aside class="sidebar-filter">
            <form action="{{ route('phong.danh-sach') }}" method="GET" id="filter-form">
                
                <div class="filter-header">
                    <span class="filter-title">Bộ lọc</span>
                    <a href="{{ route('phong.danh-sach') }}" class="btn-reset">Đặt lại</a>
                </div>

                <!-- [MỚI] 1. LỌC THEO NGÀY -->
                <div class="filter-group">
                    <label class="filter-group-title">Ngày lưu trú</label>
                    <div class="space-y-2">
                        <div>
                            <label class="text-xs text-gray-500 font-bold uppercase">Nhận phòng</label>
                            <input type="date" name="checkin" class="form-input text-sm" 
                                   value="{{ request('checkin') }}" min="{{ date('Y-m-d') }}">
                        </div>
                        <div>
                            <label class="text-xs text-gray-500 font-bold uppercase">Trả phòng</label>
                            <input type="date" name="checkout" class="form-input text-sm" 
                                   value="{{ request('checkout') }}" min="{{ date('Y-m-d', strtotime('+1 day')) }}">
                        </div>
                    </div>
                </div>

                <!-- 2. KHOẢNG GIÁ -->
                <div class="filter-group">
                    <label class="filter-group-title">Khoảng giá (đêm)</label>
                    <div class="price-inputs">
                        <input type="number" name="min_price" class="form-input" 
                            placeholder="Từ" value="{{ request('min_price') }}"
                            min="0" step="100000"> 
                        <span class="price-separator">-</span>
                        <input type="number" name="max_price" class="form-input" 
                            placeholder="Đến" value="{{ request('max_price') }}"
                            min="0" step="100000">
                    </div>
                </div>

                <!-- 3. HẠNG PHÒNG -->
                <div class="filter-group">
                    <label class="filter-group-title">Hạng phòng</label>
                    <div class="checkbox-list" style="max-height: 200px; overflow-y: auto;">
                        @foreach($allLoaiPhongs as $type)
                            <label class="checkbox-item">
                                <input type="checkbox" name="room_types[]" value="{{ $type->id }}" 
                                    {{ in_array($type->id, request('room_types', [])) ? 'checked' : '' }}>
                                <span>{{ $type->ten_loai_phong }}</span>
                            </label>
                        @endforeach
                    </div>
                </div>

                <!-- 4. SỨC CHỨA -->
                <div class="filter-group">
                    <label class="filter-group-title">Sức chứa</label>
                    <div class="checkbox-list">
                        <label class="checkbox-item">
                            <input type="checkbox" name="capacity[]" value="1" 
                                {{ in_array('1', request('capacity', [])) ? 'checked' : '' }}>
                            <span>1 Khách</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="capacity[]" value="2" 
                                {{ in_array('2', request('capacity', [])) ? 'checked' : '' }}>
                            <span>2 Khách</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="capacity[]" value="3" 
                                {{ in_array('3', request('capacity', [])) ? 'checked' : '' }}>
                            <span>3 Khách</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="capacity[]" value="4" 
                                {{ in_array('4', request('capacity', [])) ? 'checked' : '' }}>
                            <span>Gia đình (4+ Khách)</span>
                        </label>
                    </div>
                </div>

                <!-- 5. TIỆN NGHI -->
                <div class="filter-group">
                    <label class="filter-group-title">Tiện nghi</label>
                    <div class="checkbox-list">
                        @foreach($tienNghis as $item)
                            <label class="checkbox-item">
                                <input type="checkbox" name="amenities[]" value="{{ $item->id }}" 
                                    {{ in_array($item->id, request('amenities', [])) ? 'checked' : '' }}>
                                <span>{{ $item->ten_tien_nghi }}</span>
                            </label>
                        @endforeach
                    </div>
                </div>

                <div class="filter-submit-wrap">
                    <button type="submit" class="btn btn-primary w-full">
                        Áp dụng lọc
                    </button>
                </div>
            </form>
        </aside>

        <!-- MAIN CONTENT -->
        <main>
            <div class="filter-bar">
                <p class="filter-count">
                    Tìm thấy <strong>{{ $rooms->total() }}</strong> hạng phòng phù hợp
                </p>
                <div class="filter-actions">
                    <span class="text-sm text-gray-500 mr-2">Sắp xếp:</span>
                    <select name="sort" class="filter-select" form="filter-form" onchange="this.form.submit()">
                        <option value="default" {{ request('sort') == 'default' ? 'selected' : '' }}>Mặc định</option>
                        <option value="price_asc" {{ request('sort') == 'price_asc' ? 'selected' : '' }}>Giá thấp đến cao</option>
                        <option value="price_desc" {{ request('sort') == 'price_desc' ? 'selected' : '' }}>Giá cao đến thấp</option>
                    </select>
                </div>
            </div>

            <!-- GRID DANH SÁCH PHÒNG -->
            <div class="room-grid">
                @forelse($rooms as $room)
                
                {{-- LOGIC: Hết phòng khi phongs_count (đã trừ lịch đặt) = 0 --}}
                @php
                    $isSoldOut = $room->phongs_count == 0;
                @endphp

                <div class="room-card group {{ $isSoldOut ? 'sold-out' : '' }}">
                    
                    <!-- Hình ảnh -->
                    <div class="room-img-wrap">
                        <img src="{{ $room->hinh_anh ? asset($room->hinh_anh) : asset('uploads/home/phongdefault.png') }}" 
                             alt="{{ $room->ten_loai_phong }}"
                             class="w-full h-full object-cover">
                        
                        @if($isSoldOut)
                            <div class="sold-out-badge">Hết phòng</div>
                        @else
                            <div class="room-price-tag">
                                <span class="room-price-amount">{{ number_format($room->gia, 0, ',', '.') }}đ</span>
                                <span class="room-price-unit">/đêm</span>
                            </div>
                        @endif
                        
                        <div class="room-overlay-hover"></div>
                    </div>
                    
                    <!-- Nội dung -->
                    <div class="room-body">
                        <h3>
                            <!-- Link chi tiết kèm theo ngày đã chọn để bên trang detail xử lý tiếp -->
                            <a href="{{ route('phong.chi-tiet', ['id' => $room->id, 'checkin' => request('checkin'), 'checkout' => request('checkout')]) }}" class="room-title-link">
                                {{ $room->ten_loai_phong }}
                            </a>
                        </h3>
                        
                        <div class="room-specs">
                            <div class="spec-item" title="Sức chứa tối đa">
                                <i class="fa-solid fa-user-group"></i> 
                                <span>{{ $room->so_nguoi }} Khách</span>
                            </div>

                            <div class="spec-item" title="Diện tích phòng">
                                <i class="fa-solid fa-ruler-combined"></i> 
                                <span>{{ $room->dien_tich ? $room->dien_tich . 'm²' : '-- m²' }}</span>
                            </div>

                            {{-- Hiển thị số lượng phòng trống theo ngày --}}
                            <div class="spec-item" style="color: {{ $isSoldOut ? '#ef4444' : '#22c55e' }}">
                                <i class="fa-solid fa-door-open"></i> 
                                <span>
                                    @if($isSoldOut)
                                        Hết phòng
                                    @elseif(request('checkin') && request('checkout'))
                                        Còn {{ $room->phongs_count }} phòng ({{ \Carbon\Carbon::parse(request('checkin'))->format('d/m') }} - {{ \Carbon\Carbon::parse(request('checkout'))->format('d/m') }})
                                    @else
                                        Còn {{ $room->phongs_count }} phòng
                                    @endif
                                </span>
                            </div>
                        </div>

                        <p class="room-short-desc">
                            {{ $room->mo_ta ?? 'Trải nghiệm không gian sang trọng với nội thất cao cấp...' }}
                        </p>
                        
                        <!-- Nút bấm -->
                        @if($isSoldOut)
                            <button class="btn-card-action" disabled>
                                <span>Tạm hết</span>
                            </button>
                        @else
                            <a href="{{ route('phong.chi-tiet', ['id' => $room->id, 'checkin' => request('checkin'), 'checkout' => request('checkout')]) }}" class="btn-card-action group/btn">
                                <span>Xem chi tiết</span>
                                <i class="fa-solid fa-arrow-right"></i>
                            </a>
                        @endif
                    </div>
                </div>
                @empty
                <!-- TRẠNG THÁI TRỐNG -->
                <div class="empty-state-container">
                    <div class="empty-state-icon">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                    <h3 class="empty-state-title">Không tìm thấy phòng phù hợp</h3>
                    <p class="empty-state-text">
                        Rất tiếc, chúng tôi không tìm thấy phòng nào phù hợp với tiêu chí hoặc ngày bạn chọn.
                    </p>
                    <a href="{{ route('phong.danh-sach') }}" class="btn btn-outline">Xóa bộ lọc</a>
                </div>
                @endforelse
            </div>

            {{-- PHÂN TRANG: sử dụng partial chung --}}
            @include('partials.pagination', ['paginator' => $rooms])
        </main>
    </div>
</div>

<!-- SECTION CAM KẾT -->
<div class="section-guarantee">
    <div class="container">
        <div class="guarantee-grid">
            <div>
                <div class="guarantee-icon-box"><i class="fa-solid fa-medal"></i></div>
                <h3 class="guarantee-title">Đảm bảo giá tốt nhất</h3>
                <p class="guarantee-desc">Cam kết giá thấp nhất khi đặt trực tiếp.</p>
            </div>
            <div>
                <div class="guarantee-icon-box"><i class="fa-solid fa-headset"></i></div>
                <h3 class="guarantee-title">Hỗ trợ 24/7</h3>
                <p class="guarantee-desc">Đội ngũ nhân viên luôn sẵn sàng phục vụ.</p>
            </div>
            <div>
                <div class="guarantee-icon-box"><i class="fa-solid fa-shield-halved"></i></div>
                <h3 class="guarantee-title">Thanh toán an toàn</h3>
                <p class="guarantee-desc">Bảo mật thông tin tuyệt đối.</p>
            </div>
        </div>
    </div>
</div>

@endsection
</file>

<file path="resources/views/home.blade.php">
@extends('layouts.app')
@section('title', 'Trang chủ - Trải nghiệm nghỉ dưỡng đẳng cấp')

@section('content')

<div class="hero">
    <img src="{{ asset('uploads/home/home.png') }}" 
         alt="Luxury Hotel" class="hero-bg">
    <div class="hero-overlay"></div>

    <div class="hero-content">
        <span class="sub-title" style="color: var(--primary-gold);">Chào mừng đến với Luxury Stay</span>
        <h1 class="hero-heading">
            Nơi Đẳng Cấp Giao Thoa <br> Cùng Sự Bình Yên
        </h1>
        <p class="hero-desc">
            Tận hưởng kỳ nghỉ trong mơ với hệ thống phòng suite sang trọng và dịch vụ 5 sao chuẩn quốc tế tại trung tâm thành phố.
        </p>
        
        <a href="#rooms" class="scroll-down">
            <i class="fa-solid fa-chevron-down"></i>
        </a>
    </div>
</div>

<section id="rooms" class="section-rooms">
    <div class="container">
        <div class="section-header">
            <span class="sub-title">Không gian nghỉ dưỡng</span>
            <h2 class="main-title">Hạng phòng nổi bật</h2>
        </div>

        <div class="room-grid">
            @if(isset($loaiPhongs) && $loaiPhongs->count() > 0)
                @foreach($loaiPhongs as $phong)
                <div class="room-card group">
                    <div class="room-img-wrap">
                        <img src="{{ $phong->hinh_anh ? asset($phong->hinh_anh) : asset('uploads/home/phongdefault.png') }}" 
                            alt="{{ $phong->ten_loai_phong }}"
                            class="w-full h-full object-cover">
                        
                        <div class="room-price-tag">
                            <span class="room-price-amount">{{ number_format($phong->gia, 0, ',', '.') }}đ</span>
                            <span class="room-price-unit">/đêm</span>
                        </div>
                        
                        <div class="room-overlay-hover"></div>
                    </div>
                    
                    <div class="room-body">
                        <h3 class="room-name">
                            <a href="{{ route('phong.chi-tiet', $phong->id) }}" class="room-title-link">
                                {{ $phong->ten_loai_phong }}
                            </a>
                        </h3>
                        
                        <div class="room-specs">
                            <div class="spec-item" title="Sức chứa">
                                <i class="fa-solid fa-user-group"></i> 
                                <span>{{ $phong->so_nguoi }} Khách</span> </div>
                            <div class="spec-item" title="Diện tích">
                                <i class="fa-solid fa-ruler-combined"></i> 
                                <span>{{ $phong->dien_tich ? $phong->dien_tich.'m²' : '-- m²' }}</span>
                            </div>
                        </div>

                        <p class="room-short-desc">
                            {{ $phong->mo_ta ?? 'Trải nghiệm không gian sang trọng với đầy đủ tiện nghi hiện đại.' }}
                        </p>
                        
                        <a href="{{ route('phong.chi-tiet', $phong->id) }}" class="btn-card-action group/btn">
                            <span>Chi tiết & Đặt phòng</span>
                            <i class="fa-solid fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
                @endforeach
            @else
                <p style="text-align: center; color: #999; grid-column: 1/-1; padding: 2rem;">
                    Đang cập nhật danh sách phòng...
                </p>
            @endif
        </div>
        
        <div class="room-btn-wrapper">
            <a href="{{ route('phong.danh-sach') }}" class="btn btn-outline">
                Xem tất cả phòng
            </a>
        </div>
    </div>
</section>

<section class="section-services">
    <div class="service-bg-icon">
        <i class="fa-solid fa-crown"></i>
    </div>

    <div class="container" style="position: relative; z-index: 2;">
        <div class="section-header">
            <span class="sub-title">Tiện ích & Dịch vụ</span>
            <h2 class="main-title light">Tận hưởng kỳ nghỉ trọn vẹn</h2>
        </div>

        <div class="service-grid">
            <div class="service-item">
                <div class="service-icon"><i class="fa-solid fa-utensils"></i></div>
                <h3 class="service-title">Nhà hàng 5 sao</h3>
                <p class="service-text">Thưởng thức ẩm thực Á - Âu.</p>
            </div>
            <div class="service-item">
                <div class="service-icon"><i class="fa-solid fa-person-swimming"></i></div>
                <h3 class="service-title">Hồ bơi vô cực</h3>
                <p class="service-text">Tầm nhìn toàn cảnh thành phố.</p>
            </div>
            <div class="service-item">
                <div class="service-icon"><i class="fa-solid fa-spa"></i></div>
                <h3 class="service-title">Luxury Spa</h3>
                <p class="service-text">Liệu trình thư giãn cao cấp.</p>
            </div>
            <div class="service-item">
                <div class="service-icon"><i class="fa-solid fa-martini-glass-citrus"></i></div>
                <h3 class="service-title">Sky Bar</h3>
                <p class="service-text">Cocktail và nhạc sống mỗi tối.</p>
            </div>
        </div>
    </div>
</section>

@if(isset($khuyenMais) && $khuyenMais->count() > 0)
<section class="section-promo">
    <div class="container">
        <div class="promo-header-flex">
            <div>
                <span class="sub-title">Ưu đãi đặc biệt</span>
                <h2 class="main-title">Khuyến mãi dành cho bạn</h2>
            </div>
            <a href="{{ route('khuyen-mai') }}" class="btn-text">
                Xem tất cả <i class="fa-solid fa-arrow-right"></i>
            </a>
        </div>

        <div class="promo-grid">
            @foreach($khuyenMais as $km)
            <div class="promo-card">
                <div class="promo-badge">HOT</div>
                
                <div class="promo-icon">
                    <i class="fa-solid fa-gift"></i>
                </div>
                
                <div class="promo-info" style="flex-grow: 1;">
                    <h3>{{ $km->ten_khuyen_mai }}</h3>
                    <p class="promo-desc" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                        {{ $km->mo_ta }}
                    </p>
                    <div class="promo-meta">
                        <span class="code-box">
                            Mã: <strong>{{ $km->ma_khuyen_mai }}</strong> </span>
                        <span class="discount-val">
                            @if($km->chiet_khau_phan_tram > 0) -{{ $km->chiet_khau_phan_tram }}%
                            @else
                                -{{ number_format($km->so_tien_giam_gia) }}đ
                            @endif
                        </span>
                    </div>
                </div>
                
                <div>
                    <button onclick="navigator.clipboard.writeText('{{ $km->ma_khuyen_mai }}'); alert('Đã sao chép mã!')" class="copy-btn">
                        Sao chép
                    </button>
                </div>
            </div>
            @endforeach
        </div>
    </div>
</section>
@endif

<section class="section-testimonial">
    <div class="container">
        <div class="section-header">
            <h2 class="main-title">Khách hàng nói gì về chúng tôi?</h2>
        </div>

        <div class="testimonial-grid">
            <div class="testimonial-card">
                <i class="fa-solid fa-quote-left quote-icon"></i>
                <p class="testimonial-text">"Một trải nghiệm tuyệt vời! Phòng ốc sạch sẽ, nhân viên cực kỳ thân thiện và chuyên nghiệp."</p>
                <div class="user-profile">
                    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User" class="user-avatar">
                    <div>
                        <h4 class="user-name">Nguyễn Thu Hà</h4>
                        <div class="star-rating">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="testimonial-card">
                <i class="fa-solid fa-quote-left quote-icon"></i>
                <p class="testimonial-text">"Vị trí khách sạn rất thuận tiện. Đồ ăn sáng ngon và đa dạng. Hồ bơi view đẹp nhất khu vực."</p>
                <div class="user-profile">
                    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" class="user-avatar">
                    <div>
                        <h4 class="user-name">Trần Minh Tuấn</h4>
                        <div class="star-rating">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="testimonial-card">
                <i class="fa-solid fa-quote-left quote-icon"></i>
                <p class="testimonial-text">"Dịch vụ đẳng cấp 5 sao thực sự. Tôi rất ấn tượng với cách bài trí nội thất trong phòng Suite."</p>
                <div class="user-profile">
                    <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="User" class="user-avatar">
                    <div>
                        <h4 class="user-name">Sarah Johnson</h4>
                        <div class="star-rating">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="section-cta">
    <div class="cta-content">
        <h2 class="cta-title">Sẵn sàng cho kỳ nghỉ trong mơ?</h2>
        <p class="cta-text">Đặt phòng trực tiếp trên website để nhận ưu đãi tốt nhất và tích điểm thành viên.</p>
        <a href="{{ route('phong.danh-sach') }}" class="btn btn-primary" style="background-color: var(--primary-dark);">
            ĐẶT PHÒNG NGAY
        </a>
    </div>
</section>

@endsection
</file>

<file path="resources/views/layouts/nav.blade.php">
<nav class="main-nav">
    <a href="{{ route('trang_chu') }}" 
        class="nav-link {{ request()->routeIs('trang_chu') ? 'active' : '' }}">
        Trang chủ
    </a>

    <a href="{{ route('phong.danh-sach') }}" 
        class="nav-link {{ request()->routeIs('phong*') ? 'active' : '' }}">
        Phòng & Suites
    </a>

    <a href="{{ route('ve-chung-toi') }}" 
        class="nav-link {{ request()->routeIs('ve-chung-toi') ? 'active' : '' }}">
        Về chúng tôi
    </a>
    
    <a href="{{ route('contact') }}" class="nav-link {{ request()->routeIs('contact') ? 'active' : '' }}">
        Liên hệ
    </a>
</nav>
</file>

<file path="app/Http/Controllers/Admin/DatPhongController.php">
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\DatPhong;
use App\Models\User;
use App\Models\Phong;
use App\Models\HoaDon;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Log;
use App\Notifications\BookingStatusUpdated;
use Illuminate\Pagination\LengthAwarePaginator; // Import để phân trang thủ công

class DatPhongController extends Controller
{
    /**
     * Hiển thị Sơ đồ phòng để quản lý đơn (Thay vì danh sách bảng).
     */
    public function getDanhSach(Request $request)
    {
        // 1. Lấy tất cả các phòng
        // Eager load các đơn đặt phòng ĐANG HOẠT ĐỘNG (pending, confirmed, paid, awaiting_payment)
        // Chúng ta lấy đơn mới nhất để hiển thị trạng thái
        $phongs = Phong::with(['chiTietDatPhongs.datPhong' => function($q) {
            $q->whereIn('trang_thai', ['pending', 'confirmed', 'paid', 'awaiting_payment'])
              ->with('user') // Lấy thông tin khách
              ->orderBy('created_at', 'desc'); // Lấy đơn mới nhất
        }])->get();

        // 2. Sắp xếp phòng từ nhỏ đến lớn (Natural Sort: 101, 102, 201...)
        $phongs = $phongs->sortBy('so_phong', SORT_NATURAL);

        // 3. Thực hiện phân trang thủ công (Pagination)
        $currentPage = LengthAwarePaginator::resolveCurrentPage();
        $perPage = 20; // Số phòng mỗi trang
        $currentItems = $phongs->slice(($currentPage - 1) * $perPage, $perPage)->all();
        
        $paginatedPhongs = new LengthAwarePaginator($currentItems, count($phongs), $perPage);
        $paginatedPhongs->setPath($request->url());

        // Pass paginator to view under both variable names to remain compatible
        return view('admin.dat_phong.danh_sach', [
            'phongs' => $paginatedPhongs,
            'paginatedPhongs' => $paginatedPhongs,
        ]);
    }

    // [MỚI] Hàm lấy danh sách Thùng rác (Đơn bị hủy/từ chối)
    public function getThungRac()
    {
        $datPhongs = DatPhong::where('trang_thai', 'cancelled')
                             ->with(['user', 'chiTietDatPhongs.loaiPhong', 'chiTietDatPhongs.phong'])
                             ->orderBy('updated_at', 'desc')
                             ->paginate(10);
        return view('admin.dat_phong.trash', compact('datPhongs'));
    }

    // [MỚI] Hàm lấy danh sách Lịch sử (Đơn đã duyệt/hoàn thành)
    public function getLichSu()
    {
        $datPhongs = DatPhong::whereIn('trang_thai', ['confirmed', 'completed', 'paid'])
                             ->with(['user', 'chiTietDatPhongs.loaiPhong', 'chiTietDatPhongs.phong'])
                             ->orderBy('updated_at', 'desc')
                             ->paginate(10);
        return view('admin.dat_phong.history', compact('datPhongs'));
    }

    // --- CÁC HÀM XỬ LÝ (GIỮ NGUYÊN LOGIC, CHỈ CẬP NHẬT REDIRECT NẾU CẦN) ---

    public function getThem()
    {
        $users = User::all();
        // Lấy các phòng có trạng thái available để chọn
        $phongs = Phong::with('loaiPhong')->where('tinh_trang', 'available')->get();
        return view('admin.dat_phong.them', compact('users', 'phongs'));
    }

    public function postThem(Request $request)
    {
        $data = $request->validate([
            'user_id' => 'required|exists:users,id',
            'phong_id' => 'required|exists:phongs,id',
            'ngay_den' => 'required|date',
            'ngay_di' => 'required|date|after_or_equal:ngay_den',
            'payment_method' => 'nullable|string',
            'note' => 'nullable|string',
        ]);

        DB::beginTransaction();
        try {
            // Create with temporary tong_tien=0 to satisfy non-null DB column, we'll update later
            $datPhong = DatPhong::create([
                'user_id' => $data['user_id'],
                'ngay_den' => $data['ngay_den'],
                'ngay_di' => $data['ngay_di'],
                'trang_thai' => 'pending',
                'payment_method' => $data['payment_method'] ?? 'cash',
                'ghi_chu' => $data['note'] ?? null,
                'tong_tien' => 0,
            ]);

            // Tạo chi tiết đặt phòng cho phòng đã chọn
            $phong = Phong::with('loaiPhong')->findOrFail($data['phong_id']);
            $donGia = $phong->loaiPhong->gia ?? 0;

            // Tính số đêm
            $start = \Carbon\Carbon::parse($data['ngay_den']);
            $end = \Carbon\Carbon::parse($data['ngay_di']);
            $nights = max(1, $end->diffInDays($start));

            $thanhTien = $donGia * $nights;

            $chiTiet = $datPhong->chiTietDatPhongs()->create([
                'loai_phong_id' => $phong->loai_phong_id,
                'phong_id' => $phong->id,
                'so_luong' => 1,
                'don_gia' => $donGia,
                'thanh_tien' => $thanhTien,
            ]);

            // Cập nhật tổng tiền cho DatPhong
            $datPhong->update(['tong_tien' => $thanhTien]);

            // Tạo hóa đơn (mặc định unpaid)
            HoaDon::create([
                'dat_phong_id' => $datPhong->id,
                'ma_hoa_don' => 'HD' . time() . rand(100,999),
                'ngay_lap' => now(),
                'tong_tien' => $thanhTien,
                'trang_thai' => 'unpaid',
                'phuong_thuc_thanh_toan' => $datPhong->payment_method,
            ]);

            // Đánh dấu phòng là booked
            $phong->update(['tinh_trang' => 'booked']);

            DB::commit();

            return redirect()->route('admin.dat-phong')->with('success', 'Thêm đơn đặt phòng thành công!');

        } catch (\Exception $e) {
            DB::rollBack();
            Log::error('Lỗi khi tạo đơn admin: ' . $e->getMessage());
            return back()->withInput()->with('error', 'Lỗi khi tạo đơn: ' . $e->getMessage());
        }
    }
    
    public function getSua($id)
    {
        $datPhong = DatPhong::findOrFail($id);
        $users = User::all();
        return view('admin.dat_phong.sua', compact('datPhong', 'users'));
    }

    public function postSua(Request $request, $id)
    {
        $data = $request->validate([
            'user_id' => 'required|exists:users,id',
            'ngay_den' => 'required|date',
            'ngay_di' => 'required|date|after_or_equal:ngay_den',
            'trang_thai' => 'nullable|string|max:50',
        ]);

        $orm = DatPhong::findOrFail($id);
        $orm->user_id = $data['user_id'];
        $orm->ngay_den = $data['ngay_den'];
        $orm->ngay_di = $data['ngay_di'];
        $orm->trang_thai = $data['trang_thai'] ?? $orm->trang_thai;
        $orm->save();
        
        return redirect()->route('admin.dat-phong')->with('success', 'Cập nhật đơn đặt phòng thành công!');
    }

    // --- LOGIC DUYỆT ĐƠN (CẬP NHẬT ĐỂ QUAY VỀ LỊCH SỬ) ---
    public function duyetDon($id)
    {
        DB::beginTransaction();
        try {
            $datPhong = DatPhong::with('chiTietDatPhongs.loaiPhong', 'user')->findOrFail($id);
            
            if ($datPhong->trang_thai !== 'pending') {
                return back()->with('error', 'Đơn này đã được xử lý rồi!');
            }
            
            // Logic khóa phòng (như cũ)
            $chiTiet = $datPhong->chiTietDatPhongs->first();
            if ($chiTiet && $chiTiet->phong_id) {
                $phong = Phong::find($chiTiet->phong_id);
                if ($phong) $phong->update(['tinh_trang' => 'booked']);
            }

            // Cập nhật trạng thái
            $datPhong->update([
                'trang_thai' => 'confirmed',
                // Giữ nguyên logic payment status
                'payment_status' => ($datPhong->payment_method === 'online') ? 'awaiting_payment' : $datPhong->payment_status, 
            ]);

            // Gửi thông báo (như cũ)
            if ($datPhong->user) {
                $roomName = $chiTiet->loaiPhong->ten_loai_phong ?? 'Phòng';
                $message = "Đơn #{$datPhong->id} ({$roomName}) đã được xác nhận.";
                $datPhong->user->notify(new BookingStatusUpdated($datPhong, 'Đã xác nhận', $message));
            }

            DB::commit();
            
            // Sau khi duyệt — trở về trang hiện tại (không bắt buộc điều hướng sang Lịch sử)
            return redirect()->back()->with('success', 'Đã duyệt đơn thành công! Đơn hàng đã được cập nhật.');

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi: ' . $e->getMessage());
        }
    }

    /**
     * AJAX/POST endpoint to approve a booking (preferred for modal/AJAX actions)
     */
    public function postDuyet(Request $request, $id)
    {
        DB::beginTransaction();
        try {
            $datPhong = DatPhong::with('chiTietDatPhongs.loaiPhong', 'user')->findOrFail($id);

            if ($datPhong->trang_thai !== 'pending') {
                if ($request->ajax()) return response()->json(['status' => 'error', 'message' => 'Đơn đã được xử lý'], 422);
                return back()->with('error', 'Đơn này đã được xử lý rồi!');
            }

            $chiTiet = $datPhong->chiTietDatPhongs->first();
            if ($chiTiet && $chiTiet->phong_id) {
                $phong = Phong::find($chiTiet->phong_id);
                if ($phong) $phong->update(['tinh_trang' => 'booked']);
            }

            $datPhong->update([
                'trang_thai' => 'confirmed',
                'payment_status' => ($datPhong->payment_method === 'online') ? 'awaiting_payment' : $datPhong->payment_status,
            ]);

            if ($datPhong->user) {
                $roomName = $chiTiet->loaiPhong->ten_loai_phong ?? 'Phòng';
                $message = "Đơn #{$datPhong->id} ({$roomName}) đã được xác nhận.";
                $datPhong->user->notify(new BookingStatusUpdated($datPhong, 'Đã xác nhận', $message));
            }

            DB::commit();

            if ($request->ajax()) {
                return response()->json(['status' => 'success', 'message' => 'Đã duyệt đơn thành công']);
            }

            // Nếu không phải AJAX, quay về trang trước (ví dụ: chi tiết phòng)
            return redirect()->back()->with('success', 'Đã duyệt đơn thành công!');

        } catch (\Exception $e) {
            DB::rollBack();
            if ($request->ajax()) return response()->json(['status' => 'error', 'message' => $e->getMessage()], 500);
            return back()->with('error', 'Lỗi: ' . $e->getMessage());
        }
    }

    // --- LOGIC HỦY ĐƠN (CẬP NHẬT ĐỂ QUAY VỀ THÙNG RÁC) ---
    public function huyDon($id)
    {
        DB::beginTransaction();
        try {
            $datPhong = DatPhong::with('chiTietDatPhongs', 'user')->findOrFail($id);
            
            // Logic nhả phòng (như cũ)
            $chiTiet = $datPhong->chiTietDatPhongs->first();
            if ($chiTiet && $chiTiet->phong_id) {
                $phong = Phong::find($chiTiet->phong_id);
                if ($phong && $phong->tinh_trang === 'booked') {
                    $phong->update(['tinh_trang' => 'available']);
                }
            }

            // Cập nhật hủy (Chuyển vào "thùng rác" logic)
            $datPhong->update(['trang_thai' => 'cancelled']);

            // Gửi thông báo
            if ($datPhong->user) {
                $datPhong->user->notify(new BookingStatusUpdated($datPhong, 'Đã hủy', "Đơn #{$datPhong->id} đã bị hủy."));
            }

            DB::commit();
            
            // [YÊU CẦU]: Từ chối/Hủy thì coi như vào "thùng rác" (ẩn khỏi sơ đồ active)
            return redirect()->route('admin.dat-phong.trash')
                ->with('success', 'Đã từ chối đơn hàng! Đơn đã được chuyển vào thùng rác.');

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi: ' . $e->getMessage());
        }
    }

    /**
     * AJAX/POST endpoint to cancel a booking (preferred for modal/AJAX actions)
     */
    public function postHuy(Request $request, $id)
    {
        DB::beginTransaction();
        try {
            $datPhong = DatPhong::with('chiTietDatPhongs', 'user')->findOrFail($id);

            $chiTiet = $datPhong->chiTietDatPhongs->first();
            if ($chiTiet && $chiTiet->phong_id) {
                $phong = Phong::find($chiTiet->phong_id);
                if ($phong && $phong->tinh_trang === 'booked') {
                    $phong->update(['tinh_trang' => 'available']);
                }
            }

            $datPhong->update(['trang_thai' => 'cancelled']);

            if ($datPhong->user) {
                $datPhong->user->notify(new BookingStatusUpdated($datPhong, 'Đã hủy', "Đơn #{$datPhong->id} đã bị hủy."));
            }

            DB::commit();

            if ($request->ajax()) return response()->json(['status' => 'success', 'message' => 'Đã hủy đơn thành công']);

            return redirect()->route('admin.dat-phong.trash')->with('success', 'Đã từ chối đơn hàng! Đơn đã được chuyển vào thùng rác.');

        } catch (\Exception $e) {
            DB::rollBack();
            if ($request->ajax()) return response()->json(['status' => 'error', 'message' => $e->getMessage()], 500);
            return back()->with('error', 'Lỗi: ' . $e->getMessage());
        }
    }

    // Các hàm khác (getHoaDon, postThanhToan, xoaHangLoat...) giữ nguyên để đảm bảo hệ thống chạy đúng
    // ...
    public function getHoaDon($dat_phong_id)
    {
        $datPhong = DatPhong::with(['user', 'chiTietDatPhongs.loaiPhong', 'chiTietDatPhongs.phong'])
                             ->findOrFail($dat_phong_id);

        $hoaDon = HoaDon::firstOrCreate(
            ['dat_phong_id' => $dat_phong_id],
            [
                'ma_hoa_don' => 'HD' . time() . rand(100, 999), 
                'ngay_lap' => now(),
                'tong_tien' => $datPhong->tong_tien, 
                'phuong_thuc_thanh_toan' => $datPhong->payment_method ?? 'cash',
                'trang_thai' => $datPhong->payment_status,
            ]
        );

        return view('admin.dat_phong.hoa_don_chi_tiet', compact('datPhong', 'hoaDon'));
    }
    
    public function postThanhToan(Request $request, $dat_phong_id)
    {
        $request->validate([
            'trang_thai' => 'required|in:paid,unpaid', 
            'phuong_thuc_thanh_toan' => 'required|string',
        ]);
        
        DB::beginTransaction();
        try {
            $hoaDon = HoaDon::where('dat_phong_id', $dat_phong_id)->firstOrFail();
            $hoaDon->update([
                'trang_thai' => $request->trang_thai,
                'phuong_thuc_thanh_toan' => $request->phuong_thuc_thanh_toan,
            ]);

            $datPhong = DatPhong::findOrFail($dat_phong_id);
            $datPhong->update([
                'payment_status' => $request->trang_thai,
                'payment_method' => $request->phuong_thuc_thanh_toan,
            ]);
            
            if ($request->trang_thai === 'paid' && $datPhong->user) {
                // ... Logic thông báo ...
                $roomName = $datPhong->chiTietDatPhongs->first()->loaiPhong->ten_loai_phong ?? 'Phòng đặt';
                $message = "Đơn #{$datPhong->id} ({$roomName}) đã được xác nhận thanh toán thành công ({$request->phuong_thuc_thanh_toan}).";
                $datPhong->user->notify(new BookingStatusUpdated($datPhong, 'Thanh toán thành công', $message));
            }

            DB::commit();
            return back()->with('success', 'Cập nhật trạng thái thanh toán thành công!');

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi khi cập nhật thanh toán: ' . $e->getMessage());
        }
    }


    // --- HÀM XÓA ĐƠN ĐẶT PHÒNG ĐƠN LẺ ---
    public function getXoa($id)
    {
         // ... (Logic giữ nguyên) ...
        DB::beginTransaction();
        try {
            $datPhong = DatPhong::with('chiTietDatPhongs', 'hoaDon')->findOrFail($id);
            // ... Logic nhả phòng ...
            $chiTiet = $datPhong->chiTietDatPhongs->first();
            if ($chiTiet && $chiTiet->phong_id) {
                $phong = Phong::find($chiTiet->phong_id);
                if ($phong && $phong->tinh_trang === 'booked') {
                    $phong->update(['tinh_trang' => 'available']);
                }
            }
            
            $datPhong->hoaDon()->delete(); 
            $datPhong->chiTietDatPhongs()->delete();
            $datPhong->delete();

            DB::commit();
            return redirect()->route('admin.dat-phong')->with('success', 'Đã xóa vĩnh viễn đơn đặt phòng thành công!');

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi hệ thống khi xóa đơn: ' . $e->getMessage());
        }
    }

    public function xoaHangLoat(Request $request)
    {
        $request->validate([
            'ids' => 'required|array',
            'ids.*' => 'exists:dat_phongs,id', 
        ]);

        $ids = $request->ids;
        $deletedCount = 0;

        DB::beginTransaction();
        try {
            $datPhongs = DatPhong::with('chiTietDatPhongs', 'hoaDon')->whereIn('id', $ids)->get();

            foreach ($datPhongs as $datPhong) {
                $chiTiet = $datPhong->chiTietDatPhongs->first();
                if ($chiTiet && $chiTiet->phong_id) {
                    $phong = Phong::find($chiTiet->phong_id);
                    if ($phong && $phong->tinh_trang === 'booked') {
                        $phong->update(['tinh_trang' => 'available']);
                    }
                }
                $datPhong->hoaDon()->delete();
                $datPhong->chiTietDatPhongs()->delete();
                $datPhong->delete();
                $deletedCount++;
            }

            DB::commit();
            return redirect()->route('admin.dat-phong')
                             ->with('success', "Đã xóa thành công $deletedCount đơn đặt phòng và mở lại các phòng tương ứng!");

        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi hệ thống khi xóa hàng loạt: ' . $e->getMessage());
        }
    }

    /**
     * Move multiple bookings from history to trash (bulk)
     */
    public function bulkMoveToTrash(Request $request)
    {
        $request->validate([
            'ids' => 'required|array',
            'ids.*' => 'exists:dat_phongs,id',
        ]);

        $ids = $request->ids;
        DB::beginTransaction();
        try {
            $datPhongs = DatPhong::with('chiTietDatPhongs')->whereIn('id', $ids)->get();
            foreach ($datPhongs as $dat) {
                // release room if booked
                $chiTiet = $dat->chiTietDatPhongs->first();
                if ($chiTiet && $chiTiet->phong_id) {
                    $phong = Phong::find($chiTiet->phong_id);
                    if ($phong && $phong->tinh_trang === 'booked') {
                        $phong->update(['tinh_trang' => 'available']);
                    }
                }
                $dat->update(['trang_thai' => 'cancelled']);
            }
            DB::commit();
            return redirect()->route('admin.dat-phong.history')->with('success', 'Đã chuyển các đơn được chọn vào thùng rác.');
        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi khi chuyển: ' . $e->getMessage());
        }
    }

    /**
     * Permanently delete multiple bookings from trash (bulk)
     */
    public function bulkDeletePermanent(Request $request)
    {
        $request->validate([
            'ids' => 'required|array',
            'ids.*' => 'exists:dat_phongs,id',
        ]);

        $ids = $request->ids;
        DB::beginTransaction();
        try {
            $datPhongs = DatPhong::with('chiTietDatPhongs', 'hoaDon')->whereIn('id', $ids)->get();
            foreach ($datPhongs as $dat) {
                $chiTiet = $dat->chiTietDatPhongs->first();
                if ($chiTiet && $chiTiet->phong_id) {
                    $phong = Phong::find($chiTiet->phong_id);
                    if ($phong && $phong->tinh_trang === 'booked') {
                        $phong->update(['tinh_trang' => 'available']);
                    }
                }
                $dat->hoaDon()->delete();
                $dat->chiTietDatPhongs()->delete();
                $dat->delete();
            }
            DB::commit();
            return redirect()->route('admin.dat-phong.trash')->with('success', 'Đã xóa vĩnh viễn các đơn được chọn.');
        } catch (\Exception $e) {
            DB::rollBack();
            return back()->with('error', 'Lỗi khi xóa: ' . $e->getMessage());
        }
    }

    /**
     * Hiển thị trang chi tiết một phòng: liệt kê tất cả các đơn đặt phòng liên quan
     */
    public function getRoomDetail(Request $request, $phong_id)
    {
        $phong = Phong::findOrFail($phong_id);

        // Build query with filters: q (user name/email or booking id), status, date range
        $query = DatPhong::whereHas('chiTietDatPhongs', function($q) use ($phong_id) {
            $q->where('phong_id', $phong_id);
        });

        if ($request->filled('q')) {
            $q = $request->get('q');
            $query->where(function($sub) use ($q) {
                $sub->where('id', $q)
                    ->orWhereHas('user', function($u) use ($q) {
                        $u->where('name', 'like', "%{$q}%")->orWhere('email', 'like', "%{$q}%");
                    });
            });
        }

        if ($request->filled('status')) {
            $query->where('trang_thai', $request->get('status'));
        }

        if ($request->filled('from_date')) {
            $from = $request->get('from_date');
            $query->whereDate('created_at', '>=', $from);
        }

        if ($request->filled('to_date')) {
            $to = $request->get('to_date');
            $query->whereDate('created_at', '<=', $to);
        }

        $datPhongs = $query->with(['user', 'chiTietDatPhongs.loaiPhong', 'chiTietDatPhongs.phong'])
                           ->orderBy('created_at', 'desc')
                           ->paginate(10)
                           ->withQueryString();

        return view('admin.dat_phong.room_detail', compact('phong', 'datPhongs'));
    }

    /**
     * Báo cáo doanh thu đơn giản: lọc theo khoảng ngày và phòng
     */
    public function revenueReport(Request $request)
    {
        $from = $request->get('from_date');
        $to = $request->get('to_date');
        $room_id = $request->get('room_id');

        $query = DatPhong::query();

        // Chỉ tính các đơn đã được thanh toán/hoàn thành
        $query->where('payment_status', 'paid');

        if ($from) $query->whereDate('updated_at', '>=', $from);
        if ($to) $query->whereDate('updated_at', '<=', $to);

        if ($room_id) {
            $query->whereHas('chiTietDatPhongs', function($q) use ($room_id) {
                $q->where('phong_id', $room_id);
            });
        }

        $totalRevenue = (float) $query->sum('tong_tien');

        $bookings = $query->with(['user', 'chiTietDatPhongs.phong'])->orderBy('updated_at', 'desc')->paginate(20)->withQueryString();

        $rooms = Phong::orderBy('so_phong')->get();

        return view('admin.reports.revenue', compact('bookings', 'totalRevenue', 'rooms'));
    }
}
</file>

<file path="resources/views/client/booking/success.blade.php">
@extends('layouts.app')
@section('title', 'Đặt phòng thành công')

@section('content')
<div class="success-wrapper">
    <div class="success-card">
        
        <!-- Trạng thái -->
        @if(session('error'))
            <div class="success-icon-wrapper" style="background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.3);">
                <i class="fa-solid fa-xmark" style="color: #ef4444;"></i>
            </div>
            <h2 class="success-title" style="color: #ef4444;">Thất bại!</h2>
            <p class="success-msg">{{ session('error') }}</p>
        @else
            <div class="success-icon-wrapper">
                <i class="fa-solid fa-check"></i>
            </div>
            <h2 class="success-title">Đặt phòng thành công!</h2>
            <p class="success-msg">{{ session('success') ?? 'Cảm ơn bạn đã lựa chọn Luxury Stay.' }}</p>
        @endif
        
        @php
            // Ưu tiên lấy từ biến $booking được truyền sang
            // Nếu không có (F5 mất biến), thử lấy từ session
            $currentBookingId = null;
            if(isset($booking) && $booking) {
                $currentBookingId = $booking->id;
            } elseif(session('booking_id')) {
                $currentBookingId = session('booking_id');
            }
        @endphp

        <!-- Mã đơn -->
        <div class="order-code-box">
            <span class="code-label">Mã đơn đặt phòng</span>
            <div class="code-value">#BK-{{ $currentBookingId ?? 'N/A' }}</div>
        </div>

        <p class="text-muted" style="margin-bottom: 2rem; font-size: 0.9rem;">
            @if(session('error'))
                Vui lòng thử lại hoặc liên hệ hotline để được hỗ trợ.
            @else
                Thông tin chi tiết đã được gửi đến email của bạn. Chúng tôi sẽ liên hệ sớm nhất để xác nhận.
            @endif
        </p>

        <!-- Buttons -->
        <div class="btn-group-vertical">
            @if($currentBookingId)
                {{-- Nút xem Hóa đơn (Chỉ hiện khi có ID) --}}
                <a href="{{ route('bookings.invoice', ['id' => $currentBookingId]) }}" 
                   class="btn btn-primary" 
                   style="color: #000; width: 100%; box-sizing: border-box; text-decoration: none; display: flex; justify-content: center; align-items: center;">
                    <i class="fa-solid fa-file-invoice-dollar" style="margin-right: 8px;"></i> Xem chi tiết hóa đơn
                </a>
            @endif

            {{-- Nút xem Lịch sử (Luôn hiện để backup) --}}
            <a href="{{ route('bookings.history') }}" 
               class="btn btn-view-order" 
               style="margin-top: 10px; display: flex; justify-content: center; align-items: center;">
               <i class="fa-solid fa-clock-rotate-left" style="margin-right: 8px;"></i> Xem lịch sử đặt phòng
            </a>
            
            <a href="{{ route('trang_chu') }}" class="btn-view-order" style="margin-top: 10px;">
                Về trang chủ
            </a>
        </div>
    </div>
</div>
@endsection
</file>

<file path="app/Http/Controllers/Client/PageController.php">
<?php

namespace App\Http\Controllers\Client;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Carbon\Carbon;

// --- 1. IMPORT MODELS ---
use App\Models\LoaiPhong;
use App\Models\Phong;
use App\Models\KhuyenMai;
use App\Models\TienNghi;
use App\Models\ChiTietDatPhong; // <--- Cần thêm model này để check lịch
use App\Models\User;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Str;
use Laravel\Socialite\Facades\Socialite;

class PageController extends Controller
{
    /**
     * Trang chủ
     */
    public function home()
    {
        $loaiPhongs = LoaiPhong::take(3)->get();
        $khuyenMais = KhuyenMai::where('ngay_ket_thuc', '>=', Carbon::today())->take(2)->get();

        return view('home', compact('loaiPhongs', 'khuyenMais'));
    }

    /**
     * Danh sách Loại Phòng (Tìm kiếm & Lọc & Sắp xếp & Check Lịch)
     */
    public function rooms(Request $request)
    {
        $query = LoaiPhong::query();

        // =========================================================================
        // LOGIC TÌM PHÒNG TRỐNG THEO NGÀY (CORE LOGIC)
        // =========================================================================
        $busyRoomIds = []; // Mảng chứa ID các phòng đang bận

        // Chỉ chạy logic này nếu khách hàng đã chọn ngày
        if ($request->filled('checkin') && $request->filled('checkout')) {
            try {
                $checkIn = Carbon::parse($request->checkin);
                $checkOut = Carbon::parse($request->checkout);

                // Tìm các phòng vật lý đã có đơn đặt trong khoảng thời gian này
                // Điều kiện trùng: (Ngày Đến Cũ < Ngày Đi Mới) VÀ (Ngày Đi Cũ > Ngày Đến Mới)
                $busyRoomIds = ChiTietDatPhong::whereHas('datPhong', function ($q) use ($checkIn, $checkOut) {
                    // Chỉ xét các đơn đang hoạt động (chưa hủy)
                    // Bao gồm cả 'pending' (chưa duyệt) cũng coi là bận để giữ chỗ
                    $q->whereIn('trang_thai', ['pending', 'confirmed', 'awaiting_payment', 'paid']) 
                      ->where(function ($sub) use ($checkIn, $checkOut) {
                          $sub->where('ngay_den', '<', $checkOut)
                              ->where('ngay_di', '>', $checkIn);
                      });
                })->pluck('phong_id')->toArray();
                
            } catch (\Exception $e) {
                // Nếu lỗi format ngày tháng, bỏ qua lọc ngày
            }
        }

        // Đếm số phòng trống thực tế cho từng loại phòng
        // Logic: Tổng phòng vật lý - (Phòng Bảo trì + Phòng đã có người đặt trong ngày đó)
        $query->withCount(['phongs' => function ($q) use ($busyRoomIds) {
            // 1. Loại bỏ phòng đang bảo trì (maintenance)
            // Lưu ý: Không dùng 'available' ở đây vì 'available' là trạng thái tĩnh,
            // ta chỉ cần loại bỏ phòng hư hỏng. Việc trống hay không do busyRoomIds quyết định.
            $q->where('tinh_trang', '!=', 'maintenance'); 
            
            // 2. Loại bỏ các phòng đã dính lịch đặt
            if (!empty($busyRoomIds)) {
                $q->whereNotIn('id', $busyRoomIds);
            }
        }]);

        // =========================================================================
        // CÁC BỘ LỌC KHÁC
        // =========================================================================
        
        // Lọc Giá Min
        if ($request->filled('min_price')) {
            $query->where('gia', '>=', $request->input('min_price'));
        }
        
        // Lọc Giá Max
        if ($request->filled('max_price')) {
            $query->where('gia', '<=', $request->input('max_price'));
        }

        // Lọc Sức chứa (Chú ý: DB dùng cột 'so_nguoi')
        if ($request->filled('capacity')) {
            $capacities = $request->input('capacity');
            $query->where(function($q) use ($capacities) {
                $q->whereIn('so_nguoi', $capacities); 
                if (in_array('4', $capacities)) {
                    $q->orWhere('so_nguoi', '>=', 4);
                }
            });
        }

        // Lọc Tiện nghi
        if ($request->filled('amenities')) {
            $amenities = $request->input('amenities');
            $query->whereHas('tienNghis', function($q) use ($amenities) {
                $q->whereIn('tien_nghis.id', $amenities); 
            });
        }

        // Lọc Loại phòng (Checkbox)
        if ($request->filled('room_types')) {
            $query->whereIn('id', $request->input('room_types'));
        }

        // --- SẮP XẾP ---
        // Mặc định: Đẩy phòng còn trống lên trên (phongs_count giảm dần)
        $query->orderBy('phongs_count', 'desc');

        if ($request->filled('sort')) {
            $sort = $request->input('sort');
            switch ($sort) {
                case 'price_asc':
                    $query->orderBy('gia', 'asc');
                    break;
                case 'price_desc':
                    $query->orderBy('gia', 'desc');
                    break;
                default:
                    $query->orderBy('created_at', 'desc');
                    break;
            }
        } else {
            $query->orderBy('created_at', 'desc');
        }

        $rooms = $query->paginate(10)->withQueryString();
        
        // Dữ liệu Sidebar
        $tienNghis = TienNghi::all();
        $allLoaiPhongs = LoaiPhong::select('id', 'ten_loai_phong')->get();

        return view('client.rooms.index', compact('rooms', 'tienNghis', 'allLoaiPhongs'));
    }

    /**
     * Chi tiết Loại Phòng
     */
    public function roomDetail($id, Request $request)
    {
        $room = LoaiPhong::with(['tienNghis', 'phongs'])->findOrFail($id);
        
        // Logic đếm phòng trống tương tự cho trang chi tiết
        $busyRoomIds = [];
        if ($request->filled('checkin') && $request->filled('checkout')) {
            try {
                $checkIn = Carbon::parse($request->checkin);
                $checkOut = Carbon::parse($request->checkout);
                
                $busyRoomIds = ChiTietDatPhong::whereHas('datPhong', function ($q) use ($checkIn, $checkOut) {
                    $q->whereIn('trang_thai', ['pending', 'confirmed', 'awaiting_payment', 'paid']) 
                      ->where(function ($sub) use ($checkIn, $checkOut) {
                          $sub->where('ngay_den', '<', $checkOut)
                              ->where('ngay_di', '>', $checkIn);
                      });
                })->pluck('phong_id')->toArray();
            } catch (\Exception $e) {}
        }

        // Đếm số phòng trống cụ thể của loại này trong khoảng thời gian đó
        $phongTrong = $room->phongs()
            ->where('tinh_trang', '!=', 'maintenance')
            ->when(!empty($busyRoomIds), function($q) use ($busyRoomIds) {
                $q->whereNotIn('id', $busyRoomIds);
            })
            ->count();

        // Gợi ý phòng khác
        $relatedRooms = LoaiPhong::where('so_nguoi', $room->so_nguoi)
                             ->where('id', '!=', $id)
                             ->take(3)
                             ->get();

        return view('client.rooms.detail', compact('room', 'relatedRooms', 'phongTrong'));
    }

    /**
     * Trang khuyến mãi
     */
    public function promotions()
    {
        $promotions = KhuyenMai::where('ngay_ket_thuc', '>=', Carbon::today())->get();
        // Backwards compatibility: some views expect $khuyenMais variable
        $khuyenMais = $promotions;
        return view('client.promotions.index', compact('promotions', 'khuyenMais'));
    }

    /**
     * Trang Về chúng tôi (About)
     */
    public function about()
    {
        return view('client.about.index');
    }

    // Chuyển tới màn hình Đăng nhập bằng Google
    public function getGoogleLogin()
    {
        // Build a redirect URL based on the current request host so the
        // redirect URI matches either localhost or 127.0.0.1 depending
        // on how the developer accessed the app.
        $redirect = rtrim(request()->getSchemeAndHttpHost(), '/') . '/login/google/callback';

        return Socialite::driver('google')
            ->redirectUrl($redirect)
            ->redirect();
    }

    // Xử lý phản hồi sau khi đăng nhập thành công ở Google
    public function getGoogleCallback()
    {
        // Ensure the same redirect URL is used when exchanging the code
        // so Socialite/Guzzle uses the exact redirect_uri that was sent.
        $redirect = rtrim(request()->getSchemeAndHttpHost(), '/') . '/login/google/callback';

        try {
            $user = Socialite::driver('google')
                ->redirectUrl($redirect)
                ->setHttpClient(new \GuzzleHttp\Client(['verify' => false]))
                ->stateless()
                ->user();
        } catch (\Exception $e) {
            // Log exception for debugging and redirect to login page
            \Log::error('Google OAuth callback error: ' . $e->getMessage());
            return redirect()->route('login')->with('warning', 'Lỗi xác thực Google. Vui lòng thử lại.');
        }

    $existingUser = User::where('email', $user->email)->first();
    if ($existingUser) {
        // Nếu người dùng đã tồn tại thì đăng nhập
        Auth::login($existingUser, true);
        return redirect()->route('trang_chu');
    }

    // Nếu chưa tồn tại người dùng thì thêm mới
    $newUser = User::create([
        'name' => $user->name,
        'email' => $user->email,
        'username' => Str::before($user->email, '@'),
        'password' => Hash::make(Str::random(16)), // mật khẩu ngẫu nhiên, user dùng Google để đăng nhập
    ]);

    // Sau đó đăng nhập
    Auth::login($newUser, true);
    return redirect()->route('trang_chu');
    }


}
</file>

<file path="resources/views/client/rooms/detail.blade.php">
@extends('layouts.app')
@section('title', $room->ten_loai_phong)

@section('content')

<!-- Container chính cho trang chi tiết -->
<div class="room-detail-container">
    <div class="container">
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb">
            <a href="{{ route('trang_chu') }}">Trang chủ</a>
            <span class="text-gray-300">/</span>
            <a href="{{ route('phong.danh-sach') }}">Phòng nghỉ</a>
            <span class="text-gray-300">/</span>
            <span class="active">{{ $room->ten_loai_phong }}</span>
        </nav>

        <!-- Grid Layout (Chia cột trái/phải bằng CSS rooms.css) -->
        <div class="detail-grid">
            
            <!-- CỘT TRÁI: Hình ảnh & Thông tin -->
            <div class="left-column">
                
                <!-- 1. Ảnh lớn & Tiêu đề (Gallery Main) -->
                <div class="room-gallery-main">
                    <img src="{{ $room->hinh_anh ? asset($room->hinh_anh) : asset('uploads/home/phongdefault.png') }}" 
                         alt="{{ $room->ten_loai_phong }}">
                    
                    <div class="room-gallery-overlay"></div>
                    
                    <div class="room-title-overlay">
                        <h1 class="room-detail-title">{{ $room->ten_loai_phong }}</h1>
                        <div class="room-meta-flex">
                            <span><i class="fa-solid fa-user-group"></i> {{ $room->so_nguoi }} Khách</span>
                            <span><i class="fa-solid fa-ruler-combined"></i> {{ $room->dien_tich ?? '--' }} m²</span>
                            <span><i class="fa-solid fa-bed"></i> 1 Giường King</span>
                        </div>
                    </div>
                </div>
                
                <!-- 2. Mô tả phòng -->
                <div class="room-desc-box">
                    <h3 class="room-desc-title">Mô tả phòng</h3>
                    <div class="desc-content">
                        <p class="mb-4">{{ $room->mo_ta ?? 'Chưa có mô tả chi tiết cho hạng phòng này.' }}</p>
                        <p>Được thiết kế với phong cách hiện đại pha lẫn nét cổ điển, phòng {{ $room->ten_loai_phong }} mang đến không gian nghỉ dưỡng lý tưởng. Nội thất cao cấp, ánh sáng tự nhiên và các tiện ích công nghệ cao sẽ làm hài lòng những vị khách khó tính nhất.</p>
                    </div>
                </div>

                <!-- 3. Tiện nghi (Amenities Box) -->
                <div class="amenities-box">
                    <h3 class="room-desc-title" style="margin-bottom: 2rem;">Tiện nghi cao cấp</h3>
                    
                    @if($room->tienNghis && $room->tienNghis->count() > 0)
                        <div class="amenities-grid">
                            @foreach($room->tienNghis as $tn)
                                <div class="amenity-item">
                                    <div class="amenity-icon-box">
                                        <i class="{{ $tn->icon ?? 'fa-solid fa-check' }}"></i>
                                    </div>
                                    <span>{{ $tn->ten_tien_nghi }}</span>
                                </div>
                            @endforeach
                        </div>
                    @else
                        <p class="text-muted italic">Đang cập nhật danh sách tiện nghi...</p>
                    @endif
                </div>
            </div>

            <!-- CỘT PHẢI: Form Đặt phòng (Sticky Sidebar) -->
            <div class="right-column">
                <div class="booking-sidebar-card">
                    <div class="booking-price-header">
                        <div>
                            <span class="price-label">Giá tốt nhất</span>
                            <div class="flex items-baseline gap-1">
                                <span class="price-large">{{ number_format($room->gia, 0, ',', '.') }}đ</span>
                                <span class="price-unit">/đêm</span>
                            </div>
                        </div>
                        <div class="badge-breakfast">
                            <i class="fa-solid fa-mug-hot"></i> Ăn sáng
                        </div>
                    </div>

                    <!-- FORM KIỂM TRA & ĐẶT -->
                    <!-- Form gửi lại chính trang này với tham số ngày mới -->
                    <form action="{{ route('phong.chi-tiet', $room->id) }}" method="GET" id="booking-date-form">
                        <input type="hidden" name="room_id" value="{{ $room->id }}">
                        
                        <!-- Check-in -->
                        <div class="booking-form-group">
                            <label class="booking-label">Ngày nhận phòng</label>
                            <div class="date-input-wrapper">
                                <i class="fa-regular fa-calendar"></i>
                                <input type="date" 
                                       id="checkin_date" 
                                       name="checkin" 
                                       value="{{ request('checkin') }}" 
                                       onchange="document.getElementById('booking-date-form').submit()"
                                       required 
                                       min="{{ date('Y-m-d') }}">
                            </div>
                        </div>

                        <!-- Check-out -->
                        <div class="booking-form-group">
                            <label class="booking-label">Ngày trả phòng</label>
                            <div class="date-input-wrapper">
                                <i class="fa-regular fa-calendar-check"></i>
                                <input type="date" 
                                       id="checkout_date" 
                                       name="checkout" 
                                       value="{{ request('checkout') }}" 
                                       onchange="document.getElementById('booking-date-form').submit()"
                                       required 
                                       min="{{ date('Y-m-d', strtotime('+1 day')) }}">
                            </div>
                        </div>

                        <!-- [MỚI] HIỂN THỊ TRẠNG THÁI PHÒNG TRỐNG -->
                        @if(request('checkin') && request('checkout'))
                            {{-- Trạng thái hiển thị khi ngày đã được chọn --}}
                            @if($phongTrong > 0)
                                <div class="status-box status-available">
                                    <i class="fa-solid fa-circle-check text-lg"></i>
                                    <div>
                                        <span class="font-bold block">Còn {{ $phongTrong }} phòng trống!</span>
                                        <span class="text-xs">Đã kiểm tra lịch từ {{ \Carbon\Carbon::parse(request('checkin'))->format('d/m') }} - {{ \Carbon\Carbon::parse(request('checkout'))->format('d/m') }}.</span>
                                    </div>
                                </div>
                                <button type="submit" 
                                        formaction="{{ route('booking.create') }}"
                                        formmethod="GET"
                                        class="btn-book-now">
                                    <span>ĐẶT PHÒNG NGAY</span>
                                    <i class="fa-solid fa-arrow-right"></i>
                                </button>
                            @else
                                <div class="status-box status-soldout">
                                    <i class="fa-solid fa-circle-exclamation text-lg"></i>
                                    <div>
                                        <span class="font-bold block">Hết phòng!</span>
                                        <span class="text-xs">Không còn phòng trống trong khoảng thời gian này.</span>
                                    </div>
                                </div>
                                <button type="button" class="btn-book-now btn-disabled" disabled>
                                    TẠM HẾT PHÒNG
                                </button>
                            @endif
                        @else
                            {{-- Trạng thái hiển thị khi chưa chọn ngày --}}
                            <div class="status-box status-available">
                                <i class="fa-solid fa-calendar-alt text-lg"></i>
                                <div>
                                    <span class="font-bold block">Chọn ngày để kiểm tra</span>
                                    <span class="text-xs">Tổng số phòng loại này: {{ $room->phongs->where('tinh_trang', '!=', 'maintenance')->count() }} phòng.</span>
                                </div>
                            </div>
                             <button type="submit" 
                                    formaction="{{ route('booking.create') }}"
                                    formmethod="GET"
                                    class="btn-book-now btn-disabled" 
                                    disabled>
                                <span>ĐẶT PHÒNG NGAY</span>
                                <i class="fa-solid fa-arrow-right"></i>
                            </button>
                        @endif
                        
                        <p class="booking-note">
                            * Bạn sẽ được yêu cầu đăng nhập để hoàn tất đặt phòng.
                        </p>
                    </form>
                </div>
            </div>
            <!-- END CỘT PHẢI -->

        </div>
    </div>
</div>

@endsection

@push('scripts')
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const checkinInput = document.getElementById('checkin_date');
        const checkoutInput = document.getElementById('checkout_date');
        const bookNowBtn = document.querySelector('.btn-book-now');
        const form = document.getElementById('booking-date-form');

        // Hàm cập nhật min date cho Checkout
        const updateCheckoutMinDate = (checkinVal) => {
            if (checkinVal) {
                const checkinDate = new Date(checkinVal);
                checkinDate.setDate(checkinDate.getDate() + 1);
                
                const minCheckout = checkinDate.toISOString().split('T')[0];
                checkoutInput.min = minCheckout;
                
                if (checkoutInput.value && checkoutInput.value <= checkinVal) {
                    checkoutInput.value = minCheckout;
                }
            }
        };

        // 1. Logic tự động submit và cập nhật min date
        checkinInput.addEventListener('change', function() {
            updateCheckoutMinDate(this.value);
            // Submit form để chạy lại logic đếm phòng trống trong Controller
            if (this.value && checkoutInput.value) {
                 form.submit();
            }
        });

        checkoutInput.addEventListener('change', function() {
            // Submit form để chạy lại logic đếm phòng trống trong Controller
            if (this.value && checkinInput.value) {
                 form.submit();
            }
        });

        // Khởi tạo min date khi trang tải (trường hợp khách quay lại trang)
        updateCheckoutMinDate(checkinInput.value);

        // 2. Chặn submit nếu thiếu ngày (để nút "ĐẶT PHÒNG NGAY" chỉ hoạt động khi có ngày)
        form.addEventListener('submit', function(e) {
            const checkin = checkinInput.value;
            const checkout = checkoutInput.value;

            if (!checkin || !checkout || new Date(checkin) >= new Date(checkout)) {
                e.preventDefault();
                alert('Vui lòng chọn ngày hợp lệ: Ngày trả phòng phải sau ngày nhận phòng ít nhất 1 ngày.');
                return;
            }
        });
        
        // 3. Tự động kích hoạt/vô hiệu hóa nút Đặt phòng
        const toggleBookNowButton = () => {
            const checkin = checkinInput.value;
            const checkout = checkoutInput.value;
            const isDateSelected = checkin && checkout && (new Date(checkin) < new Date(checkout));

            if (bookNowBtn) {
                // Nếu khách chưa chọn ngày, nút "ĐẶT PHÒNG NGAY" (loại 'submit') phải bị disabled
                if (!isDateSelected) {
                    bookNowBtn.disabled = true;
                    bookNowBtn.classList.add('btn-disabled');
                } else {
                    bookNowBtn.disabled = false;
                    bookNowBtn.classList.remove('btn-disabled');
                }
            }
        };
    });
</script>
@endpush
</file>

<file path="app/Http/Controllers/Client/BookingController.php">
<?php

namespace App\Http\Controllers\Client;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Models\LoaiPhong;
use App\Models\DatPhong;
use App\Models\ChiTietDatPhong;
use App\Models\Phong;
use App\Models\KhuyenMai;
use App\Models\HoaDon; 
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\DB;
use Carbon\Carbon;
use Illuminate\Http\RedirectResponse; 
use Illuminate\Support\Facades\Log; 

class BookingController extends Controller
{
    // ===============================================
    // 1. HÀM HIỂN THỊ & API
    // ===============================================

    public function create(Request $request)
    {
        $loaiPhongId = $request->room_id;
        $checkIn = $request->checkin;
        $checkOut = $request->checkout;

        if (!$loaiPhongId || !$checkIn || !$checkOut) {
            return redirect()->route('phong.danh-sach')
                ->with('error', 'Vui lòng chọn ngày và loại phòng trước!');
        }

        // Kiểm tra phòng trống
        $phongTrong = $this->findAvailableRoom($loaiPhongId, $checkIn, $checkOut);
        
        if (!$phongTrong) {
            return redirect()->back()
                ->with('error', 'Rất tiếc, hạng phòng này đã HẾT CHỖ trong khoảng thời gian bạn chọn.')
                ->withInput();
        }

        $roomType = LoaiPhong::findOrFail($loaiPhongId);
        
        $start = Carbon::parse($checkIn);
        $end = Carbon::parse($checkOut);
        $days = $start->diffInDays($end) ?: 1;
        $totalPrice = $roomType->gia * $days;

        return view('client.booking.create', compact('roomType', 'checkIn', 'checkOut', 'days', 'totalPrice'));
    }

    public function checkPromotion(Request $request)
    {
        $request->validate(['code' => 'required|string', 'original_total' => 'required|numeric']);
        $code = strtoupper($request->code);
        $originalTotal = $request->original_total;
        
        $khuyenMai = KhuyenMai::where('ma_khuyen_mai', $code)
            ->whereDate('ngay_bat_dau', '<=', Carbon::now())
            ->whereDate('ngay_ket_thuc', '>=', Carbon::now())
            ->first();

        if (!$khuyenMai) {
            return response()->json(['success' => false, 'discount_amount' => 0, 'final_total' => $originalTotal, 'message' => 'Mã không hợp lệ.'], 200);
        }

        $discountAmount = ($khuyenMai->chiet_khau_phan_tram > 0) 
            ? $originalTotal * ($khuyenMai->chiet_khau_phan_tram / 100)
            : $khuyenMai->so_tien_giam_gia;

        if ($discountAmount > $originalTotal) $discountAmount = $originalTotal;
        $finalTotal = $originalTotal - $discountAmount;

        return response()->json([
            'success' => true,
            'discount_amount' => round($discountAmount),
            'final_total' => round($finalTotal),
            'message' => 'Áp dụng mã thành công!'
        ], 200);
    }

    public function success() {
        $bookingId = session('booking_id');
        $booking = null;

        if ($bookingId) {
            $booking = DatPhong::find($bookingId);
        }

        return view('client.booking.success', compact('booking'));
    }

    // ===============================================
    // 2. LOGIC TÌM PHÒNG (CORE)
    // ===============================================

    private function findAvailableRoom($loaiPhongId, $checkIn, $checkOut)
    {
        // 1. Tìm ID các phòng vật lý đang bận (đã được đặt)
        $bookedRoomIds = ChiTietDatPhong::whereHas('datPhong', function ($query) use ($checkIn, $checkOut) {
            // Chỉ coi là bận nếu đơn đang trong trạng thái active (Pending, Confirmed, Paid, Awaiting)
            $query->whereIn('trang_thai', ['pending', 'confirmed', 'paid', 'awaiting_payment'])
                  ->where(function ($q) use ($checkIn, $checkOut) {
                      // Điều kiện trùng lịch: (Ngày Đến Cũ < Ngày Đi Mới) AND (Ngày Đi Cũ > Ngày Đến Mới)
                      $q->where('ngay_den', '<', $checkOut)
                        ->where('ngay_di', '>', $checkIn);
                  });
        })->where('loai_phong_id', $loaiPhongId) 
          ->pluck('phong_id')
          ->toArray(); // Mảng ID các phòng BẬN

        // 2. Tìm một phòng vật lý thuộc loại phòng này đang trống
        $phongTrong = Phong::where('loai_phong_id', $loaiPhongId)
                           ->where('tinh_trang', '!=', 'maintenance') // Loại trừ phòng bảo trì
                           ->whereNotIn('id', $bookedRoomIds) // Loại trừ phòng đang bận
                           ->first(); // Chỉ cần tìm MỘT phòng
        
        return $phongTrong;
    }
    
    // ===============================================
    // 3. XỬ LÝ ĐẶT PHÒNG TẠI KHÁCH SẠN (PAY AT HOTEL - PENDING)
    // ===============================================

    public function store(Request $request)
    {
        // Validation cơ bản (Đã bỏ payment_method vì nó được set là 'pay_at_hotel' ở client)
        $request->validate([
            'room_id' => 'required|exists:loai_phongs,id',
            'checkin' => 'required|date',
            'checkout' => 'required|date|after:checkin',
            'payment_method' => 'required|in:pay_at_hotel',
            'ghi_chu' => 'nullable|string',
        ]);

        DB::beginTransaction();
        try {
            // Kiểm tra và gán phòng ngay lập tức trước khi tạo đơn
            $phongTrong = $this->findAvailableRoom($request->room_id, $request->checkin, $request->checkout);

            if (!$phongTrong) {
                DB::rollBack();
                return back()->with('error', 'Rất tiếc, phòng vừa bị người khác đặt mất.');
            }

            // Tạo Booking: PENDING (Chờ duyệt), UNPAID (Chưa thanh toán)
            $booking = $this->createBooking($request, 'pending', 'unpaid', $phongTrong);
            
            DB::commit();
            
            // Chuyển hướng đến trang thành công
            return redirect()->route('booking.success')
                ->with('success', 'Đặt phòng thành công! Đơn hàng đang chờ Admin xác nhận.')
                ->with('booking_id', $booking->id);

        } catch (\Exception $e) {
            DB::rollBack();
            Log::error('Lỗi khi tạo đơn (Store): ' . $e->getMessage());
            return back()->with('error', 'Lỗi hệ thống khi tạo đơn: ' . $e->getMessage());
        }
    }
    
    // ===============================================
    // 4. XỬ LÝ THANH TOÁN ONLINE (VNPAY) - KHÔNG TỰ ĐỘNG DUYỆT
    // Sau khi thanh toán online, hệ thống chỉ ghi nhận trạng thái thanh toán
    // nhưng vẫn giữ `trang_thai` là 'pending' để Admin duyệt và xác nhận phòng.
    // ===============================================
    
    public function postVnPayStore(Request $request)
    {
        // Validation cần thiết cho cả booking data và payment data
        $request->validate([
            'room_id' => 'required|exists:loai_phongs,id',
            'checkin' => 'required|date',
            'checkout' => 'required|date',
            'payment_method' => 'required|in:online',
            'vnp_BankCode' => 'required|string', 
            // Các trường khác như promotion_code, discount_amount tự động được xử lý
        ]);

        DB::beginTransaction();
        try {
            // Kiểm tra và gán phòng ngay lập tức trước khi tạo đơn
            $phongTrong = $this->findAvailableRoom($request->room_id, $request->checkin, $request->checkout);

            if (!$phongTrong) {
                DB::rollBack();
                return back()->with('error', 'Rất tiếc, phòng vừa bị người khác đặt mất.');
            }

            // Tạo Booking: PENDING (chờ Admin duyệt) nhưng payment_status = PAID
            $booking = $this->createBooking($request, 'pending', 'paid', $phongTrong);
            
            // Tạo Hóa đơn ngay lập tức cho thanh toán online
            HoaDon::create([
                'dat_phong_id' => $booking->id,
                'ma_hoa_don' => 'HD' . time() . rand(1000, 9999),
                'ngay_lap' => now(),
                'tong_tien' => $booking->tong_tien,
                'phuong_thuc_thanh_toan' => $request->payment_method, // 'online'
                'trang_thai' => 'paid', 
            ]);

            DB::commit();

            // Redirect to success page (do not auto-open invoice). Pass booking_id for the success view.
            return redirect()->route('booking.success')
                ->with('success', 'Thanh toán Online thành công! Đơn phòng đã được ghi nhận. Vui lòng chờ Admin xác nhận.')
                ->with('booking_id', $booking->id);

        } catch (\Exception $e) {
            DB::rollBack();
            Log::error('Lỗi xử lý VNPay Store: ' . $e->getMessage());
            return back()->with('error', 'Lỗi xử lý thanh toán: ' . $e->getMessage());
        }
    }
    
    // ===============================================
    // 5. HÀM TẠO BOOKING CHUNG
    // ===============================================

    private function createBooking($request, $status, $paymentStatus, $phongTrong)
    {
        $loaiPhong = LoaiPhong::find($request->room_id);

        $days = Carbon::parse($request->checkin)->diffInDays(Carbon::parse($request->checkout)) ?: 1;
        $originalTotal = $loaiPhong->gia * $days;
        $discountAmount = $request->discount_amount ?? 0;
        $finalTotal = $originalTotal - $discountAmount;

        $booking = DatPhong::create([
            'user_id' => Auth::id(),
            'ngay_den' => $request->checkin,
            'ngay_di' => $request->checkout,
            'tong_tien' => $finalTotal,
            'trang_thai' => $status,
            'payment_status' => $paymentStatus,
            'payment_method' => $request->payment_method,
            'promotion_code' => $request->promotion_code,
            'discount_amount' => $discountAmount,
            'ghi_chu' => $request->ghi_chu ?? ($request->vnp_OrderInfo ?? null),
        ]);

        // Tạo chi tiết đặt phòng (gán phòng vật lý đã tìm thấy)
        ChiTietDatPhong::create([
            'dat_phong_id' => $booking->id,
            'loai_phong_id' => $loaiPhong->id,
            'phong_id' => $phongTrong->id,
            'so_luong' => 1,
            'don_gia' => $loaiPhong->gia,
            'thanh_tien' => $originalTotal,
        ]);

        // Lưu ID đơn hàng vào session (dùng cho trang success)
        // Dùng key 'booking_id' để nhất quán với các redirect khác.
        session()->flash('booking_id', $booking->id);
        return $booking;
    }

    public function paymentCallback(Request $request) { return redirect()->route('trang_chu'); }

    // ===============================================
    // [HÀM LỊCH SỬ & HÓA ĐƠN]
    // ===============================================
    
    public function history()
    {
        $bookings = DatPhong::where('user_id', Auth::id())
            ->with(['chiTietDatPhongs.loaiPhong', 'hoaDon'])
            ->orderBy('created_at', 'desc')
            ->paginate(5);

        return view('client.booking.history', compact('bookings'));
    }

    public function invoice($id)
    {
        $booking = DatPhong::where('user_id', Auth::id())
            ->with(['chiTietDatPhongs.loaiPhong', 'chiTietDatPhongs.phong', 'hoaDon', 'user'])
            ->findOrFail($id);

        // If request contains ?print=1 or ?pdf=1, use the minimal print layout
        $usePrintLayout = request()->query('print') || request()->query('pdf');
        $layout = $usePrintLayout ? 'layouts.print' : 'layouts.app';

        return view('client.booking.invoice', compact('booking'))->with('layout', $layout);
    }

    // Server-side PDF export removed; printing is handled via browser print and `layouts.print` when ?print=1
}
</file>

<file path="resources/views/client/booking/create.blade.php">
@extends('layouts.app')
@section('title', 'Xác nhận đặt phòng')


@section('content')
{{-- Khai báo Alpine.js --}}
<div class="booking-page-wrapper" 
     x-data="{ onlinePaymentSelected: false, showVnpayModal: false, finalTotalText: '{{ number_format($totalPrice, 0, ',', '.') }}đ', vnpLocale: 'vn', vnpOrderInfo: 'Thanh toan don dat phong #{{ $roomType->id }}' }"
     x-on:open-vnpay-modal.window="showVnpayModal = true">
    
    <div class="container">
        
        <!-- Page Header -->
        <div class="page-header-center">
            <h1 class="page-title">Hoàn tất đặt phòng</h1>
            <p class="page-desc">Vui lòng kiểm tra lại thông tin và áp dụng ưu đãi trước khi xác nhận.</p>
        </div>

        {{-- FORM CHÍNH --}}
        <form action="{{ route('booking.store') }}" 
              method="POST" 
              class="booking-layout" 
              id="booking-form"
              data-route-vnpay="{{ route('booking.vnpay.create') }}">
            @csrf
            <!-- Dữ liệu ẩn quan trọng -->
            <input type="hidden" name="room_id" value="{{ $roomType->id }}">
            <input type="hidden" name="checkin" value="{{ $checkIn }}">
            <input type="hidden" name="checkout" value="{{ $checkOut }}">
            
            <!-- Hidden inputs cho logic giảm giá (JS sẽ cập nhật value) -->
            <input type="hidden" name="discount_amount" id="discount-amount-input" value="0">
            <input type="hidden" name="promotion_code" id="promotion-code-hidden" value="">
            
            <!-- Input ẩn để gửi payment_method lên server -->
            <input type="hidden" name="payment_method" :value="onlinePaymentSelected ? 'online' : 'pay_at_hotel'">

            <!-- CỘT TRÁI -->
            <div class="booking-form-area">
                
                <!-- 1. Thông tin đăng ký -->
                <div class="booking-card">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <h3 class="step-title">Thông tin đăng ký</h3>
                    </div>
                    <div class="info-grid">
                        <div class="info-group">
                            <label class="info-label">Họ và tên</label>
                            <div class="info-value-box">{{ Auth::user()->name }}</div>
                        </div>
                        <div class="info-group">
                            <label class="info-label">Số điện thoại</label>
                            <div class="info-value-box">{{ Auth::user()->phone ?? 'Chưa cập nhật' }}</div>
                        </div>
                    </div>
                    <div class="info-note">
                        Nếu cần thay đổi, bạn có thể <a href="{{ route('profile.edit') }}">cập nhật hồ sơ</a>.
                    </div>
                </div>

                <!-- 2. Mã khuyến mãi -->
                <div class="booking-card">
                    <div class="step-header">
                        <div class="step-number">2</div>
                        <h3 class="step-title">Mã khuyến mãi</h3>
                    </div>
                    <div class="promo-input-group">
                        <input type="text" name="promotion_code_display" id="promotion-code-input"
                               placeholder="NHẬP MÃ (VD: SUMMER2025)..." class="promo-input">
                        
                        {{-- [QUAN TRỌNG] Thêm data-route-check-promo để JS lấy URL chính xác --}}
                        <button type="button" id="apply-promo-btn" 
                                data-route-check-promo="{{ route('api.check.promo') }}"
                                class="btn-apply">Áp dụng</button>
                    </div>
                    <p id="promo-message" class="promo-msg text-sm font-medium mt-2"></p>
                </div>
                
                <!-- 3. Thanh toán -->
                <div class="booking-card">
                    <div class="step-header">
                        <div class="step-number">3</div>
                        <h3 class="step-title">Lựa chọn thanh toán</h3>
                    </div>
                    
                    <label class="payment-option" :class="{'selected': !onlinePaymentSelected}">
                        <input type="radio" name="payment_method_radio" value="pay_at_hotel" 
                               :checked="!onlinePaymentSelected" 
                               @click="onlinePaymentSelected = false"
                               class="radio-custom">
                        <div class="payment-info">
                            <span class="payment-title">Thanh toán tại khách sạn</span>
                            <span class="payment-desc">Thanh toán khi làm thủ tục nhận phòng (Check-in). Admin sẽ duyệt đơn thủ công.</span>
                        </div>
                        <div class="payment-icon"><i class="fa-solid fa-hotel"></i></div>
                    </label>

                    <label class="payment-option" :class="{'selected': onlinePaymentSelected}">
                        <input type="radio" name="payment_method_radio" value="online" 
                               :checked="onlinePaymentSelected" 
                               @click="onlinePaymentSelected = true"
                               class="radio-custom">
                        <div class="payment-info">
                            <span class="payment-title">Thanh toán Online (VNPay/Momo)</span>
                            <span class="payment-desc">Đơn sẽ được <strong>tự động duyệt</strong> ngay sau khi thanh toán.</span>
                        </div>
                        <div class="payment-icon"><i class="fa-brands fa-cc-visa"></i></div>
                    </label>
                    
                    @error('payment_method') <p class="promo-msg error">{{ $message }}</p> @enderror
                </div>

                <!-- 4. Ghi chú -->
                <div class="booking-card">
                    <div class="step-header">
                        <div class="step-number">4</div>
                        <h3 class="step-title">Ghi chú (Tùy chọn)</h3>
                    </div>
                    <textarea name="ghi_chu" rows="3" placeholder="Nhập yêu cầu đặc biệt..." 
                              class="form-control" style="background: rgba(255,255,255,0.05); border: 1px solid var(--border-light); color: var(--white); outline: none; padding: 10px; border-radius: 8px; width: 100%;"></textarea>
                </div>
            </div>

            <!-- CỘT PHẢI: Summary Sticky -->
            <div class="booking-sidebar">
                <div class="summary-card" id="summary-card">
                    <h3 class="summary-title">Chi tiết đơn đặt</h3>
                    
                    <div class="summary-room-info">
                        <img src="{{ $roomType->hinh_anh ? asset($roomType->hinh_anh) : asset('uploads/home/phongdefault.png') }}" class="summary-thumb">
                        <div>
                            <h4 class="summary-room-name">{{ $roomType->ten_loai_phong }}</h4>
                            <p class="summary-room-guest"><i class="fa-solid fa-user"></i> {{ $roomType->so_nguoi }} Khách</p>
                        </div>
                    </div>

                    <div class="summary-dates">
                        <div class="date-row">
                            <div class="date-col">
                                <span class="date-label">Nhận phòng</span>
                                <span class="date-value">{{ \Carbon\Carbon::parse($checkIn)->format('d/m/Y') }}</span>
                            </div>
                            <div class="date-arrow"><i class="fa-solid fa-arrow-right-long"></i></div>
                            <div class="date-col right">
                                <span class="date-label">Trả phòng</span>
                                <span class="date-value">{{ \Carbon\Carbon::parse($checkOut)->format('d/m/Y') }}</span>
                            </div>
                        </div>
                        <span class="stay-duration"><i class="fa-regular fa-clock"></i> {{ $days }} Đêm lưu trú</span>
                    </div>

                    <div class="summary-totals">
                        <div class="total-row">
                            <span>Giá gốc</span>
                            {{-- [QUAN TRỌNG] Thêm data-original-price --}}
                            <span id="original-total" data-original-price="{{ $totalPrice }}">{{ number_format($totalPrice, 0, ',', '.') }}đ</span>
                        </div>
                        <div class="total-row discount">
                            <span>Giảm giá (<span id="promo-code-display">—</span>)</span>
                            <span id="discount-display">- 0đ</span>
                        </div>
                        <div class="divider-dashed"></div>
                        <div class="final-total">
                            <span>TỔNG CỘNG</span>
                            <span class="final-price" id="final-total-display" x-text="finalTotalText">{{ number_format($totalPrice, 0, ',', '.') }}đ</span>
                        </div>
                    </div>

                    {{-- NÚT SUBMIT --}}
                    <button type="submit" 
                            x-on:click.prevent="if (onlinePaymentSelected) { showVnpayModal = true; } else { document.getElementById('booking-form').submit(); }"
                            class="btn-confirm-booking">
                        <span x-text="onlinePaymentSelected ? 'THANH TOÁN QR NGAY' : 'GỬI YÊU CẦU ĐẶT PHÒNG'">GỬI YÊU CẦU ĐẶT PHÒNG</span>
                        <i class="fa-solid fa-arrow-right"></i>
                    </button>
                    
                    <p class="terms-text">
                        Bằng việc xác nhận, bạn đồng ý với <a href="#">Điều khoản</a> của Luxury Stay.
                    </p>
                </div>
            </div>
        </form>
    </div>

    {{-- MODAL VNPAY QR (MÀN HÌNH XÁC NHẬN DEMO) --}}
    <div x-show="showVnpayModal" class="modal-overlay" x-cloak>
        <div class="modal-content" @click.away="showVnpayModal = false">
            <button @click="showVnpayModal = false" class="modal-close"><i class="fa-solid fa-xmark"></i></button>

            <h3 class="filter-title" style="margin-bottom: 0.5rem; color: #fff;">Quét mã thanh toán</h3>
            <p class="text-muted" style="font-size: 0.9rem;">Sử dụng App Ngân hàng hoặc Ví VNPAY</p>

            {{-- Form này chỉ để hiển thị hoặc chứa input ẩn cho JS clone --}}
            {{-- [FIXED] Form này sẽ được JS submitVnPay() sử dụng --}}
            <form id="vnpay-form" method="POST" action="{{ route('booking.vnpay.create') }}" class="space-y-4"> 
                @csrf
                {{-- Các input ẩn cần thiết cho Controller --}}
                <input type="hidden" name="room_id" value="{{ $roomType->id }}">
                <input type="hidden" name="checkin" value="{{ $checkIn }}">
                <input type="hidden" name="checkout" value="{{ $checkOut }}">
                
                {{-- [QUAN TRỌNG] Các input này sẽ được JS cập nhật khi áp mã --}}
                <input type="hidden" name="discount_amount" value="0">
                <input type="hidden" name="promotion_code" value="">

                <input type="hidden" name="vnp_BankCode" value="VNPAYQR">
                {{-- Các input này sẽ được cập nhật từ Alpine --}}
                <input type="hidden" name="vnp_Locale" x-model="vnpLocale">
                <input type="hidden" name="vnp_OrderInfo" x-model="vnpOrderInfo">

                <div class="qr-container" style="background: white; padding: 10px; border-radius: 8px; margin: 15px auto; width: fit-content;">
                    <img src="{{ asset('uploads/QR/QR.jpg') }}" 
                        alt="QR Code" 
                        style="width: 200px; height: 200px;">
                </div>

                <div class="mb-4">
                    <span class="text-muted text-sm block uppercase">Số tiền cần thanh toán</span>
                    <strong class="final-price" style="color: #ef4444; font-size: 1.5rem;" x-text="finalTotalText"></strong>
                </div>

                <div>
                    {{-- NÚT NÀY GỌI HÀM JS submitVnPay() --}}
                    <button type="button" 
                            onclick="submitVnPay()"
                            class="btn-confirm-booking" style="background: #10b981; color: white;">
                        <i class="fa-solid fa-check-double" style="margin-right: 5px;"></i> XÁC NHẬN ĐÃ THANH TOÁN
                    </button>
                    <p class="text-[11px] text-gray-400 mt-2">Nhấn nút trên sau khi đã quét mã thành công.</p>
                </div>
            </form>
        </div>
    </div>
    
</div>
@endsection
</file>

<file path="vite.config.js">
import { defineConfig } from 'vite';
import laravel from 'laravel-vite-plugin';

export default defineConfig({
    plugins: [
        laravel({
            input: [
                'resources/sass/app.scss',
                'resources/js/app.js',

                // Client Assets
                'resources/css/login.css',
                'resources/css/register.css',
                'resources/css/password.css',
                'resources/css/client/home.css',
                'resources/css/client/rooms.css',
                'resources/css/client/profile.css',
                'resources/css/client/booking.css',
                'resources/css/client/about.css',
                'resources/css/client/contact.css',
                'resources/css/client/promo.css',
                'resources/css/client/notifications.css',
                'resources/css/client/invoice.css',

                'resources/js/login.js',
                'resources/js/register.js',
                'resources/js/password.js',
                'resources/js/client/home.js',
                'resources/js/client/rooms.js',
                'resources/js/client/profile.js',
                'resources/js/client/booking.js',
                'resources/js/client/about.js',
                'resources/js/client/contact.js',
                'resources/js/client/promo.js',
                'resources/js/client/notifications.js',
                'resources/js/client/invoice.js',

                // Admin Assets (Quan trọng cho trang Dashboard của bạn)
                'resources/css/admin/admin.css',
                'resources/js/admin/admin.js',
            ],
            refresh: true,
        }),
    ],
});
</file>

<file path="routes/web.php">
<?php

use Illuminate\Support\Facades\Route;
use Illuminate\Support\Facades\Auth;

// --- 1. IMPORT ADMIN CONTROLLERS ---
use App\Http\Controllers\Admin\AdminController; 
use App\Http\Controllers\Admin\ChiTietDatPhongController;
use App\Http\Controllers\Admin\DatPhongController; 
use App\Http\Controllers\Admin\HoaDonController;
use App\Http\Controllers\Admin\LoaiPhongController;
use App\Http\Controllers\Admin\PhongController;
use App\Http\Controllers\Admin\UserController;
use App\Http\Controllers\Admin\KhuyenMaiController;
use App\Http\Controllers\Admin\TienNghiController;

// --- 2. IMPORT CLIENT CONTROLLERS ---
use App\Http\Controllers\Client\PageController;
use App\Http\Controllers\Client\BookingController;
use App\Http\Controllers\ProfileController;
use App\Http\Controllers\Client\NotificationController; // Import Notification Controller

Auth::routes();

/*
|--------------------------------------------------------------------------
| PUBLIC ROUTES (KHÁCH HÀNG)
|--------------------------------------------------------------------------
*/

// Trang chủ
Route::get('/', [PageController::class, 'home'])->name('trang_chu');
Route::get('/home', [PageController::class, 'home'])->name('home');

//login with google
Route::get('/login/google', [PageController::class, 'getGoogleLogin'])->name('google.login');
Route::get('/login/google/callback', [PageController::class, 'getGoogleCallback'])->name('google.callback');
// Accept legacy/common callback paths to reduce redirect_uri mismatch causes
Route::get('/larashop/login/google/callback', [PageController::class, 'getGoogleCallback']);
Route::get('/hotel_management/public/login/google/callback', [PageController::class, 'getGoogleCallback']);

// Danh sách & Chi tiết phòng
Route::get('/danh-sach-phong', [PageController::class, 'rooms'])->name('phong.danh-sach');
Route::get('/chi-tiet-phong/{id}', [PageController::class, 'roomDetail'])->name('phong.chi-tiet');

// Trang ưu đãi
Route::get('/uu-dai', [PageController::class, 'promotions'])->name('khuyen-mai');

// [API] Kiểm tra mã khuyến mãi
Route::post('/api/check-promo', [BookingController::class, 'checkPromotion'])->name('api.check.promo');

// [VNPAY CALLBACK] Route xử lý kết quả thanh toán
Route::get('/payment/callback', [BookingController::class, 'paymentCallback'])->name('payment.callback');

Route::get('/ve-chung-toi', [PageController::class, 'about'])->name('ve-chung-toi');
// Contact page
Route::get('/lien-he', function () {
    return view('client.contact.index');
})->name('contact');


/*
|--------------------------------------------------------------------------
| AUTHENTICATED ROUTES (KHÁCH HÀNG ĐÃ ĐĂNG NHẬP)
|--------------------------------------------------------------------------
*/
Route::middleware('auth')->group(function () {
    
    // 1. Hồ sơ cá nhân
    Route::get('/ho-so', [ProfileController::class, 'edit'])->name('profile.edit');
    Route::patch('/ho-so', [ProfileController::class, 'update'])->name('profile.update');

    // 2. Lịch sử đặt phòng
    Route::get('/lich-su-dat-phong', [BookingController::class, 'history'])->name('bookings.history');
    
    // Route xem chi tiết hóa đơn của user
    Route::get('/hoa-don-cua-toi/{id}', [BookingController::class, 'invoice'])->name('bookings.invoice');
    // (PDF export removed) server-side PDF route was removed; printing uses browser print
    
    // 3. [QUẢN LÝ THÔNG BÁO]
    Route::prefix('notifications')->group(function () {
        Route::get('/', [NotificationController::class, 'index'])->name('notifications.index');
        Route::get('/unread-count', [NotificationController::class, 'unreadCount'])->name('notifications.count');
        Route::post('/mark-read/{id}', [NotificationController::class, 'markAsRead'])->name('notifications.markRead');
        Route::delete('/delete/{id}', [NotificationController::class, 'delete'])->name('notifications.delete');
        // Xóa hàng loạt
        Route::post('/delete-multiple', [NotificationController::class, 'bulkDelete'])->name('notifications.deleteMultiple'); 
    });

    // 4. Quy trình đặt phòng (Yêu cầu có Profile)
    Route::middleware(['check.profile'])->group(function () {
        Route::get('/dat-phong/xac-nhan', [BookingController::class, 'create'])->name('booking.create');
        
        // [VNPAY POST]: Xử lý dữ liệu từ modal QR Demo
        Route::post('/dat-phong/vnpay-store', [BookingController::class, 'postVnPayStore'])->name('booking.vnpay.create');
        
        // [CASH POST]: Chỉ để xử lý Pay at Hotel
        Route::post('/dat-phong/luu', [BookingController::class, 'store'])->name('booking.store');
        
        Route::get('/dat-phong/thanh-cong', [BookingController::class, 'success'])->name('booking.success');
    });
});


/*
|--------------------------------------------------------------------------
| ADMIN ROUTES (QUẢN TRỊ VIÊN)
|--------------------------------------------------------------------------
*/
Route::prefix('admin')
    ->middleware(['auth', \App\Http\Middleware\AdminMiddleware::class])
    ->group(function () {
    
    Route::get('/dashboard', [AdminController::class, 'index'])->name('admin.dashboard');

    // Quản lý Loại phòng
    Route::prefix('loai-phong')->group(function() {
        Route::get('/', [LoaiPhongController::class, 'getDanhSach'])->name('admin.loai-phong');
        Route::get('/them', [LoaiPhongController::class, 'getThem'])->name('admin.loai-phong.them');
        Route::post('/them', [LoaiPhongController::class, 'postThem'])->name('admin.loai-phong.store');
        Route::get('/sua/{id}', [LoaiPhongController::class, 'getSua'])->name('admin.loai-phong.sua');
        Route::post('/sua/{id}', [LoaiPhongController::class, 'postSua'])->name('admin.loai-phong.update');
        Route::get('/xoa/{id}', [LoaiPhongController::class, 'getXoa'])->name('admin.loai-phong.xoa');
    });

    // Quản lý Phòng
    Route::prefix('phong')->group(function() {
        Route::get('/', [PhongController::class, 'getDanhSach'])->name('admin.phong');
        Route::get('/them', [PhongController::class, 'getThem'])->name('admin.phong.them');
        Route::post('/them', [PhongController::class, 'postThem'])->name('admin.phong.store');
        Route::get('/sua/{id}', [PhongController::class, 'getSua'])->name('admin.phong.sua');
        Route::post('/sua/{id}', [PhongController::class, 'postSua'])->name('admin.phong.update');
        Route::get('/xoa/{id}', [PhongController::class, 'getXoa'])->name('admin.phong.xoa');
    });

    // Quản lý Đặt phòng
    Route::prefix('dat-phong')->group(function() {
        Route::get('/', [DatPhongController::class, 'getDanhSach'])->name('admin.dat-phong'); // Sơ đồ phòng
        // Tạo đơn đặt phòng (admin) - route thêm mới
        Route::get('/them', [DatPhongController::class, 'getThem'])->name('admin.dat-phong.them');
        Route::post('/them', [DatPhongController::class, 'postThem'])->name('admin.dat-phong.store');

        Route::get('/thung-rac', [DatPhongController::class, 'getThungRac'])->name('admin.dat-phong.trash');
        Route::get('/lich-su', [DatPhongController::class, 'getLichSu'])->name('admin.dat-phong.history');

        Route::get('/duyet/{id}', [DatPhongController::class, 'duyetDon'])->name('admin.dat-phong.duyet'); 
        Route::get('/huy/{id}', [DatPhongController::class, 'huyDon'])->name('admin.dat-phong.huy');

        Route::delete('/xoa-hang-loat', [DatPhongController::class, 'xoaHangLoat'])->name('admin.dat-phong.xoa-hang-loat');
        Route::get('/hoa-don/{id}', [DatPhongController::class, 'getHoaDon'])->name('admin.dat-phong.hoa-don'); 
        Route::post('/thanh-toan/{id}', [DatPhongController::class, 'postThanhToan'])->name('admin.dat-phong.thanh-toan');

        Route::get('/duyet/{id}', [DatPhongController::class, 'duyetDon'])->name('admin.dat-phong.duyet'); 
        Route::get('/huy/{id}', [DatPhongController::class, 'huyDon'])->name('admin.dat-phong.huy'); 
        // AJAX POST endpoints for approve/reject (preferred for modal actions)
        Route::post('/duyet/{id}', [DatPhongController::class, 'postDuyet'])->name('admin.dat-phong.duyet.post');
        Route::post('/huy/{id}', [DatPhongController::class, 'postHuy'])->name('admin.dat-phong.huy.post');
        // Bulk actions: move history items to trash, and permanently delete from trash
        Route::post('/bulk-trash', [DatPhongController::class, 'bulkMoveToTrash'])->name('admin.dat-phong.bulk-trash');
        Route::post('/bulk-delete', [DatPhongController::class, 'bulkDeletePermanent'])->name('admin.dat-phong.bulk-delete');
        Route::get('/history', [DatPhongController::class, 'getHistory'])->name('admin.dat-phong.history'); 
        Route::get('/trash', [DatPhongController::class, 'getTrash'])->name('admin.dat-phong.trash'); 
        Route::get('/sua/{id}', [DatPhongController::class, 'getSua'])->name('admin.dat-phong.sua');
        Route::post('/sua/{id}', [DatPhongController::class, 'postSua'])->name('admin.dat-phong.update');
        Route::get('/xoa/{id}', [DatPhongController::class, 'getXoa'])->name('admin.dat-phong.xoa');
        // Chi tiết phòng: hiển thị tất cả đơn liên quan tới phòng này
        Route::get('/phong/{id}', [DatPhongController::class, 'getRoomDetail'])->name('admin.dat-phong.room-detail');
        // Báo cáo doanh thu
        Route::get('/bao-cao/danh-thu', [DatPhongController::class, 'revenueReport'])->name('admin.reports.revenue');
    });

    // Quản lý Khuyến mãi
    Route::prefix('khuyen-mai')->group(function() {
        Route::get('/', [KhuyenMaiController::class, 'getDanhSach'])->name('admin.khuyen-mai');
        Route::get('/them', [KhuyenMaiController::class, 'getThem'])->name('admin.khuyen-mai.them');
        Route::post('/them', [KhuyenMaiController::class, 'postThem'])->name('admin.khuyen-mai.store');
        Route::get('/sua/{id}', [KhuyenMaiController::class, 'getSua'])->name('admin.khuyen-mai.sua');
        Route::post('/sua/{id}', [KhuyenMaiController::class, 'postSua'])->name('admin.khuyen-mai.update');
        Route::get('/xoa/{id}', [KhuyenMaiController::class, 'getXoa'])->name('admin.khuyen-mai.xoa');
        Route::post('/bulk-delete', [KhuyenMaiController::class, 'bulkDelete'])->name('admin.khuyen-mai.bulk-delete');
    });

    // Quản lý Hóa đơn
    Route::prefix('hoa-don')->group(function() {
        Route::get('/', [HoaDonController::class, 'getDanhSach'])->name('admin.hoa-don');
        Route::get('/sua/{id}', [HoaDonController::class, 'getSua'])->name('admin.hoa-don.sua');
        Route::post('/sua/{id}', [HoaDonController::class, 'postSua'])->name('admin.hoa-don.update');
        Route::get('/xoa/{id}', [HoaDonController::class, 'getXoa'])->name('admin.hoa-don.xoa');
    });
    
    // Quản lý Users
    Route::prefix('users')->group(function() {
        Route::get('/', [UserController::class, 'getDanhSach'])->name('admin.users');
        Route::get('/them', [UserController::class, 'getThem'])->name('admin.user.them');
        Route::post('/them', [UserController::class, 'postThem'])->name('admin.user.store');
        Route::get('/sua/{id}', [UserController::class, 'getSua'])->name('admin.user.sua');
        Route::post('/sua/{id}', [UserController::class, 'postSua'])->name('admin.user.update');
        Route::get('/xoa/{id}', [UserController::class, 'getXoa'])->name('admin.user.xoa');
        Route::post('/bulk-delete', [UserController::class, 'bulkDelete'])->name('admin.users.bulk-delete');
    });

    // Quản lý Tiện nghi
    Route::prefix('tien-nghi')->group(function() {
        Route::get('/', [TienNghiController::class, 'getDanhSach'])->name('admin.tien-nghi');
        Route::get('/them', [TienNghiController::class, 'getThem'])->name('admin.tien-nghi.them');
        Route::post('/them', [TienNghiController::class, 'postThem'])->name('admin.tien-nghi.store');
        Route::get('/sua/{id}', [TienNghiController::class, 'getSua'])->name('admin.tien-nghi.sua');
        Route::post('/sua/{id}', [TienNghiController::class, 'postSua'])->name('admin.tien-nghi.update');
        Route::get('/xoa/{id}', [TienNghiController::class, 'getXoa'])->name('admin.tien-nghi.xoa');
        Route::post('/bulk-delete', [TienNghiController::class, 'bulkDelete'])->name('admin.tien-nghi.bulk-delete');
    });
});
</file>

<file path="resources/views/layouts/app.blade.php">
<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}" class="scroll-smooth">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="{{ csrf_token() }}">

    <title>@yield('title', 'Luxury Stay') - Hệ thống đặt phòng đẳng cấp</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS (CDN) - Vẫn giữ để dùng cho các trang con nếu cần -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- GỌI ASSETS QUA VITE -->
    <!-- Đã bao gồm config màu, css tùy chỉnh và js logic -->
    @vite([
        'resources/js/tailwind-config.js',

        // Centralized client assets (single manifest files)
        //client
                //css
                'resources/css/login.css',
                'resources/css/register.css',
                'resources/css/password.css',
                'resources/css/client/home.css',
                'resources/css/client/rooms.css',
                'resources/css/client/profile.css',
                'resources/css/client/booking.css',
                'resources/css/client/about.css',
                'resources/css/client/contact.css',
                'resources/css/client/promo.css',
                'resources/css/client/notifications.css',
                

                //js
                'resources/js/login.js',
                'resources/js/register.js',
                'resources/js/password.js',
                'resources/js/client/home.js',
                'resources/js/client/rooms.js',
                'resources/js/client/profile.js',
                'resources/js/client/booking.js',
                'resources/js/client/about.js',
                'resources/js/client/contact.js',
                'resources/js/client/promo.js',
                'resources/js/client/notifications.js',
        
    ])

    <!-- Alpine.js -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body>

    @include('layouts.header')
    <!-- MAIN CONTENT -->
    <!-- Sử dụng class 'main-content' thay vì các class Tailwind trực tiếp -->
    <main class="main-content">
        
        <!-- Flash Messages (Thông báo) -->
        <!-- Code HTML giờ đây rất sạch sẽ nhờ sử dụng class từ client.css -->
        @if(session('success') || session('error'))
            <div class="flash-container" x-data="{ show: true }" x-show="show" x-init="setTimeout(() => show = false, 5000)">
                
                @if(session('success'))
                    <div class="flash-success">
                        <div class="flex items-center">
                            <i class="fa-solid fa-circle-check flash-icon-success"></i>
                            <p class="font-medium">{{ session('success') }}</p>
                        </div>
                        <button @click="show = false" class="btn-close-success"><i class="fa-solid fa-xmark"></i></button>
                    </div>
                @endif

                @if(session('error'))
                    <div class="flash-error">
                        <div class="flex items-center">
                            <i class="fa-solid fa-circle-exclamation flash-icon-error"></i>
                            <p class="font-medium">{{ session('error') }}</p>
                        </div>
                        <button @click="show = false" class="btn-close-error"><i class="fa-solid fa-xmark"></i></button>
                    </div>
                @endif

            </div>
        @endif

        @yield('content')
    </main>

    @include('layouts.footer')

    @stack('scripts')
</body>
</html>
</file>

</files>
